(self.webpackChunkmotel_service=self.webpackChunkmotel_service||[]).push([[850],{2850:(wi,Un,Et)=>{"use strict";Et.r(Un),Et.d(Un,{LandlordModule:()=>QE});var bt=Et(6895),fn=Et(750),xe=Et(8350),Le=Et(9300),gn=Et(7665),Ve=Et(842),t=Et(1571),_n=Et(6620);let $e=(()=>{class n{constructor(e,o,r){this.layoutService=e,this.renderer=o,this.router=r,this.overlayMenuOpenSubscription=this.layoutService.overlayOpen$.subscribe(()=>{this.menuOutsideClickListener||(this.menuOutsideClickListener=this.renderer.listen("document","click",s=>{!(this.appSidebar.el.nativeElement.isSameNode(s.target)||this.appSidebar.el.nativeElement.contains(s.target)||this.appTopbar.menuButton.nativeElement.isSameNode(s.target)||this.appTopbar.menuButton.nativeElement.contains(s.target))&&this.hideMenu()})),this.profileMenuOutsideClickListener||(this.profileMenuOutsideClickListener=this.renderer.listen("document","click",s=>{!(this.appTopbar.menu.nativeElement.isSameNode(s.target)||this.appTopbar.menu.nativeElement.contains(s.target)||this.appTopbar.topbarMenuButton.nativeElement.isSameNode(s.target)||this.appTopbar.topbarMenuButton.nativeElement.contains(s.target))&&this.hideProfileMenu()})),this.layoutService.state.staticMenuMobileActive&&this.blockBodyScroll()}),this.router.events.pipe((0,Le.h)(s=>s instanceof xe.m2)).subscribe(()=>{this.hideMenu(),this.hideProfileMenu()})}ngOnInit(){}hideMenu(){this.layoutService.state.overlayMenuActive=!1,this.layoutService.state.staticMenuMobileActive=!1,this.layoutService.state.menuHoverActive=!1,this.menuOutsideClickListener&&(this.menuOutsideClickListener(),this.menuOutsideClickListener=null),this.unblockBodyScroll()}hideProfileMenu(){this.layoutService.state.profileSidebarVisible=!1,this.profileMenuOutsideClickListener&&(this.profileMenuOutsideClickListener(),this.profileMenuOutsideClickListener=null)}blockBodyScroll(){document.body.classList?document.body.classList.add("blocked-scroll"):document.body.className+=" blocked-scroll"}unblockBodyScroll(){document.body.classList?document.body.classList.remove("blocked-scroll"):document.body.className=document.body.className.replace(new RegExp("(^|\\b)"+"blocked-scroll".split(" ").join("|")+"(\\b|$)","gi")," ")}get containerClass(){return{"layout-theme-light":"light"===this.layoutService.config.colorScheme,"layout-theme-dark":"dark"===this.layoutService.config.colorScheme,"layout-overlay":"overlay"===this.layoutService.config.menuMode,"layout-static":"static"===this.layoutService.config.menuMode,"layout-static-inactive":this.layoutService.state.staticMenuDesktopInactive&&"static"===this.layoutService.config.menuMode,"layout-overlay-active":this.layoutService.state.overlayMenuActive,"layout-mobile-active":this.layoutService.state.staticMenuMobileActive,"p-input-filled":"filled"===this.layoutService.config.inputStyle,"p-ripple-disabled":!this.layoutService.config.ripple}}ngOnDestroy(){this.overlayMenuOpenSubscription&&this.overlayMenuOpenSubscription.unsubscribe(),this.menuOutsideClickListener&&this.menuOutsideClickListener()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_n.P),t.Y36(t.Qsj),t.Y36(xe.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-landlord"]],viewQuery:function(e,o){if(1&e&&(t.Gf(gn.k,5),t.Gf(Ve.G,5)),2&e){let r;t.iGM(r=t.CRH())&&(o.appSidebar=r.first),t.iGM(r=t.CRH())&&(o.appTopbar=r.first)}},decls:8,vars:1,consts:[[1,"layout-wrapper",3,"ngClass"],[1,"layout-sidebar"],[1,"layout-main-container"],[1,"layout-main"],[1,"layout-mask"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-header"),t.TgZ(2,"div",1),t._UZ(3,"app-sidebar"),t.qZA(),t.TgZ(4,"div",2)(5,"div",3),t._UZ(6,"router-outlet"),t.qZA()(),t._UZ(7,"div",4),t.qZA()),2&e&&t.Q6J("ngClass",o.containerClass)},dependencies:[bt.mk,xe.lC,gn.k,Ve.G],styles:[".landlord-container[_ngcontent-%COMP%]{height:100vh;width:100vw}.container[_ngcontent-%COMP%]{display:flex;width:100%}.sidebar-container[_ngcontent-%COMP%]{width:250px;background-color:#deb887;height:100%}.content-container[_ngcontent-%COMP%]{width:100%}.header[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]{flex:1}"]}),n})();var E=Et(4006),ht=Et(805),Mt=Et(4128),K=Et(8746),Dt=Et(1071),wt=Et(5625),yt=Et(1005),vt=Et(2340),fe=Et(529);let Yt=(()=>{class n{constructor(e){this.http=e}getProducts(){return this.http.get("../../../../assets/mock-data/products.json").toPromise().then(e=>e.data).then(e=>e)}getDropdownAccomodation(e){return this.http.get(`${vt.N.apiUrl}/accomodation/utility/${e}`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}saveAccomodation(e){return this.http.post(`${vt.N.apiUrl}/accomodation`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}isCanRemove(e){return this.http.get(`${vt.N.apiUrl}/accomodation/check/remove/${e}`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}removeAccomodation(e){return this.http.delete(`${vt.N.apiUrl}/accomodation/${e}`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}getAccomodationByUserId(e){return this.http.get(`${vt.N.apiUrl}/accomodation/${e}`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}getAllRoomForLanding(){return this.http.get(`${vt.N.apiUrl}/accomodation`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}getAccomodationService(e){return this.http.get(`${vt.N.apiUrl}/accomodation/services/${e}`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}checkValidService(e){return this.http.post(`${vt.N.apiUrl}/accomodation/services/validation`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}saveService(e){return this.http.post(`${vt.N.apiUrl}/accomodation/services`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(fe.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Pt=Et(6151),or=Et(946),Xt=Et(5593),ne=Et(1740),te=Et(2453),pe=Et(1383),Ft=Et(99),ie=Et(1493),re=Et(666),ge=Et(5047),ee=Et(7932);function Va(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",18)(1,"button",19),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.openNew())}),t.qZA()()}}function Ja(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",20)(1,"h5",21),t._uU(2,"Qu\u1ea3n l\xfd khu tr\u1ecd"),t.qZA(),t.TgZ(3,"span",22),t._UZ(4,"i",23),t.TgZ(5,"input",24),t.NdJ("input",function(r){t.CHM(e);const s=t.oxw(),l=t.MAs(7);return t.KtG(s.onGlobalFilter(l,r))}),t.qZA()()()}}function Ha(n,i){1&n&&(t.TgZ(0,"tr")(1,"th",25),t._uU(2,"T\xean khu/To\xe0 nh\xe0 "),t._UZ(3,"p-sortIcon",26),t.qZA(),t.TgZ(4,"th",27),t._uU(5,"\u0110\u1ecba ch\u1ec9"),t._UZ(6,"p-sortIcon",28),t.qZA(),t._UZ(7,"th")(8,"th")(9,"th")(10,"th")(11,"th")(12,"th"),t.qZA())}function Wa(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",29),t._uU(2),t.qZA(),t.TgZ(3,"td",29),t._uU(4),t.qZA(),t._UZ(5,"td")(6,"td")(7,"td")(8,"td")(9,"td"),t.TgZ(10,"td")(11,"div",30)(12,"button",31),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.editAccomodation(s))}),t.qZA(),t.TgZ(13,"button",32),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.deleteAccomodation(s))}),t.qZA()()()()}if(2&n){const e=i.$implicit;t.xp6(2),t.hij(" ",e.name," "),t.xp6(2),t.hij(" ",e.addressLine+", "+e.ward+", "+e.district+", "+e.province," "),t.xp6(8),t.Q6J("loading",e.loading),t.xp6(1),t.Q6J("loading",e.removeLoading)}}function Ga(n,i){1&n&&(t.TgZ(0,"small",53),t._uU(1,"Vui l\xf2ng nh\u1eadp t\xean khu tr\u1ecd."),t.qZA())}function Ka(n,i){1&n&&(t.TgZ(0,"small",53),t._uU(1,"Vui l\xf2ng ch\u1ecdn \u0111\u1ecba ch\u1ec9."),t.qZA())}function Ya(n,i){1&n&&(t.TgZ(0,"small",53),t._uU(1,"Vui l\xf2ng ch\u1ecdn \u0111\u1ecba ch\u1ec9."),t.qZA())}function Qa(n,i){1&n&&(t.TgZ(0,"small",53),t._uU(1,"Vui l\xf2ng nh\u1eadp ch\u1ecdn \u0111\u1ecba ch\u1ec9."),t.qZA())}function ja(n,i){1&n&&(t.TgZ(0,"small",53),t._uU(1,"Vui l\xf2ng nh\u1eadp ch\u1ecdn \u0111\u1ecba ch\u1ec9."),t.qZA())}function za(n,i){1&n&&(t.TgZ(0,"small",53),t._uU(1,"Vui l\xf2ng nh\u1eadp gi\xe1 n\u01b0\u1edbc."),t.qZA())}function $a(n,i){1&n&&(t.TgZ(0,"small",53),t._uU(1,"Vui l\xf2ng nh\u1eadp gi\xe1 \u0111i\u1ec7n."),t.qZA())}const Je=function(n){return{"ng-invalid ng-dirty":n}};function Xa(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"form",33)(1,"div",34)(2,"label",35),t._uU(3,"T\xean khu/To\xe0 nh\xe0 "),t.TgZ(4,"span",36),t._uU(5,"*"),t.qZA()(),t.TgZ(6,"div",37),t._UZ(7,"input",38),t.qZA(),t.YNc(8,Ga,2,0,"small",39),t.qZA(),t.TgZ(9,"div",34)(10,"label",40),t._uU(11,"T\u1ec9nh/Th\xe0nh ph\u1ed1 "),t.TgZ(12,"span",36),t._uU(13,"*"),t.qZA()(),t.TgZ(14,"div",37)(15,"p-dropdown",41),t.NdJ("onChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.getDistrictByProvince())}),t.qZA()(),t.YNc(16,Ka,2,0,"small",39),t.qZA(),t.TgZ(17,"div",34)(18,"label",42),t._uU(19,"Qu\u1eadn/Huy\u1ec7n "),t.TgZ(20,"span",36),t._uU(21,"*"),t.qZA()(),t.TgZ(22,"div",37)(23,"p-dropdown",43),t.NdJ("onChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.getWardByDistrict())}),t.qZA()(),t.YNc(24,Ya,2,0,"small",39),t.qZA(),t.TgZ(25,"div",34)(26,"label",44),t._uU(27,"Ph\u01b0\u1eddng/X\xe3 "),t.TgZ(28,"span",36),t._uU(29,"*"),t.qZA()(),t.TgZ(30,"div",37),t._UZ(31,"p-dropdown",45),t.qZA(),t.YNc(32,Qa,2,0,"small",39),t.qZA(),t.TgZ(33,"div",34)(34,"label",46),t._uU(35,"S\u1ed1 nh\xe0, t\xean \u0111\u01b0\u1eddng "),t.TgZ(36,"span",36),t._uU(37,"*"),t.qZA()(),t.TgZ(38,"div",37),t._UZ(39,"input",47),t.qZA(),t.YNc(40,ja,2,0,"small",39),t.qZA(),t.TgZ(41,"div",48)(42,"div",49)(43,"label",46),t._uU(44,"Gi\xe1 n\u01b0\u1edbc (Kh\u1ed1i) "),t.TgZ(45,"span",36),t._uU(46,"*"),t.qZA()(),t.TgZ(47,"div",37),t._UZ(48,"p-inputNumber",50),t.qZA(),t.YNc(49,za,2,0,"small",39),t.qZA(),t.TgZ(50,"div",51)(51,"label",46),t._uU(52,"Gi\xe1 \u0111i\u1ec7n (kWh) "),t.TgZ(53,"span",36),t._uU(54,"*"),t.qZA()(),t.TgZ(55,"div",37),t._UZ(56,"p-inputNumber",52),t.qZA(),t.YNc(57,$a,2,0,"small",39),t.qZA()()()}if(2&n){const e=t.oxw();let o,r,s,l,a,p,_;t.Q6J("formGroup",e.accomodationForm),t.xp6(7),t.Q6J("ngClass",t.VKq(18,Je,e.accomodationForm.controls.name.invalid&&(e.accomodationForm.controls.name.dirty||e.accomodationForm.controls.name.touched))),t.xp6(1),t.Q6J("ngIf",(null==(o=e.accomodationForm.get("name"))?null:o.invalid)&&(e.accomodationForm.controls.name.dirty||e.accomodationForm.controls.name.touched)),t.xp6(7),t.Q6J("options",e.provices)("ngClass",t.VKq(20,Je,e.accomodationForm.controls.province.invalid&&(e.accomodationForm.controls.province.dirty||e.accomodationForm.controls.province.touched))),t.xp6(1),t.Q6J("ngIf",(null==(r=e.accomodationForm.get("province"))?null:r.invalid)&&(e.accomodationForm.controls.province.dirty||e.accomodationForm.controls.province.touched)),t.xp6(7),t.Q6J("options",e.districts)("ngClass",t.VKq(22,Je,e.accomodationForm.controls.district.invalid&&(e.accomodationForm.controls.district.dirty||e.accomodationForm.controls.district.touched))),t.xp6(1),t.Q6J("ngIf",(null==(s=e.accomodationForm.get("district"))?null:s.invalid)&&(e.accomodationForm.controls.district.dirty||e.accomodationForm.controls.district.touched)),t.xp6(7),t.Q6J("options",e.wards)("ngClass",t.VKq(24,Je,e.accomodationForm.controls.ward.invalid&&(e.accomodationForm.controls.ward.dirty||e.accomodationForm.controls.ward.touched))),t.xp6(1),t.Q6J("ngIf",(null==(l=e.accomodationForm.get("ward"))?null:l.invalid)&&(e.accomodationForm.controls.ward.dirty||e.accomodationForm.controls.ward.touched)),t.xp6(7),t.Q6J("ngClass",t.VKq(26,Je,e.accomodationForm.controls.addressLine.invalid&&(e.accomodationForm.controls.addressLine.dirty||e.accomodationForm.controls.addressLine.touched))),t.xp6(1),t.Q6J("ngIf",(null==(a=e.accomodationForm.get("addressLine"))?null:a.invalid)&&(e.accomodationForm.controls.addressLine.dirty||e.accomodationForm.controls.addressLine.touched)),t.xp6(8),t.Q6J("ngClass",t.VKq(28,Je,e.accomodationForm.controls.waterPrice.invalid&&(e.accomodationForm.controls.waterPrice.dirty||e.accomodationForm.controls.waterPrice.touched))),t.xp6(1),t.Q6J("ngIf",(null==(p=e.accomodationForm.get("waterPrice"))?null:p.invalid)&&(e.accomodationForm.controls.waterPrice.dirty||e.accomodationForm.controls.waterPrice.touched)),t.xp6(7),t.Q6J("ngClass",t.VKq(30,Je,e.accomodationForm.controls.electricPrice.invalid&&(e.accomodationForm.controls.electricPrice.dirty||e.accomodationForm.controls.electricPrice.touched))),t.xp6(1),t.Q6J("ngIf",(null==(_=e.accomodationForm.get("electricPrice"))?null:_.invalid)&&(e.accomodationForm.controls.electricPrice.dirty||e.accomodationForm.controls.electricPrice.touched))}}function tl(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",54),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.hideDialog())}),t.qZA(),t.TgZ(1,"button",55),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.saveAccomodation())}),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.accomodationForm.invalid)}}function el(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1,"C\xe1c ph\xf2ng c\xf9ng d\u1ecbch v\u1ee5 k\xe8m theo to\xe0 nh\xe0 s\u1ebd b\u1ecb xo\xe1 "),t._UZ(2,"br"),t._uU(3," B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n xo\xe1 "),t.TgZ(4,"b"),t._uU(5),t.qZA(),t._uU(6,"? "),t.qZA()),2&n){const e=t.oxw();t.xp6(5),t.Oqu(e.accomodation.name)}}function nl(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",56),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.deleteDialog=!1)}),t.qZA(),t.TgZ(1,"button",57),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.confirmDelete())}),t.qZA()}}function il(n,i){1&n&&(t.TgZ(0,"div",58),t._UZ(1,"p-progressSpinner"),t.qZA())}const ol=function(){return["name","addressLine","ward","district","province"]},rl=function(){return[10,20,30]},sl=function(){return{width:"550px",height:"600px"}},al=function(){return{width:"450px"}};let ll=(()=>{class n{constructor(e,o,r,s){this.accomodationService=e,this.messageService=o,this.auth=r,this.addressService=s,this.addDialog=!1,this.otherFeesDialog=!1,this.deleteDialog=!1,this.accomodations=[],this.accomodation={},this.submitted=!1,this.rowsPerPageOptions=[5,10,20],this.dataLoading=!1,this.loading=!1,this.provices=[],this.districts=[],this.wards=[],this.existingWard={},this.accomodationForm=new E.cw({name:new E.NI(this.accomodation.name,[E.kI.required]),province:new E.NI(this.accomodation.province,[E.kI.required]),district:new E.NI(this.accomodation.district,[E.kI.required]),ward:new E.NI(this.accomodation.ward,[E.kI.required]),addressLine:new E.NI(this.accomodation.addressLine,[E.kI.required]),waterPrice:new E.NI(this.waterPrice,[E.kI.required]),electricPrice:new E.NI(this.electricPrice,[E.kI.required])})}ngOnInit(){this.user=this.auth.userValue,(0,Mt.D)({provinces:this.getProvinces(),accomodations:this.getAccomodationsByUser()}).subscribe(e=>{this.provices=e.provinces,this.accomodations=e.accomodations.data}),this.accomodationForm.get("name")?.valueChanges.subscribe(e=>{this.accomodation.name=e}),this.accomodationForm.get("waterPrice")?.valueChanges.subscribe(e=>{this.waterPrice=e}),this.accomodationForm.get("electricPrice")?.valueChanges.subscribe(e=>{this.electricPrice=e}),this.accomodationForm.get("province")?.valueChanges.subscribe(e=>{e&&(this.accomodation.province=e.name,this.accomodation.provinceCode=e.code,this.selectedProvince=e.code)}),this.accomodationForm.get("district")?.valueChanges.subscribe(e=>{e&&(this.accomodation.district=e.name,this.accomodation.districtCode=e.code,this.selectedDistrict=e.code)}),this.accomodationForm.get("ward")?.valueChanges.subscribe(e=>{e&&(this.accomodation.ward=e.name,this.accomodation.wardCode=e.code)}),this.accomodationForm.get("addressLine")?.valueChanges.subscribe(e=>{e&&(this.accomodation.addressLine=e)})}getAccomodationsByUser(){return this.dataLoading=!0,this.accomodationService.getAccomodationByUserId(this.user?.id).pipe((0,K.x)(()=>{this.dataLoading=!1}))}getWardByDistrict(){this.wards=[],this.addressService.getWardByDistrict(this.selectedDistrict).subscribe(e=>this.wards=e.wards)}getDistrictByProvince(){this.districts=[],this.wards=[],this.addressService.getDistrictByProvince(this.selectedProvince).subscribe(e=>this.districts=e.districts)}getProvinces(){return this.addressService.getAllProvinces().pipe((0,K.x)(()=>this.selectedProvince=this.provices[0]))}hideOtherFeeDialog(){this.otherFeesDialog=!1,this.submitted=!1}onHideDialog(){this.accomodationForm.reset()}openNew(){this.accomodation={},this.accomodationForm.get("name")?.setValue(null),this.accomodationForm.get("province")?.setValue(null),this.accomodationForm.get("district")?.setValue(null),this.accomodationForm.get("ward")?.setValue(null),this.accomodationForm.get("addressLine")?.setValue(null),this.accomodationForm.get("waterPrice")?.setValue(null),this.accomodationForm.get("electricPrice")?.setValue(null),this.addDialog=!0}getFullAddress(){return(0,Mt.D)({districts:this.addressService.getDistrictByProvince(this.accomodation.provinceCode),wards:this.addressService.getWardByDistrict(this.accomodation.districtCode)})}editAccomodation(e){this.accomodation={...e},e.loading=!0,this.existingProvince=this.findAddressByName(this.accomodation.provinceCode,this.provices),this.accomodationForm.get("name")?.setValue(this.accomodation.name),this.accomodationForm.get("province")?.setValue(this.existingProvince),this.accomodationForm.get("addressLine")?.setValue(this.accomodation.addressLine);let o=null,r=null;this.accomodation.services?.forEach(s=>{s.name===Dt.$.ELECTRIC_PRICE_NAME?o=s.price:s.name===Dt.$.WATER_PRICE_NAME&&(r=s.price)}),this.accomodationForm.get("electricPrice")?.setValue(o),this.accomodationForm.get("waterPrice")?.setValue(r),this.getFullAddress().pipe((0,K.x)(()=>{this.existingDistrict=this.findAddressByName(this.accomodation.districtCode,this.districts),this.existingWard=this.findAddressByName(this.accomodation.wardCode,this.wards),this.accomodationForm.get("district")?.setValue(this.existingDistrict),this.accomodationForm.get("ward")?.setValue(this.existingWard),this.addDialog=!0,e.loading=!1})).subscribe(s=>{this.districts=s.districts.districts,this.wards=s.wards.wards})}findAddressByName(e,o){return o.find(r=>r.code===e)}deleteAccomodation(e){let o;this.accomodation={...e},e.removeLoading=!0,this.isCanDelete().pipe((0,K.x)(()=>{e.removeLoading=!1,o?this.deleteDialog=!0:(this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"Khu tr\u1ecd \u0111ang \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng kh\xf4ng th\u1ec3 xo\xe1, vui l\xf2ng li\xean h\u1ec7 admin \u0111\u1ec3 \u0111\u01b0\u1ee3c tr\u1ee3 gi\xfap!",life:5e3}),this.accomodation={})})).subscribe(r=>o=r.data)}isCanDelete(){return this.accomodationService.isCanRemove(this.accomodation.id)}confirmDelete(){this.accomodationService.removeAccomodation(this.accomodation.id).pipe((0,K.x)(()=>{this.deleteDialog=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"Xo\xe1 th\xe0nh c\xf4ng",life:3e3}),this.accomodation={}})).subscribe()}saveAccomodation(){if(this.accomodationForm.invalid)this.accomodationForm.markAllAsTouched();else{let o,e=Object.assign({},this.accomodation);if(console.log("this.accomodation",this.accomodation),e.id)o="Ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng",e.services?.forEach(r=>{r.name===Dt.$.ELECTRIC_PRICE_NAME?r.price=this.electricPrice:r.name===Dt.$.WATER_PRICE_NAME&&(r.price=this.waterPrice)});else{o="Th\xeam th\xe0nh c\xf4ng";let r={},s=[];r.name=Dt.$.ELECTRIC_PRICE_NAME,r.price=this.electricPrice,r.unit="S\u1ed1 (kWh)",r.isDefault=!0,s.push(r),r={},r.name=Dt.$.WATER_PRICE_NAME,r.price=this.waterPrice,r.unit="Kh\u1ed1i (m3)",r.isDefault=!0,s.push(r),e.services=s}e.userId=this.user?.id,this.dataLoading=!0,this.accomodationService.saveAccomodation(e).pipe((0,K.x)(()=>{this.submitted=!1,this.messageService.add({severity:"success",summary:"Successful",detail:o,life:3e3}),this.dataLoading=!1})).subscribe(r=>this.accomodations=r.data),this.addDialog=!1}}hideDialog(){this.addDialog=!1}onGlobalFilter(e,o){e.filterGlobal(o.target.value,"contains")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Yt),t.Y36(ht.ez),t.Y36(Pt.$),t.Y36(or.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-accomodations"]],features:[t._Bn([ht.ez])],decls:20,vars:21,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],["responsiveLayout","scroll","selectionMode","multiple","dataKey","id",3,"value","rows","globalFilterFields","paginator","rowsPerPageOptions","rowHover"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Chi ti\u1ebft khu tr\u1ecd",1,"p-fluid",3,"visible","resizable","modal","onHide","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","X\xe1c nh\u1eadn",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[4,"ngIf"],["class","progress-spinner",4,"ngIf"],[1,"my-2"],["pButton","","pRipple","","label","Th\xeam nh\xe0 tr\u1ecd","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","T\xecm ki\u1ebfm...",1,"w-full","sm:w-auto",3,"input"],["pSortableColumn","name"],["field","name"],["pSortableColumn","addressLine"],["field","addressLine"],[2,"width","50%","min-width","10rem"],[1,"flex"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","mr-2",3,"loading","click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-warning",3,"loading","click"],[3,"formGroup"],[1,"field"],["for","name"],[1,"mandatory-sign"],[1,"input-box"],["type","text","pInputText","","formControlName","name","autofocus","",3,"ngClass"],["class","ng-dirty ng-invalid",4,"ngIf"],["for","province"],["appendTo","body","placeholder","T\u1ec9nh/Th\xe0nh ph\u1ed1","formControlName","province","optionLabel","name",3,"options","ngClass","onChange"],["for","district"],["appendTo","body","placeholder","Qu\u1eadn/Huy\u1ec7n","formControlName","district","optionLabel","name",3,"options","ngClass","onChange"],["for","ward"],["appendTo","body","formControlName","ward","placeholder","Ph\u01b0\u1eddng/X\xe3","optionLabel","name",3,"options","ngClass"],["for","address_line"],["pInputText","","formControlName","addressLine",3,"ngClass"],[1,"formgrid","grid"],[1,"field","col","mr-3"],["id","waterPrice","formControlName","waterPrice",3,"ngClass"],[1,"field","col"],["id","electricPrice","formControlName","electricPrice",3,"ngClass"],[1,"ng-dirty","ng-invalid"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"disabled","click"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",1,"p-button-text",3,"click"],[1,"progress-spinner"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"p-toast"),t.TgZ(4,"p-toolbar",3),t.YNc(5,Va,2,0,"ng-template",4),t.qZA(),t.TgZ(6,"p-table",5,6),t.YNc(8,Ja,6,0,"ng-template",7),t.YNc(9,Ha,13,0,"ng-template",8),t.YNc(10,Wa,14,4,"ng-template",9),t.qZA()(),t.TgZ(11,"p-dialog",10),t.NdJ("onHide",function(){return o.onHideDialog()})("visibleChange",function(s){return o.addDialog=s}),t.YNc(12,Xa,58,32,"ng-template",11),t.YNc(13,tl,2,1,"ng-template",12),t.qZA(),t.TgZ(14,"p-dialog",13),t.NdJ("visibleChange",function(s){return o.deleteDialog=s}),t.TgZ(15,"div",14),t._UZ(16,"i",15),t.YNc(17,el,7,1,"span",16),t.qZA(),t.YNc(18,nl,2,0,"ng-template",12),t.qZA()()(),t.YNc(19,il,2,0,"div",17)),2&e&&(t.xp6(6),t.Q6J("value",o.accomodations)("rows",10)("globalFilterFields",t.DdM(17,ol))("paginator",!0)("rowsPerPageOptions",t.DdM(18,rl))("rowHover",!0),t.xp6(5),t.Akn(t.DdM(19,sl)),t.Q6J("visible",o.addDialog)("resizable",!0)("modal",!0),t.xp6(3),t.Akn(t.DdM(20,al)),t.Q6J("visible",o.deleteDialog)("modal",!0),t.xp6(3),t.Q6J("ngIf",o.accomodation),t.xp6(2),t.Q6J("ngIf",o.dataLoading))},dependencies:[bt.mk,bt.O5,ht.jx,Xt.Hq,ne.o,E._Y,E.Fj,E.JJ,E.JL,te.FN,pe.o,Ft.iA,Ft.lQ,Ft.fz,ie.V,re.Lt,ge.Rn,ee.G,E.sg,E.u]}),n})();var Xe=Et(8372),cl=Et(4671),ul=Et(4482),pl=Et(5403);function tn(n,i=cl.y){return n=n??dl,(0,ul.e)((e,o)=>{let r,s=!0;e.subscribe((0,pl.x)(o,l=>{const a=i(l);(s||!n(r,a))&&(s=!1,r=a,o.next(l))}))})}function dl(n,i){return n===i}let Te=(()=>{class n{constructor(e){this.http=e}getRoomByAccomodation(e){return this.http.get(`${vt.N.apiUrl}/room/accomodations/${e}`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}saveRoom(e){return this.http.post(`${vt.N.apiUrl}/room`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}checkRoomDuplicated(e){return this.http.post(`${vt.N.apiUrl}/room/utility/duplicated`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}getRoomDropDown(e){return this.http.get(`${vt.N.apiUrl}/room/utility/${e}`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}getRoomNoElectricWater(e){return this.http.post(`${vt.N.apiUrl}/room/utility/no-electric-water`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}getRoomNotHasService(e){return this.http.get(`${vt.N.apiUrl}/room/utility/no-service/${e}`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}getRoomNotDeposit(e){return this.http.get(`${vt.N.apiUrl}/room/utility/no-deposit/${e}`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}getRoomNotRented(e){return this.http.get(`${vt.N.apiUrl}/room/utility/no-rent/${e}`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}getRoomRentedDate(e){return this.http.get(`${vt.N.apiUrl}/room/utility/rented-date/${e}`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}getRoomNoPost(e){return this.http.get(`${vt.N.apiUrl}/room/utility/no-post/${e}`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}getRoomNoPostAndDeposit(e){return this.http.get(`${vt.N.apiUrl}/room/utility/no-post/no-deposit/${e}`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}getRoomRented(e){return this.http.get(`${vt.N.apiUrl}/room/utility/rented/${e}`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}checkRoomNotDeposit(e){return this.http.get(`${vt.N.apiUrl}/room?roomId=${e}`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}removeRoom(e){return this.http.delete(`${vt.N.apiUrl}/room/${e}`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}saveRoomFee(e){return this.http.post(`${vt.N.apiUrl}/room/fee`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(fe.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ml(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",19)(1,"button",20),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.openNew())}),t.qZA()()}}const hl=function(){return{width:"100%"}};function fl(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",21)(1,"p-dropdown",22),t.NdJ("onChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onSelectAccomodation())})("ngModelChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.selectedAccomodation=r)}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Akn(t.DdM(4,hl)),t.Q6J("options",e.accomodations)("ngModel",e.selectedAccomodation)}}function gl(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",23)(1,"h5",24),t._uU(2,"Qu\u1ea3n l\xfd ph\xf2ng tr\u1ecd"),t.qZA(),t.TgZ(3,"span",25),t._UZ(4,"i",26),t.TgZ(5,"input",27),t.NdJ("input",function(r){t.CHM(e);const s=t.oxw(),l=t.MAs(8);return t.KtG(s.onGlobalFilter(l,r))}),t.qZA()()()}}function _l(n,i){1&n&&(t.TgZ(0,"tr")(1,"th",28),t._uU(2,"T\xean ph\xf2ng/S\u1ed1 ph\xf2ng"),t._UZ(3,"p-sortIcon",29),t.qZA(),t.TgZ(4,"th",30),t._uU(5,"S\u1ed1 ng\u01b0\u1eddi \u0111ang \u1edf"),t._UZ(6,"p-sortIcon",31),t.qZA(),t.TgZ(7,"th",32),t._uU(8,"S\u1ed1 ng\u01b0\u1eddi \u1edf t\u1ed1i \u0111a"),t._UZ(9,"p-sortIcon",33),t.qZA(),t.TgZ(10,"th",34),t._uU(11,"Gi\xe1 ph\xf2ng"),t._UZ(12,"p-sortIcon",35),t.qZA(),t.TgZ(13,"th",36),t._uU(14,"Di\u1ec7n t\xedch"),t._UZ(15,"p-sortIcon",37),t.qZA(),t.TgZ(16,"th",38),t._uU(17,"Tr\u1ea1ng th\xe1i"),t._UZ(18,"p-sortIcon",39),t.qZA(),t._UZ(19,"th"),t.qZA())}function vl(n,i){1&n&&(t.TgZ(0,"td",47),t._uU(1,"\u0110\xe3 cho thu\xea"),t.qZA())}function yl(n,i){1&n&&(t.TgZ(0,"td",47),t._uU(1,"Ch\u01b0a cho thu\xea"),t.qZA())}function wl(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",40),t._uU(2),t.qZA(),t.TgZ(3,"td",40),t._uU(4),t.qZA(),t.TgZ(5,"td",40),t._uU(6),t.qZA(),t.TgZ(7,"td",40),t._uU(8),t.ALo(9,"currency"),t.qZA(),t.TgZ(10,"td",41),t._uU(11),t.qZA(),t.YNc(12,vl,2,0,"td",42),t.YNc(13,yl,2,0,"ng-template",null,43,t.W1O),t.TgZ(15,"td")(16,"div",44)(17,"button",45),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.editRoom(s))}),t.qZA(),t.TgZ(18,"button",46),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.deleteRoom(s))}),t.qZA()()()()}if(2&n){const e=i.$implicit,o=t.MAs(14);t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.currentTenantNum),t.xp6(2),t.Oqu(e.capacity),t.xp6(2),t.Oqu(t.Dn7(9,8,e.price,"VND","symbol")),t.xp6(3),t.hij("",e.acreage," m\xb2"),t.xp6(1),t.Q6J("ngIf",e.isRent)("ngIfElse",o),t.xp6(6),t.Q6J("disabled",e.isRent)}}function El(n,i){1&n&&t._UZ(0,"i",63)}function bl(n,i){1&n&&(t.TgZ(0,"small",64),t._uU(1,"Vui l\xf2ng nh\u1eadp t\xean ph\xf2ng."),t.qZA())}function xl(n,i){1&n&&(t.TgZ(0,"small",64),t._uU(1,"T\xean ph\xf2ng \u0111\xe3 t\u1ed3n t\u1ea1i."),t.qZA())}function Tl(n,i){1&n&&(t.TgZ(0,"small",64),t._uU(1,"Vui l\xf2ng nh\u1eadp gi\xe1."),t.qZA())}function Cl(n,i){1&n&&(t.TgZ(0,"small",64),t._uU(1,"Vui l\xf2ng nh\u1eadp di\u1ec7n t\xedch."),t.qZA())}function Al(n,i){1&n&&(t.TgZ(0,"small",64),t._uU(1,"Vui l\xf2ng nh\u1eadp s\u1ed1 ng\u01b0\u1eddi \u1edf t\u1ed1i \u0111a."),t.qZA())}const Mn=function(n){return{"ng-invalid ng-dirty":n}};function Nl(n,i){if(1&n&&(t.TgZ(0,"form",48)(1,"div",49)(2,"label",50),t._uU(3,"T\xean ph\xf2ng/S\u1ed1 ph\xf2ng "),t.TgZ(4,"span",51),t._uU(5,"*"),t.qZA()(),t.TgZ(6,"span",52),t.YNc(7,El,1,0,"i",53),t.TgZ(8,"div",54),t._UZ(9,"input",55),t.qZA()(),t.YNc(10,bl,2,0,"small",56),t.YNc(11,xl,2,0,"small",56),t.qZA(),t.TgZ(12,"div",49)(13,"label",57),t._uU(14,"Gi\xe1 ph\xf2ng (\u0111\u1ed3ng) "),t.TgZ(15,"span",51),t._uU(16,"*"),t.qZA()(),t.TgZ(17,"div",54),t._UZ(18,"p-inputNumber",58),t.qZA(),t.YNc(19,Tl,2,0,"small",56),t.qZA(),t.TgZ(20,"div",59)(21,"div",60)(22,"label",57),t._uU(23,"Di\u1ec7n t\xedch "),t.TgZ(24,"span",51),t._uU(25,"*"),t.qZA()(),t.TgZ(26,"div",54),t._UZ(27,"p-inputNumber",61),t.qZA(),t.YNc(28,Cl,2,0,"small",56),t.qZA(),t.TgZ(29,"div",60)(30,"label",57),t._uU(31,"S\u1ed1 ng\u01b0\u1eddi \u1edf t\u1ed1i \u0111a "),t.TgZ(32,"span",51),t._uU(33,"*"),t.qZA()(),t.TgZ(34,"div",54),t._UZ(35,"p-inputNumber",62),t.qZA(),t.YNc(36,Al,2,0,"small",56),t.qZA()()()),2&n){const e=t.oxw();let o,r,s,l,a;t.Q6J("formGroup",e.roomForm),t.xp6(7),t.Q6J("ngIf",e.isValidating),t.xp6(2),t.Q6J("ngClass",t.VKq(11,Mn,e.roomForm.controls.roomName.invalid&&(e.roomForm.controls.roomName.dirty||e.roomForm.controls.roomName.touched))),t.xp6(1),t.Q6J("ngIf",(null==(o=e.roomForm.get("roomName"))?null:o.hasError("required"))&&(e.roomForm.controls.roomName.dirty||e.roomForm.controls.roomName.touched)),t.xp6(1),t.Q6J("ngIf",(null==(r=e.roomForm.get("roomName"))?null:r.hasError("duplicated"))&&(e.roomForm.controls.roomName.dirty||e.roomForm.controls.roomName.touched)),t.xp6(7),t.Q6J("ngClass",t.VKq(13,Mn,e.roomForm.controls.price.invalid&&(e.roomForm.controls.price.dirty||e.roomForm.controls.price.touched))),t.xp6(1),t.Q6J("ngIf",(null==(s=e.roomForm.get("price"))?null:s.invalid)&&(e.roomForm.controls.price.dirty||e.roomForm.controls.price.touched)),t.xp6(8),t.Q6J("ngClass",t.VKq(15,Mn,e.roomForm.controls.acreage.invalid&&(e.roomForm.controls.acreage.dirty||e.roomForm.controls.acreage.touched))),t.xp6(1),t.Q6J("ngIf",(null==(l=e.roomForm.get("acreage"))?null:l.invalid)&&(e.roomForm.controls.acreage.dirty||e.roomForm.controls.acreage.touched)),t.xp6(7),t.Q6J("ngClass",t.VKq(17,Mn,e.roomForm.controls.maxCapacity.invalid&&(e.roomForm.controls.maxCapacity.dirty||e.roomForm.controls.maxCapacity.touched))),t.xp6(1),t.Q6J("ngIf",(null==(a=e.roomForm.get("maxCapacity"))?null:a.invalid)&&(e.roomForm.controls.maxCapacity.dirty||e.roomForm.controls.maxCapacity.touched))}}function Dl(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",65),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.hideDialog())}),t.qZA(),t.TgZ(1,"button",66),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.saveRoom())}),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.roomForm.invalid)}}function Fl(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1,"X\xe1c nh\u1eadn xo\xe1 ph\xf2ng "),t.TgZ(2,"b"),t._uU(3),t.qZA(),t._uU(4,"?"),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.room.name)}}function Zl(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",67),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.deleteProductDialog=!1)}),t.qZA(),t.TgZ(1,"button",68),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.confirmDelete())}),t.qZA()}}function Il(n,i){1&n&&(t.TgZ(0,"div",69),t._UZ(1,"p-progressSpinner"),t.qZA())}const Sl=function(){return["name","capacity","price","acreage","isRent"]},kl=function(){return[10,20,30]},Rl=function(){return{width:"550px"}},ql=function(){return{width:"450px"}};let Ul=(()=>{class n{constructor(e,o,r,s){this.accomodationService=e,this.auth=o,this.roomService=r,this.messageService=s,this.addDialog=!1,this.otherFeesDialog=!1,this.deleteProductDialog=!1,this.deleteProductsDialog=!1,this.accomodations=[],this.rooms=[],this.room={},this.selectedProducts=[],this.submitted=!1,this.cols=[],this.statuses=[],this.rowsPerPageOptions=[5,10,20],this.selectedService=[],this.dataLoading=!1,this.loading=!1,this.uploadedFiles=[],this.isValidating=!1,this.isAdd=!1,this.oldRoomName="",this.roomForm=new E.cw({roomName:new E.NI(this.room.name,[E.kI.required]),price:new E.NI(this.room.price,[E.kI.required]),acreage:new E.NI(this.room.acreage,[E.kI.required]),maxCapacity:new E.NI(this.room.capacity,[E.kI.required])})}ngOnInit(){this.user=this.auth.userValue,this.getDropdownAccomodation().subscribe(e=>this.accomodations=e.data),this.roomForm.get("roomName")?.valueChanges.pipe((0,Xe.b)(500),tn()).subscribe(e=>{e&&(this.room.name=e,this.oldRoomName!==this.room.name&&this.checkRoomDuplicated())}),this.roomForm.get("price")?.valueChanges.subscribe(e=>{this.room.price=e}),this.roomForm.get("acreage")?.valueChanges.subscribe(e=>{this.room.acreage=e}),this.roomForm.get("maxCapacity")?.valueChanges.subscribe(e=>{this.room.capacity=e})}openNew(){this.room={},this.oldRoomName="",this.roomForm.get("roomName")?.setValue(null),this.roomForm.get("price")?.setValue(null),this.roomForm.get("acreage")?.setValue(null),this.roomForm.get("maxCapacity")?.setValue(null),this.addDialog=!0}getDropdownAccomodation(){return this.loading=!0,this.accomodationService.getDropdownAccomodation(this.user?.id).pipe((0,K.x)(()=>{this.selectedAccomodation=this.accomodations[0],this.loading=!1,this.getRoomByAccomodation()}))}getRoomByAccomodation(){this.loading=!0,this.roomService.getRoomByAccomodation(this.selectedAccomodation.id).pipe((0,K.x)(()=>{this.loading=!1})).subscribe(e=>this.rooms=e.data)}onSelectAccomodation(){this.getRoomByAccomodation()}editRoom(e){this.room={...e},this.oldRoomName=e.name,this.roomForm.get("roomName")?.setValue(this.room.name),this.roomForm.get("price")?.setValue(this.room.price),this.roomForm.get("acreage")?.setValue(this.room.acreage),this.roomForm.get("maxCapacity")?.setValue(this.room.capacity),this.addDialog=!0}deleteRoom(e){this.deleteProductDialog=!0,this.room={...e}}onHideDialog(){this.roomForm.reset()}confirmDelete(){this.loading=!0,this.deleteProductDialog=!1,this.roomService.removeRoom(this.room.id).pipe((0,K.x)(()=>{this.getRoomByAccomodation(),this.messageService.add({severity:"success",summary:"Successful",detail:"Xo\xe1 th\xe0nh c\xf4ng!",life:3e3})})).subscribe(e=>console.log(e))}hideDialog(){this.addDialog=!1,this.submitted=!1}checkRoomDuplicated(){let e=!1;this.isValidating=!0,this.roomService.checkRoomDuplicated(this.room.name).pipe((0,K.x)(()=>{this.isValidating=!1,e&&this.roomForm.get("roomName")?.setErrors({duplicated:!0})})).subscribe(o=>e=o.data)}saveRoom(){if(this.roomForm.invalid)this.roomForm.markAllAsTouched();else{let e;this.loading=!0,this.room.accomodationId=this.selectedAccomodation.id,e=this.room.id?"Ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng":"Th\xeam th\xe0nh c\xf4ng",this.roomService.saveRoom(this.room).pipe((0,K.x)(()=>{this.submitted=!1,this.loading=!1,this.messageService.add({severity:"success",summary:"Successful",detail:e,life:3e3})})).subscribe(o=>this.rooms=o.data),this.addDialog=!1}}onGlobalFilter(e,o){e.filterGlobal(o.target.value,"contains")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Yt),t.Y36(Pt.$),t.Y36(Te),t.Y36(ht.ez))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-room"]],features:[t._Bn([ht.ez])],decls:21,vars:22,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","selectionMode","multiple","dataKey","id",3,"value","columns","rows","globalFilterFields","paginator","rowsPerPageOptions","selection","rowHover","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Chi ti\u1ebft ph\xf2ng tr\u1ecd",1,"p-fluid",3,"visible","modal","onHide","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[4,"ngIf"],["class","progress-spinner",4,"ngIf"],[1,"my-2"],["pButton","","pRipple","","label","Th\xeam ph\xf2ng tr\u1ecd","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],[1,"flex","justify-content-center"],["placeholder","Ch\u1ecdn ph\xf2ng tr\u1ecd","optionLabel","name","autoWidth","false",3,"options","ngModel","onChange","ngModelChange"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","T\xecm ki\u1ebfm...",1,"w-full","sm:w-auto",3,"input"],["pSortableColumn","name"],["field","name"],["pSortableColumn","tenants"],["field","tenants"],["pSortableColumn","capacity"],["field","capacity"],["pSortableColumn","price"],["field","price"],["pSortableColumn","acreage"],["field","acreage"],["pSortableColumn","isRent"],["field","isRent"],[2,"width","15%"],[2,"width","10%"],["style","width:25%;",4,"ngIf","ngIfElse"],["isRent",""],[1,"flex"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-warning",3,"disabled","click"],[2,"width","25%"],[3,"formGroup"],[1,"field"],["for","name"],[1,"mandatory-sign"],[1,"p-input-icon-right"],["class","pi pi-spin pi-spinner",4,"ngIf"],[1,"input-box"],["type","text","pInputText","","id","name","formControlName","roomName","required","","autofocus","",3,"ngClass"],["class","ng-dirty ng-invalid",4,"ngIf"],["for","price"],["id","price","formControlName","price",3,"ngClass"],[1,"formgrid","grid"],[1,"field","col"],["id","price","formControlName","acreage","mode","decimal","suffix","m\xb2",3,"ngClass"],["id","price","formControlName","maxCapacity",3,"ngClass"],[1,"pi","pi-spin","pi-spinner"],[1,"ng-dirty","ng-invalid"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"disabled","click"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",1,"p-button-text",3,"click"],[1,"progress-spinner"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"p-toast"),t.TgZ(4,"p-toolbar",3),t.YNc(5,ml,2,0,"ng-template",4),t.YNc(6,fl,2,5,"ng-template",5),t.qZA(),t.TgZ(7,"p-table",6,7),t.NdJ("selectionChange",function(s){return o.selectedProducts=s}),t.YNc(9,gl,6,0,"ng-template",8),t.YNc(10,_l,20,0,"ng-template",9),t.YNc(11,wl,19,12,"ng-template",10),t.qZA()(),t.TgZ(12,"p-dialog",11),t.NdJ("onHide",function(){return o.onHideDialog()})("visibleChange",function(s){return o.addDialog=s}),t.YNc(13,Nl,37,19,"ng-template",12),t.YNc(14,Dl,2,1,"ng-template",13),t.qZA(),t.TgZ(15,"p-dialog",14),t.NdJ("visibleChange",function(s){return o.deleteProductDialog=s}),t.TgZ(16,"div",15),t._UZ(17,"i",16),t.YNc(18,Fl,5,1,"span",17),t.qZA(),t.YNc(19,Zl,2,0,"ng-template",13),t.qZA()()(),t.YNc(20,Il,2,0,"div",18)),2&e&&(t.xp6(7),t.Q6J("value",o.rooms)("columns",o.cols)("rows",10)("globalFilterFields",t.DdM(18,Sl))("paginator",!0)("rowsPerPageOptions",t.DdM(19,kl))("selection",o.selectedProducts)("rowHover",!0),t.xp6(5),t.Akn(t.DdM(20,Rl)),t.Q6J("visible",o.addDialog)("modal",!0),t.xp6(3),t.Akn(t.DdM(21,ql)),t.Q6J("visible",o.deleteProductDialog)("modal",!0),t.xp6(3),t.Q6J("ngIf",o.room),t.xp6(2),t.Q6J("ngIf",o.loading))},dependencies:[bt.mk,bt.O5,ht.jx,Xt.Hq,ne.o,E._Y,E.Fj,E.JJ,E.JL,E.Q7,E.On,te.FN,pe.o,Ft.iA,Ft.lQ,Ft.fz,ie.V,re.Lt,ge.Rn,ee.G,E.sg,E.u,bt.H9]}),n})(),Ml=(()=>{class n{constructor(e,o){this.router=e,this.authenticationService=o}canActivate(e,o){return!!this.authenticationService.userValue||(this.router.navigate(["/auth"],{queryParams:{returnUrl:o.url}}),!1)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(xe.F0),t.LFG(Pt.$))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Bl=Et(5096),Bn=Et(2460),Ce=Et(3608),vn=Et(3310),Re=Et(8783),Pn=Et(4247),Pl=Et(7489);function Ol(n,i){1&n&&(t._UZ(0,"i",56),t.TgZ(1,"span"),t._uU(2," \xa0 Th\xf4ng tin c\xe1 nh\xe2n"),t.qZA())}function Ll(n,i){1&n&&(t.TgZ(0,"small",57),t._uU(1,"Vui l\xf2ng nh\u1eadp h\u1ecd."),t.qZA())}function Vl(n,i){1&n&&(t.TgZ(0,"small",57),t._uU(1,"Vui l\xf2ng nh\u1eadp t\xean."),t.qZA())}function Jl(n,i){1&n&&(t.TgZ(0,"small",57),t._uU(1,"Vui l\xf2ng nh\u1eadp s\u1ed1 CCCD."),t.qZA())}function Hl(n,i){1&n&&(t.TgZ(0,"small",57),t._uU(1,"S\u1ed1 CCCD \u0111\xe3 t\u1ed3n t\u1ea1i."),t.qZA())}function Wl(n,i){1&n&&(t.TgZ(0,"small",57),t._uU(1,"Vui l\xf2ng nh\u1eadp email."),t.qZA())}function Gl(n,i){1&n&&(t.TgZ(0,"small",57),t._uU(1,"Email kh\xf4ng h\u1ee3p l\u1ec7."),t.qZA())}function Kl(n,i){1&n&&(t.TgZ(0,"small",57),t._uU(1,"Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i."),t.qZA())}function Yl(n,i){1&n&&(t.TgZ(0,"small",57),t._uU(1,"Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i."),t.qZA())}function Ql(n,i){1&n&&(t.TgZ(0,"small",57),t._uU(1,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng h\u1ee3p l\u1ec7."),t.qZA())}function jl(n,i){1&n&&(t.TgZ(0,"tr")(1,"th",58),t._uU(2,"Ch\u1ee7 t\xe0i kho\u1ea3n"),t.qZA(),t.TgZ(3,"th",58),t._uU(4,"T\xean ng\xe2n h\xe0ng"),t.qZA(),t.TgZ(5,"th",58),t._uU(6,"S\u1ed1 t\xe0i kho\u1ea3n"),t.qZA(),t._UZ(7,"th",58),t.qZA())}function zl(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"input",67),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw().$implicit;return t.KtG(s.accountOwner=r)}),t.qZA()}if(2&n){const e=t.oxw().$implicit;t.Q6J("ngModel",e.accountOwner)}}function $l(n,i){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.hij(" ",e.accountOwner," ")}}function Xl(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"input",68),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw().$implicit;return t.KtG(s.bankName=r)}),t.qZA()}if(2&n){const e=t.oxw().$implicit;t.Q6J("ngModel",e.bankName)}}function tc(n,i){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.hij(" ",e.bankName," ")}}function ec(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"input",68),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw().$implicit;return t.KtG(s.bankNumber=r)}),t.qZA()}if(2&n){const e=t.oxw().$implicit;t.Q6J("ngModel",e.bankNumber)}}function nc(n,i){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.hij(" ",e.bankNumber," ")}}function ic(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",69),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.onRowEditInit(r))}),t.qZA()}}function oc(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",70),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.onRowDelete(r))}),t.qZA()}}function rc(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",71),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.onRowEditSave(r))}),t.qZA()}}function sc(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",72),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(),s=r.$implicit,l=r.rowIndex,a=t.oxw(2);return t.KtG(a.onRowEditCancel(s,l))}),t.qZA()}}function ac(n,i){if(1&n&&(t.TgZ(0,"tr",59)(1,"td")(2,"p-cellEditor"),t.YNc(3,zl,1,1,"ng-template",60),t.YNc(4,$l,1,1,"ng-template",61),t.qZA()(),t.TgZ(5,"td")(6,"p-cellEditor"),t.YNc(7,Xl,1,1,"ng-template",60),t.YNc(8,tc,1,1,"ng-template",61),t.qZA()(),t.TgZ(9,"td")(10,"p-cellEditor"),t.YNc(11,ec,1,1,"ng-template",60),t.YNc(12,nc,1,1,"ng-template",61),t.qZA()(),t.TgZ(13,"td")(14,"div",62),t.YNc(15,ic,1,0,"button",63),t.YNc(16,oc,1,0,"button",64),t.YNc(17,rc,1,0,"button",65),t.YNc(18,sc,1,0,"button",66),t.qZA()()()),2&n){const o=i.editing;t.Q6J("pEditableRow",i.$implicit),t.xp6(15),t.Q6J("ngIf",!o),t.xp6(1),t.Q6J("ngIf",!o),t.xp6(1),t.Q6J("ngIf",o),t.xp6(1),t.Q6J("ngIf",o)}}function lc(n,i){1&n&&(t._UZ(0,"i",73),t.TgZ(1,"span"),t._uU(2," \xa0 \u0110\u1ed5i m\u1eadt kh\u1ea9u"),t.qZA())}function cc(n,i){1&n&&(t.TgZ(0,"small",57),t._uU(1,"Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u c\u0169."),t.qZA())}function uc(n,i){1&n&&(t.TgZ(0,"small",57),t._uU(1,"Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u m\u1edbi."),t.qZA())}function pc(n,i){1&n&&(t.TgZ(0,"small",57),t._uU(1,"Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u m\u1edbi kh\xe1c m\u1eadt kh\u1ea9u c\u0169."),t.qZA())}function dc(n,i){1&n&&(t.TgZ(0,"small",57),t._uU(1,"Vui l\xf2ng nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u m\u1edbi."),t.qZA())}function mc(n,i){1&n&&(t.TgZ(0,"small",57),t._uU(1,"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u m\u1edbi ch\xednh x\xe1c."),t.qZA())}const Ae=function(n){return{"ng-invalid ng-dirty":n}},hc=function(){return{"min-width":"40rem"}};function fc(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p-tabView",6),t._UZ(1,"p-toast"),t.TgZ(2,"p-tabPanel"),t.YNc(3,Ol,3,0,"ng-template",7),t.TgZ(4,"p-card",8)(5,"div",9)(6,"div",10)(7,"div",11)(8,"div",12)(9,"div",13),t._UZ(10,"img",14),t.qZA(),t.TgZ(11,"label",15),t._UZ(12,"i",16),t.TgZ(13,"input",17),t.NdJ("change",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.onUpload(r))}),t.qZA()()(),t.TgZ(14,"div",18)(15,"div",19),t._uU(16),t.qZA(),t.TgZ(17,"div",20),t._uU(18),t.qZA()()(),t.TgZ(19,"div",11)(20,"form",21)(21,"div",22)(22,"label",23),t._uU(23,"H\u1ecd"),t.qZA(),t.TgZ(24,"div",24)(25,"div",25),t._UZ(26,"input",26),t.qZA(),t.YNc(27,Ll,2,0,"small",27),t.qZA()(),t.TgZ(28,"div",22)(29,"label",28),t._uU(30,"T\xean"),t.qZA(),t.TgZ(31,"div",24)(32,"div",25),t._UZ(33,"input",29),t.qZA(),t.YNc(34,Vl,2,0,"small",27),t.qZA()(),t.TgZ(35,"div",22)(36,"label",30),t._uU(37,"S\u1ed1 CCCD"),t.qZA(),t.TgZ(38,"div",24)(39,"div",25),t._UZ(40,"input",31),t.qZA(),t.YNc(41,Jl,2,0,"small",27),t.YNc(42,Hl,2,0,"small",27),t.qZA()(),t.TgZ(43,"div",22)(44,"label",32),t._uU(45,"Email"),t.qZA(),t.TgZ(46,"div",24)(47,"div",25),t._UZ(48,"input",33),t.qZA(),t.YNc(49,Wl,2,0,"small",27),t.YNc(50,Gl,2,0,"small",27),t.qZA()(),t.TgZ(51,"div",22)(52,"label",34),t._uU(53,"\u0110\u1ecba ch\u1ec9"),t.qZA(),t.TgZ(54,"div",24)(55,"div",25),t._UZ(56,"input",35),t.qZA(),t.YNc(57,Kl,2,0,"small",27),t.qZA()(),t.TgZ(58,"div",22)(59,"label",36),t._uU(60,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),t.qZA(),t.TgZ(61,"div",24)(62,"div",25),t._UZ(63,"input",37),t.qZA(),t.YNc(64,Yl,2,0,"small",27),t.YNc(65,Ql,2,0,"small",27),t.qZA()()()()(),t.TgZ(66,"div",10)(67,"div",11)(68,"p-table",38),t.YNc(69,jl,8,0,"ng-template",7),t.YNc(70,ac,19,5,"ng-template",39),t.qZA()(),t.TgZ(71,"div",40)(72,"div")(73,"button",41),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onAddNewBank())}),t.qZA()()()()(),t.TgZ(74,"div",42)(75,"div")(76,"button",43),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.saveUser())}),t.qZA()()()()(),t.TgZ(77,"p-tabPanel",44),t.YNc(78,lc,3,0,"ng-template",7),t.TgZ(79,"p-card",45)(80,"div",9)(81,"div",46)(82,"form",47)(83,"div",22)(84,"label",48),t._uU(85,"M\u1eadt kh\u1ea9u hi\u1ec7n t\u1ea1i"),t.qZA(),t.TgZ(86,"div",49),t._UZ(87,"input",50),t.YNc(88,cc,2,0,"small",27),t.qZA()(),t.TgZ(89,"div",22)(90,"label",51),t._uU(91,"M\u1eadt kh\u1ea9u m\u1edbi"),t.qZA(),t.TgZ(92,"div",49),t._UZ(93,"input",52),t.YNc(94,uc,2,0,"small",27),t.YNc(95,pc,2,0,"small",27),t.qZA()(),t.TgZ(96,"div",22)(97,"label",53),t._uU(98,"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u m\u1edbi"),t.qZA(),t.TgZ(99,"div",49),t._UZ(100,"input",54),t.YNc(101,dc,2,0,"small",27),t.YNc(102,mc,2,0,"small",27),t.qZA()()()(),t.TgZ(103,"div",55)(104,"div",11)(105,"div",12)(106,"div",13),t._UZ(107,"img",14),t.qZA()(),t.TgZ(108,"div",18)(109,"div",19),t._uU(110),t.qZA(),t.TgZ(111,"div",20),t._uU(112),t.qZA()()()()(),t.TgZ(113,"div",42)(114,"div")(115,"button",43),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.changePassword())}),t.qZA()()()()()()}if(2&n){const e=t.oxw();let o,r,s,l,a,p,_,T,A,x,f,b,y,D;t.xp6(10),t.Q6J("src",e.thumb||e.userResult.imageUrl,t.LSH),t.xp6(6),t.hij(" ",e.userResult.firstName+" "+e.userResult.lastName," "),t.xp6(2),t.hij(" ",e.userResult.phone," "),t.xp6(2),t.Q6J("formGroup",e.userForm),t.xp6(6),t.Q6J("ngClass",t.VKq(36,Ae,e.userForm.controls.firstname.invalid&&(e.userForm.controls.firstname.dirty||e.userForm.controls.firstname.touched))),t.xp6(1),t.Q6J("ngIf",(null==(o=e.userForm.get("firstname"))?null:o.getError("required"))&&(e.userForm.controls.firstname.dirty||e.userForm.controls.firstname.touched)),t.xp6(6),t.Q6J("ngClass",t.VKq(38,Ae,e.userForm.controls.lastname.invalid&&(e.userForm.controls.lastname.dirty||e.userForm.controls.lastname.touched))),t.xp6(1),t.Q6J("ngIf",(null==(r=e.userForm.get("lastname"))?null:r.getError("required"))&&(e.userForm.controls.lastname.dirty||e.userForm.controls.lastname.touched)),t.xp6(6),t.Q6J("ngClass",t.VKq(40,Ae,e.userForm.controls.identifyNum.invalid&&(e.userForm.controls.identifyNum.dirty||e.userForm.controls.identifyNum.touched))),t.xp6(1),t.Q6J("ngIf",(null==(s=e.userForm.get("identifyNum"))?null:s.getError("required"))&&(e.userForm.controls.identifyNum.dirty||e.userForm.controls.identifyNum.touched)),t.xp6(1),t.Q6J("ngIf",(null==(l=e.userForm.get("identifyNum"))?null:l.getError("duplicated"))&&(e.userForm.controls.identifyNum.dirty||e.userForm.controls.identifyNum.touched)),t.xp6(6),t.Q6J("ngClass",t.VKq(42,Ae,e.userForm.controls.email.invalid&&(e.userForm.controls.email.dirty||e.userForm.controls.email.touched))),t.xp6(1),t.Q6J("ngIf",(null==(a=e.userForm.get("email"))?null:a.getError("required"))&&(e.userForm.controls.email.dirty||e.userForm.controls.email.touched)),t.xp6(1),t.Q6J("ngIf",(null==(p=e.userForm.get("email"))?null:p.getError("mailInvalid"))&&(e.userForm.controls.email.dirty||e.userForm.controls.email.touched)),t.xp6(6),t.Q6J("ngClass",t.VKq(44,Ae,e.userForm.controls.address.invalid&&(e.userForm.controls.address.dirty||e.userForm.controls.address.touched))),t.xp6(1),t.Q6J("ngIf",(null==(_=e.userForm.get("address"))?null:_.getError("required"))&&(e.userForm.controls.address.dirty||e.userForm.controls.address.touched)),t.xp6(6),t.Q6J("ngClass",t.VKq(46,Ae,e.userForm.controls.phone.invalid&&(e.userForm.controls.phone.dirty||e.userForm.controls.phone.touched))),t.xp6(1),t.Q6J("ngIf",(null==(T=e.userForm.get("phone"))?null:T.getError("required"))&&(e.userForm.controls.phone.dirty||e.userForm.controls.phone.touched)),t.xp6(1),t.Q6J("ngIf",(null==(A=e.userForm.get("phone"))?null:A.getError("phoneInvalid"))&&(e.userForm.controls.phone.dirty||e.userForm.controls.phone.touched)),t.xp6(3),t.Q6J("value",e.userResult.bankAccounts)("tableStyle",t.DdM(48,hc)),t.xp6(5),t.Q6J("disabled",e.userResult.bankAccounts.length>=2),t.xp6(3),t.Q6J("loading",e.saveLoading),t.xp6(6),t.Q6J("formGroup",e.passwordForm),t.xp6(5),t.Q6J("ngClass",t.VKq(49,Ae,e.passwordForm.controls.currentPass.invalid&&(e.passwordForm.controls.currentPass.dirty||e.passwordForm.controls.currentPass.touched))),t.xp6(1),t.Q6J("ngIf",(null==(x=e.passwordForm.get("currentPass"))?null:x.getError("invalid"))&&(e.passwordForm.controls.currentPass.dirty||e.passwordForm.controls.currentPass.touched)),t.xp6(5),t.Q6J("ngClass",t.VKq(51,Ae,e.passwordForm.controls.newPass.invalid&&(e.passwordForm.controls.newPass.dirty||e.passwordForm.controls.newPass.touched))),t.xp6(1),t.Q6J("ngIf",(null==(f=e.passwordForm.get("newPass"))?null:f.getError("invalid"))&&(e.passwordForm.controls.newPass.dirty||e.passwordForm.controls.newPass.touched)),t.xp6(1),t.Q6J("ngIf",(null==(b=e.passwordForm.get("newPass"))?null:b.getError("incorrect"))&&(e.passwordForm.controls.newPass.dirty||e.passwordForm.controls.newPass.touched)),t.xp6(5),t.Q6J("ngClass",t.VKq(53,Ae,e.passwordForm.controls.confirmedPass.invalid&&(e.passwordForm.controls.confirmedPass.dirty||e.passwordForm.controls.confirmedPass.touched))),t.xp6(1),t.Q6J("ngIf",(null==(y=e.passwordForm.get("confirmedPass"))?null:y.getError("invalid"))&&(e.passwordForm.controls.confirmedPass.dirty||e.passwordForm.controls.confirmedPass.touched)),t.xp6(1),t.Q6J("ngIf",(null==(D=e.passwordForm.get("confirmedPass"))?null:D.getError("incorrect"))&&(e.passwordForm.controls.confirmedPass.dirty||e.passwordForm.controls.confirmedPass.touched)),t.xp6(5),t.Q6J("src",e.thumb||e.userResult.imageUrl,t.LSH),t.xp6(3),t.hij(" ",e.userResult.firstname+" "+e.userResult.lastname," "),t.xp6(2),t.hij(" ",e.userResult.phone," "),t.xp6(3),t.Q6J("loading",e.saveLoading)}}function gc(n,i){1&n&&(t._UZ(0,"i",56),t.TgZ(1,"span"),t._uU(2," \xa0 Th\xf4ng tin c\xe1 nh\xe2n"),t.qZA())}function _c(n,i){1&n&&(t._UZ(0,"i",73),t.TgZ(1,"span"),t._uU(2," \xa0 \u0110\u1ed5i m\u1eadt kh\u1ea9u"),t.qZA())}function vc(n,i){1&n&&(t.TgZ(0,"p-tabView",6),t._UZ(1,"p-toast"),t.TgZ(2,"p-tabPanel"),t.YNc(3,gc,3,0,"ng-template",7),t.TgZ(4,"p-card",8)(5,"div",74)(6,"div",75)(7,"ul",76)(8,"li",77)(9,"div",78),t._UZ(10,"p-skeleton",79),t.TgZ(11,"div",80),t._UZ(12,"p-skeleton",81)(13,"p-skeleton",82),t.qZA()()(),t.TgZ(14,"li",77)(15,"div",78),t._UZ(16,"p-skeleton",79),t.TgZ(17,"div",80),t._UZ(18,"p-skeleton",81)(19,"p-skeleton",82),t.qZA()()(),t.TgZ(20,"li",77)(21,"div",78),t._UZ(22,"p-skeleton",79),t.TgZ(23,"div",80),t._UZ(24,"p-skeleton",81)(25,"p-skeleton",82),t.qZA()()(),t.TgZ(26,"li")(27,"div",78),t._UZ(28,"p-skeleton",79),t.TgZ(29,"div",80),t._UZ(30,"p-skeleton",81)(31,"p-skeleton",82),t.qZA()()()()()()()(),t.TgZ(32,"p-tabPanel",44),t.YNc(33,_c,3,0,"ng-template",7),t._UZ(34,"p-card",45),t.qZA()())}function yc(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",83)(1,"label"),t._uU(2,"Ch\u1ee7 t\xe0i kho\u1ea3n"),t.qZA(),t.TgZ(3,"input",84),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.bankInfo.accountOwner=r)}),t.qZA()(),t.TgZ(4,"div",83)(5,"label"),t._uU(6,"T\xean ng\xe2n h\xe0ng"),t.qZA(),t.TgZ(7,"input",85),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.bankInfo.bankName=r)}),t.qZA()(),t.TgZ(8,"div",83)(9,"label"),t._uU(10,"S\u1ed1 t\xe0i kho\u1ea3n"),t.qZA(),t.TgZ(11,"input",85),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.bankInfo.bankNumber=r)}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.bankInfo.accountOwner),t.xp6(4),t.Q6J("ngModel",e.bankInfo.bankName),t.xp6(4),t.Q6J("ngModel",e.bankInfo.bankNumber)}}function wc(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",86),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.addBankDialog=!1)}),t.qZA(),t.TgZ(1,"button",87),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.saveBank())}),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("loading",e.updateBankLoading)}}function Ec(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",88),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.deleteBankDialog=!1)}),t.qZA(),t.TgZ(1,"button",89),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.confirmDeleteBank())}),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("loading",e.deleteBankLoading)}}const bc=function(){return{width:"550px"}},xc=function(){return{width:"450px"}};let Tc=(()=>{class n{constructor(e,o,r){this.authenticationService=e,this.userService=o,this.messageService=r,this.value=0,this.checked=!1,this.loading=!1,this.saveLoading=!1,this.submitted=!1,this.clonedBanks={},this.bankInfo={},this.addBankDialog=!1,this.updateBankLoading=!1,this.deleteBankDialog=!1,this.deleteBankLoading=!1,this.authenticationService.user.subscribe(s=>this.user=s),this.passwordForm=new E.cw({currentPass:new E.NI("",[E.kI.required]),newPass:new E.NI("",[E.kI.required]),confirmedPass:new E.NI("",[E.kI.required])}),this.userForm=new E.cw({firstname:new E.NI(this.userResult?.firstname,[E.kI.required]),lastname:new E.NI(this.userResult?.lastname,[E.kI.required]),phone:new E.NI(this.userResult?.phone,[]),identifyNum:new E.NI(this.userResult?.identifyNum,[]),email:new E.NI(this.userResult?.email,[E.kI.required]),address:new E.NI(this.userResult?.address,[])})}ngOnInit(){this.getUser(),this.passwordForm.get("currentPass")?.valueChanges.subscribe(e=>{this.oldPassword=e,this.newPassword&&this.oldPassword===this.newPassword?this.passwordForm.get("newPass")?.setErrors({incorrect:!0}):this.passwordForm.get("newPass")?.setErrors(null)}),this.passwordForm.get("newPass")?.valueChanges.subscribe(e=>{this.newPassword=e,this.confirmedPassword&&this.confirmedPassword===this.newPassword&&this.passwordForm.get("confirmedPass")?.setErrors(null),this.oldPassword&&this.oldPassword===this.newPassword&&this.passwordForm.get("newPass")?.setErrors({incorrect:!0})}),this.passwordForm.get("confirmedPass")?.valueChanges.subscribe(e=>{this.confirmedPassword=e,this.confirmedPassword!==this.newPassword&&this.passwordForm.get("confirmedPass")?.setErrors({incorrect:!0})}),this.userForm.get("firstname")?.valueChanges.subscribe(e=>{this.userResult.firstname=e}),this.userForm.get("lastname")?.valueChanges.subscribe(e=>{this.userResult.lastname=e}),this.userForm.get("phone")?.valueChanges.subscribe(e=>{e&&(this.userResult.phone=e,this.validatePhoneNumber(e))}),this.userForm.get("identifyNum")?.valueChanges.subscribe(e=>{this.userResult.identifyNum=e}),this.userForm.get("email")?.valueChanges.subscribe(e=>{e&&(this.userResult.email=e,this.validateGmail(e))}),this.userForm.get("address")?.valueChanges.subscribe(e=>{this.userResult.address=e})}validateGmail(e){e.toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)?this.userForm.get("email")?.setErrors(null):this.userForm.get("email")?.setErrors({mailInvalid:!0})}validatePhoneNumber(e){e.toLowerCase().match(/(84|0[3|5|7|8|9])+([0-9]{8})\b/g)?this.userForm.get("phone")?.setErrors(null):this.userForm.get("phone")?.setErrors({phoneInvalid:!0})}onUpload(e){if(e.target.files&&e.target.files[0]){this.uploadedFiles=e.target.files[0];var o=new FileReader;o.readAsDataURL(e.target.files[0]),o.onload=r=>{this.thumb=r.target.result}}}fillData(){this.userForm.get("firstname")?.setValue(this.userResult.firstName),this.userForm.get("lastname")?.setValue(this.userResult.lastName),this.userForm.get("phone")?.setValue(this.userResult.phone),this.userForm.get("identifyNum")?.setValue(this.userResult.identifyNum),this.userForm.get("email")?.setValue(this.userResult.email),this.userForm.get("address")?.setValue(this.userResult.address)}getUser(){this.loading=!0,this.userService.getUserByUserId(this.user?.id).pipe((0,K.x)(()=>{this.loading=!1,this.fillData()})).subscribe(e=>this.userResult=e.data)}saveUser(){let e=new FormData;this.uploadedFiles&&e.append("file",this.uploadedFiles),e.append("data",JSON.stringify(this.userResult)),console.log(e),this.saveLoading=!0,this.submitted=!0,this.userService.saveUser(e).pipe((0,K.x)(()=>{this.saveLoading=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"Ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng",life:3e3})})).subscribe(o=>console.log(o))}changePassword(){if(this.passwordForm.markAllAsTouched(),this.passwordForm.valid){let o=new Bl.G;o.userId=this.user?.id,o.oldPassword=this.oldPassword,o.newPassword=this.newPassword,this.saveLoading=!0,this.userService.changePassword(o).pipe((0,K.x)(()=>{this.messageService.add(this.changePassResult.success?{severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"Ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng",life:3e3}:{severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:this.changePassResult.message,life:3e3}),this.saveLoading=!1})).subscribe(r=>this.changePassResult=r)}}onAddNewBank(){this.bankInfo={},this.addBankDialog=!0}saveBank(){let e;this.bankInfo.userId=this.user?.id,this.updateBankLoading=!0,this.userService.saveBank(this.bankInfo).pipe((0,K.x)(()=>{this.updateBankLoading=!1,this.addBankDialog=!1,this.userResult.bankAccounts.push(e)})).subscribe(o=>e=o.data)}onRowEditInit(e){this.clonedBanks[e.id]={...e}}onRowDelete(e){this.bankInfo={...e},this.deleteBankDialog=!0}onRowEditSave(e){e.accountOwner&&e.bankName&&e.bankNumber?(delete this.clonedBanks[e.id],this.updateBankLoading=!0,this.userService.saveBank(e).pipe((0,K.x)(()=>{this.updateBankLoading=!1})).subscribe(o=>console.log(o))):this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:"Vui l\xf2ng \u0111i\u1ec1n \u0111\u1ea7y \u0111\u1ee7 th\xf4ng tin"})}confirmDeleteBank(){this.deleteBankLoading=!0,this.userService.deleteBank(this.bankInfo.id).pipe((0,K.x)(()=>{this.deleteBankDialog=!1,console.log(this.bankInfo),console.log(this.userResult.bankAccounts),this.userResult.bankAccounts=this.userResult.bankAccounts.filter(e=>e.id!==this.bankInfo.id),this.deleteBankLoading=!1,this.bankInfo={}})).subscribe(e=>console.log(e))}onRowEditCancel(e,o){this.userResult.bankAccounts[o]=this.clonedBanks[e.id],delete this.clonedBanks[e.id]}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Pt.$),t.Y36(Bn.K),t.Y36(ht.ez))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-profile"]],features:[t._Bn([ht.ez])],decls:10,vars:13,consts:[["styleClass","tabview-custom",4,"ngIf"],["header","Chi ti\u1ebft khu tr\u1ecd",1,"p-fluid",3,"visible","resizable","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","X\xe1c nh\u1eadn xo\xe1",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],["styleClass","tabview-custom"],["pTemplate","header"],["header","Th\xf4ng tin c\xe1 nh\xe2n"],[1,"m-0","flex"],[1,"col-12","md:col-6"],[1,"card","p-fluid"],[1,"field","grid","flex","flex-column","align-items-center"],[1,"user-image"],[3,"src"],["htmlFor","file","pTooltip","Ch\u1ec9nh s\u1eeda \u1ea3nh","tooltipPosition","bottom"],[1,"pi","pi-pencil",2,"cursor","pointer","margin-top","3px"],["type","file","hidden","","id","file",3,"change"],[1,"field","grid","flex","flex-column","align-items-center",2,"margin-top","15px"],[1,"user-name"],[1,"user-phone"],[3,"formGroup"],[1,"field","grid"],["htmlFor","firstName",1,"col-12","mb-2","md:col-4","md:mb-0"],[1,"col-12","md:col-8"],[1,"input-box"],["pInputText","","id","firstName","formControlName","firstname","type","text",3,"ngClass"],["class","ng-dirty ng-invalid",4,"ngIf"],["htmlFor","lastname",1,"col-12","mb-2","md:col-4","md:mb-0"],["pInputText","","id","lastname","formControlName","lastname","type","text",3,"ngClass"],["htmlFor","identifyNum",1,"col-12","mb-2","md:col-4","md:mb-0"],["pInputText","","id","identifyNum","onlyNumber","","formControlName","identifyNum","type","text",3,"ngClass"],["htmlFor","email3",1,"col-12","mb-2","md:col-4","md:mb-0"],["pInputText","","id","email3","formControlName","email","type","text",3,"ngClass"],["htmlFor","address",1,"col-12","mb-2","md:col-4","md:mb-0"],["pInputText","","id","address","formControlName","address","type","text",3,"ngClass"],["htmlFor","phone",1,"col-12","mb-2","md:col-4","md:mb-0"],["pInputText","","id","phone","onlyNumber","","formControlName","phone","type","text",3,"ngClass"],["dataKey","id","editMode","row",3,"value","tableStyle"],["pTemplate","body"],[1,"flex","justify-content-center"],["pButton","","type","button","label","Th\xeam ng\xe2n h\xe0ng","icon","pi pi-credit-card",1,"p-button",3,"disabled","click"],[1,"m-0","flex","justify-content-center","mt-5"],["pButton","","type","button","label","C\u1eadp nh\u1eadt","icon","pi pi-save",1,"p-button",3,"loading","click"],["header","Header II"],["header","\u0110\u1ed5i m\u1eadt kh\u1ea9u"],[1,"col-12","md:col-7"],[1,"card","p-fluid",3,"formGroup"],["htmlFor","oldpass",1,"col-12","mb-2","md:col-2","md:mb-0"],[1,"col-12","md:col-10"],["pInputText","","required","","id","oldpass","formControlName","currentPass","type","password",3,"ngClass"],["htmlFor","newPass",1,"col-12","mb-2","md:col-2","md:mb-0"],["pInputText","","required","","id","newPass","type","password","formControlName","newPass",3,"ngClass"],["htmlFor","rePass",1,"col-12","mb-2","md:col-2","md:mb-0"],["pInputText","","required","","id","rePass","type","password","formControlName","confirmedPass",3,"ngClass"],[1,"col-12","md:col-5"],[1,"pi","pi-user-edit"],[1,"ng-dirty","ng-invalid"],[2,"width","20%"],[3,"pEditableRow"],["pTemplate","input"],["pTemplate","output"],[1,"flex","align-items-center","justify-content-center","gap-2"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-pencil","class","p-button-rounded p-button-text",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-trash","class","p-button-rounded p-button-text p-button-danger",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check","class","p-button-rounded p-button-text p-button-success mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times","class","p-button-rounded p-button-text p-button-danger",3,"click",4,"ngIf"],["pInputText","","type","text",3,"ngModel","ngModelChange"],["pInputText","","type","text","required","",3,"ngModel","ngModelChange"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-pencil",1,"p-button-rounded","p-button-text",3,"click"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-trash",1,"p-button-rounded","p-button-text","p-button-danger",3,"click"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check",1,"p-button-rounded","p-button-text","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times",1,"p-button-rounded","p-button-text","p-button-danger",3,"click"],[1,"pi","pi-lock"],[1,"card"],[1,"border-round","border-1","surface-border","p-4","surface-card"],[1,"m-0","p-0","list-none"],[1,"mb-3"],[1,"flex"],["shape","circle","size","4rem","styleClass","mr-2"],[2,"flex","1"],["width","100%","styleClass","mb-2"],["width","75%"],[1,"field"],["type","text","pInputText","","autofocus","",3,"ngModel","ngModelChange"],["type","text","pInputText","",3,"ngModel","ngModelChange"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"loading","click"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",1,"p-button-text",3,"loading","click"]],template:function(e,o){1&e&&(t.YNc(0,fc,116,55,"p-tabView",0),t.YNc(1,vc,35,0,"p-tabView",0),t.TgZ(2,"p-dialog",1),t.NdJ("visibleChange",function(s){return o.addBankDialog=s}),t.YNc(3,yc,12,3,"ng-template",2),t.YNc(4,wc,2,1,"ng-template",3),t.qZA(),t.TgZ(5,"p-dialog",4),t.NdJ("visibleChange",function(s){return o.deleteBankDialog=s}),t.TgZ(6,"div",5)(7,"span"),t._uU(8,"X\xe1c nh\u1eadn xo\xe1 t\xe0i kho\u1ea3n ng\xe2n h\xe0ng?"),t.qZA()(),t.YNc(9,Ec,2,1,"ng-template",3),t.qZA()),2&e&&(t.Q6J("ngIf",!o.loading),t.xp6(1),t.Q6J("ngIf",o.loading),t.xp6(1),t.Akn(t.DdM(11,bc)),t.Q6J("visible",o.addBankDialog)("resizable",!0)("modal",!0),t.xp6(3),t.Akn(t.DdM(12,xc)),t.Q6J("visible",o.deleteBankDialog)("modal",!0))},dependencies:[bt.mk,bt.O5,ht.jx,Xt.Hq,Ce.u,ne.o,E._Y,E.Fj,E.JJ,E.JL,E.Q7,E.On,te.FN,vn.p,Ft.iA,Ft.YL,Ft.D$,Ft.Pv,Ft.U1,Ft.wT,ie.V,Re.xf,Re.x4,Pn.Z,Pl.O,E.sg,E.u],styles:[".user-image[_ngcontent-%COMP%]{height:120px}.user-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.user-name[_ngcontent-%COMP%]{font-size:16px}.user-phone[_ngcontent-%COMP%]{font-size:16px;margin-top:12px}"]}),n})();var ft=Et(5439),qe=Et(585);function Cc(n,i){1&n&&(t.TgZ(0,"div",10),t._UZ(1,"p-progressSpinner"),t.qZA())}let Ac=(()=>{class n{constructor(e,o,r){this.userService=e,this.auth=o,this.messageService=r,this.commonConfig={},this.loading=!1,this.disabledSave=!1}ngOnInit(){this.user=this.auth.userValue,this.getUserPreference()}getUserPreference(){this.loading=!0,this.userService.getUserPreference(this.user?.id).pipe((0,K.x)(()=>{this.loading=!1,this.retrieveDate()})).subscribe(e=>this.commonConfig=e.data)}isValid(){if(this.commonConfig.electricWaterDate&&this.commonConfig.issueInvoiceDate){const e=ft(this.commonConfig.electricWaterDate),o=ft(this.commonConfig.issueInvoiceDate);console.log(e),console.log(o),console.log(e.isSameOrAfter(o)),e.isSameOrAfter(o)?(this.disabledSave=!0,this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"Ng\xe0y ch\u1ed1t ch\u1ec9 s\u1ed1 \u0111i\u1ec7n n\u01b0\u1edbc c\u1ea7n tr\u01b0\u1edbc ng\xe0y xu\u1ea5t ho\xe1 \u0111\u01a1n!",life:5e3})):this.disabledSave=!1}}retrieveDate(){this.commonConfig.electricWaterDate=ft(this.commonConfig.electricWaterDate).toDate(),this.commonConfig.issueInvoiceDate=ft(this.commonConfig.issueInvoiceDate).toDate(),this.isValid()}saveUserPreference(){this.disabledSave=!1,this.loading=!0,this.commonConfig.userId=this.user?.id,this.userService.updateUserPreference(this.commonConfig).pipe((0,K.x)(()=>{this.loading=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"Ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng",life:3e3}),this.retrieveDate()})).subscribe(e=>this.commonConfig=e.data)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Bn.K),t.Y36(Pt.$),t.Y36(ht.ez))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-common-config"]],features:[t._Bn([ht.ez])],decls:18,vars:6,consts:[[1,"grid"],[1,"col-12","md:col-6"],[1,"card","p-fluid"],[1,"field"],["htmlFor","issue"],["view","date","position","bottom","dateFormat","dd",1,"no-header",3,"ngModel","readonlyInput","onSelect","ngModelChange"],["htmlFor","inputIndex"],[1,"flex","justify-content-center"],["pButton","","type","button","label","L\u01b0u","icon","pi pi-credit-card",1,"p-button",3,"disabled","click"],["class","progress-spinner",4,"ngIf"],[1,"progress-spinner"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"p-toast"),t.TgZ(2,"div",1)(3,"div",2)(4,"h5"),t._uU(5,"C\u1ea5u h\xecnh h\u1ec7 th\u1ed1ng"),t.qZA(),t.TgZ(6,"div",3)(7,"label",4),t._uU(8,"Ng\xe0y xu\u1ea5t ho\xe1 \u0111\u01a1n h\xe0ng th\xe1ng"),t.qZA(),t.TgZ(9,"p-calendar",5),t.NdJ("onSelect",function(){return o.isValid()})("ngModelChange",function(s){return o.commonConfig.issueInvoiceDate=s}),t.qZA()(),t.TgZ(10,"div",3)(11,"label",6),t._uU(12,"Ng\xe0y ch\u1ed1t ch\u1ec9 s\u1ed1 \u0111i\u1ec7n n\u01b0\u1edbc h\xe0ng th\xe1ng"),t.qZA(),t.TgZ(13,"p-calendar",5),t.NdJ("onSelect",function(){return o.isValid()})("ngModelChange",function(s){return o.commonConfig.electricWaterDate=s}),t.qZA()()(),t.TgZ(14,"div",7)(15,"div")(16,"button",8),t.NdJ("click",function(){return o.saveUserPreference()}),t.qZA()()()()(),t.YNc(17,Cc,2,0,"div",9)),2&e&&(t.xp6(9),t.Q6J("ngModel",o.commonConfig.issueInvoiceDate)("readonlyInput",!0),t.xp6(4),t.Q6J("ngModel",o.commonConfig.electricWaterDate)("readonlyInput",!0),t.xp6(3),t.Q6J("disabled",!o.commonConfig.electricWaterDate||!o.commonConfig.issueInvoiceDate||o.disabledSave),t.xp6(1),t.Q6J("ngIf",o.loading))},dependencies:[bt.O5,Xt.Hq,E.JJ,E.On,te.FN,ee.G,qe.f],styles:[".no-header[_ngcontent-%COMP%]     .p-datepicker-header{display:none}.no-header[_ngcontent-%COMP%]     thead{display:none}"]}),n})(),On=(()=>{class n{constructor(e){this.http=e}getTenantByAccomodation(e){return this.http.get(`${vt.N.apiUrl}/tenant/${e}`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}getTenantWithoutDeposit(e){return this.http.get(`${vt.N.apiUrl}/tenant/deposit/${e}`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}getTenantWithoutContract(e){return this.http.get(`${vt.N.apiUrl}/tenant/contract/${e}`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}saveTenant(e){return this.http.post(`${vt.N.apiUrl}/tenant`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}checkDuplicatedIdentify(e){return this.http.post(`${vt.N.apiUrl}/tenant/identify/duplicated`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}checkDuplicatedEmail(e){return this.http.post(`${vt.N.apiUrl}/tenant/email/duplicated`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}checkDuplicatedPhone(e){return this.http.post(`${vt.N.apiUrl}/tenant/phone/duplicated`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(fe.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var yn=Et(6679);function Nc(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",15)(1,"button",16),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.openNew())}),t.qZA()()}}const Dc=function(){return{width:"100%"}};function Fc(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",17)(1,"p-dropdown",18),t.NdJ("onChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onSelectAccomodation())})("ngModelChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.selectedAccomodation=r)}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Akn(t.DdM(4,Dc)),t.Q6J("options",e.accomodations)("ngModel",e.selectedAccomodation)}}function Zc(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",19)(1,"h5",20),t._uU(2,"Qu\u1ea3n l\xfd kh\xe1ch thu\xea"),t.qZA(),t.TgZ(3,"span",21),t._UZ(4,"i",22),t.TgZ(5,"input",23),t.NdJ("input",function(r){t.CHM(e);const s=t.oxw(),l=t.MAs(8);return t.KtG(s.onGlobalFilter(l,r))}),t.qZA()()()}}function Ic(n,i){1&n&&(t.TgZ(0,"tr")(1,"th",24),t._uU(2,"T\xean kh\xe1ch thu\xea"),t._UZ(3,"p-sortIcon",25),t.qZA(),t.TgZ(4,"th",26),t._uU(5,"Gi\u1edbi tinh"),t._UZ(6,"p-sortIcon",27),t.qZA(),t.TgZ(7,"th",28),t._uU(8,"Tr\u1ea1ng th\xe1i"),t._UZ(9,"p-sortIcon",29),t.qZA(),t.TgZ(10,"th",30),t._uU(11,"Ng\xe0y b\u1eaft \u0111\u1ea7u \u1edf"),t._UZ(12,"p-sortIcon",31),t.qZA(),t.TgZ(13,"th",32),t._uU(14,"S\u1ed1 \u0111\u1ecbnh danh"),t._UZ(15,"p-sortIcon",33),t.qZA(),t.TgZ(16,"th",34),t._uU(17,"Email"),t._UZ(18,"p-sortIcon",35),t.qZA(),t.TgZ(19,"th",36),t._uU(20,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),t._UZ(21,"p-sortIcon",37),t.qZA(),t._UZ(22,"th"),t.qZA())}function Sc(n,i){1&n&&(t.TgZ(0,"td"),t._uU(1,"Nam"),t.qZA())}function kc(n,i){1&n&&(t.TgZ(0,"td"),t._uU(1,"N\u1eef"),t.qZA())}function Rc(n,i){1&n&&(t.TgZ(0,"td"),t._uU(1,"Ch\u01b0a bi\u1ebft"),t.qZA())}function qc(n,i){1&n&&(t.TgZ(0,"td"),t._UZ(1,"p-tag",45),t.qZA())}function Uc(n,i){1&n&&(t.TgZ(0,"td"),t._UZ(1,"p-tag",47),t.qZA())}function Mc(n,i){1&n&&(t.TgZ(0,"td"),t._UZ(1,"p-tag",48),t.qZA())}function Bc(n,i){if(1&n&&(t.YNc(0,Uc,2,0,"td",46),t.YNc(1,Mc,2,0,"td",46)),2&n){const e=t.oxw().$implicit;t.Q6J("ngIf",e.endDate),t.xp6(1),t.Q6J("ngIf",!e.endDate)}}function Pc(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.ynx(3,38),t.YNc(4,Sc,2,0,"td",39),t.YNc(5,kc,2,0,"td",39),t.YNc(6,Rc,2,0,"td",40),t.BQk(),t.YNc(7,qc,2,0,"td",41),t.YNc(8,Bc,2,2,"ng-template",null,42,t.W1O),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"date"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td")(20,"div",43)(21,"button",44),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.editTenant(s))}),t.qZA()()()()}if(2&n){const e=i.$implicit,o=t.MAs(9);t.xp6(2),t.AsE("",e.firstName," ",e.lastName,""),t.xp6(1),t.Q6J("ngSwitch",e.gender),t.xp6(1),t.Q6J("ngSwitchCase","MALE"),t.xp6(1),t.Q6J("ngSwitchCase","FEMALE"),t.xp6(2),t.Q6J("ngIf",e.isStayed)("ngIfElse",o),t.xp6(4),t.Oqu(t.xi3(12,11,e.startDate,"dd/MM/yyyy")),t.xp6(3),t.Oqu(e.identifyNum),t.xp6(2),t.Oqu(e.email),t.xp6(2),t.Oqu(e.phone)}}function Oc(n,i){1&n&&(t.TgZ(0,"small",73),t._uU(1,"Vui l\xf2ng nh\u1eadp h\u1ecd."),t.qZA())}function Lc(n,i){1&n&&(t.TgZ(0,"small",73),t._uU(1,"Vui l\xf2ng nh\u1eadp t\xean."),t.qZA())}function Vc(n,i){1&n&&t._UZ(0,"i",74)}function Jc(n,i){1&n&&(t.TgZ(0,"small",73),t._uU(1,"Vui l\xf2ng nh\u1eadp s\u1ed1 CCCD."),t.qZA())}function Hc(n,i){1&n&&(t.TgZ(0,"small",73),t._uU(1,"S\u1ed1 CCCD \u0111\xe3 t\u1ed3n t\u1ea1i."),t.qZA())}function Wc(n,i){1&n&&t._UZ(0,"i",74)}function Gc(n,i){1&n&&(t.TgZ(0,"small",73),t._uU(1,"Vui l\xf2ng nh\u1eadp email."),t.qZA())}function Kc(n,i){1&n&&(t.TgZ(0,"small",73),t._uU(1,"Email kh\xf4ng h\u1ee3p l\u1ec7."),t.qZA())}function Yc(n,i){1&n&&(t.TgZ(0,"small",73),t._uU(1,"Email \u0111\xe3 t\u1ed3n t\u1ea1i."),t.qZA())}function Qc(n,i){1&n&&t._UZ(0,"i",74)}function jc(n,i){1&n&&(t.TgZ(0,"small",73),t._uU(1,"Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i."),t.qZA())}function zc(n,i){1&n&&(t.TgZ(0,"small",73),t._uU(1,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng h\u1ee3p l\u1ec7."),t.qZA())}function $c(n,i){1&n&&(t.TgZ(0,"small",73),t._uU(1,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\xe3 t\u1ed3n t\u1ea1i."),t.qZA())}const wn=function(n){return{"ng-invalid ng-dirty":n}};function Xc(n,i){if(1&n&&(t.TgZ(0,"form",49)(1,"div",50)(2,"div",51)(3,"label",52),t._uU(4,"H\u1ecd "),t.TgZ(5,"span",53),t._uU(6,"*"),t.qZA()(),t.TgZ(7,"div",54),t._UZ(8,"input",55),t.qZA(),t.YNc(9,Oc,2,0,"small",56),t.qZA(),t.TgZ(10,"div",57)(11,"label",58),t._uU(12,"T\xean "),t.TgZ(13,"span",53),t._uU(14,"*"),t.qZA()(),t.TgZ(15,"div",54),t._UZ(16,"input",59),t.qZA(),t.YNc(17,Lc,2,0,"small",56),t.qZA()(),t.TgZ(18,"div",60)(19,"label",61),t._uU(20,"S\u1ed1 CCCD "),t.TgZ(21,"span",53),t._uU(22,"*"),t.qZA()(),t.TgZ(23,"span",62),t.YNc(24,Vc,1,0,"i",63),t.TgZ(25,"div",54),t._UZ(26,"input",64),t.qZA()(),t.YNc(27,Jc,2,0,"small",56),t.YNc(28,Hc,2,0,"small",56),t.qZA(),t.TgZ(29,"div",60)(30,"label",65),t._uU(31,"Gi\u1edbi t\xednh"),t.qZA(),t.TgZ(32,"div",54),t._UZ(33,"p-dropdown",66),t.qZA()(),t.TgZ(34,"div",60)(35,"label",67),t._uU(36,"Email "),t.TgZ(37,"span",53),t._uU(38,"*"),t.qZA()(),t.TgZ(39,"span",62),t.YNc(40,Wc,1,0,"i",63),t.TgZ(41,"div",54),t._UZ(42,"input",68),t.qZA()(),t.YNc(43,Gc,2,0,"small",56),t.YNc(44,Kc,2,0,"small",56),t.YNc(45,Yc,2,0,"small",56),t.qZA(),t.TgZ(46,"div",60)(47,"label",69),t._uU(48,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),t.TgZ(49,"span",53),t._uU(50,"*"),t.qZA()(),t.TgZ(51,"span",62),t.YNc(52,Qc,1,0,"i",63),t.TgZ(53,"div",54),t._UZ(54,"input",70),t.qZA()(),t.YNc(55,jc,2,0,"small",56),t.YNc(56,zc,2,0,"small",56),t.YNc(57,$c,2,0,"small",56),t.qZA(),t.TgZ(58,"div",60)(59,"label",71),t._uU(60,"Ng\xe0y b\u1eaft \u0111\u1ea7u \u1edf"),t.qZA(),t.TgZ(61,"div",54),t._UZ(62,"p-calendar",72),t.qZA()()()),2&n){const e=t.oxw();let o,r,s,l,a,p,_,T,A,x;t.Q6J("formGroup",e.tenantForm),t.xp6(8),t.Q6J("ngClass",t.VKq(21,wn,e.tenantForm.controls.firstName.invalid&&(e.tenantForm.controls.firstName.dirty||e.tenantForm.controls.firstName.touched))),t.xp6(1),t.Q6J("ngIf",(null==(o=e.tenantForm.get("firstName"))?null:o.getError("required"))&&(e.tenantForm.controls.firstName.dirty||e.tenantForm.controls.firstName.touched)),t.xp6(7),t.Q6J("ngClass",t.VKq(23,wn,e.tenantForm.controls.lastName.invalid&&(e.tenantForm.controls.lastName.dirty||e.tenantForm.controls.lastName.touched))),t.xp6(1),t.Q6J("ngIf",(null==(r=e.tenantForm.get("lastName"))?null:r.getError("required"))&&(e.tenantForm.controls.lastName.dirty||e.tenantForm.controls.lastName.touched)),t.xp6(7),t.Q6J("ngIf",e.isValidating),t.xp6(2),t.Q6J("ngClass",t.VKq(25,wn,e.tenantForm.controls.identifyNum.invalid&&(e.tenantForm.controls.identifyNum.dirty||e.tenantForm.controls.identifyNum.touched))),t.xp6(1),t.Q6J("ngIf",(null==(s=e.tenantForm.get("identifyNum"))?null:s.getError("required"))&&(e.tenantForm.controls.identifyNum.dirty||e.tenantForm.controls.identifyNum.touched)),t.xp6(1),t.Q6J("ngIf",(null==(l=e.tenantForm.get("identifyNum"))?null:l.getError("duplicated"))&&(e.tenantForm.controls.identifyNum.dirty||e.tenantForm.controls.identifyNum.touched)),t.xp6(5),t.Q6J("options",e.gender),t.xp6(7),t.Q6J("ngIf",e.emailLoading),t.xp6(2),t.Q6J("ngClass",t.VKq(27,wn,e.tenantForm.controls.email.invalid&&(e.tenantForm.controls.email.dirty||e.tenantForm.controls.email.touched))),t.xp6(1),t.Q6J("ngIf",(null==(a=e.tenantForm.get("email"))?null:a.getError("required"))&&(e.tenantForm.controls.email.dirty||e.tenantForm.controls.email.touched)),t.xp6(1),t.Q6J("ngIf",(null==(p=e.tenantForm.get("email"))?null:p.getError("mailInvalid"))&&(e.tenantForm.controls.email.dirty||e.tenantForm.controls.email.touched)),t.xp6(1),t.Q6J("ngIf",(null==(_=e.tenantForm.get("email"))?null:_.getError("duplicated"))&&(e.tenantForm.controls.email.dirty||e.tenantForm.controls.email.touched)),t.xp6(7),t.Q6J("ngIf",e.phoneLoading),t.xp6(2),t.Q6J("ngClass",t.VKq(29,wn,e.tenantForm.controls.phone.invalid&&(e.tenantForm.controls.phone.dirty||e.tenantForm.controls.phone.touched))),t.xp6(1),t.Q6J("ngIf",(null==(T=e.tenantForm.get("phone"))?null:T.getError("required"))&&(e.tenantForm.controls.phone.dirty||e.tenantForm.controls.phone.touched)),t.xp6(1),t.Q6J("ngIf",(null==(A=e.tenantForm.get("phone"))?null:A.getError("phoneInvalid"))&&(e.tenantForm.controls.phone.dirty||e.tenantForm.controls.phone.touched)),t.xp6(1),t.Q6J("ngIf",(null==(x=e.tenantForm.get("phone"))?null:x.getError("duplicated"))&&(e.tenantForm.controls.phone.dirty||e.tenantForm.controls.phone.touched)),t.xp6(5),t.Q6J("touchUI",!0)}}function tu(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",75),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.hideDialog())}),t.qZA(),t.TgZ(1,"button",76),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.saveTenant())}),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.tenantForm.invalid)}}function eu(n,i){1&n&&(t.TgZ(0,"div",77),t._UZ(1,"p-progressSpinner"),t.qZA())}const nu=function(){return["firstName","lastName","room.name","startDate","isStayed","identifyNum","email","phone"]},iu=function(){return[10,20,30]},ou=function(){return{width:"450px"}};let ru=(()=>{class n{constructor(e,o,r,s,l){this.messageService=e,this.auth=o,this.accomodationService=r,this.roomService=s,this.tenantService=l,this.dataLoading=!1,this.accomodations=[],this.loading=!1,this.tentant={},this.tentants=[],this.cols=[],this.tenantDialog=!1,this.deleteTenantDialog=!1,this.rooms=[],this.returnDate=ft(Date.now()).toDate(),this.gender=Dt.$.GENDER,this.isValidating=!1,this.emailLoading=!1,this.phoneLoading=!1,this.oldIdentifyNum="",this.oldEmail="",this.oldPhone="",this.tenantForm=new E.cw({firstName:new E.NI(this.tentant.firstName,[E.kI.required]),lastName:new E.NI(this.tentant.lastName,[E.kI.required]),startDate:new E.NI(this.tentant.startDate,[]),gender:new E.NI(this.tentant.gender,[]),identifyNum:new E.NI(this.tentant.identifyNum,[E.kI.required]),phone:new E.NI(this.tentant.phone,[E.kI.required]),email:new E.NI(this.tentant.email,[E.kI.required])})}ngOnInit(){this.user=this.auth.userValue,this.getDropdownAccomodation(),this.tenantForm.get("firstName")?.valueChanges.subscribe(e=>this.tentant.firstName=e),this.tenantForm.get("lastName")?.valueChanges.subscribe(e=>this.tentant.lastName=e),this.tenantForm.get("startDate")?.valueChanges.subscribe(e=>this.tentant.startDate=e),this.tenantForm.get("identifyNum")?.valueChanges.pipe((0,Xe.b)(500),tn()).subscribe(e=>{e&&(this.tentant.identifyNum=e,this.oldIdentifyNum!==this.tentant.identifyNum&&this.checkDuplicatedIdentify())}),this.tenantForm.get("phone")?.valueChanges.subscribe(e=>{e&&(this.validatePhoneNumber(e),this.tentant.phone=e,this.oldPhone!==this.tentant.phone&&this.tenantForm.get("phone")?.valid&&this.checkDuplicatedPhone())}),this.tenantForm.get("email")?.valueChanges.subscribe(e=>{e&&(this.validateGmail(e),this.tentant.email=e,this.oldEmail!==this.tentant.email&&this.tenantForm.get("email")?.valid&&this.checkDuplicatedEmail())}),this.tenantForm.get("gender")?.valueChanges.subscribe(e=>{e&&(this.tentant.gender=e.key)})}getDropdownAccomodation(){this.loading=!0,this.accomodationService.getDropdownAccomodation(this.user?.id).pipe((0,K.x)(()=>{this.selectedAccomodation=this.accomodations[0],this.getRoomAndTenantData()})).subscribe(e=>this.accomodations=e.data)}validatePhoneNumber(e){e.toLowerCase().match(/(84|0[3|5|7|8|9])+([0-9]{8})\b/g)?this.tenantForm.get("phone")?.setErrors(null):this.tenantForm.get("phone")?.setErrors({phoneInvalid:!0})}onHideDialog(){this.tenantForm.reset()}checkDuplicatedIdentify(){let e=!1;this.isValidating=!0,this.tenantService.checkDuplicatedIdentify(this.tentant.identifyNum).pipe((0,K.x)(()=>{this.isValidating=!1,e&&this.tenantForm.get("identifyNum")?.setErrors({duplicated:!0})})).subscribe(o=>e=o.data)}checkDuplicatedEmail(){let e=!1;this.emailLoading=!0,this.tenantService.checkDuplicatedEmail(this.tentant.email).pipe((0,K.x)(()=>{this.emailLoading=!1,e&&this.tenantForm.get("email")?.setErrors({duplicated:!0})})).subscribe(o=>e=o.data)}checkDuplicatedPhone(){let e=!1;this.phoneLoading=!0,this.tenantService.checkDuplicatedPhone(this.tentant.phone).pipe((0,K.x)(()=>{this.phoneLoading=!1,e&&this.tenantForm.get("phone")?.setErrors({duplicated:!0})})).subscribe(o=>e=o.data)}openNew(){this.tentant={},this.oldIdentifyNum="",this.oldEmail="",this.oldPhone="",this.tenantForm.get("firstName")?.setValue(null),this.tenantForm.get("lastName")?.setValue(null),this.tenantForm.get("startDate")?.setValue(null),this.tenantForm.get("identifyNum")?.setValue(null),this.tenantForm.get("phone")?.setValue(null),this.tenantForm.get("email")?.setValue(null),this.tenantForm.get("gender")?.setValue({key:"UNKNOWN",value:"Ch\u01b0a bi\u1ebft"}),this.tenantDialog=!0}getRoomByAccomodation(){return this.roomService.getRoomDropDown(this.selectedAccomodation.id).pipe((0,K.x)(()=>{this.loading=!1}))}getTenantByAccomodation(){return this.tenantService.getTenantByAccomodation(this.selectedAccomodation.id).pipe((0,K.x)(()=>{this.loading=!1}))}getRoomAndTenantData(){(0,Mt.D)({rooms:this.getRoomByAccomodation(),tenants:this.getTenantByAccomodation()}).pipe((0,K.x)(()=>{this.loading=!1})).subscribe(e=>{this.rooms=e.rooms.data,this.tentants=e.tenants.data})}onSelectAccomodation(){this.loading=!0,this.getRoomAndTenantData()}editTenant(e){this.tentant={...e},this.oldIdentifyNum=e.identifyNum,this.oldEmail=e.email,this.oldPhone=e.phone,this.tenantForm.get("firstName")?.setValue(e.firstName),this.tenantForm.get("lastName")?.setValue(e.lastName),e.startDate?this.tenantForm.get("startDate")?.setValue(ft(e.startDate).toDate()):this.tenantForm.get("startDate")?.setValue(ft(new Date).toDate()),this.tenantForm.get("identifyNum")?.setValue(e.identifyNum),this.tenantForm.get("email")?.setValue(e.email),this.tenantForm.get("phone")?.setValue(e.phone);let o=this.gender.find(r=>r.key===this.tentant.gender);o?this.tenantForm.get("gender")?.setValue(o):this.tenantForm.get("gender")?.setValue({key:"UNKNOWN",value:"Ch\u01b0a bi\u1ebft"}),this.tenantDialog=!0}validateGmail(e){e.toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)?this.tenantForm.get("email")?.setErrors(null):this.tenantForm.get("email")?.setErrors({mailInvalid:!0})}hideDialog(){this.tenantDialog=!1}saveTenant(){let e;this.loading=!0,e=this.tentant.id?"Ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng":"Th\xeam th\xe0nh c\xf4ng",this.tenantService.saveTenant(this.tentant).pipe((0,K.x)(()=>{this.messageService.add({severity:"success",summary:"Successful",detail:e,life:3e3}),this.getRoomAndTenantData()})).subscribe(o=>console.log(o)),this.tenantDialog=!1}onGlobalFilter(e,o){e.filterGlobal(o.target.value,"contains")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ht.ez),t.Y36(Pt.$),t.Y36(Yt),t.Y36(Te),t.Y36(On))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-tenants"]],features:[t._Bn([ht.ez])],decls:16,vars:16,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","selectionMode","multiple","dataKey","id",3,"value","columns","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","rowHover"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Chi ti\u1ebft kh\xe1ch thu\xea tr\u1ecd",1,"p-fluid",3,"visible","modal","onHide","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["class","progress-spinner",4,"ngIf"],[1,"my-2"],["pButton","","pRipple","","label","Th\xeam","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],[1,"flex","justify-content-center"],["optionLabel","name","autoWidth","false",3,"options","ngModel","onChange","ngModelChange"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","T\xecm ki\u1ebfm...",1,"w-full","sm:w-auto",3,"input"],["pSortableColumn","firstName"],["field","firstName"],["pSortableColumn","gender"],["field","gender"],["pSortableColumn","isStayed"],["field","isStayed"],["pSortableColumn","startDate"],["field","startDate"],["pSortableColumn","identifyNum"],["field","identifyNum"],["pSortableColumn","email"],["field","email"],["pSortableColumn","phone"],["field","phone"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngIf","ngIfElse"],["isStayed",""],[1,"flex"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["severity","success","value"," \u0110ang \u1edf"],[4,"ngIf"],["severity","warning","value","\u0110\xe3 chuy\u1ec3n \u0111i"],["severity","info","value","Ch\u01b0a \u1edf"],[3,"formGroup"],[1,"formgrid","grid","w-full"],[1,"field","col-7"],["for","firstName"],[1,"mandatory-sign"],[1,"input-box"],["formControlName","firstName","type","text","pInputText","","id","firstName",3,"ngClass"],["class","ng-dirty ng-invalid",4,"ngIf"],[1,"field","col-5"],["for","lastName"],["formControlName","lastName","pInputText","","type","text","id","lastName",3,"ngClass"],[1,"field"],["for","identifyNum"],[1,"p-input-icon-right"],["class","pi pi-spin pi-spinner",4,"ngIf"],["formControlName","identifyNum","onlyNumber","","type","text","pInputText","","id","identifyNum",3,"ngClass"],["for","gender"],["id","gender","formControlName","gender","optionLabel","value","placeholder","Ch\u1ecdn gi\u1edbi t\xednh",3,"options"],["for","email"],["formControlName","email","type","text","pInputText","","id","email",3,"ngClass"],["for","phone"],["formControlName","phone","onlyNumber","","type","text","pInputText","","id","phone",3,"ngClass"],["for","name"],["formControlName","startDate","dateFormat","dd/mm/yy",3,"touchUI"],[1,"ng-dirty","ng-invalid"],[1,"pi","pi-spin","pi-spinner"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"disabled","click"],[1,"progress-spinner"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"p-toast"),t.TgZ(4,"p-toolbar",3),t.YNc(5,Nc,2,0,"ng-template",4),t.YNc(6,Fc,2,5,"ng-template",5),t.qZA(),t.TgZ(7,"p-table",6,7),t.YNc(9,Zc,6,0,"ng-template",8),t.YNc(10,Ic,23,0,"ng-template",9),t.YNc(11,Pc,22,14,"ng-template",10),t.qZA()(),t.TgZ(12,"p-dialog",11),t.NdJ("onHide",function(){return o.onHideDialog()})("visibleChange",function(s){return o.tenantDialog=s}),t.YNc(13,Xc,63,31,"ng-template",12),t.YNc(14,tu,2,1,"ng-template",13),t.qZA()()(),t.YNc(15,eu,2,0,"div",14)),2&e&&(t.xp6(7),t.Q6J("value",o.tentants)("columns",o.cols)("rows",10)("globalFilterFields",t.DdM(13,nu))("paginator",!0)("rowsPerPageOptions",t.DdM(14,iu))("showCurrentPageReport",!0)("rowHover",!0),t.xp6(5),t.Akn(t.DdM(15,ou)),t.Q6J("visible",o.tenantDialog)("modal",!0),t.xp6(3),t.Q6J("ngIf",o.loading))},dependencies:[bt.mk,bt.O5,bt.RF,bt.n9,bt.ED,ht.jx,Xt.Hq,ne.o,E._Y,E.Fj,E.JJ,E.JL,E.On,te.FN,pe.o,vn.p,Ft.iA,Ft.lQ,Ft.fz,ie.V,re.Lt,ee.G,E.sg,E.u,qe.f,yn.V,bt.uU],styles:[".p-datepicker-touch-ui{min-width:25vw!important}"]}),n})();function rr(n,i,e,o,r,s,l){try{var a=n[s](l),p=a.value}catch(_){return void e(_)}a.done?i(p):Promise.resolve(p).then(o,r)}function Ln(n){return function(){var i=this,e=arguments;return new Promise(function(o,r){var s=n.apply(i,e);function l(p){rr(s,o,r,l,a,"next",p)}function a(p){rr(s,o,r,l,a,"throw",p)}l(void 0)})}}var su=Object.defineProperty,W=(n,i,e)=>(((n,i,e)=>{i in n?su(n,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[i]=e})(n,"symbol"!=typeof i?i+"":i,e),e);class Vn{constructor(i){W(this,"rootKey"),this.rootKey=i}}const lu=Object.seal({});class rt extends Vn{constructor(i){super(i),W(this,"root"),this.root=new Array}prepForXml(i){var e;i.stack.push(this);const o=this.root.map(r=>r instanceof Vn?r.prepForXml(i):r).filter(r=>void 0!==r);return i.stack.pop(),{[this.rootKey]:o.length?1===o.length&&(null==(e=o[0])?void 0:e._attr)?o[0]:o:lu}}addChildElement(i){return this.root.push(i),this}}class Ne extends rt{prepForXml(i){const e=super.prepForXml(i);if(e&&("object"!=typeof e[this.rootKey]||Object.keys(e[this.rootKey]).length))return e}}class Ct extends Vn{constructor(i){super("_attr"),W(this,"xmlKeys"),this.root=i}prepForXml(i){const e={};return Object.keys(this.root).forEach(o=>{const r=this.root[o];void 0!==r&&(e[this.xmlKeys&&this.xmlKeys[o]||o]=r)}),{_attr:e}}}class se extends Vn{constructor(i){super("_attr"),this.root=i}prepForXml(i){return{_attr:Object.values(this.root).filter(({value:o})=>void 0!==o).reduce((o,{key:r,value:s})=>({...o,[r]:s}),{})}}}class Bt extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{val:"w:val",color:"w:color",fill:"w:fill",space:"w:space",sz:"w:sz",type:"w:type",rsidR:"w:rsidR",rsidRPr:"w:rsidRPr",rsidSect:"w:rsidSect",w:"w:w",h:"w:h",top:"w:top",right:"w:right",bottom:"w:bottom",left:"w:left",header:"w:header",footer:"w:footer",gutter:"w:gutter",linePitch:"w:linePitch",pos:"w:pos"})}}var de=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ei(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Jn,sr={},bi={exports:{}},en="object"==typeof Reflect?Reflect:null,ar=en&&"function"==typeof en.apply?en.apply:function(i,e,o){return Function.prototype.apply.call(i,e,o)};Jn=en&&"function"==typeof en.ownKeys?en.ownKeys:Object.getOwnPropertySymbols?function(i){return Object.getOwnPropertyNames(i).concat(Object.getOwnPropertySymbols(i))}:function(i){return Object.getOwnPropertyNames(i)};var lr=Number.isNaN||function(i){return i!=i};function qt(){qt.init.call(this)}bi.exports=qt,bi.exports.once=function mu(n,i){return new Promise(function(e,o){function r(l){n.removeListener(i,s),o(l)}function s(){"function"==typeof n.removeListener&&n.removeListener("error",r),e([].slice.call(arguments))}gr(n,i,s,{once:!0}),"error"!==i&&function hu(n,i,e){"function"==typeof n.on&&gr(n,"error",i,e)}(n,r,{once:!0})})},qt.EventEmitter=qt,qt.prototype._events=void 0,qt.prototype._eventsCount=0,qt.prototype._maxListeners=void 0;var cr=10;function Hn(n){if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}function ur(n){return void 0===n._maxListeners?qt.defaultMaxListeners:n._maxListeners}function pr(n,i,e,o){var r,s,l;if(Hn(e),void 0===(s=n._events)?(s=n._events=Object.create(null),n._eventsCount=0):(void 0!==s.newListener&&(n.emit("newListener",i,e.listener?e.listener:e),s=n._events),l=s[i]),void 0===l)l=s[i]=e,++n._eventsCount;else if("function"==typeof l?l=s[i]=o?[e,l]:[l,e]:o?l.unshift(e):l.push(e),(r=ur(n))>0&&l.length>r&&!l.warned){l.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(i)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=n,a.type=i,a.count=l.length,function cu(n){console&&console.warn&&console.warn(n)}(a)}return n}function uu(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function dr(n,i,e){var o={fired:!1,wrapFn:void 0,target:n,type:i,listener:e},r=uu.bind(o);return r.listener=e,o.wrapFn=r,r}function mr(n,i,e){var o=n._events;if(void 0===o)return[];var r=o[i];return void 0===r?[]:"function"==typeof r?e?[r.listener||r]:[r]:e?function du(n){for(var i=new Array(n.length),e=0;e<i.length;++e)i[e]=n[e].listener||n[e];return i}(r):fr(r,r.length)}function hr(n){var i=this._events;if(void 0!==i){var e=i[n];if("function"==typeof e)return 1;if(void 0!==e)return e.length}return 0}function fr(n,i){for(var e=new Array(i),o=0;o<i;++o)e[o]=n[o];return e}function gr(n,i,e,o){if("function"==typeof n.on)o.once?n.once(i,e):n.on(i,e);else{if("function"!=typeof n.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n);n.addEventListener(i,function r(s){o.once&&n.removeEventListener(i,r),e(s)})}}Object.defineProperty(qt,"defaultMaxListeners",{enumerable:!0,get:function(){return cr},set:function(n){if("number"!=typeof n||n<0||lr(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");cr=n}}),qt.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},qt.prototype.setMaxListeners=function(i){if("number"!=typeof i||i<0||lr(i))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+i+".");return this._maxListeners=i,this},qt.prototype.getMaxListeners=function(){return ur(this)},qt.prototype.emit=function(i){for(var e=[],o=1;o<arguments.length;o++)e.push(arguments[o]);var r="error"===i,s=this._events;if(void 0!==s)r=r&&void 0===s.error;else if(!r)return!1;if(r){var l;if(e.length>0&&(l=e[0]),l instanceof Error)throw l;var a=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw a.context=l,a}var p=s[i];if(void 0===p)return!1;if("function"==typeof p)ar(p,this,e);else{var _=p.length,T=fr(p,_);for(o=0;o<_;++o)ar(T[o],this,e)}return!0},qt.prototype.on=qt.prototype.addListener=function(i,e){return pr(this,i,e,!1)},qt.prototype.prependListener=function(i,e){return pr(this,i,e,!0)},qt.prototype.once=function(i,e){return Hn(e),this.on(i,dr(this,i,e)),this},qt.prototype.prependOnceListener=function(i,e){return Hn(e),this.prependListener(i,dr(this,i,e)),this},qt.prototype.off=qt.prototype.removeListener=function(i,e){var o,r,s,l,a;if(Hn(e),void 0===(r=this._events))return this;if(void 0===(o=r[i]))return this;if(o===e||o.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[i],r.removeListener&&this.emit("removeListener",i,o.listener||e));else if("function"!=typeof o){for(s=-1,l=o.length-1;l>=0;l--)if(o[l]===e||o[l].listener===e){a=o[l].listener,s=l;break}if(s<0)return this;0===s?o.shift():function pu(n,i){for(;i+1<n.length;i++)n[i]=n[i+1];n.pop()}(o,s),1===o.length&&(r[i]=o[0]),void 0!==r.removeListener&&this.emit("removeListener",i,a||e)}return this},qt.prototype.removeAllListeners=function(i){var e,o,r;if(void 0===(o=this._events))return this;if(void 0===o.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==o[i]&&(0==--this._eventsCount?this._events=Object.create(null):delete o[i]),this;if(0===arguments.length){var l,s=Object.keys(o);for(r=0;r<s.length;++r)"removeListener"!==(l=s[r])&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=o[i]))this.removeListener(i,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(i,e[r]);return this},qt.prototype.listeners=function(i){return mr(this,i,!0)},qt.prototype.rawListeners=function(i){return mr(this,i,!1)},qt.listenerCount=function(n,i){return"function"==typeof n.listenerCount?n.listenerCount(i):hr.call(n,i)},qt.prototype.listenerCount=hr,qt.prototype.eventNames=function(){return this._eventsCount>0?Jn(this._events):[]};var xi=bi.exports,Ti={exports:{}};Ti.exports="function"==typeof Object.create?function(i,e){e&&(i.super_=e,i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}))}:function(i,e){if(e){i.super_=e;var o=function(){};o.prototype=e.prototype,i.prototype=new o,i.prototype.constructor=i}};var _r,vr,yr,He=Ti.exports,Ci={},En={},Wn={};function bn(){return yr||(yr=1,function(n){var i=function fu(){if(_r)return En;_r=1,En.byteLength=function a(f){var b=l(f),D=b[1];return 3*(b[0]+D)/4-D},En.toByteArray=function _(f){var b,P,y=l(f),D=y[0],v=y[1],N=new e(function p(f,b,y){return 3*(b+y)/4-y}(0,D,v)),I=0,q=v>0?D-4:D;for(P=0;P<q;P+=4)b=i[f.charCodeAt(P)]<<18|i[f.charCodeAt(P+1)]<<12|i[f.charCodeAt(P+2)]<<6|i[f.charCodeAt(P+3)],N[I++]=b>>16&255,N[I++]=b>>8&255,N[I++]=255&b;return 2===v&&(b=i[f.charCodeAt(P)]<<2|i[f.charCodeAt(P+1)]>>4,N[I++]=255&b),1===v&&(b=i[f.charCodeAt(P)]<<10|i[f.charCodeAt(P+1)]<<4|i[f.charCodeAt(P+2)]>>2,N[I++]=b>>8&255,N[I++]=255&b),N},En.fromByteArray=function x(f){for(var b,y=f.length,D=y%3,v=[],N=16383,I=0,q=y-D;I<q;I+=N)v.push(A(f,I,I+N>q?q:I+N));return 1===D?v.push(n[(b=f[y-1])>>2]+n[b<<4&63]+"=="):2===D&&v.push(n[(b=(f[y-2]<<8)+f[y-1])>>10]+n[b>>4&63]+n[b<<2&63]+"="),v.join("")};for(var n=[],i=[],e=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,s=o.length;r<s;++r)n[r]=o[r],i[o.charCodeAt(r)]=r;function l(f){var b=f.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=f.indexOf("=");return-1===y&&(y=b),[y,y===b?0:4-y%4]}function T(f){return n[f>>18&63]+n[f>>12&63]+n[f>>6&63]+n[63&f]}function A(f,b,y){for(var v=[],N=b;N<y;N+=3)v.push(T((f[N]<<16&16711680)+(f[N+1]<<8&65280)+(255&f[N+2])));return v.join("")}return i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63,En}(),e=function gu(){return vr||(vr=1,Wn.read=function(n,i,e,o,r){var s,l,a=8*r-o-1,p=(1<<a)-1,_=p>>1,T=-7,A=e?r-1:0,x=e?-1:1,f=n[i+A];for(A+=x,s=f&(1<<-T)-1,f>>=-T,T+=a;T>0;s=256*s+n[i+A],A+=x,T-=8);for(l=s&(1<<-T)-1,s>>=-T,T+=o;T>0;l=256*l+n[i+A],A+=x,T-=8);if(0===s)s=1-_;else{if(s===p)return l?NaN:1/0*(f?-1:1);l+=Math.pow(2,o),s-=_}return(f?-1:1)*l*Math.pow(2,s-o)},Wn.write=function(n,i,e,o,r,s){var l,a,p,_=8*s-r-1,T=(1<<_)-1,A=T>>1,x=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=o?0:s-1,b=o?1:-1,y=i<0||0===i&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(a=isNaN(i)?1:0,l=T):(l=Math.floor(Math.log(i)/Math.LN2),i*(p=Math.pow(2,-l))<1&&(l--,p*=2),(i+=l+A>=1?x/p:x*Math.pow(2,1-A))*p>=2&&(l++,p/=2),l+A>=T?(a=0,l=T):l+A>=1?(a=(i*p-1)*Math.pow(2,r),l+=A):(a=i*Math.pow(2,A-1)*Math.pow(2,r),l=0));r>=8;n[e+f]=255&a,f+=b,a/=256,r-=8);for(l=l<<r|a,_+=r;_>0;n[e+f]=255&l,f+=b,l/=256,_-=8);n[e+f-b]|=128*y}),Wn}(),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=function N(w){return+w!=w&&(w=0),a.alloc(+w)},n.INSPECT_MAX_BYTES=50;var r=2147483647;function l(w){if(w>r)throw new RangeError('The value "'+w+'" is invalid for option "size"');var c=new Uint8Array(w);return Object.setPrototypeOf(c,a.prototype),c}function a(w,c,u){if("number"==typeof w){if("string"==typeof c)throw new TypeError('The "string" argument must be of type string. Received type number');return A(w)}return p(w,c,u)}function p(w,c,u){if("string"==typeof w)return function x(w,c){if(("string"!=typeof c||""===c)&&(c="utf8"),!a.isEncoding(c))throw new TypeError("Unknown encoding: "+c);var u=0|I(w,c),d=l(u),R=d.write(w,c);return R!==u&&(d=d.slice(0,R)),d}(w,c);if(ArrayBuffer.isView(w))return function b(w){if(tt(w,Uint8Array)){var c=new Uint8Array(w);return y(c.buffer,c.byteOffset,c.byteLength)}return f(w)}(w);if(null==w)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof w);if(tt(w,ArrayBuffer)||w&&tt(w.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(tt(w,SharedArrayBuffer)||w&&tt(w.buffer,SharedArrayBuffer)))return y(w,c,u);if("number"==typeof w)throw new TypeError('The "value" argument must not be of type number. Received type number');var d=w.valueOf&&w.valueOf();if(null!=d&&d!==w)return a.from(d,c,u);var R=function D(w){if(a.isBuffer(w)){var c=0|v(w.length),u=l(c);return 0===u.length||w.copy(u,0,0,c),u}return void 0!==w.length?"number"!=typeof w.length||m(w.length)?l(0):f(w):"Buffer"===w.type&&Array.isArray(w.data)?f(w.data):void 0}(w);if(R)return R;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof w[Symbol.toPrimitive])return a.from(w[Symbol.toPrimitive]("string"),c,u);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof w)}function _(w){if("number"!=typeof w)throw new TypeError('"size" argument must be of type number');if(w<0)throw new RangeError('The value "'+w+'" is invalid for option "size"')}function A(w){return _(w),l(w<0?0:0|v(w))}function f(w){for(var c=w.length<0?0:0|v(w.length),u=l(c),d=0;d<c;d+=1)u[d]=255&w[d];return u}function y(w,c,u){if(c<0||w.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(w.byteLength<c+(u||0))throw new RangeError('"length" is outside of buffer bounds');var d;return d=void 0===c&&void 0===u?new Uint8Array(w):void 0===u?new Uint8Array(w,c):new Uint8Array(w,c,u),Object.setPrototypeOf(d,a.prototype),d}function v(w){if(w>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|w}function I(w,c){if(a.isBuffer(w))return w.length;if(ArrayBuffer.isView(w)||tt(w,ArrayBuffer))return w.byteLength;if("string"!=typeof w)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof w);var u=w.length,d=arguments.length>2&&!0===arguments[2];if(!d&&0===u)return 0;for(var R=!1;;)switch(c){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":return h(w).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*u;case"hex":return u>>>1;case"base64":return Z(w).length;default:if(R)return d?-1:h(w).length;c=(""+c).toLowerCase(),R=!0}}function q(w,c,u){var d=!1;if((void 0===c||c<0)&&(c=0),c>this.length||((void 0===u||u>this.length)&&(u=this.length),u<=0)||(u>>>=0)<=(c>>>=0))return"";for(w||(w="utf8");;)switch(w){case"hex":return st(this,c,u);case"utf8":case"utf-8":return C(this,c,u);case"ascii":return z(this,c,u);case"latin1":case"binary":return xt(this,c,u);case"base64":return Q(this,c,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return gt(this,c,u);default:if(d)throw new TypeError("Unknown encoding: "+w);w=(w+"").toLowerCase(),d=!0}}function P(w,c,u){var d=w[c];w[c]=w[u],w[u]=d}function X(w,c,u,d,R){if(0===w.length)return-1;if("string"==typeof u?(d=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),m(u=+u)&&(u=R?0:w.length-1),u<0&&(u=w.length+u),u>=w.length){if(R)return-1;u=w.length-1}else if(u<0){if(!R)return-1;u=0}if("string"==typeof c&&(c=a.from(c,d)),a.isBuffer(c))return 0===c.length?-1:Y(w,c,u,d,R);if("number"==typeof c)return c&=255,"function"==typeof Uint8Array.prototype.indexOf?R?Uint8Array.prototype.indexOf.call(w,c,u):Uint8Array.prototype.lastIndexOf.call(w,c,u):Y(w,[c],u,d,R);throw new TypeError("val must be string, number or Buffer")}function Y(w,c,u,d,R){var at,L=1,B=w.length,ot=c.length;if(void 0!==d&&("ucs2"===(d=String(d).toLowerCase())||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(w.length<2||c.length<2)return-1;L=2,B/=2,ot/=2,u/=2}function ut($t,Oe){return 1===L?$t[Oe]:$t.readUInt16BE(Oe*L)}if(R){var dt=-1;for(at=u;at<B;at++)if(ut(w,at)===ut(c,-1===dt?0:at-dt)){if(-1===dt&&(dt=at),at-dt+1===ot)return dt*L}else-1!==dt&&(at-=at-dt),dt=-1}else for(u+ot>B&&(u=B-ot),at=u;at>=0;at--){for(var Tt=!0,Nt=0;Nt<ot;Nt++)if(ut(w,at+Nt)!==ut(c,Nt)){Tt=!1;break}if(Tt)return at}return-1}function nt(w,c,u,d){u=Number(u)||0;var R=w.length-u;d?(d=Number(d))>R&&(d=R):d=R;var L=c.length;d>L/2&&(d=L/2);for(var B=0;B<d;++B){var ot=parseInt(c.substr(2*B,2),16);if(m(ot))return B;w[u+B]=ot}return B}function F(w,c,u,d){return k(h(c,w.length-u),w,u,d)}function lt(w,c,u,d){return k(function O(w){for(var c=[],u=0;u<w.length;++u)c.push(255&w.charCodeAt(u));return c}(c),w,u,d)}function pt(w,c,u,d){return k(Z(c),w,u,d)}function U(w,c,u,d){return k(function M(w,c){for(var u,d,L=[],B=0;B<w.length&&!((c-=2)<0);++B)d=(u=w.charCodeAt(B))>>8,L.push(u%256),L.push(d);return L}(c,w.length-u),w,u,d)}function Q(w,c,u){return i.fromByteArray(0===c&&u===w.length?w:w.slice(c,u))}function C(w,c,u){u=Math.min(w.length,u);for(var d=[],R=c;R<u;){var ut,at,dt,Tt,L=w[R],B=null,ot=L>239?4:L>223?3:L>191?2:1;if(R+ot<=u)switch(ot){case 1:L<128&&(B=L);break;case 2:128==(192&(ut=w[R+1]))&&(Tt=(31&L)<<6|63&ut)>127&&(B=Tt);break;case 3:at=w[R+2],128==(192&(ut=w[R+1]))&&128==(192&at)&&(Tt=(15&L)<<12|(63&ut)<<6|63&at)>2047&&(Tt<55296||Tt>57343)&&(B=Tt);break;case 4:at=w[R+2],dt=w[R+3],128==(192&(ut=w[R+1]))&&128==(192&at)&&128==(192&dt)&&(Tt=(15&L)<<18|(63&ut)<<12|(63&at)<<6|63&dt)>65535&&Tt<1114112&&(B=Tt)}null===B?(B=65533,ot=1):B>65535&&(d.push((B-=65536)>>>10&1023|55296),B=56320|1023&B),d.push(B),R+=ot}return function _t(w){var c=w.length;if(c<=4096)return String.fromCharCode.apply(String,w);for(var u="",d=0;d<c;)u+=String.fromCharCode.apply(String,w.slice(d,d+=4096));return u}(d)}function z(w,c,u){var d="";u=Math.min(w.length,u);for(var R=c;R<u;++R)d+=String.fromCharCode(127&w[R]);return d}function xt(w,c,u){var d="";u=Math.min(w.length,u);for(var R=c;R<u;++R)d+=String.fromCharCode(w[R]);return d}function st(w,c,u){var d=w.length;(!c||c<0)&&(c=0),(!u||u<0||u>d)&&(u=d);for(var R="",L=c;L<u;++L)R+=j[w[L]];return R}function gt(w,c,u){for(var d=w.slice(c,u),R="",L=0;L<d.length-1;L+=2)R+=String.fromCharCode(d[L]+256*d[L+1]);return R}function J(w,c,u){if(w%1!=0||w<0)throw new RangeError("offset is not uint");if(w+c>u)throw new RangeError("Trying to access beyond buffer length")}function S(w,c,u,d,R,L){if(!a.isBuffer(w))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>R||c<L)throw new RangeError('"value" argument is out of bounds');if(u+d>w.length)throw new RangeError("Index out of range")}function H(w,c,u,d,R,L){if(u+d>w.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function G(w,c,u,d,R){return c=+c,u>>>=0,R||H(w,0,u,4),e.write(w,c,u,d,23,4),u+4}function it(w,c,u,d,R){return c=+c,u>>>=0,R||H(w,0,u,8),e.write(w,c,u,d,52,8),u+8}n.kMaxLength=r,!(a.TYPED_ARRAY_SUPPORT=function s(){try{var w=new Uint8Array(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,Uint8Array.prototype),Object.setPrototypeOf(w,c),42===w.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(w,c,u){return p(w,c,u)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(w,c,u){return function T(w,c,u){return _(w),w<=0?l(w):void 0!==c?"string"==typeof u?l(w).fill(c,u):l(w).fill(c):l(w)}(w,c,u)},a.allocUnsafe=function(w){return A(w)},a.allocUnsafeSlow=function(w){return A(w)},a.isBuffer=function(c){return null!=c&&!0===c._isBuffer&&c!==a.prototype},a.compare=function(c,u){if(tt(c,Uint8Array)&&(c=a.from(c,c.offset,c.byteLength)),tt(u,Uint8Array)&&(u=a.from(u,u.offset,u.byteLength)),!a.isBuffer(c)||!a.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===u)return 0;for(var d=c.length,R=u.length,L=0,B=Math.min(d,R);L<B;++L)if(c[L]!==u[L]){d=c[L],R=u[L];break}return d<R?-1:R<d?1:0},a.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(c,u){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(0===c.length)return a.alloc(0);var d;if(void 0===u)for(u=0,d=0;d<c.length;++d)u+=c[d].length;var R=a.allocUnsafe(u),L=0;for(d=0;d<c.length;++d){var B=c[d];if(tt(B,Uint8Array))L+B.length>R.length?a.from(B).copy(R,L):Uint8Array.prototype.set.call(R,B,L);else{if(!a.isBuffer(B))throw new TypeError('"list" argument must be an Array of Buffers');B.copy(R,L)}L+=B.length}return R},a.byteLength=I,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var c=this.length;if(c%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var u=0;u<c;u+=2)P(this,u,u+1);return this},a.prototype.swap32=function(){var c=this.length;if(c%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var u=0;u<c;u+=4)P(this,u,u+3),P(this,u+1,u+2);return this},a.prototype.swap64=function(){var c=this.length;if(c%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var u=0;u<c;u+=8)P(this,u,u+7),P(this,u+1,u+6),P(this,u+2,u+5),P(this,u+3,u+4);return this},a.prototype.toLocaleString=a.prototype.toString=function(){var c=this.length;return 0===c?"":0===arguments.length?C(this,0,c):q.apply(this,arguments)},a.prototype.equals=function(c){if(!a.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c||0===a.compare(this,c)},a.prototype.inspect=function(){var c="",u=n.INSPECT_MAX_BYTES;return c=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(c+=" ... "),"<Buffer "+c+">"},o&&(a.prototype[o]=a.prototype.inspect),a.prototype.compare=function(c,u,d,R,L){if(tt(c,Uint8Array)&&(c=a.from(c,c.offset,c.byteLength)),!a.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(void 0===u&&(u=0),void 0===d&&(d=c?c.length:0),void 0===R&&(R=0),void 0===L&&(L=this.length),u<0||d>c.length||R<0||L>this.length)throw new RangeError("out of range index");if(R>=L&&u>=d)return 0;if(R>=L)return-1;if(u>=d)return 1;if(this===c)return 0;for(var B=(L>>>=0)-(R>>>=0),ot=(d>>>=0)-(u>>>=0),ut=Math.min(B,ot),at=this.slice(R,L),dt=c.slice(u,d),Tt=0;Tt<ut;++Tt)if(at[Tt]!==dt[Tt]){B=at[Tt],ot=dt[Tt];break}return B<ot?-1:ot<B?1:0},a.prototype.includes=function(c,u,d){return-1!==this.indexOf(c,u,d)},a.prototype.indexOf=function(c,u,d){return X(this,c,u,d,!0)},a.prototype.lastIndexOf=function(c,u,d){return X(this,c,u,d,!1)},a.prototype.write=function(c,u,d,R){if(void 0===u)R="utf8",d=this.length,u=0;else if(void 0===d&&"string"==typeof u)R=u,d=this.length,u=0;else{if(!isFinite(u))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");u>>>=0,isFinite(d)?(d>>>=0,void 0===R&&(R="utf8")):(R=d,d=void 0)}var L=this.length-u;if((void 0===d||d>L)&&(d=L),c.length>0&&(d<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");R||(R="utf8");for(var B=!1;;)switch(R){case"hex":return nt(this,c,u,d);case"utf8":case"utf-8":return F(this,c,u,d);case"ascii":case"latin1":case"binary":return lt(this,c,u,d);case"base64":return pt(this,c,u,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,c,u,d);default:if(B)throw new TypeError("Unknown encoding: "+R);R=(""+R).toLowerCase(),B=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.slice=function(c,u){var d=this.length;(c=~~c)<0?(c+=d)<0&&(c=0):c>d&&(c=d),(u=void 0===u?d:~~u)<0?(u+=d)<0&&(u=0):u>d&&(u=d),u<c&&(u=c);var R=this.subarray(c,u);return Object.setPrototypeOf(R,a.prototype),R},a.prototype.readUintLE=a.prototype.readUIntLE=function(c,u,d){c>>>=0,u>>>=0,d||J(c,u,this.length);for(var R=this[c],L=1,B=0;++B<u&&(L*=256);)R+=this[c+B]*L;return R},a.prototype.readUintBE=a.prototype.readUIntBE=function(c,u,d){c>>>=0,u>>>=0,d||J(c,u,this.length);for(var R=this[c+--u],L=1;u>0&&(L*=256);)R+=this[c+--u]*L;return R},a.prototype.readUint8=a.prototype.readUInt8=function(c,u){return c>>>=0,u||J(c,1,this.length),this[c]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(c,u){return c>>>=0,u||J(c,2,this.length),this[c]|this[c+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(c,u){return c>>>=0,u||J(c,2,this.length),this[c]<<8|this[c+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(c,u){return c>>>=0,u||J(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+16777216*this[c+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(c,u){return c>>>=0,u||J(c,4,this.length),16777216*this[c]+(this[c+1]<<16|this[c+2]<<8|this[c+3])},a.prototype.readIntLE=function(c,u,d){c>>>=0,u>>>=0,d||J(c,u,this.length);for(var R=this[c],L=1,B=0;++B<u&&(L*=256);)R+=this[c+B]*L;return R>=(L*=128)&&(R-=Math.pow(2,8*u)),R},a.prototype.readIntBE=function(c,u,d){c>>>=0,u>>>=0,d||J(c,u,this.length);for(var R=u,L=1,B=this[c+--R];R>0&&(L*=256);)B+=this[c+--R]*L;return B>=(L*=128)&&(B-=Math.pow(2,8*u)),B},a.prototype.readInt8=function(c,u){return c>>>=0,u||J(c,1,this.length),128&this[c]?-1*(255-this[c]+1):this[c]},a.prototype.readInt16LE=function(c,u){c>>>=0,u||J(c,2,this.length);var d=this[c]|this[c+1]<<8;return 32768&d?4294901760|d:d},a.prototype.readInt16BE=function(c,u){c>>>=0,u||J(c,2,this.length);var d=this[c+1]|this[c]<<8;return 32768&d?4294901760|d:d},a.prototype.readInt32LE=function(c,u){return c>>>=0,u||J(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},a.prototype.readInt32BE=function(c,u){return c>>>=0,u||J(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},a.prototype.readFloatLE=function(c,u){return c>>>=0,u||J(c,4,this.length),e.read(this,c,!0,23,4)},a.prototype.readFloatBE=function(c,u){return c>>>=0,u||J(c,4,this.length),e.read(this,c,!1,23,4)},a.prototype.readDoubleLE=function(c,u){return c>>>=0,u||J(c,8,this.length),e.read(this,c,!0,52,8)},a.prototype.readDoubleBE=function(c,u){return c>>>=0,u||J(c,8,this.length),e.read(this,c,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(c,u,d,R){c=+c,u>>>=0,d>>>=0,R||S(this,c,u,d,Math.pow(2,8*d)-1,0);var B=1,ot=0;for(this[u]=255&c;++ot<d&&(B*=256);)this[u+ot]=c/B&255;return u+d},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(c,u,d,R){c=+c,u>>>=0,d>>>=0,R||S(this,c,u,d,Math.pow(2,8*d)-1,0);var B=d-1,ot=1;for(this[u+B]=255&c;--B>=0&&(ot*=256);)this[u+B]=c/ot&255;return u+d},a.prototype.writeUint8=a.prototype.writeUInt8=function(c,u,d){return c=+c,u>>>=0,d||S(this,c,u,1,255,0),this[u]=255&c,u+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(c,u,d){return c=+c,u>>>=0,d||S(this,c,u,2,65535,0),this[u]=255&c,this[u+1]=c>>>8,u+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(c,u,d){return c=+c,u>>>=0,d||S(this,c,u,2,65535,0),this[u]=c>>>8,this[u+1]=255&c,u+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(c,u,d){return c=+c,u>>>=0,d||S(this,c,u,4,4294967295,0),this[u+3]=c>>>24,this[u+2]=c>>>16,this[u+1]=c>>>8,this[u]=255&c,u+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(c,u,d){return c=+c,u>>>=0,d||S(this,c,u,4,4294967295,0),this[u]=c>>>24,this[u+1]=c>>>16,this[u+2]=c>>>8,this[u+3]=255&c,u+4},a.prototype.writeIntLE=function(c,u,d,R){if(c=+c,u>>>=0,!R){var L=Math.pow(2,8*d-1);S(this,c,u,d,L-1,-L)}var B=0,ot=1,ut=0;for(this[u]=255&c;++B<d&&(ot*=256);)c<0&&0===ut&&0!==this[u+B-1]&&(ut=1),this[u+B]=(c/ot>>0)-ut&255;return u+d},a.prototype.writeIntBE=function(c,u,d,R){if(c=+c,u>>>=0,!R){var L=Math.pow(2,8*d-1);S(this,c,u,d,L-1,-L)}var B=d-1,ot=1,ut=0;for(this[u+B]=255&c;--B>=0&&(ot*=256);)c<0&&0===ut&&0!==this[u+B+1]&&(ut=1),this[u+B]=(c/ot>>0)-ut&255;return u+d},a.prototype.writeInt8=function(c,u,d){return c=+c,u>>>=0,d||S(this,c,u,1,127,-128),c<0&&(c=255+c+1),this[u]=255&c,u+1},a.prototype.writeInt16LE=function(c,u,d){return c=+c,u>>>=0,d||S(this,c,u,2,32767,-32768),this[u]=255&c,this[u+1]=c>>>8,u+2},a.prototype.writeInt16BE=function(c,u,d){return c=+c,u>>>=0,d||S(this,c,u,2,32767,-32768),this[u]=c>>>8,this[u+1]=255&c,u+2},a.prototype.writeInt32LE=function(c,u,d){return c=+c,u>>>=0,d||S(this,c,u,4,2147483647,-2147483648),this[u]=255&c,this[u+1]=c>>>8,this[u+2]=c>>>16,this[u+3]=c>>>24,u+4},a.prototype.writeInt32BE=function(c,u,d){return c=+c,u>>>=0,d||S(this,c,u,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[u]=c>>>24,this[u+1]=c>>>16,this[u+2]=c>>>8,this[u+3]=255&c,u+4},a.prototype.writeFloatLE=function(c,u,d){return G(this,c,u,!0,d)},a.prototype.writeFloatBE=function(c,u,d){return G(this,c,u,!1,d)},a.prototype.writeDoubleLE=function(c,u,d){return it(this,c,u,!0,d)},a.prototype.writeDoubleBE=function(c,u,d){return it(this,c,u,!1,d)},a.prototype.copy=function(c,u,d,R){if(!a.isBuffer(c))throw new TypeError("argument should be a Buffer");if(d||(d=0),!R&&0!==R&&(R=this.length),u>=c.length&&(u=c.length),u||(u=0),R>0&&R<d&&(R=d),R===d||0===c.length||0===this.length)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(d<0||d>=this.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("sourceEnd out of bounds");R>this.length&&(R=this.length),c.length-u<R-d&&(R=c.length-u+d);var L=R-d;return this===c&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(u,d,R):Uint8Array.prototype.set.call(c,this.subarray(d,R),u),L},a.prototype.fill=function(c,u,d,R){if("string"==typeof c){if("string"==typeof u?(R=u,u=0,d=this.length):"string"==typeof d&&(R=d,d=this.length),void 0!==R&&"string"!=typeof R)throw new TypeError("encoding must be a string");if("string"==typeof R&&!a.isEncoding(R))throw new TypeError("Unknown encoding: "+R);if(1===c.length){var L=c.charCodeAt(0);("utf8"===R&&L<128||"latin1"===R)&&(c=L)}}else"number"==typeof c?c&=255:"boolean"==typeof c&&(c=Number(c));if(u<0||this.length<u||this.length<d)throw new RangeError("Out of range index");if(d<=u)return this;var B;if(u>>>=0,d=void 0===d?this.length:d>>>0,c||(c=0),"number"==typeof c)for(B=u;B<d;++B)this[B]=c;else{var ot=a.isBuffer(c)?c:a.from(c,R),ut=ot.length;if(0===ut)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(B=0;B<d-u;++B)this[B+u]=ot[B%ut]}return this};var V=/[^+/0-9A-Za-z-_]/g;function h(w,c){c=c||1/0;for(var u,d=w.length,R=null,L=[],B=0;B<d;++B){if((u=w.charCodeAt(B))>55295&&u<57344){if(!R){if(u>56319){(c-=3)>-1&&L.push(239,191,189);continue}if(B+1===d){(c-=3)>-1&&L.push(239,191,189);continue}R=u;continue}if(u<56320){(c-=3)>-1&&L.push(239,191,189),R=u;continue}u=65536+(R-55296<<10|u-56320)}else R&&(c-=3)>-1&&L.push(239,191,189);if(R=null,u<128){if((c-=1)<0)break;L.push(u)}else if(u<2048){if((c-=2)<0)break;L.push(u>>6|192,63&u|128)}else if(u<65536){if((c-=3)<0)break;L.push(u>>12|224,u>>6&63|128,63&u|128)}else{if(!(u<1114112))throw new Error("Invalid code point");if((c-=4)<0)break;L.push(u>>18|240,u>>12&63|128,u>>6&63|128,63&u|128)}}return L}function Z(w){return i.toByteArray(function g(w){if((w=(w=w.split("=")[0]).trim().replace(V,"")).length<2)return"";for(;w.length%4!=0;)w+="=";return w}(w))}function k(w,c,u,d){for(var R=0;R<d&&!(R+u>=c.length||R>=w.length);++R)c[R+u]=w[R];return R}function tt(w,c){return w instanceof c||null!=w&&null!=w.constructor&&null!=w.constructor.name&&w.constructor.name===c.name}function m(w){return w!=w}var j=function(){for(var w="0123456789abcdef",c=new Array(256),u=0;u<16;++u)for(var d=16*u,R=0;R<16;++R)c[d+R]=w[u]+w[R];return c}()}(Ci)),Ci}bn();var _e,ve,wr={exports:{}},Lt=wr.exports={};function Ai(){throw new Error("setTimeout has not been defined")}function Ni(){throw new Error("clearTimeout has not been defined")}function Er(n){if(_e===setTimeout)return setTimeout(n,0);if((_e===Ai||!_e)&&setTimeout)return _e=setTimeout,setTimeout(n,0);try{return _e(n,0)}catch{try{return _e.call(null,n,0)}catch{return _e.call(this,n,0)}}}!function(){try{_e="function"==typeof setTimeout?setTimeout:Ai}catch{_e=Ai}try{ve="function"==typeof clearTimeout?clearTimeout:Ni}catch{ve=Ni}}();var We,De=[],nn=!1,Gn=-1;function vu(){!nn||!We||(nn=!1,We.length?De=We.concat(De):Gn=-1,De.length&&br())}function br(){if(!nn){var n=Er(vu);nn=!0;for(var i=De.length;i;){for(We=De,De=[];++Gn<i;)We&&We[Gn].run();Gn=-1,i=De.length}We=null,nn=!1,function _u(n){if(ve===clearTimeout)return clearTimeout(n);if((ve===Ni||!ve)&&clearTimeout)return ve=clearTimeout,clearTimeout(n);try{ve(n)}catch{try{return ve.call(null,n)}catch{return ve.call(this,n)}}}(n)}}function xr(n,i){this.fun=n,this.array=i}function Fe(){}Lt.nextTick=function(n){var i=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)i[e-1]=arguments[e];De.push(new xr(n,i)),1===De.length&&!nn&&Er(br)},xr.prototype.run=function(){this.fun.apply(null,this.array)},Lt.title="browser",Lt.browser=!0,Lt.env={},Lt.argv=[],Lt.version="",Lt.versions={},Lt.on=Fe,Lt.addListener=Fe,Lt.once=Fe,Lt.off=Fe,Lt.removeListener=Fe,Lt.removeAllListeners=Fe,Lt.emit=Fe,Lt.prependListener=Fe,Lt.prependOnceListener=Fe,Lt.listeners=function(n){return[]},Lt.binding=function(n){throw new Error("process.binding is not supported")},Lt.cwd=function(){return"/"},Lt.chdir=function(n){throw new Error("process.chdir is not supported")},Lt.umask=function(){return 0};const Zt=Ei(wr.exports);var Di,Tr;function Cr(){return Tr||(Tr=1,Di=xi.EventEmitter),Di}!function(n){function i(){var o=this||self;return delete n.prototype.__magic__,o}"object"==typeof globalThis?globalThis:this?i():(n.defineProperty(n.prototype,"__magic__",{configurable:!0,get:i}),__magic__)}(Object);var Ii,Ar,Si,Dr,ki,Fr,Ri,Zr,qi,Ir,Mi,Sr,Bi,kr,Fi={},Zi={};function Nr(){return Ar||(Ar=1,Ii=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var i={},e=Symbol("test"),o=Object(e);if("string"==typeof e||"[object Symbol]"!==Object.prototype.toString.call(e)||"[object Symbol]"!==Object.prototype.toString.call(o))return!1;for(e in i[e]=42,i)return!1;if("function"==typeof Object.keys&&0!==Object.keys(i).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(i).length)return!1;var s=Object.getOwnPropertySymbols(i);if(1!==s.length||s[0]!==e||!Object.prototype.propertyIsEnumerable.call(i,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var l=Object.getOwnPropertyDescriptor(i,e);if(42!==l.value||!0!==l.enumerable)return!1}return!0}),Ii}function Kn(){if(Dr)return Si;Dr=1;var n=Nr();return Si=function(){return n()&&!!Symbol.toStringTag}}function Ui(){if(Ir)return qi;Ir=1;var n=function Eu(){if(Zr)return Ri;Zr=1;var n="Function.prototype.bind called on incompatible ",i=Array.prototype.slice,e=Object.prototype.toString,o="[object Function]";return Ri=function(s){var l=this;if("function"!=typeof l||e.call(l)!==o)throw new TypeError(n+l);for(var p,a=i.call(arguments,1),_=function(){if(this instanceof p){var b=l.apply(this,a.concat(i.call(arguments)));return Object(b)===b?b:this}return l.apply(s,a.concat(i.call(arguments)))},T=Math.max(0,l.length-a.length),A=[],x=0;x<T;x++)A.push("$"+x);if(p=Function("binder","return function ("+A.join(",")+"){ return binder.apply(this,arguments); }")(_),l.prototype){var f=function(){};f.prototype=l.prototype,p.prototype=new f,f.prototype=null}return p},Ri}();return qi=Function.prototype.bind||n}function Pi(){if(kr)return Bi;kr=1;var n,i=SyntaxError,e=Function,o=TypeError,r=function(lt){try{return e('"use strict"; return ('+lt+").constructor;")()}catch{}},s=Object.getOwnPropertyDescriptor;if(s)try{s({},"")}catch{s=null}var l=function(){throw new o},a=s?function(){try{return l}catch{try{return s(arguments,"callee").get}catch{return l}}}():l,p=function wu(){if(Fr)return ki;Fr=1;var n=typeof Symbol<"u"&&Symbol,i=Nr();return ki=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&i()}}()(),_=Object.getPrototypeOf||function(lt){return lt.__proto__},T={},A=typeof Uint8Array>"u"?n:_(Uint8Array),x={"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":p?_([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":T,"%AsyncGenerator%":T,"%AsyncGeneratorFunction%":T,"%AsyncIteratorPrototype%":T,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":e,"%GeneratorFunction%":T,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":p?_(_([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!p?n:_((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!p?n:_((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":p?_(""[Symbol.iterator]()):n,"%Symbol%":p?Symbol:n,"%SyntaxError%":i,"%ThrowTypeError%":a,"%TypedArray%":A,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet},f=function lt(pt){var U;if("%AsyncFunction%"===pt)U=r("async function () {}");else if("%GeneratorFunction%"===pt)U=r("function* () {}");else if("%AsyncGeneratorFunction%"===pt)U=r("async function* () {}");else if("%AsyncGenerator%"===pt){var Q=lt("%AsyncGeneratorFunction%");Q&&(U=Q.prototype)}else if("%AsyncIteratorPrototype%"===pt){var C=lt("%AsyncGenerator%");C&&(U=_(C.prototype))}return x[pt]=U,U},b={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},y=Ui(),D=function bu(){if(Sr)return Mi;Sr=1;var n=Ui();return Mi=n.call(Function.call,Object.prototype.hasOwnProperty)}(),v=y.call(Function.call,Array.prototype.concat),N=y.call(Function.apply,Array.prototype.splice),I=y.call(Function.call,String.prototype.replace),q=y.call(Function.call,String.prototype.slice),P=y.call(Function.call,RegExp.prototype.exec),X=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Y=/\\(\\)?/g,nt=function(pt){var U=q(pt,0,1),Q=q(pt,-1);if("%"===U&&"%"!==Q)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===Q&&"%"!==U)throw new i("invalid intrinsic syntax, expected opening `%`");var C=[];return I(pt,X,function(et,_t,z,xt){C[C.length]=z?I(xt,Y,"$1"):_t||et}),C},F=function(pt,U){var C,Q=pt;if(D(b,Q)&&(Q="%"+(C=b[Q])[0]+"%"),D(x,Q)){var et=x[Q];if(et===T&&(et=f(Q)),typeof et>"u"&&!U)throw new o("intrinsic "+pt+" exists, but is not available. Please file an issue!");return{alias:C,name:Q,value:et}}throw new i("intrinsic "+pt+" does not exist!")};return Bi=function(pt,U){if("string"!=typeof pt||0===pt.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof U)throw new o('"allowMissing" argument must be a boolean');if(null===P(/^%?[^%]*%?$/,pt))throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Q=nt(pt),C=Q.length>0?Q[0]:"",et=F("%"+C+"%",U),_t=et.name,z=et.value,xt=!1,st=et.alias;st&&(C=st[0],N(Q,v([0,1],st)));for(var gt=1,J=!0;gt<Q.length;gt+=1){var S=Q[gt],H=q(S,0,1),G=q(S,-1);if(('"'===H||"'"===H||"`"===H||'"'===G||"'"===G||"`"===G)&&H!==G)throw new i("property names with quotes must have matching quotes");if(("constructor"===S||!J)&&(xt=!0),D(x,_t="%"+(C+="."+S)+"%"))z=x[_t];else if(null!=z){if(!(S in z)){if(!U)throw new o("base intrinsic for "+pt+" exists, but the property is not available.");return}if(s&&gt+1>=Q.length){var it=s(z,S);z=(J=!!it)&&"get"in it&&!("originalValue"in it.get)?it.get:z[S]}else J=D(z,S),z=z[S];J&&!xt&&(x[_t]=z)}}return z},Bi}var Rr,Li,qr,Ji,Ur,Hi,Mr,Wi,Br,Gi,Pr,Ki,Lr,Yi,Jr,Qi,Wr,ji,Kr,Yr,zi,Qr,jr,$i,$r,Xi,Xr,Oi={exports:{}};function Vi(){if(qr)return Li;qr=1;var n=Pi(),i=function xu(){return Rr||(Rr=1,function(n){var i=Ui(),e=Pi(),o=e("%Function.prototype.apply%"),r=e("%Function.prototype.call%"),s=e("%Reflect.apply%",!0)||i.call(r,o),l=e("%Object.getOwnPropertyDescriptor%",!0),a=e("%Object.defineProperty%",!0),p=e("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}n.exports=function(A){var x=s(i,r,arguments);return l&&a&&l(x,"length").configurable&&a(x,"length",{value:1+p(0,A.length-(arguments.length-1))}),x};var _=function(){return s(i,o,arguments)};a?a(n.exports,"apply",{value:_}):n.exports.apply=_}(Oi)),Oi.exports}(),e=i(n("String.prototype.indexOf"));return Li=function(r,s){var l=n(r,!!s);return"function"==typeof l&&e(r,".prototype.")>-1?i(l):l}}function Or(){if(Pr)return Gi;Pr=1;var n=function Au(){if(Br)return Wi;Br=1;var e,o,n=Function.prototype.toString,i="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof i&&"function"==typeof Object.defineProperty)try{e=Object.defineProperty({},"length",{get:function(){throw o}}),o={},i(function(){throw 42},null,e)}catch(N){N!==o&&(i=null)}else i=null;var r=/^\s*class\b/,s=function(I){try{var q=n.call(I);return r.test(q)}catch{return!1}},l=function(I){try{return!s(I)&&(n.call(I),!0)}catch{return!1}},a=Object.prototype.toString,b="function"==typeof Symbol&&!!Symbol.toStringTag,y=!(0 in[,]),D=function(){return!1};if("object"==typeof document){var v=document.all;a.call(v)===a.call(document.all)&&(D=function(I){if((y||!I)&&(typeof I>"u"||"object"==typeof I))try{var q=a.call(I);return("[object HTMLAllCollection]"===q||"[object HTML document.all class]"===q||"[object HTMLCollection]"===q||"[object Object]"===q)&&null==I("")}catch{}return!1})}return Wi=i?function(I){if(D(I))return!0;if(!I||"function"!=typeof I&&"object"!=typeof I)return!1;try{i(I,null,e)}catch(q){if(q!==o)return!1}return!s(I)&&l(I)}:function(I){if(D(I))return!0;if(!I||"function"!=typeof I&&"object"!=typeof I)return!1;if(b)return l(I);if(s(I))return!1;var q=a.call(I);return!("[object Function]"!==q&&"[object GeneratorFunction]"!==q&&!/^\[object HTML/.test(q))&&l(I)}}(),i=Object.prototype.toString,e=Object.prototype.hasOwnProperty,o=function(p,_,T){for(var A=0,x=p.length;A<x;A++)e.call(p,A)&&(null==T?_(p[A],A,p):_.call(T,p[A],A,p))},r=function(p,_,T){for(var A=0,x=p.length;A<x;A++)null==T?_(p.charAt(A),A,p):_.call(T,p.charAt(A),A,p)},s=function(p,_,T){for(var A in p)e.call(p,A)&&(null==T?_(p[A],A,p):_.call(T,p[A],A,p))};return Gi=function(p,_,T){if(!n(_))throw new TypeError("iterator must be a function");var A;arguments.length>=3&&(A=T),"[object Array]"===i.call(p)?o(p,_,A):"string"==typeof p?r(p,_,A):s(p,_,A)},Gi}function Vr(){if(Lr)return Ki;Lr=1;var n=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],i=typeof globalThis>"u"?de:globalThis;return Ki=function(){for(var o=[],r=0;r<n.length;r++)"function"==typeof i[n[r]]&&(o[o.length]=n[r]);return o}}function Hr(){if(Jr)return Yi;Jr=1;var i=Pi()("%Object.getOwnPropertyDescriptor%",!0);if(i)try{i([],"length")}catch{i=null}return Yi=i}function Gr(){if(Wr)return Qi;Wr=1;var n=Or(),i=Vr(),e=Vi(),o=e("Object.prototype.toString"),r=Kn()(),s=Hr(),l=typeof globalThis>"u"?de:globalThis,a=i(),p=e("Array.prototype.indexOf",!0)||function(b,y){for(var D=0;D<b.length;D+=1)if(b[D]===y)return D;return-1},_=e("String.prototype.slice"),T={},A=Object.getPrototypeOf;return r&&s&&A&&n(a,function(f){var b=new l[f];if(Symbol.toStringTag in b){var y=A(b),D=s(y,Symbol.toStringTag);if(!D){var v=A(y);D=s(v,Symbol.toStringTag)}T[f]=D.get}}),Qi=function(b){if(!b||"object"!=typeof b)return!1;if(!r||!(Symbol.toStringTag in b)){var y=_(o(b),8,-1);return p(a,y)>-1}return!!s&&function(b){var y=!1;return n(T,function(D,v){if(!y)try{y=D.call(b)===v}catch{}}),y}(b)}}function Du(){return Yr||(Yr=1,function(n){var i=function Tu(){if(Ur)return Ji;Ur=1;var n=Kn()(),e=Vi()("Object.prototype.toString"),o=function(a){return!(n&&a&&"object"==typeof a&&Symbol.toStringTag in a)&&"[object Arguments]"===e(a)},r=function(a){return!!o(a)||null!==a&&"object"==typeof a&&"number"==typeof a.length&&a.length>=0&&"[object Array]"!==e(a)&&"[object Function]"===e(a.callee)},s=function(){return o(arguments)}();return o.isLegacyArguments=r,Ji=s?o:r}(),e=function Cu(){if(Mr)return Hi;Mr=1;var l,n=Object.prototype.toString,i=Function.prototype.toString,e=/^\s*(?:function)?\*/,o=Kn()(),r=Object.getPrototypeOf;return Hi=function(p){if("function"!=typeof p)return!1;if(e.test(i.call(p)))return!0;if(!o)return"[object GeneratorFunction]"===n.call(p);if(!r)return!1;if(typeof l>"u"){var T=function(){if(!o)return!1;try{return Function("return function*() {}")()}catch{}}();l=!!T&&r(T)}return r(p)===l}}(),o=function Nu(){if(Kr)return ji;Kr=1;var n=Or(),i=Vr(),e=Vi(),o=Hr(),r=e("Object.prototype.toString"),s=Kn()(),l=typeof globalThis>"u"?de:globalThis,a=i(),p=e("String.prototype.slice"),_={},T=Object.getPrototypeOf;s&&o&&T&&n(a,function(f){if("function"==typeof l[f]){var b=new l[f];if(Symbol.toStringTag in b){var y=T(b),D=o(y,Symbol.toStringTag);if(!D){var v=T(y);D=o(v,Symbol.toStringTag)}_[f]=D.get}}});var x=Gr();return ji=function(b){return!!x(b)&&(s&&Symbol.toStringTag in b?function(b){var y=!1;return n(_,function(D,v){if(!y)try{var N=D.call(b);N===v&&(y=N)}catch{}}),y}(b):p(r(b),8,-1))}}(),r=Gr();function s(d){return d.call.bind(d)}var l=typeof BigInt<"u",a=typeof Symbol<"u",p=s(Object.prototype.toString),_=s(Number.prototype.valueOf),T=s(String.prototype.valueOf),A=s(Boolean.prototype.valueOf);if(l)var x=s(BigInt.prototype.valueOf);if(a)var f=s(Symbol.prototype.valueOf);function b(d,R){if("object"!=typeof d)return!1;try{return R(d),!0}catch{return!1}}function U(d){return"[object Map]"===p(d)}function C(d){return"[object Set]"===p(d)}function _t(d){return"[object WeakMap]"===p(d)}function xt(d){return"[object WeakSet]"===p(d)}function gt(d){return"[object ArrayBuffer]"===p(d)}function J(d){return!(typeof ArrayBuffer>"u")&&(gt.working?gt(d):d instanceof ArrayBuffer)}function S(d){return"[object DataView]"===p(d)}function H(d){return!(typeof DataView>"u")&&(S.working?S(d):d instanceof DataView)}n.isArgumentsObject=i,n.isGeneratorFunction=e,n.isTypedArray=r,n.isPromise=function y(d){return typeof Promise<"u"&&d instanceof Promise||null!==d&&"object"==typeof d&&"function"==typeof d.then&&"function"==typeof d.catch},n.isArrayBufferView=function D(d){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(d):r(d)||H(d)},n.isUint8Array=function v(d){return"Uint8Array"===o(d)},n.isUint8ClampedArray=function N(d){return"Uint8ClampedArray"===o(d)},n.isUint16Array=function I(d){return"Uint16Array"===o(d)},n.isUint32Array=function q(d){return"Uint32Array"===o(d)},n.isInt8Array=function P(d){return"Int8Array"===o(d)},n.isInt16Array=function X(d){return"Int16Array"===o(d)},n.isInt32Array=function Y(d){return"Int32Array"===o(d)},n.isFloat32Array=function nt(d){return"Float32Array"===o(d)},n.isFloat64Array=function F(d){return"Float64Array"===o(d)},n.isBigInt64Array=function lt(d){return"BigInt64Array"===o(d)},n.isBigUint64Array=function pt(d){return"BigUint64Array"===o(d)},U.working=typeof Map<"u"&&U(new Map),n.isMap=function Q(d){return!(typeof Map>"u")&&(U.working?U(d):d instanceof Map)},C.working=typeof Set<"u"&&C(new Set),n.isSet=function et(d){return!(typeof Set>"u")&&(C.working?C(d):d instanceof Set)},_t.working=typeof WeakMap<"u"&&_t(new WeakMap),n.isWeakMap=function z(d){return!(typeof WeakMap>"u")&&(_t.working?_t(d):d instanceof WeakMap)},xt.working=typeof WeakSet<"u"&&xt(new WeakSet),n.isWeakSet=function st(d){return xt(d)},gt.working=typeof ArrayBuffer<"u"&&gt(new ArrayBuffer),n.isArrayBuffer=J,S.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&S(new DataView(new ArrayBuffer(1),0,1)),n.isDataView=H;var G=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function it(d){return"[object SharedArrayBuffer]"===p(d)}function V(d){return!(typeof G>"u")&&(typeof it.working>"u"&&(it.working=it(new G)),it.working?it(d):d instanceof G)}function k(d){return b(d,_)}function tt(d){return b(d,T)}function m(d){return b(d,A)}function j(d){return l&&b(d,x)}function w(d){return a&&b(d,f)}n.isSharedArrayBuffer=V,n.isAsyncFunction=function g(d){return"[object AsyncFunction]"===p(d)},n.isMapIterator=function h(d){return"[object Map Iterator]"===p(d)},n.isSetIterator=function O(d){return"[object Set Iterator]"===p(d)},n.isGeneratorObject=function M(d){return"[object Generator]"===p(d)},n.isWebAssemblyCompiledModule=function Z(d){return"[object WebAssembly.Module]"===p(d)},n.isNumberObject=k,n.isStringObject=tt,n.isBooleanObject=m,n.isBigIntObject=j,n.isSymbolObject=w,n.isBoxedPrimitive=function c(d){return k(d)||tt(d)||m(d)||j(d)||w(d)},n.isAnyArrayBuffer=function u(d){return typeof Uint8Array<"u"&&(J(d)||V(d))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(d){Object.defineProperty(n,d,{enumerable:!1,value:function(){throw new Error(d+" is not supported in userland")}})})}(Zi)),Zi}function zr(){return jr||(jr=1,function(n){var i=Object.getOwnPropertyDescriptors||function(H){for(var G=Object.keys(H),it={},V=0;V<G.length;V++)it[G[V]]=Object.getOwnPropertyDescriptor(H,G[V]);return it},e=/%[sdj%]/g;n.format=function(S){if(!P(S)){for(var H=[],G=0;G<arguments.length;G++)H.push(l(arguments[G]));return H.join(" ")}G=1;for(var it=arguments,V=it.length,g=String(S).replace(e,function(O){if("%%"===O)return"%";if(G>=V)return O;switch(O){case"%s":return String(it[G++]);case"%d":return Number(it[G++]);case"%j":try{return JSON.stringify(it[G++])}catch{return"[Circular]"}default:return O}}),h=it[G];G<V;h=it[++G])N(h)||!F(h)?g+=" "+h:g+=" "+l(h);return g},n.deprecate=function(S,H){if(typeof Zt<"u"&&!0===Zt.noDeprecation)return S;if(typeof Zt>"u")return function(){return n.deprecate(S,H).apply(this,arguments)};var G=!1;return function it(){if(!G){if(Zt.throwDeprecation)throw new Error(H);Zt.traceDeprecation?console.trace(H):console.error(H),G=!0}return S.apply(this,arguments)}};var o={},r=/^$/;if(Zt.env.NODE_DEBUG){var s=Zt.env.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),r=new RegExp("^"+s+"$","i")}function l(S,H){var G={seen:[],stylize:p};return arguments.length>=3&&(G.depth=arguments[2]),arguments.length>=4&&(G.colors=arguments[3]),v(H)?G.showHidden=H:H&&n._extend(G,H),Y(G.showHidden)&&(G.showHidden=!1),Y(G.depth)&&(G.depth=2),Y(G.colors)&&(G.colors=!1),Y(G.customInspect)&&(G.customInspect=!0),G.colors&&(G.stylize=a),T(G,S,G.depth)}function a(S,H){var G=l.styles[H];return G?"\x1b["+l.colors[G][0]+"m"+S+"\x1b["+l.colors[G][1]+"m":S}function p(S,H){return S}function T(S,H,G){if(S.customInspect&&H&&U(H.inspect)&&H.inspect!==n.inspect&&(!H.constructor||H.constructor.prototype!==H)){var it=H.inspect(G,S);return P(it)||(it=T(S,it,G)),it}var V=function A(S,H){if(Y(H))return S.stylize("undefined","undefined");if(P(H)){var G="'"+JSON.stringify(H).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return S.stylize(G,"string")}return q(H)?S.stylize(""+H,"number"):v(H)?S.stylize(""+H,"boolean"):N(H)?S.stylize("null","null"):void 0}(S,H);if(V)return V;var g=Object.keys(H),h=function _(S){var H={};return S.forEach(function(G,it){H[G]=!0}),H}(g);if(S.showHidden&&(g=Object.getOwnPropertyNames(H)),pt(H)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return x(H);if(0===g.length){if(U(H))return S.stylize("[Function"+(H.name?": "+H.name:"")+"]","special");if(nt(H))return S.stylize(RegExp.prototype.toString.call(H),"regexp");if(lt(H))return S.stylize(Date.prototype.toString.call(H),"date");if(pt(H))return x(H)}var m,M="",Z=!1,k=["{","}"];return D(H)&&(Z=!0,k=["[","]"]),U(H)&&(M=" [Function"+(H.name?": "+H.name:"")+"]"),nt(H)&&(M=" "+RegExp.prototype.toString.call(H)),lt(H)&&(M=" "+Date.prototype.toUTCString.call(H)),pt(H)&&(M=" "+x(H)),0!==g.length||Z&&0!=H.length?G<0?nt(H)?S.stylize(RegExp.prototype.toString.call(H),"regexp"):S.stylize("[Object]","special"):(S.seen.push(H),m=Z?function f(S,H,G,it,V){for(var g=[],h=0,O=H.length;h<O;++h)xt(H,String(h))?g.push(b(S,H,G,it,String(h),!0)):g.push("");return V.forEach(function(M){M.match(/^\d+$/)||g.push(b(S,H,G,it,M,!0))}),g}(S,H,G,h,g):g.map(function(j){return b(S,H,G,h,j,Z)}),S.seen.pop(),function y(S,H,G){var it=S.reduce(function(V,g){return g.indexOf("\n"),V+g.replace(/\u001b\[\d\d?m/g,"").length+1},0);return it>60?G[0]+(""===H?"":H+"\n ")+" "+S.join(",\n  ")+" "+G[1]:G[0]+H+" "+S.join(", ")+" "+G[1]}(m,M,k)):k[0]+M+k[1]}function x(S){return"["+Error.prototype.toString.call(S)+"]"}function b(S,H,G,it,V,g){var h,O,M;if((M=Object.getOwnPropertyDescriptor(H,V)||{value:H[V]}).get?O=S.stylize(M.set?"[Getter/Setter]":"[Getter]","special"):M.set&&(O=S.stylize("[Setter]","special")),xt(it,V)||(h="["+V+"]"),O||(S.seen.indexOf(M.value)<0?(O=N(G)?T(S,M.value,null):T(S,M.value,G-1)).indexOf("\n")>-1&&(O=g?O.split("\n").map(function(Z){return"  "+Z}).join("\n").slice(2):"\n"+O.split("\n").map(function(Z){return"   "+Z}).join("\n")):O=S.stylize("[Circular]","special")),Y(h)){if(g&&V.match(/^\d+$/))return O;(h=JSON.stringify(""+V)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(h=h.slice(1,-1),h=S.stylize(h,"name")):(h=h.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),h=S.stylize(h,"string"))}return h+": "+O}function D(S){return Array.isArray(S)}function v(S){return"boolean"==typeof S}function N(S){return null===S}function q(S){return"number"==typeof S}function P(S){return"string"==typeof S}function Y(S){return void 0===S}function nt(S){return F(S)&&"[object RegExp]"===C(S)}function F(S){return"object"==typeof S&&null!==S}function lt(S){return F(S)&&"[object Date]"===C(S)}function pt(S){return F(S)&&("[object Error]"===C(S)||S instanceof Error)}function U(S){return"function"==typeof S}function C(S){return Object.prototype.toString.call(S)}function et(S){return S<10?"0"+S.toString(10):S.toString(10)}n.debuglog=function(S){if(S=S.toUpperCase(),!o[S])if(r.test(S)){var H=Zt.pid;o[S]=function(){var G=n.format.apply(n,arguments);console.error("%s %d: %s",S,H,G)}}else o[S]=function(){};return o[S]},n.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.types=Du(),n.isArray=D,n.isBoolean=v,n.isNull=N,n.isNullOrUndefined=function I(S){return null==S},n.isNumber=q,n.isString=P,n.isSymbol=function X(S){return"symbol"==typeof S},n.isUndefined=Y,n.isRegExp=nt,n.types.isRegExp=nt,n.isObject=F,n.isDate=lt,n.types.isDate=lt,n.isError=pt,n.types.isNativeError=pt,n.isFunction=U,n.isPrimitive=function Q(S){return null===S||"boolean"==typeof S||"number"==typeof S||"string"==typeof S||"symbol"==typeof S||typeof S>"u"},n.isBuffer=function Fu(){return Qr||(Qr=1,zi=function(i){return i&&"object"==typeof i&&"function"==typeof i.copy&&"function"==typeof i.fill&&"function"==typeof i.readUInt8}),zi}();var _t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function z(){var S=new Date,H=[et(S.getHours()),et(S.getMinutes()),et(S.getSeconds())].join(":");return[S.getDate(),_t[S.getMonth()],H].join(" ")}function xt(S,H){return Object.prototype.hasOwnProperty.call(S,H)}n.log=function(){console.log("%s - %s",z(),n.format.apply(n,arguments))},n.inherits=He,n._extend=function(S,H){if(!H||!F(H))return S;for(var G=Object.keys(H),it=G.length;it--;)S[G[it]]=H[G[it]];return S};var st=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function gt(S,H){if(!S){var G=new Error("Promise was rejected with a falsy value");G.reason=S,S=G}return H(S)}n.promisify=function(H){if("function"!=typeof H)throw new TypeError('The "original" argument must be of type Function');if(st&&H[st]){var G;if("function"!=typeof(G=H[st]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(G,st,{value:G,enumerable:!1,writable:!1,configurable:!0}),G}function G(){for(var it,V,g=new Promise(function(M,Z){it=M,V=Z}),h=[],O=0;O<arguments.length;O++)h.push(arguments[O]);h.push(function(M,Z){M?V(M):it(Z)});try{H.apply(this,h)}catch(M){V(M)}return g}return Object.setPrototypeOf(G,Object.getPrototypeOf(H)),st&&Object.defineProperty(G,st,{value:G,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(G,i(H))},n.promisify.custom=st,n.callbackify=function J(S){if("function"!=typeof S)throw new TypeError('The "original" argument must be of type Function');function H(){for(var G=[],it=0;it<arguments.length;it++)G.push(arguments[it]);var V=G.pop();if("function"!=typeof V)throw new TypeError("The last argument must be of type Function");var g=this,h=function(){return V.apply(g,arguments)};S.apply(this,G).then(function(O){Zt.nextTick(h.bind(null,null,O))},function(O){Zt.nextTick(gt.bind(null,O,h))})}return Object.setPrototypeOf(H,Object.getPrototypeOf(S)),Object.defineProperties(H,i(S)),H}}(Fi)),Fi}function ts(){if(Xr)return Xi;function i(l,a){r(l,a),e(l)}function e(l){l._writableState&&!l._writableState.emitClose||l._readableState&&!l._readableState.emitClose||l.emit("close")}function r(l,a){l.emit("error",a)}return Xr=1,Xi={destroy:function n(l,a){var p=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(a?a(l):l&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Zt.nextTick(r,this,l)):Zt.nextTick(r,this,l)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(l||null,function(A){!a&&A?p._writableState?p._writableState.errorEmitted?Zt.nextTick(e,p):(p._writableState.errorEmitted=!0,Zt.nextTick(i,p,A)):Zt.nextTick(i,p,A):a?(Zt.nextTick(e,p),a(A)):Zt.nextTick(e,p)}),this)},undestroy:function o(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function s(l,a){var p=l._readableState,_=l._writableState;p&&p.autoDestroy||_&&_.autoDestroy?l.destroy(a):l.emit("error",a)}}}var es,eo,ns,no,os,io,rs,oo,as,to={};function on(){if(es)return to;es=1;var i={};function e(a,p,_){_||(_=Error);var A=function(x){function f(b,y,D){return x.call(this,function T(x,f,b){return"string"==typeof p?p:p(x,f,b)}(b,y,D))||this}return function n(a,p){a.prototype=Object.create(p.prototype),a.prototype.constructor=a,a.__proto__=p}(f,x),f}(_);A.prototype.name=_.name,A.prototype.code=a,i[a]=A}function o(a,p){if(Array.isArray(a)){var _=a.length;return a=a.map(function(T){return String(T)}),_>2?"one of ".concat(p," ").concat(a.slice(0,_-1).join(", "),", or ")+a[_-1]:2===_?"one of ".concat(p," ").concat(a[0]," or ").concat(a[1]):"of ".concat(p," ").concat(a[0])}return"of ".concat(p," ").concat(String(a))}return e("ERR_INVALID_OPT_VALUE",function(a,p){return'The value "'+p+'" is invalid for option "'+a+'"'},TypeError),e("ERR_INVALID_ARG_TYPE",function(a,p,_){var T,A;if("string"==typeof p&&function r(a,p,_){return a.substr(!_||_<0?0:+_,p.length)===p}(p,"not ")?(T="must not be",p=p.replace(/^not /,"")):T="must be",function s(a,p,_){return(void 0===_||_>a.length)&&(_=a.length),a.substring(_-p.length,_)===p}(a," argument"))A="The ".concat(a," ").concat(T," ").concat(o(p,"type"));else{var x=function l(a,p,_){return"number"!=typeof _&&(_=0),!(_+p.length>a.length)&&-1!==a.indexOf(p,_)}(a,".")?"property":"argument";A='The "'.concat(a,'" ').concat(x," ").concat(T," ").concat(o(p,"type"))}return A+". Received type ".concat(typeof _)},TypeError),e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),e("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"}),e("ERR_STREAM_PREMATURE_CLOSE","Premature close"),e("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"}),e("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),e("ERR_STREAM_WRITE_AFTER_END","write after end"),e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),e("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError),e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),to.codes=i,to}function is(){if(ns)return eo;ns=1;var n=on().codes.ERR_INVALID_OPT_VALUE;return eo={getHighWaterMark:function e(o,r,s,l){var a=function i(o,r,s){return null!=o.highWaterMark?o.highWaterMark:r?o[s]:null}(r,l,s);if(null!=a){if(!isFinite(a)||Math.floor(a)!==a||a<0)throw new n(l?s:"highWaterMark",a);return Math.floor(a)}return o.objectMode?16:16384}}}function Iu(){if(os)return no;function i(e){try{if(!de.localStorage)return!1}catch{return!1}var o=de.localStorage[e];return null!=o&&"true"===String(o).toLowerCase()}return os=1,no=function n(e,o){if(i("noDeprecation"))return e;var r=!1;return function s(){if(!r){if(i("throwDeprecation"))throw new Error(o);i("traceDeprecation")?console.trace(o):console.warn(o),r=!0}return e.apply(this,arguments)}},no}function ss(){if(rs)return io;function n(V){var g=this;this.next=null,this.entry=null,this.finish=function(){!function it(V,g,h){var O=V.entry;for(V.entry=null;O;){var M=O.callback;g.pendingcb--,M(h),O=O.next}g.corkedRequestsFree.next=V}(g,V)}}var i;rs=1,io=nt,nt.WritableState=X;var Y,e={deprecate:Iu()},o=Cr(),r=bn().Buffer,s=de.Uint8Array||function(){},p=ts(),T=is().getHighWaterMark,A=on().codes,x=A.ERR_INVALID_ARG_TYPE,f=A.ERR_METHOD_NOT_IMPLEMENTED,b=A.ERR_MULTIPLE_CALLBACK,y=A.ERR_STREAM_CANNOT_PIPE,D=A.ERR_STREAM_DESTROYED,v=A.ERR_STREAM_NULL_VALUES,N=A.ERR_STREAM_WRITE_AFTER_END,I=A.ERR_UNKNOWN_ENCODING,q=p.errorOrDestroy;function P(){}function X(V,g,h){i=i||rn(),"boolean"!=typeof h&&(h=g instanceof i),this.objectMode=!!(V=V||{}).objectMode,h&&(this.objectMode=this.objectMode||!!V.writableObjectMode),this.highWaterMark=T(this,V,"writableHighWaterMark",h),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===V.decodeStrings),this.defaultEncoding=V.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(M){!function _t(V,g){var h=V._writableState,O=h.sync,M=h.writecb;if("function"!=typeof M)throw new b;if(function et(V){V.writing=!1,V.writecb=null,V.length-=V.writelen,V.writelen=0}(h),g)!function C(V,g,h,O,M){--g.pendingcb,h?(Zt.nextTick(M,O),Zt.nextTick(H,V,g),V._writableState.errorEmitted=!0,q(V,O)):(M(O),V._writableState.errorEmitted=!0,q(V,O),H(V,g))}(V,h,O,g,M);else{var Z=gt(h)||V.destroyed;!Z&&!h.corked&&!h.bufferProcessing&&h.bufferedRequest&&st(V,h),O?Zt.nextTick(z,V,h,Z,M):z(V,h,Z,M)}}(g,M)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==V.emitClose,this.autoDestroy=!!V.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function nt(V){var g=this instanceof(i=i||rn());if(!g&&!Y.call(nt,this))return new nt(V);this._writableState=new X(V,this,g),this.writable=!0,V&&("function"==typeof V.write&&(this._write=V.write),"function"==typeof V.writev&&(this._writev=V.writev),"function"==typeof V.destroy&&(this._destroy=V.destroy),"function"==typeof V.final&&(this._final=V.final)),o.call(this)}function Q(V,g,h,O,M,Z,k){g.writelen=O,g.writecb=k,g.writing=!0,g.sync=!0,g.destroyed?g.onwrite(new D("write")):h?V._writev(M,g.onwrite):V._write(M,Z,g.onwrite),g.sync=!1}function z(V,g,h,O){h||function xt(V,g){0===g.length&&g.needDrain&&(g.needDrain=!1,V.emit("drain"))}(V,g),g.pendingcb--,O(),H(V,g)}function st(V,g){g.bufferProcessing=!0;var h=g.bufferedRequest;if(V._writev&&h&&h.next){var M=new Array(g.bufferedRequestCount),Z=g.corkedRequestsFree;Z.entry=h;for(var k=0,tt=!0;h;)M[k]=h,h.isBuf||(tt=!1),h=h.next,k+=1;M.allBuffers=tt,Q(V,g,!0,g.length,M,"",Z.finish),g.pendingcb++,g.lastBufferedRequest=null,Z.next?(g.corkedRequestsFree=Z.next,Z.next=null):g.corkedRequestsFree=new n(g),g.bufferedRequestCount=0}else{for(;h;){var m=h.chunk;if(Q(V,g,!1,g.objectMode?1:m.length,m,h.encoding,h.callback),h=h.next,g.bufferedRequestCount--,g.writing)break}null===h&&(g.lastBufferedRequest=null)}g.bufferedRequest=h,g.bufferProcessing=!1}function gt(V){return V.ending&&0===V.length&&null===V.bufferedRequest&&!V.finished&&!V.writing}function J(V,g){V._final(function(h){g.pendingcb--,h&&q(V,h),g.prefinished=!0,V.emit("prefinish"),H(V,g)})}function H(V,g){var h=gt(g);if(h&&(function S(V,g){!g.prefinished&&!g.finalCalled&&("function"!=typeof V._final||g.destroyed?(g.prefinished=!0,V.emit("prefinish")):(g.pendingcb++,g.finalCalled=!0,Zt.nextTick(J,V,g)))}(V,g),0===g.pendingcb&&(g.finished=!0,V.emit("finish"),g.autoDestroy))){var O=V._readableState;(!O||O.autoDestroy&&O.endEmitted)&&V.destroy()}return h}return He(nt,o),X.prototype.getBuffer=function(){for(var g=this.bufferedRequest,h=[];g;)h.push(g),g=g.next;return h},function(){try{Object.defineProperty(X.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(Y=Function.prototype[Symbol.hasInstance],Object.defineProperty(nt,Symbol.hasInstance,{value:function(g){return!!Y.call(this,g)||this===nt&&g&&g._writableState instanceof X}})):Y=function(g){return g instanceof this},nt.prototype.pipe=function(){q(this,new y)},nt.prototype.write=function(V,g,h){var O=this._writableState,M=!1,Z=!O.objectMode&&function a(V){return r.isBuffer(V)||V instanceof s}(V);return Z&&!r.isBuffer(V)&&(V=function l(V){return r.from(V)}(V)),"function"==typeof g&&(h=g,g=null),Z?g="buffer":g||(g=O.defaultEncoding),"function"!=typeof h&&(h=P),O.ending?function F(V,g){var h=new N;q(V,h),Zt.nextTick(g,h)}(this,h):(Z||function lt(V,g,h,O){var M;return null===h?M=new v:"string"!=typeof h&&!g.objectMode&&(M=new x("chunk",["string","Buffer"],h)),!M||(q(V,M),Zt.nextTick(O,M),!1)}(this,O,V,h))&&(O.pendingcb++,M=function U(V,g,h,O,M,Z){if(!h){var k=function pt(V,g,h){return!V.objectMode&&!1!==V.decodeStrings&&"string"==typeof g&&(g=r.from(g,h)),g}(g,O,M);O!==k&&(h=!0,M="buffer",O=k)}var tt=g.objectMode?1:O.length;g.length+=tt;var m=g.length<g.highWaterMark;if(m||(g.needDrain=!0),g.writing||g.corked){var j=g.lastBufferedRequest;g.lastBufferedRequest={chunk:O,encoding:M,isBuf:h,callback:Z,next:null},j?j.next=g.lastBufferedRequest:g.bufferedRequest=g.lastBufferedRequest,g.bufferedRequestCount+=1}else Q(V,g,!1,tt,O,M,Z);return m}(this,O,Z,V,g,h)),M},nt.prototype.cork=function(){this._writableState.corked++},nt.prototype.uncork=function(){var V=this._writableState;V.corked&&(V.corked--,!V.writing&&!V.corked&&!V.bufferProcessing&&V.bufferedRequest&&st(this,V))},nt.prototype.setDefaultEncoding=function(g){if("string"==typeof g&&(g=g.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((g+"").toLowerCase())>-1))throw new I(g);return this._writableState.defaultEncoding=g,this},Object.defineProperty(nt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(nt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),nt.prototype._write=function(V,g,h){h(new f("_write()"))},nt.prototype._writev=null,nt.prototype.end=function(V,g,h){var O=this._writableState;return"function"==typeof V?(h=V,V=null,g=null):"function"==typeof g&&(h=g,g=null),null!=V&&this.write(V,g),O.corked&&(O.corked=1,this.uncork()),O.ending||function G(V,g,h){g.ending=!0,H(V,g),h&&(g.finished?Zt.nextTick(h):V.once("finish",h)),g.ended=!0,V.writable=!1}(this,O,h),this},Object.defineProperty(nt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(nt.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(g){!this._writableState||(this._writableState.destroyed=g)}}),nt.prototype.destroy=p.destroy,nt.prototype._undestroy=p.undestroy,nt.prototype._destroy=function(V,g){g(V)},io}function rn(){if(as)return oo;as=1;var n=Object.keys||function(_){var T=[];for(var A in _)T.push(A);return T};oo=l;var i=hs(),e=ss();He(l,i);for(var o=n(e.prototype),r=0;r<o.length;r++){var s=o[r];l.prototype[s]||(l.prototype[s]=e.prototype[s])}function l(_){if(!(this instanceof l))return new l(_);i.call(this,_),e.call(this,_),this.allowHalfOpen=!0,_&&(!1===_.readable&&(this.readable=!1),!1===_.writable&&(this.writable=!1),!1===_.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",a)))}function a(){this._writableState.ended||Zt.nextTick(p,this)}function p(_){_.end()}return Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(T){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=T,this._writableState.destroyed=T)}}),oo}var ls,cs,ao,us,co,ps,uo,ds,po,ms,mo,fs,ho,_s,fo,vs,ro={},Yn={exports:{}};function so(){if(cs)return ro;cs=1;var n=function Su(){return ls||(ls=1,function(n,i){var e=bn(),o=e.Buffer;function r(l,a){for(var p in l)a[p]=l[p]}function s(l,a,p){return o(l,a,p)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?n.exports=e:(r(e,i),i.Buffer=s),r(o,s),s.from=function(l,a,p){if("number"==typeof l)throw new TypeError("Argument must not be a number");return o(l,a,p)},s.alloc=function(l,a,p){if("number"!=typeof l)throw new TypeError("Argument must be a number");var _=o(l);return void 0!==a?"string"==typeof p?_.fill(a,p):_.fill(a):_.fill(0),_},s.allocUnsafe=function(l){if("number"!=typeof l)throw new TypeError("Argument must be a number");return o(l)},s.allocUnsafeSlow=function(l){if("number"!=typeof l)throw new TypeError("Argument must be a number");return e.SlowBuffer(l)}}(Yn,Yn.exports)),Yn.exports}().Buffer,i=n.isEncoding||function(v){switch((v=""+v)&&v.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(v){var N;switch(this.encoding=function o(v){var N=function e(v){if(!v)return"utf8";for(var N;;)switch(v){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return v;default:if(N)return;v=(""+v).toLowerCase(),N=!0}}(v);if("string"!=typeof N&&(n.isEncoding===i||!i(v)))throw new Error("Unknown encoding: "+v);return N||v}(v),this.encoding){case"utf16le":this.text=A,this.end=x,N=4;break;case"utf8":this.fillLast=p,N=4;break;case"base64":this.text=f,this.end=b,N=3;break;default:return this.write=y,void(this.end=D)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(N)}function s(v){return v<=127?0:v>>5==6?2:v>>4==14?3:v>>3==30?4:v>>6==2?-1:-2}function p(v){var N=this.lastTotal-this.lastNeed,I=function a(v,N,I){if(128!=(192&N[0]))return v.lastNeed=0,"\ufffd";if(v.lastNeed>1&&N.length>1){if(128!=(192&N[1]))return v.lastNeed=1,"\ufffd";if(v.lastNeed>2&&N.length>2&&128!=(192&N[2]))return v.lastNeed=2,"\ufffd"}}(this,v);return void 0!==I?I:this.lastNeed<=v.length?(v.copy(this.lastChar,N,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(v.copy(this.lastChar,N,0,v.length),void(this.lastNeed-=v.length))}function A(v,N){if((v.length-N)%2==0){var I=v.toString("utf16le",N);if(I){var q=I.charCodeAt(I.length-1);if(q>=55296&&q<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1],I.slice(0,-1)}return I}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=v[v.length-1],v.toString("utf16le",N,v.length-1)}function x(v){var N=v&&v.length?this.write(v):"";return this.lastNeed?N+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):N}function f(v,N){var I=(v.length-N)%3;return 0===I?v.toString("base64",N):(this.lastNeed=3-I,this.lastTotal=3,1===I?this.lastChar[0]=v[v.length-1]:(this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1]),v.toString("base64",N,v.length-I))}function b(v){var N=v&&v.length?this.write(v):"";return this.lastNeed?N+this.lastChar.toString("base64",0,3-this.lastNeed):N}function y(v){return v.toString(this.encoding)}function D(v){return v&&v.length?this.write(v):""}return ro.StringDecoder=r,r.prototype.write=function(v){if(0===v.length)return"";var N,I;if(this.lastNeed){if(void 0===(N=this.fillLast(v)))return"";I=this.lastNeed,this.lastNeed=0}else I=0;return I<v.length?N?N+this.text(v,I):this.text(v,I):N||""},r.prototype.end=function T(v){var N=v&&v.length?this.write(v):"";return this.lastNeed?N+"\ufffd":N},r.prototype.text=function _(v,N){var I=function l(v,N,I){var q=N.length-1;if(q<I)return 0;var P=s(N[q]);return P>=0?(P>0&&(v.lastNeed=P-1),P):--q<I||-2===P?0:(P=s(N[q]))>=0?(P>0&&(v.lastNeed=P-2),P):--q<I||-2===P?0:(P=s(N[q]))>=0?(P>0&&(2===P?P=0:v.lastNeed=P-3),P):0}(this,v,N);if(!this.lastNeed)return v.toString("utf8",N);this.lastTotal=I;var q=v.length-(I-this.lastNeed);return v.copy(this.lastChar,0,q),v.toString("utf8",N,q)},r.prototype.fillLast=function(v){if(this.lastNeed<=v.length)return v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,v.length),this.lastNeed-=v.length},ro}function lo(){if(us)return ao;us=1;var n=on().codes.ERR_STREAM_PREMATURE_CLOSE;function e(){}return ao=function r(s,l,a){if("function"==typeof l)return r(s,null,l);l||(l={}),a=function i(s){var l=!1;return function(){if(!l){l=!0;for(var a=arguments.length,p=new Array(a),_=0;_<a;_++)p[_]=arguments[_];s.apply(this,p)}}}(a||e);var p=l.readable||!1!==l.readable&&s.readable,_=l.writable||!1!==l.writable&&s.writable,T=function(){s.writable||x()},A=s._writableState&&s._writableState.finished,x=function(){_=!1,A=!0,p||a.call(s)},f=s._readableState&&s._readableState.endEmitted,b=function(){p=!1,f=!0,_||a.call(s)},y=function(I){a.call(s,I)},D=function(){var I;return p&&!f?((!s._readableState||!s._readableState.ended)&&(I=new n),a.call(s,I)):_&&!A?((!s._writableState||!s._writableState.ended)&&(I=new n),a.call(s,I)):void 0},v=function(){s.req.on("finish",x)};return function o(s){return s.setHeader&&"function"==typeof s.abort}(s)?(s.on("complete",x),s.on("abort",D),s.req?v():s.on("request",v)):_&&!s._writableState&&(s.on("end",T),s.on("close",T)),s.on("end",b),s.on("finish",x),!1!==l.error&&s.on("error",y),s.on("close",D),function(){s.removeListener("complete",x),s.removeListener("abort",D),s.removeListener("request",v),s.req&&s.req.removeListener("finish",x),s.removeListener("end",T),s.removeListener("close",T),s.removeListener("finish",x),s.removeListener("end",b),s.removeListener("error",y),s.removeListener("close",D)}},ao}function ku(){if(ps)return co;var n;function i(v,N,I){return N in v?Object.defineProperty(v,N,{value:I,enumerable:!0,configurable:!0,writable:!0}):v[N]=I,v}ps=1;var e=lo(),o=Symbol("lastResolve"),r=Symbol("lastReject"),s=Symbol("error"),l=Symbol("ended"),a=Symbol("lastPromise"),p=Symbol("handlePromise"),_=Symbol("stream");function T(v,N){return{value:v,done:N}}function A(v){var N=v[o];if(null!==N){var I=v[_].read();null!==I&&(v[a]=null,v[o]=null,v[r]=null,N(T(I,!1)))}}function x(v){Zt.nextTick(A,v)}var b=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((i(n={get stream(){return this[_]},next:function(){var N=this,I=this[s];if(null!==I)return Promise.reject(I);if(this[l])return Promise.resolve(T(void 0,!0));if(this[_].destroyed)return new Promise(function(Y,nt){Zt.nextTick(function(){N[s]?nt(N[s]):Y(T(void 0,!0))})});var P,q=this[a];if(q)P=new Promise(function f(v,N){return function(I,q){v.then(function(){N[l]?I(T(void 0,!0)):N[p](I,q)},q)}}(q,this));else{var X=this[_].read();if(null!==X)return Promise.resolve(T(X,!1));P=new Promise(this[p])}return this[a]=P,P}},Symbol.asyncIterator,function(){return this}),i(n,"return",function(){var N=this;return new Promise(function(I,q){N[_].destroy(null,function(P){P?q(P):I(T(void 0,!0))})})}),n),b);return co=function(N){var I,q=Object.create(y,(i(I={},_,{value:N,writable:!0}),i(I,o,{value:null,writable:!0}),i(I,r,{value:null,writable:!0}),i(I,s,{value:null,writable:!0}),i(I,l,{value:N._readableState.endEmitted,writable:!0}),i(I,p,{value:function(X,Y){var nt=q[_].read();nt?(q[a]=null,q[o]=null,q[r]=null,X(T(nt,!1))):(q[o]=X,q[r]=Y)},writable:!0}),I));return q[a]=null,e(N,function(P){if(P&&"ERR_STREAM_PREMATURE_CLOSE"!==P.code){var X=q[r];return null!==X&&(q[a]=null,q[o]=null,q[r]=null,X(P)),void(q[s]=P)}var Y=q[o];null!==Y&&(q[a]=null,q[o]=null,q[r]=null,Y(T(void 0,!0))),q[l]=!0}),N.on("readable",x.bind(null,q)),q}}function hs(){if(ms)return po;var n;ms=1,po=F,F.ReadableState=nt;var p,i=function(k,tt){return k.listeners(tt).length},e=Cr(),o=bn().Buffer,r=de.Uint8Array||function(){},a=zr();p=a&&a.debuglog?a.debuglog("stream"):function(){};var N,I,q,_=function Zu(){if($r)return $i;function n(x,f){var b=Object.keys(x);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(x);f&&(y=y.filter(function(D){return Object.getOwnPropertyDescriptor(x,D).enumerable})),b.push.apply(b,y)}return b}function e(x,f,b){return f in x?Object.defineProperty(x,f,{value:b,enumerable:!0,configurable:!0,writable:!0}):x[f]=b,x}function r(x,f){for(var b=0;b<f.length;b++){var y=f[b];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(x,y.key,y)}}$r=1;var a=bn().Buffer,_=zr().inspect,T=_&&_.custom||"inspect";function A(x,f,b){a.prototype.copy.call(x,f,b)}return $i=function(){function x(){(function o(x,f){if(!(x instanceof f))throw new TypeError("Cannot call a class as a function")})(this,x),this.head=null,this.tail=null,this.length=0}return function s(x,f,b){f&&r(x.prototype,f),b&&r(x,b)}(x,[{key:"push",value:function(b){var y={data:b,next:null};this.length>0?this.tail.next=y:this.head=y,this.tail=y,++this.length}},{key:"unshift",value:function(b){var y={data:b,next:this.head};0===this.length&&(this.tail=y),this.head=y,++this.length}},{key:"shift",value:function(){if(0!==this.length){var b=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,b}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(b){if(0===this.length)return"";for(var y=this.head,D=""+y.data;y=y.next;)D+=b+y.data;return D}},{key:"concat",value:function(b){if(0===this.length)return a.alloc(0);for(var y=a.allocUnsafe(b>>>0),D=this.head,v=0;D;)A(D.data,y,v),v+=D.data.length,D=D.next;return y}},{key:"consume",value:function(b,y){var D;return b<this.head.data.length?(D=this.head.data.slice(0,b),this.head.data=this.head.data.slice(b)):D=b===this.head.data.length?this.shift():y?this._getString(b):this._getBuffer(b),D}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(b){var y=this.head,D=1,v=y.data;for(b-=v.length;y=y.next;){var N=y.data,I=b>N.length?N.length:b;if(v+=I===N.length?N:N.slice(0,b),0==(b-=I)){I===N.length?(++D,this.head=y.next?y.next:this.tail=null):(this.head=y,y.data=N.slice(I));break}++D}return this.length-=D,v}},{key:"_getBuffer",value:function(b){var y=a.allocUnsafe(b),D=this.head,v=1;for(D.data.copy(y),b-=D.data.length;D=D.next;){var N=D.data,I=b>N.length?N.length:b;if(N.copy(y,y.length-b,0,I),0==(b-=I)){I===N.length?(++v,this.head=D.next?D.next:this.tail=null):(this.head=D,D.data=N.slice(I));break}++v}return this.length-=v,y}},{key:T,value:function(b,y){return _(this,function i(x){for(var f=1;f<arguments.length;f++){var b=null!=arguments[f]?arguments[f]:{};f%2?n(Object(b),!0).forEach(function(y){e(x,y,b[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(b)):n(Object(b)).forEach(function(y){Object.defineProperty(x,y,Object.getOwnPropertyDescriptor(b,y))})}return x}({},y,{depth:0,customInspect:!1}))}}]),x}(),$i}(),T=ts(),x=is().getHighWaterMark,f=on().codes,b=f.ERR_INVALID_ARG_TYPE,y=f.ERR_STREAM_PUSH_AFTER_EOF,D=f.ERR_METHOD_NOT_IMPLEMENTED,v=f.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;He(F,e);var P=T.errorOrDestroy,X=["error","close","destroy","pause","resume"];function nt(Z,k,tt){n=n||rn(),"boolean"!=typeof tt&&(tt=k instanceof n),this.objectMode=!!(Z=Z||{}).objectMode,tt&&(this.objectMode=this.objectMode||!!Z.readableObjectMode),this.highWaterMark=x(this,Z,"readableHighWaterMark",tt),this.buffer=new _,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==Z.emitClose,this.autoDestroy=!!Z.autoDestroy,this.destroyed=!1,this.defaultEncoding=Z.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Z.encoding&&(N||(N=so().StringDecoder),this.decoder=new N(Z.encoding),this.encoding=Z.encoding)}function F(Z){if(n=n||rn(),!(this instanceof F))return new F(Z);this._readableState=new nt(Z,this,this instanceof n),this.readable=!0,Z&&("function"==typeof Z.read&&(this._read=Z.read),"function"==typeof Z.destroy&&(this._destroy=Z.destroy)),e.call(this)}function lt(Z,k,tt,m,j){p("readableAddChunk",k);var c,w=Z._readableState;if(null===k)w.reading=!1,function _t(Z,k){if(p("onEofChunk"),!k.ended){if(k.decoder){var tt=k.decoder.end();tt&&tt.length&&(k.buffer.push(tt),k.length+=k.objectMode?1:tt.length)}k.ended=!0,k.sync?z(Z):(k.needReadable=!1,k.emittedReadable||(k.emittedReadable=!0,xt(Z)))}}(Z,w);else if(j||(c=function U(Z,k){var tt;return!function l(Z){return o.isBuffer(Z)||Z instanceof r}(k)&&"string"!=typeof k&&void 0!==k&&!Z.objectMode&&(tt=new b("chunk",["string","Buffer","Uint8Array"],k)),tt}(w,k)),c)P(Z,c);else if(w.objectMode||k&&k.length>0)if("string"!=typeof k&&!w.objectMode&&Object.getPrototypeOf(k)!==o.prototype&&(k=function s(Z){return o.from(Z)}(k)),m)w.endEmitted?P(Z,new v):pt(Z,w,k,!0);else if(w.ended)P(Z,new y);else{if(w.destroyed)return!1;w.reading=!1,w.decoder&&!tt?(k=w.decoder.write(k),w.objectMode||0!==k.length?pt(Z,w,k,!1):st(Z,w)):pt(Z,w,k,!1)}else m||(w.reading=!1,st(Z,w));return!w.ended&&(w.length<w.highWaterMark||0===w.length)}function pt(Z,k,tt,m){k.flowing&&0===k.length&&!k.sync?(k.awaitDrain=0,Z.emit("data",tt)):(k.length+=k.objectMode?1:tt.length,m?k.buffer.unshift(tt):k.buffer.push(tt),k.needReadable&&z(Z)),st(Z,k)}Object.defineProperty(F.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(k){!this._readableState||(this._readableState.destroyed=k)}}),F.prototype.destroy=T.destroy,F.prototype._undestroy=T.undestroy,F.prototype._destroy=function(Z,k){k(Z)},F.prototype.push=function(Z,k){var m,tt=this._readableState;return tt.objectMode?m=!0:"string"==typeof Z&&((k=k||tt.defaultEncoding)!==tt.encoding&&(Z=o.from(Z,k),k=""),m=!0),lt(this,Z,k,!1,m)},F.prototype.unshift=function(Z){return lt(this,Z,null,!0,!1)},F.prototype.isPaused=function(){return!1===this._readableState.flowing},F.prototype.setEncoding=function(Z){N||(N=so().StringDecoder);var k=new N(Z);this._readableState.decoder=k,this._readableState.encoding=this._readableState.decoder.encoding;for(var tt=this._readableState.buffer.head,m="";null!==tt;)m+=k.write(tt.data),tt=tt.next;return this._readableState.buffer.clear(),""!==m&&this._readableState.buffer.push(m),this._readableState.length=m.length,this};var Q=1073741824;function et(Z,k){return Z<=0||0===k.length&&k.ended?0:k.objectMode?1:Z!=Z?k.flowing&&k.length?k.buffer.head.data.length:k.length:(Z>k.highWaterMark&&(k.highWaterMark=function C(Z){return Z>=Q?Z=Q:(Z--,Z|=Z>>>1,Z|=Z>>>2,Z|=Z>>>4,Z|=Z>>>8,Z|=Z>>>16,Z++),Z}(Z)),Z<=k.length?Z:k.ended?k.length:(k.needReadable=!0,0))}function z(Z){var k=Z._readableState;p("emitReadable",k.needReadable,k.emittedReadable),k.needReadable=!1,k.emittedReadable||(p("emitReadable",k.flowing),k.emittedReadable=!0,Zt.nextTick(xt,Z))}function xt(Z){var k=Z._readableState;p("emitReadable_",k.destroyed,k.length,k.ended),!k.destroyed&&(k.length||k.ended)&&(Z.emit("readable"),k.emittedReadable=!1),k.needReadable=!k.flowing&&!k.ended&&k.length<=k.highWaterMark,V(Z)}function st(Z,k){k.readingMore||(k.readingMore=!0,Zt.nextTick(gt,Z,k))}function gt(Z,k){for(;!k.reading&&!k.ended&&(k.length<k.highWaterMark||k.flowing&&0===k.length);){var tt=k.length;if(p("maybeReadMore read 0"),Z.read(0),tt===k.length)break}k.readingMore=!1}function S(Z){var k=Z._readableState;k.readableListening=Z.listenerCount("readable")>0,k.resumeScheduled&&!k.paused?k.flowing=!0:Z.listenerCount("data")>0&&Z.resume()}function H(Z){p("readable nexttick read 0"),Z.read(0)}function it(Z,k){p("resume",k.reading),k.reading||Z.read(0),k.resumeScheduled=!1,Z.emit("resume"),V(Z),k.flowing&&!k.reading&&Z.read(0)}function V(Z){var k=Z._readableState;for(p("flow",k.flowing);k.flowing&&null!==Z.read(););}function g(Z,k){return 0===k.length?null:(k.objectMode?tt=k.buffer.shift():!Z||Z>=k.length?(tt=k.decoder?k.buffer.join(""):1===k.buffer.length?k.buffer.first():k.buffer.concat(k.length),k.buffer.clear()):tt=k.buffer.consume(Z,k.decoder),tt);var tt}function h(Z){var k=Z._readableState;p("endReadable",k.endEmitted),k.endEmitted||(k.ended=!0,Zt.nextTick(O,k,Z))}function O(Z,k){if(p("endReadableNT",Z.endEmitted,Z.length),!Z.endEmitted&&0===Z.length&&(Z.endEmitted=!0,k.readable=!1,k.emit("end"),Z.autoDestroy)){var tt=k._writableState;(!tt||tt.autoDestroy&&tt.finished)&&k.destroy()}}function M(Z,k){for(var tt=0,m=Z.length;tt<m;tt++)if(Z[tt]===k)return tt;return-1}return F.prototype.read=function(Z){p("read",Z),Z=parseInt(Z,10);var k=this._readableState,tt=Z;if(0!==Z&&(k.emittedReadable=!1),0===Z&&k.needReadable&&((0!==k.highWaterMark?k.length>=k.highWaterMark:k.length>0)||k.ended))return p("read: emitReadable",k.length,k.ended),0===k.length&&k.ended?h(this):z(this),null;if(0===(Z=et(Z,k))&&k.ended)return 0===k.length&&h(this),null;var j,m=k.needReadable;return p("need readable",m),(0===k.length||k.length-Z<k.highWaterMark)&&p("length less than watermark",m=!0),k.ended||k.reading?p("reading or ended",m=!1):m&&(p("do read"),k.reading=!0,k.sync=!0,0===k.length&&(k.needReadable=!0),this._read(k.highWaterMark),k.sync=!1,k.reading||(Z=et(tt,k))),null===(j=Z>0?g(Z,k):null)?(k.needReadable=k.length<=k.highWaterMark,Z=0):(k.length-=Z,k.awaitDrain=0),0===k.length&&(k.ended||(k.needReadable=!0),tt!==Z&&k.ended&&h(this)),null!==j&&this.emit("data",j),j},F.prototype._read=function(Z){P(this,new D("_read()"))},F.prototype.pipe=function(Z,k){var tt=this,m=this._readableState;switch(m.pipesCount){case 0:m.pipes=Z;break;case 1:m.pipes=[m.pipes,Z];break;default:m.pipes.push(Z)}m.pipesCount+=1,p("pipe count=%d opts=%j",m.pipesCount,k);var w=k&&!1===k.end||Z===Zt.stdout||Z===Zt.stderr?dt:u;function u(){p("onend"),Z.end()}m.endEmitted?Zt.nextTick(w):tt.once("end",w),Z.on("unpipe",function c(Tt,Nt){p("onunpipe"),Tt===tt&&Nt&&!1===Nt.hasUnpiped&&(Nt.hasUnpiped=!0,function L(){p("cleanup"),Z.removeListener("close",ut),Z.removeListener("finish",at),Z.removeListener("drain",d),Z.removeListener("error",ot),Z.removeListener("unpipe",c),tt.removeListener("end",u),tt.removeListener("end",dt),tt.removeListener("data",B),R=!0,m.awaitDrain&&(!Z._writableState||Z._writableState.needDrain)&&d()}())});var d=function J(Z){return function(){var tt=Z._readableState;p("pipeOnDrain",tt.awaitDrain),tt.awaitDrain&&tt.awaitDrain--,0===tt.awaitDrain&&i(Z,"data")&&(tt.flowing=!0,V(Z))}}(tt);Z.on("drain",d);var R=!1;function B(Tt){p("ondata");var Nt=Z.write(Tt);p("dest.write",Nt),!1===Nt&&((1===m.pipesCount&&m.pipes===Z||m.pipesCount>1&&-1!==M(m.pipes,Z))&&!R&&(p("false write response, pause",m.awaitDrain),m.awaitDrain++),tt.pause())}function ot(Tt){p("onerror",Tt),dt(),Z.removeListener("error",ot),0===i(Z,"error")&&P(Z,Tt)}function ut(){Z.removeListener("finish",at),dt()}function at(){p("onfinish"),Z.removeListener("close",ut),dt()}function dt(){p("unpipe"),tt.unpipe(Z)}return tt.on("data",B),function Y(Z,k,tt){if("function"==typeof Z.prependListener)return Z.prependListener(k,tt);Z._events&&Z._events[k]?Array.isArray(Z._events[k])?Z._events[k].unshift(tt):Z._events[k]=[tt,Z._events[k]]:Z.on(k,tt)}(Z,"error",ot),Z.once("close",ut),Z.once("finish",at),Z.emit("pipe",tt),m.flowing||(p("pipe resume"),tt.resume()),Z},F.prototype.unpipe=function(Z){var k=this._readableState,tt={hasUnpiped:!1};if(0===k.pipesCount)return this;if(1===k.pipesCount)return Z&&Z!==k.pipes||(Z||(Z=k.pipes),k.pipes=null,k.pipesCount=0,k.flowing=!1,Z&&Z.emit("unpipe",this,tt)),this;if(!Z){var m=k.pipes,j=k.pipesCount;k.pipes=null,k.pipesCount=0,k.flowing=!1;for(var w=0;w<j;w++)m[w].emit("unpipe",this,{hasUnpiped:!1});return this}var c=M(k.pipes,Z);return-1===c||(k.pipes.splice(c,1),k.pipesCount-=1,1===k.pipesCount&&(k.pipes=k.pipes[0]),Z.emit("unpipe",this,tt)),this},F.prototype.addListener=F.prototype.on=function(Z,k){var tt=e.prototype.on.call(this,Z,k),m=this._readableState;return"data"===Z?(m.readableListening=this.listenerCount("readable")>0,!1!==m.flowing&&this.resume()):"readable"===Z&&!m.endEmitted&&!m.readableListening&&(m.readableListening=m.needReadable=!0,m.flowing=!1,m.emittedReadable=!1,p("on readable",m.length,m.reading),m.length?z(this):m.reading||Zt.nextTick(H,this)),tt},F.prototype.removeListener=function(Z,k){var tt=e.prototype.removeListener.call(this,Z,k);return"readable"===Z&&Zt.nextTick(S,this),tt},F.prototype.removeAllListeners=function(Z){var k=e.prototype.removeAllListeners.apply(this,arguments);return("readable"===Z||void 0===Z)&&Zt.nextTick(S,this),k},F.prototype.resume=function(){var Z=this._readableState;return Z.flowing||(p("resume"),Z.flowing=!Z.readableListening,function G(Z,k){k.resumeScheduled||(k.resumeScheduled=!0,Zt.nextTick(it,Z,k))}(this,Z)),Z.paused=!1,this},F.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},F.prototype.wrap=function(Z){var k=this,tt=this._readableState,m=!1;for(var j in Z.on("end",function(){if(p("wrapped end"),tt.decoder&&!tt.ended){var c=tt.decoder.end();c&&c.length&&k.push(c)}k.push(null)}),Z.on("data",function(c){p("wrapped data"),tt.decoder&&(c=tt.decoder.write(c)),tt.objectMode&&null==c||!(tt.objectMode||c&&c.length)||k.push(c)||(m=!0,Z.pause())}),Z)void 0===this[j]&&"function"==typeof Z[j]&&(this[j]=function(u){return function(){return Z[u].apply(Z,arguments)}}(j));for(var w=0;w<X.length;w++)Z.on(X[w],this.emit.bind(this,X[w]));return this._read=function(c){p("wrapped _read",c),m&&(m=!1,Z.resume())},this},"function"==typeof Symbol&&(F.prototype[Symbol.asyncIterator]=function(){return void 0===I&&(I=ku()),I(this)}),Object.defineProperty(F.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(F.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(F.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(k){this._readableState&&(this._readableState.flowing=k)}}),F._fromList=g,Object.defineProperty(F.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(F.from=function(Z,k){return void 0===q&&(q=function Ru(){return ds||(ds=1,uo=function(){throw new Error("Readable.from is not available in the browser")}),uo}()),q(F,Z,k)}),po}function gs(){if(fs)return mo;fs=1,mo=a;var n=on().codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,e=n.ERR_MULTIPLE_CALLBACK,o=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,r=n.ERR_TRANSFORM_WITH_LENGTH_0,s=rn();function l(T,A){var x=this._transformState;x.transforming=!1;var f=x.writecb;if(null===f)return this.emit("error",new e);x.writechunk=null,x.writecb=null,null!=A&&this.push(A),f(T);var b=this._readableState;b.reading=!1,(b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}function a(T){if(!(this instanceof a))return new a(T);s.call(this,T),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,T&&("function"==typeof T.transform&&(this._transform=T.transform),"function"==typeof T.flush&&(this._flush=T.flush)),this.on("prefinish",p)}function p(){var T=this;"function"!=typeof this._flush||this._readableState.destroyed?_(this,null,null):this._flush(function(A,x){_(T,A,x)})}function _(T,A,x){if(A)return T.emit("error",A);if(null!=x&&T.push(x),T._writableState.length)throw new r;if(T._transformState.transforming)throw new o;return T.push(null)}return He(a,s),a.prototype.push=function(T,A){return this._transformState.needTransform=!1,s.prototype.push.call(this,T,A)},a.prototype._transform=function(T,A,x){x(new i("_transform()"))},a.prototype._write=function(T,A,x){var f=this._transformState;if(f.writecb=x,f.writechunk=T,f.writeencoding=A,!f.transforming){var b=this._readableState;(f.needTransform||b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}},a.prototype._read=function(T){var A=this._transformState;null===A.writechunk||A.transforming?A.needTransform=!0:(A.transforming=!0,this._transform(A.writechunk,A.writeencoding,A.afterTransform))},a.prototype._destroy=function(T,A){s.prototype._destroy.call(this,T,function(x){A(x)})},mo}var go=ae,_o=xi.EventEmitter;function ae(){_o.call(this)}He(ae,_o),ae.Readable=hs(),ae.Writable=ss(),ae.Duplex=rn(),ae.Transform=gs(),ae.PassThrough=function qu(){if(_s)return ho;_s=1,ho=i;var n=gs();function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}return He(i,n),i.prototype._transform=function(e,o,r){r(null,e)},ho}(),ae.finished=lo(),ae.pipeline=function Uu(){if(vs)return fo;var n;vs=1;var e=on().codes,o=e.ERR_MISSING_ARGS,r=e.ERR_STREAM_DESTROYED;function s(x){if(x)throw x}function a(x,f,b,y){y=function i(x){var f=!1;return function(){f||(f=!0,x.apply(void 0,arguments))}}(y);var D=!1;x.on("close",function(){D=!0}),void 0===n&&(n=lo()),n(x,{readable:f,writable:b},function(N){if(N)return y(N);D=!0,y()});var v=!1;return function(N){if(!D&&!v){if(v=!0,function l(x){return x.setHeader&&"function"==typeof x.abort}(x))return x.abort();if("function"==typeof x.destroy)return x.destroy();y(N||new r("pipe"))}}}function p(x){x()}function _(x,f){return x.pipe(f)}function T(x){return x.length&&"function"==typeof x[x.length-1]?x.pop():s}return fo=function A(){for(var x=arguments.length,f=new Array(x),b=0;b<x;b++)f[b]=arguments[b];var y=T(f);if(Array.isArray(f[0])&&(f=f[0]),f.length<2)throw new o("streams");var D,v=f.map(function(N,I){var q=I<f.length-1;return a(N,q,I>0,function(X){D||(D=X),X&&v.forEach(p),!q&&(v.forEach(p),y(D))})});return f.reduce(_)},fo}(),ae.Stream=ae,ae.prototype.pipe=function(n,i){var e=this;function o(T){n.writable&&!1===n.write(T)&&e.pause&&e.pause()}function r(){e.readable&&e.resume&&e.resume()}e.on("data",o),n.on("drain",r),!n._isStdio&&(!i||!1!==i.end)&&(e.on("end",l),e.on("close",a));var s=!1;function l(){s||(s=!0,n.end())}function a(){s||(s=!0,"function"==typeof n.destroy&&n.destroy())}function p(T){if(_(),0===_o.listenerCount(this,"error"))throw T}function _(){e.removeListener("data",o),n.removeListener("drain",r),e.removeListener("end",l),e.removeListener("close",a),e.removeListener("error",p),n.removeListener("error",p),e.removeListener("end",_),e.removeListener("close",_),n.removeListener("close",_)}return e.on("error",p),n.on("error",p),e.on("end",_),e.on("close",_),n.on("close",_),n.emit("pipe",e),n},function(i){i.parser=function(g,h){return new o(g,h)},i.SAXParser=o,i.SAXStream=T,i.createStream=function _(g,h){return new T(g,h)},i.MAX_BUFFER_LENGTH=65536;var a,e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function o(g,h){if(!(this instanceof o))return new o(g,h);var O=this;(function s(g){for(var h=0,O=e.length;h<O;h++)g[e[h]]=""})(O),O.q=O.c="",O.bufferCheckPosition=i.MAX_BUFFER_LENGTH,O.opt=h||{},O.opt.lowercase=O.opt.lowercase||O.opt.lowercasetags,O.looseCase=O.opt.lowercase?"toLowerCase":"toUpperCase",O.tags=[],O.closed=O.closedRoot=O.sawRoot=!1,O.tag=O.error=null,O.strict=!!g,O.noscript=!(!g&&!O.opt.noscript),O.state=F.BEGIN,O.strictEntities=O.opt.strictEntities,O.ENTITIES=Object.create(O.strictEntities?i.XML_ENTITIES:i.ENTITIES),O.attribList=[],O.opt.xmlns&&(O.ns=Object.create(y)),O.trackPosition=!1!==O.opt.position,O.trackPosition&&(O.position=O.line=O.column=0),pt(O,"onready")}i.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(g){function h(){}return h.prototype=g,new h}),Object.keys||(Object.keys=function(g){var h=[];for(var O in g)g.hasOwnProperty(O)&&h.push(O);return h}),o.prototype={end:function(){_t(this)},write:function V(g){var h=this;if(this.error)throw this.error;if(h.closed)return et(h,"Cannot write after close. Assign an onready handler.");if(null===g)return _t(h);"object"==typeof g&&(g=g.toString());for(var O=0,M="";M=it(g,O++),h.c=M,M;)switch(h.trackPosition&&(h.position++,"\n"===M?(h.line++,h.column=0):h.column++),h.state){case F.BEGIN:if(h.state=F.BEGIN_WHITESPACE,"\ufeff"===M)continue;G(h,M);continue;case F.BEGIN_WHITESPACE:G(h,M);continue;case F.TEXT:if(h.sawRoot&&!h.closedRoot){for(var Z=O-1;M&&"<"!==M&&"&"!==M;)(M=it(g,O++))&&h.trackPosition&&(h.position++,"\n"===M?(h.line++,h.column=0):h.column++);h.textNode+=g.substring(Z,O-1)}"<"!==M||h.sawRoot&&h.closedRoot&&!h.strict?(!q(M)&&(!h.sawRoot||h.closedRoot)&&z(h,"Text data outside of root node."),"&"===M?h.state=F.TEXT_ENTITY:h.textNode+=M):(h.state=F.OPEN_WAKA,h.startTagPosition=h.position);continue;case F.SCRIPT:"<"===M?h.state=F.SCRIPT_ENDING:h.script+=M;continue;case F.SCRIPT_ENDING:"/"===M?h.state=F.CLOSE_TAG:(h.script+="<"+M,h.state=F.SCRIPT);continue;case F.OPEN_WAKA:"!"===M?(h.state=F.SGML_DECL,h.sgmlDecl=""):q(M)||(Y(D,M)?(h.state=F.OPEN_TAG,h.tagName=M):"/"===M?(h.state=F.CLOSE_TAG,h.tagName=""):"?"===M?(h.state=F.PROC_INST,h.procInstName=h.procInstBody=""):(z(h,"Unencoded <"),h.startTagPosition+1<h.position&&(M=new Array(h.position-h.startTagPosition).join(" ")+M),h.textNode+="<"+M,h.state=F.TEXT));continue;case F.SGML_DECL:"[CDATA["===(h.sgmlDecl+M).toUpperCase()?(U(h,"onopencdata"),h.state=F.CDATA,h.sgmlDecl="",h.cdata=""):h.sgmlDecl+M==="--"?(h.state=F.COMMENT,h.comment="",h.sgmlDecl=""):"DOCTYPE"===(h.sgmlDecl+M).toUpperCase()?(h.state=F.DOCTYPE,(h.doctype||h.sawRoot)&&z(h,"Inappropriately located doctype declaration"),h.doctype="",h.sgmlDecl=""):">"===M?(U(h,"onsgmldeclaration",h.sgmlDecl),h.sgmlDecl="",h.state=F.TEXT):(P(M)&&(h.state=F.SGML_DECL_QUOTED),h.sgmlDecl+=M);continue;case F.SGML_DECL_QUOTED:M===h.q&&(h.state=F.SGML_DECL,h.q=""),h.sgmlDecl+=M;continue;case F.DOCTYPE:">"===M?(h.state=F.TEXT,U(h,"ondoctype",h.doctype),h.doctype=!0):(h.doctype+=M,"["===M?h.state=F.DOCTYPE_DTD:P(M)&&(h.state=F.DOCTYPE_QUOTED,h.q=M));continue;case F.DOCTYPE_QUOTED:h.doctype+=M,M===h.q&&(h.q="",h.state=F.DOCTYPE);continue;case F.DOCTYPE_DTD:h.doctype+=M,"]"===M?h.state=F.DOCTYPE:P(M)&&(h.state=F.DOCTYPE_DTD_QUOTED,h.q=M);continue;case F.DOCTYPE_DTD_QUOTED:h.doctype+=M,M===h.q&&(h.state=F.DOCTYPE_DTD,h.q="");continue;case F.COMMENT:"-"===M?h.state=F.COMMENT_ENDING:h.comment+=M;continue;case F.COMMENT_ENDING:"-"===M?(h.state=F.COMMENT_ENDED,h.comment=C(h.opt,h.comment),h.comment&&U(h,"oncomment",h.comment),h.comment=""):(h.comment+="-"+M,h.state=F.COMMENT);continue;case F.COMMENT_ENDED:">"!==M?(z(h,"Malformed comment"),h.comment+="--"+M,h.state=F.COMMENT):h.state=F.TEXT;continue;case F.CDATA:"]"===M?h.state=F.CDATA_ENDING:h.cdata+=M;continue;case F.CDATA_ENDING:"]"===M?h.state=F.CDATA_ENDING_2:(h.cdata+="]"+M,h.state=F.CDATA);continue;case F.CDATA_ENDING_2:">"===M?(h.cdata&&U(h,"oncdata",h.cdata),U(h,"onclosecdata"),h.cdata="",h.state=F.TEXT):"]"===M?h.cdata+="]":(h.cdata+="]]"+M,h.state=F.CDATA);continue;case F.PROC_INST:"?"===M?h.state=F.PROC_INST_ENDING:q(M)?h.state=F.PROC_INST_BODY:h.procInstName+=M;continue;case F.PROC_INST_BODY:if(!h.procInstBody&&q(M))continue;"?"===M?h.state=F.PROC_INST_ENDING:h.procInstBody+=M;continue;case F.PROC_INST_ENDING:">"===M?(U(h,"onprocessinginstruction",{name:h.procInstName,body:h.procInstBody}),h.procInstName=h.procInstBody="",h.state=F.TEXT):(h.procInstBody+="?"+M,h.state=F.PROC_INST_BODY);continue;case F.OPEN_TAG:Y(v,M)?h.tagName+=M:(xt(h),">"===M?J(h):"/"===M?h.state=F.OPEN_TAG_SLASH:(q(M)||z(h,"Invalid character in tag name"),h.state=F.ATTRIB));continue;case F.OPEN_TAG_SLASH:">"===M?(J(h,!0),S(h)):(z(h,"Forward-slash in opening tag not followed by >"),h.state=F.ATTRIB);continue;case F.ATTRIB:if(q(M))continue;">"===M?J(h):"/"===M?h.state=F.OPEN_TAG_SLASH:Y(D,M)?(h.attribName=M,h.attribValue="",h.state=F.ATTRIB_NAME):z(h,"Invalid attribute name");continue;case F.ATTRIB_NAME:"="===M?h.state=F.ATTRIB_VALUE:">"===M?(z(h,"Attribute without value"),h.attribValue=h.attribName,gt(h),J(h)):q(M)?h.state=F.ATTRIB_NAME_SAW_WHITE:Y(v,M)?h.attribName+=M:z(h,"Invalid attribute name");continue;case F.ATTRIB_NAME_SAW_WHITE:if("="===M)h.state=F.ATTRIB_VALUE;else{if(q(M))continue;z(h,"Attribute without value"),h.tag.attributes[h.attribName]="",h.attribValue="",U(h,"onattribute",{name:h.attribName,value:""}),h.attribName="",">"===M?J(h):Y(D,M)?(h.attribName=M,h.state=F.ATTRIB_NAME):(z(h,"Invalid attribute name"),h.state=F.ATTRIB)}continue;case F.ATTRIB_VALUE:if(q(M))continue;P(M)?(h.q=M,h.state=F.ATTRIB_VALUE_QUOTED):(z(h,"Unquoted attribute value"),h.state=F.ATTRIB_VALUE_UNQUOTED,h.attribValue=M);continue;case F.ATTRIB_VALUE_QUOTED:if(M!==h.q){"&"===M?h.state=F.ATTRIB_VALUE_ENTITY_Q:h.attribValue+=M;continue}gt(h),h.q="",h.state=F.ATTRIB_VALUE_CLOSED;continue;case F.ATTRIB_VALUE_CLOSED:q(M)?h.state=F.ATTRIB:">"===M?J(h):"/"===M?h.state=F.OPEN_TAG_SLASH:Y(D,M)?(z(h,"No whitespace between attributes"),h.attribName=M,h.attribValue="",h.state=F.ATTRIB_NAME):z(h,"Invalid attribute name");continue;case F.ATTRIB_VALUE_UNQUOTED:if(!X(M)){"&"===M?h.state=F.ATTRIB_VALUE_ENTITY_U:h.attribValue+=M;continue}gt(h),">"===M?J(h):h.state=F.ATTRIB;continue;case F.CLOSE_TAG:if(h.tagName)">"===M?S(h):Y(v,M)?h.tagName+=M:h.script?(h.script+="</"+h.tagName,h.tagName="",h.state=F.SCRIPT):(q(M)||z(h,"Invalid tagname in closing tag"),h.state=F.CLOSE_TAG_SAW_WHITE);else{if(q(M))continue;nt(D,M)?h.script?(h.script+="</"+M,h.state=F.SCRIPT):z(h,"Invalid tagname in closing tag."):h.tagName=M}continue;case F.CLOSE_TAG_SAW_WHITE:if(q(M))continue;">"===M?S(h):z(h,"Invalid characters in closing tag");continue;case F.TEXT_ENTITY:case F.ATTRIB_VALUE_ENTITY_Q:case F.ATTRIB_VALUE_ENTITY_U:var tt,m;switch(h.state){case F.TEXT_ENTITY:tt=F.TEXT,m="textNode";break;case F.ATTRIB_VALUE_ENTITY_Q:tt=F.ATTRIB_VALUE_QUOTED,m="attribValue";break;case F.ATTRIB_VALUE_ENTITY_U:tt=F.ATTRIB_VALUE_UNQUOTED,m="attribValue"}";"===M?(h[m]+=H(h),h.entity="",h.state=tt):Y(h.entity.length?I:N,M)?h.entity+=M:(z(h,"Invalid character in entity name"),h[m]+="&"+h.entity+M,h.entity="",h.state=tt);continue;default:throw new Error(h,"Unknown state: "+h.state)}return h.position>=h.bufferCheckPosition&&function r(g){for(var h=Math.max(i.MAX_BUFFER_LENGTH,10),O=0,M=0,Z=e.length;M<Z;M++){var k=g[e[M]].length;if(k>h)switch(e[M]){case"textNode":Q(g);break;case"cdata":U(g,"oncdata",g.cdata),g.cdata="";break;case"script":U(g,"onscript",g.script),g.script="";break;default:et(g,"Max buffer length exceeded: "+e[M])}O=Math.max(O,k)}g.bufferCheckPosition=i.MAX_BUFFER_LENGTH-O+g.position}(h),h},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function l(g){Q(g),""!==g.cdata&&(U(g,"oncdata",g.cdata),g.cdata=""),""!==g.script&&(U(g,"onscript",g.script),g.script="")}(this)}};try{a=go.Stream}catch{a=function(){}}var p=i.EVENTS.filter(function(g){return"error"!==g&&"end"!==g});function T(g,h){if(!(this instanceof T))return new T(g,h);a.apply(this),this._parser=new o(g,h),this.writable=!0,this.readable=!0;var O=this;this._parser.onend=function(){O.emit("end")},this._parser.onerror=function(M){O.emit("error",M),O._parser.error=null},this._decoder=null,p.forEach(function(M){Object.defineProperty(O,"on"+M,{get:function(){return O._parser["on"+M]},set:function(Z){if(!Z)return O.removeAllListeners(M),O._parser["on"+M]=Z,Z;O.on(M,Z)},enumerable:!0,configurable:!1})})}(T.prototype=Object.create(a.prototype,{constructor:{value:T}})).write=function(g){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(g)){if(!this._decoder){var h=so().StringDecoder;this._decoder=new h("utf8")}g=this._decoder.write(g)}return this._parser.write(g.toString()),this.emit("data",g),!0},T.prototype.end=function(g){return g&&g.length&&this.write(g),this._parser.end(),!0},T.prototype.on=function(g,h){var O=this;return!O._parser["on"+g]&&-1!==p.indexOf(g)&&(O._parser["on"+g]=function(){var M=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);M.splice(0,0,g),O.emit.apply(O,M)}),a.prototype.on.call(O,g,h)};var f="http://www.w3.org/XML/1998/namespace",b="http://www.w3.org/2000/xmlns/",y={xml:f,xmlns:b},D=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,v=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,N=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,I=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function q(g){return" "===g||"\n"===g||"\r"===g||"\t"===g}function P(g){return'"'===g||"'"===g}function X(g){return">"===g||q(g)}function Y(g,h){return g.test(h)}function nt(g,h){return!Y(g,h)}var g,h,O,F=0;for(var lt in i.STATE={BEGIN:F++,BEGIN_WHITESPACE:F++,TEXT:F++,TEXT_ENTITY:F++,OPEN_WAKA:F++,SGML_DECL:F++,SGML_DECL_QUOTED:F++,DOCTYPE:F++,DOCTYPE_QUOTED:F++,DOCTYPE_DTD:F++,DOCTYPE_DTD_QUOTED:F++,COMMENT_STARTING:F++,COMMENT:F++,COMMENT_ENDING:F++,COMMENT_ENDED:F++,CDATA:F++,CDATA_ENDING:F++,CDATA_ENDING_2:F++,PROC_INST:F++,PROC_INST_BODY:F++,PROC_INST_ENDING:F++,OPEN_TAG:F++,OPEN_TAG_SLASH:F++,ATTRIB:F++,ATTRIB_NAME:F++,ATTRIB_NAME_SAW_WHITE:F++,ATTRIB_VALUE:F++,ATTRIB_VALUE_QUOTED:F++,ATTRIB_VALUE_CLOSED:F++,ATTRIB_VALUE_UNQUOTED:F++,ATTRIB_VALUE_ENTITY_Q:F++,ATTRIB_VALUE_ENTITY_U:F++,CLOSE_TAG:F++,CLOSE_TAG_SAW_WHITE:F++,SCRIPT:F++,SCRIPT_ENDING:F++},i.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},i.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(i.ENTITIES).forEach(function(g){var h=i.ENTITIES[g],O="number"==typeof h?String.fromCharCode(h):h;i.ENTITIES[g]=O}),i.STATE)i.STATE[i.STATE[lt]]=lt;function pt(g,h,O){g[h]&&g[h](O)}function U(g,h,O){g.textNode&&Q(g),pt(g,h,O)}function Q(g){g.textNode=C(g.opt,g.textNode),g.textNode&&pt(g,"ontext",g.textNode),g.textNode=""}function C(g,h){return g.trim&&(h=h.trim()),g.normalize&&(h=h.replace(/\s+/g," ")),h}function et(g,h){return Q(g),g.trackPosition&&(h+="\nLine: "+g.line+"\nColumn: "+g.column+"\nChar: "+g.c),h=new Error(h),g.error=h,pt(g,"onerror",h),g}function _t(g){return g.sawRoot&&!g.closedRoot&&z(g,"Unclosed root tag"),g.state!==F.BEGIN&&g.state!==F.BEGIN_WHITESPACE&&g.state!==F.TEXT&&et(g,"Unexpected end"),Q(g),g.c="",g.closed=!0,pt(g,"onend"),o.call(g,g.strict,g.opt),g}function z(g,h){if("object"!=typeof g||!(g instanceof o))throw new Error("bad call to strictFail");g.strict&&et(g,h)}function xt(g){g.strict||(g.tagName=g.tagName[g.looseCase]());var h=g.tags[g.tags.length-1]||g,O=g.tag={name:g.tagName,attributes:{}};g.opt.xmlns&&(O.ns=h.ns),g.attribList.length=0,U(g,"onopentagstart",O)}function st(g,h){var M=g.indexOf(":")<0?["",g]:g.split(":"),Z=M[0],k=M[1];return h&&"xmlns"===g&&(Z="xmlns",k=""),{prefix:Z,local:k}}function gt(g){if(g.strict||(g.attribName=g.attribName[g.looseCase]()),-1!==g.attribList.indexOf(g.attribName)||g.tag.attributes.hasOwnProperty(g.attribName))g.attribName=g.attribValue="";else{if(g.opt.xmlns){var h=st(g.attribName,!0),M=h.local;if("xmlns"===h.prefix)if("xml"===M&&g.attribValue!==f)z(g,"xml: prefix must be bound to "+f+"\nActual: "+g.attribValue);else if("xmlns"===M&&g.attribValue!==b)z(g,"xmlns: prefix must be bound to "+b+"\nActual: "+g.attribValue);else{var Z=g.tag,k=g.tags[g.tags.length-1]||g;Z.ns===k.ns&&(Z.ns=Object.create(k.ns)),Z.ns[M]=g.attribValue}g.attribList.push([g.attribName,g.attribValue])}else g.tag.attributes[g.attribName]=g.attribValue,U(g,"onattribute",{name:g.attribName,value:g.attribValue});g.attribName=g.attribValue=""}}function J(g,h){if(g.opt.xmlns){var O=g.tag,M=st(g.tagName);O.prefix=M.prefix,O.local=M.local,O.uri=O.ns[M.prefix]||"",O.prefix&&!O.uri&&(z(g,"Unbound namespace prefix: "+JSON.stringify(g.tagName)),O.uri=M.prefix),O.ns&&(g.tags[g.tags.length-1]||g).ns!==O.ns&&Object.keys(O.ns).forEach(function(B){U(g,"onopennamespace",{prefix:B,uri:O.ns[B]})});for(var k=0,tt=g.attribList.length;k<tt;k++){var m=g.attribList[k],j=m[0],w=m[1],c=st(j,!0),u=c.prefix,R=""===u?"":O.ns[u]||"",L={name:j,value:w,prefix:u,local:c.local,uri:R};u&&"xmlns"!==u&&!R&&(z(g,"Unbound namespace prefix: "+JSON.stringify(u)),L.uri=u),g.tag.attributes[j]=L,U(g,"onattribute",L)}g.attribList.length=0}g.tag.isSelfClosing=!!h,g.sawRoot=!0,g.tags.push(g.tag),U(g,"onopentag",g.tag),h||(g.state=g.noscript||"script"!==g.tagName.toLowerCase()?F.TEXT:F.SCRIPT,g.tag=null,g.tagName=""),g.attribName=g.attribValue="",g.attribList.length=0}function S(g){if(!g.tagName)return z(g,"Weird empty close tag."),g.textNode+="</>",void(g.state=F.TEXT);if(g.script){if("script"!==g.tagName)return g.script+="</"+g.tagName+">",g.tagName="",void(g.state=F.SCRIPT);U(g,"onscript",g.script),g.script=""}var h=g.tags.length,O=g.tagName;g.strict||(O=O[g.looseCase]());for(var M=O;h--&&g.tags[h].name!==M;)z(g,"Unexpected close tag");if(h<0)return z(g,"Unmatched closing tag: "+g.tagName),g.textNode+="</"+g.tagName+">",void(g.state=F.TEXT);g.tagName=O;for(var k=g.tags.length;k-- >h;){var tt=g.tag=g.tags.pop();g.tagName=g.tag.name,U(g,"onclosetag",g.tagName);var m={};for(var j in tt.ns)m[j]=tt.ns[j];g.opt.xmlns&&tt.ns!==(g.tags[g.tags.length-1]||g).ns&&Object.keys(tt.ns).forEach(function(c){U(g,"onclosenamespace",{prefix:c,uri:tt.ns[c]})})}0===h&&(g.closedRoot=!0),g.tagName=g.attribValue=g.attribName="",g.attribList.length=0,g.state=F.TEXT}function H(g){var M,h=g.entity,O=h.toLowerCase(),Z="";return g.ENTITIES[h]?g.ENTITIES[h]:g.ENTITIES[O]?g.ENTITIES[O]:("#"===(h=O).charAt(0)&&("x"===h.charAt(1)?(h=h.slice(2),Z=(M=parseInt(h,16)).toString(16)):(h=h.slice(1),Z=(M=parseInt(h,10)).toString(10))),h=h.replace(/^0+/,""),isNaN(M)||Z.toLowerCase()!==h?(z(g,"Invalid character entity"),"&"+g.entity+";"):String.fromCodePoint(M))}function G(g,h){"<"===h?(g.state=F.OPEN_WAKA,g.startTagPosition=g.position):q(h)||(z(g,"Non-whitespace before first tag."),g.textNode=h,g.state=F.TEXT)}function it(g,h){var O="";return h<g.length&&(O=g.charAt(h)),O}F=i.STATE,String.fromCodePoint||(g=String.fromCharCode,h=Math.floor,O=function(){var M=16384,Z=[],m=-1,j=arguments.length;if(!j)return"";for(var w="";++m<j;){var c=Number(arguments[m]);if(!isFinite(c)||c<0||c>1114111||h(c)!==c)throw RangeError("Invalid code point: "+c);c<=65535?Z.push(c):Z.push(55296+((c-=65536)>>10),c%1024+56320),(m+1===j||Z.length>M)&&(w+=g.apply(null,Z),Z.length=0)}return w},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:O,configurable:!0,writable:!0}):String.fromCodePoint=O)}(sr);var $,At,vo_isArray=function(n){return Array.isArray?Array.isArray(n):"[object Array]"===Object.prototype.toString.call(n)},Bu=vo_isArray,yo={copyOptions:function(n){var i,e={};for(i in n)n.hasOwnProperty(i)&&(e[i]=n[i]);return e},ensureFlagExists:function(n,i){(!(n in i)||"boolean"!=typeof i[n])&&(i[n]=!1)},ensureSpacesExists:function(n){(!("spaces"in n)||"number"!=typeof n.spaces&&"string"!=typeof n.spaces)&&(n.spaces=0)},ensureAlwaysArrayExists:function(n){(!("alwaysArray"in n)||"boolean"!=typeof n.alwaysArray&&!Bu(n.alwaysArray))&&(n.alwaysArray=!1)},ensureKeyExists:function(n,i){(!(n+"Key"in i)||"string"!=typeof i[n+"Key"])&&(i[n+"Key"]=i.compact?"_"+n:n)},checkFnExists:function(n,i){return n+"Fn"in i}},Pu=sr,It=yo,sn=vo_isArray;function ys(n){var i=Number(n);if(!isNaN(i))return i;var e=n.toLowerCase();return"true"===e||"false"!==e&&n}function xn(n,i){var e;if($.compact){if(!At[$[n+"Key"]]&&(sn($.alwaysArray)?-1!==$.alwaysArray.indexOf($[n+"Key"]):$.alwaysArray)&&(At[$[n+"Key"]]=[]),At[$[n+"Key"]]&&!sn(At[$[n+"Key"]])&&(At[$[n+"Key"]]=[At[$[n+"Key"]]]),n+"Fn"in $&&"string"==typeof i&&(i=$[n+"Fn"](i,At)),"instruction"===n&&("instructionFn"in $||"instructionNameFn"in $))for(e in i)if(i.hasOwnProperty(e))if("instructionFn"in $)i[e]=$.instructionFn(i[e],e,At);else{var o=i[e];delete i[e],i[$.instructionNameFn(e,o,At)]=o}sn(At[$[n+"Key"]])?At[$[n+"Key"]].push(i):At[$[n+"Key"]]=i}else{At[$.elementsKey]||(At[$.elementsKey]=[]);var r={};if(r[$.typeKey]=n,"instruction"===n){for(e in i)if(i.hasOwnProperty(e))break;r[$.nameKey]="instructionNameFn"in $?$.instructionNameFn(e,i,At):e,$.instructionHasAttributes?(r[$.attributesKey]=i[e][$.attributesKey],"instructionFn"in $&&(r[$.attributesKey]=$.instructionFn(r[$.attributesKey],e,At))):("instructionFn"in $&&(i[e]=$.instructionFn(i[e],e,At)),r[$.instructionKey]=i[e])}else n+"Fn"in $&&(i=$[n+"Fn"](i,At)),r[$[n+"Key"]]=i;$.addParent&&(r[$.parentKey]=At),At[$.elementsKey].push(r)}}function ws(n){var i;if("attributesFn"in $&&n&&(n=$.attributesFn(n,At)),($.trim||"attributeValueFn"in $||"attributeNameFn"in $||$.nativeTypeAttributes)&&n)for(i in n)if(n.hasOwnProperty(i)&&($.trim&&(n[i]=n[i].trim()),$.nativeTypeAttributes&&(n[i]=ys(n[i])),"attributeValueFn"in $&&(n[i]=$.attributeValueFn(n[i],i,At)),"attributeNameFn"in $)){var e=n[i];delete n[i],n[$.attributeNameFn(i,n[i],At)]=e}return n}function Lu(n){var i={};if(n.body&&("xml"===n.name.toLowerCase()||$.instructionHasAttributes)){for(var o,e=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g;null!==(o=e.exec(n.body));)i[o[1]]=o[2]||o[3]||o[4];i=ws(i)}if("xml"===n.name.toLowerCase()){if($.ignoreDeclaration)return;At[$.declarationKey]={},Object.keys(i).length&&(At[$.declarationKey][$.attributesKey]=i),$.addParent&&(At[$.declarationKey][$.parentKey]=At)}else{if($.ignoreInstruction)return;$.trim&&(n.body=n.body.trim());var r={};$.instructionHasAttributes&&Object.keys(i).length?(r[n.name]={},r[n.name][$.attributesKey]=i):r[n.name]=n.body,xn("instruction",r)}}function Vu(n,i){var e;if("object"==typeof n&&(i=n.attributes,n=n.name),i=ws(i),"elementNameFn"in $&&(n=$.elementNameFn(n,At)),$.compact){var o;if(e={},!$.ignoreAttributes&&i&&Object.keys(i).length)for(o in e[$.attributesKey]={},i)i.hasOwnProperty(o)&&(e[$.attributesKey][o]=i[o]);!(n in At)&&(sn($.alwaysArray)?-1!==$.alwaysArray.indexOf(n):$.alwaysArray)&&(At[n]=[]),At[n]&&!sn(At[n])&&(At[n]=[At[n]]),sn(At[n])?At[n].push(e):At[n]=e}else At[$.elementsKey]||(At[$.elementsKey]=[]),(e={})[$.typeKey]="element",e[$.nameKey]=n,!$.ignoreAttributes&&i&&Object.keys(i).length&&(e[$.attributesKey]=i),$.alwaysChildren&&(e[$.elementsKey]=[]),At[$.elementsKey].push(e);e[$.parentKey]=At,At=e}function Ju(n){$.ignoreText||!n.trim()&&!$.captureSpacesBetweenElements||($.trim&&(n=n.trim()),$.nativeType&&(n=ys(n)),$.sanitize&&(n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),xn("text",n))}function Hu(n){$.ignoreComment||($.trim&&(n=n.trim()),xn("comment",n))}function Wu(n){var i=At[$.parentKey];$.addParent||delete At[$.parentKey],At=i}function Gu(n){$.ignoreCdata||($.trim&&(n=n.trim()),xn("cdata",n))}function Ku(n){$.ignoreDoctype||(n=n.replace(/^ /,""),$.trim&&(n=n.trim()),xn("doctype",n))}function Yu(n){n.note=n}var Es=function(n,i){var e=Pu.parser(!0,{}),o={};if(At=o,$=function Ou(n){return $=It.copyOptions(n),It.ensureFlagExists("ignoreDeclaration",$),It.ensureFlagExists("ignoreInstruction",$),It.ensureFlagExists("ignoreAttributes",$),It.ensureFlagExists("ignoreText",$),It.ensureFlagExists("ignoreComment",$),It.ensureFlagExists("ignoreCdata",$),It.ensureFlagExists("ignoreDoctype",$),It.ensureFlagExists("compact",$),It.ensureFlagExists("alwaysChildren",$),It.ensureFlagExists("addParent",$),It.ensureFlagExists("trim",$),It.ensureFlagExists("nativeType",$),It.ensureFlagExists("nativeTypeAttributes",$),It.ensureFlagExists("sanitize",$),It.ensureFlagExists("instructionHasAttributes",$),It.ensureFlagExists("captureSpacesBetweenElements",$),It.ensureAlwaysArrayExists($),It.ensureKeyExists("declaration",$),It.ensureKeyExists("instruction",$),It.ensureKeyExists("attributes",$),It.ensureKeyExists("text",$),It.ensureKeyExists("comment",$),It.ensureKeyExists("cdata",$),It.ensureKeyExists("doctype",$),It.ensureKeyExists("type",$),It.ensureKeyExists("name",$),It.ensureKeyExists("elements",$),It.ensureKeyExists("parent",$),It.checkFnExists("doctype",$),It.checkFnExists("instruction",$),It.checkFnExists("cdata",$),It.checkFnExists("comment",$),It.checkFnExists("text",$),It.checkFnExists("instructionName",$),It.checkFnExists("elementName",$),It.checkFnExists("attributeName",$),It.checkFnExists("attributeValue",$),It.checkFnExists("attributes",$),$}(i),e.opt={strictEntities:!0},e.onopentag=Vu,e.ontext=Ju,e.oncomment=Hu,e.onclosetag=Wu,e.onerror=Yu,e.oncdata=Gu,e.ondoctype=Ku,e.onprocessinginstruction=Lu,e.write(n).close(),o[$.elementsKey]){var r=o[$.elementsKey];delete o[$.elementsKey],o[$.elementsKey]=r,delete o.text}return o};var jn_xml2js=Es;const Eo=n=>{switch(n.type){case void 0:case"element":const i=new up(n.name,n.attributes),e=n.elements||[];for(const o of e){const r=Eo(o);void 0!==r&&i.push(r)}return i;case"text":return n.text;default:return}};class cp extends Ct{}class up extends rt{static fromXmlString(i){const e=jn_xml2js(i,{compact:!1});return Eo(e)}constructor(i,e){super(i),e&&this.root.push(new cp(e))}push(i){this.root.push(i)}}class pp extends rt{constructor(i){super(""),this._attr=i}prepForXml(i){return{_attr:this._attr}}}class Ss extends rt{constructor(i,e){super(i),e&&(this.root=e.root)}}const Gt=n=>{if(isNaN(n))throw new Error(`Invalid value '${n}' specified. Must be an integer.`);return Math.floor(n)},zn=n=>{const i=Gt(n);if(i<0)throw new Error(`Invalid value '${n}' specified. Must be a positive integer.`);return i},$n=(n,i)=>{const e=2*i;if(n.length!==e||isNaN(Number(`0x${n}`)))throw new Error(`Invalid hex value '${n}'. Expected ${e} digit hex value`);return n},ks=n=>$n(n,1),Xn=n=>{const i=n.slice(-2),e=n.substring(0,n.length-2);return`${Number(e)}${i}`},Rs=n=>{const i=Xn(n);if(parseFloat(i)<0)throw new Error(`Invalid value '${i}' specified. Expected a positive number.`);return i},an=n=>{if("auto"===n)return n;const i="#"===n.charAt(0)?n.substring(1):n;return $n(i,3)},Ze=n=>"string"==typeof n?Xn(n):Gt(n),Wt=n=>"string"==typeof n?Rs(n):zn(n),gp=zn,_p=zn;class ct extends rt{constructor(i,e=!0){super(i),!0!==e&&this.root.push(new Bt({val:e}))}}class bo extends rt{constructor(i,e){var n;super(i),this.root.push(new Bt({val:(n=e,"string"==typeof n?Rs(n):zn(n))}))}}class Ue extends rt{constructor(i,e){super(i),this.root.push(new Bt({val:e}))}}class qs extends rt{constructor(i,e){super(i),this.root.push(new Bt({val:e}))}}class yp extends rt{constructor(i,e){super(i),this.root.push(new Bt({val:e}))}}class Ge extends rt{constructor(i,e){super(i),this.root.push(e)}}class Us extends rt{constructor(i){super(i.name),i.attributes&&this.root.push(new se(i.attributes))}}var kt=(n=>(n.START="start",n.CENTER="center",n.END="end",n.BOTH="both",n.MEDIUM_KASHIDA="mediumKashida",n.DISTRIBUTE="distribute",n.NUM_TAB="numTab",n.HIGH_KASHIDA="highKashida",n.LOW_KASHIDA="lowKashida",n.THAI_DISTRIBUTE="thaiDistribute",n.LEFT="left",n.RIGHT="right",n.JUSTIFIED="both",n))(kt||{});class wp extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{val:"w:val"})}}class Ms extends rt{constructor(i){super("w:jc"),this.root.push(new wp({val:i}))}}class Ut extends rt{constructor(i,{color:e,size:o,space:r,style:s}){super(i),this.root.push(new Ep({style:s,color:void 0===e?void 0:an(e),size:void 0===o?void 0:gp(o),space:void 0===r?void 0:_p(r)}))}}class Ep extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{style:"w:val",color:"w:color",size:"w:sz",space:"w:space"})}}var we=(n=>(n.SINGLE="single",n.DASH_DOT_STROKED="dashDotStroked",n.DASHED="dashed",n.DASH_SMALL_GAP="dashSmallGap",n.DOT_DASH="dotDash",n.DOT_DOT_DASH="dotDotDash",n.DOTTED="dotted",n.DOUBLE="double",n.DOUBLE_WAVE="doubleWave",n.INSET="inset",n.NIL="nil",n.NONE="none",n.OUTSET="outset",n.THICK="thick",n.THICK_THIN_LARGE_GAP="thickThinLargeGap",n.THICK_THIN_MEDIUM_GAP="thickThinMediumGap",n.THICK_THIN_SMALL_GAP="thickThinSmallGap",n.THIN_THICK_LARGE_GAP="thinThickLargeGap",n.THIN_THICK_MEDIUM_GAP="thinThickMediumGap",n.THIN_THICK_SMALL_GAP="thinThickSmallGap",n.THIN_THICK_THIN_LARGE_GAP="thinThickThinLargeGap",n.THIN_THICK_THIN_MEDIUM_GAP="thinThickThinMediumGap",n.THIN_THICK_THIN_SMALL_GAP="thinThickThinSmallGap",n.THREE_D_EMBOSS="threeDEmboss",n.THREE_D_ENGRAVE="threeDEngrave",n.TRIPLE="triple",n.WAVE="wave",n))(we||{});class bp extends Ne{constructor(i){super("w:pBdr"),i.top&&this.root.push(new Ut("w:top",i.top)),i.bottom&&this.root.push(new Ut("w:bottom",i.bottom)),i.left&&this.root.push(new Ut("w:left",i.left)),i.right&&this.root.push(new Ut("w:right",i.right))}}class xp extends rt{constructor(){super("w:pBdr");const i=new Ut("w:bottom",{color:"auto",space:1,style:we.SINGLE,size:6});this.root.push(i)}}class Tp extends rt{constructor({start:i,end:e,left:o,right:r,hanging:s,firstLine:l}){super("w:ind"),this.root.push(new se({start:{key:"w:start",value:void 0===i?void 0:Ze(i)},end:{key:"w:end",value:void 0===e?void 0:Ze(e)},left:{key:"w:left",value:void 0===o?void 0:Ze(o)},right:{key:"w:right",value:void 0===r?void 0:Ze(r)},hanging:{key:"w:hanging",value:void 0===s?void 0:Wt(s)},firstLine:{key:"w:firstLine",value:void 0===l?void 0:Wt(l)}}))}}let Bs=class extends rt{constructor(){super("w:br")}};class xo extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{type:"w:fldCharType",dirty:"w:dirty"})}}class Ie extends rt{constructor(i){super("w:fldChar"),this.root.push(new xo({type:"begin",dirty:i}))}}class Me extends rt{constructor(i){super("w:fldChar"),this.root.push(new xo({type:"separate",dirty:i}))}}class Se extends rt{constructor(i){super("w:fldChar"),this.root.push(new xo({type:"end",dirty:i}))}}var oe=(n=>(n.DEFAULT="default",n.PRESERVE="preserve",n))(oe||{});class le extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{space:"xml:space"})}}class Dp extends rt{constructor(){super("w:instrText"),this.root.push(new le({space:oe.PRESERVE})),this.root.push("PAGE")}}class Fp extends rt{constructor(){super("w:instrText"),this.root.push(new le({space:oe.PRESERVE})),this.root.push("NUMPAGES")}}class Zp extends rt{constructor(){super("w:instrText"),this.root.push(new le({space:oe.PRESERVE})),this.root.push("SECTIONPAGES")}}class Ip extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{fill:"w:fill",color:"w:color",type:"w:val"})}}class ti extends rt{constructor({fill:i,color:e,type:o}){super("w:shd"),this.root.push(new Ip({fill:void 0===i?void 0:an(i),color:void 0===e?void 0:an(e),type:o}))}}class To extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{id:"w:id",author:"w:author",date:"w:date"})}}class Rp extends rt{constructor(i){super("w:em"),this.root.push(new Bt({val:i}))}}class qp extends Rp{constructor(i="dot"){super(i)}}class Up extends rt{constructor(i){super("w:spacing"),this.root.push(new Bt({val:Ze(i)}))}}class Mp extends rt{constructor(i){super("w:color"),this.root.push(new Bt({val:an(i)}))}}class Bp extends rt{constructor(i){super("w:highlight"),this.root.push(new Bt({val:i}))}}class Pp extends rt{constructor(i){super("w:highlightCs"),this.root.push(new Bt({val:i}))}}class Ps extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{ascii:"w:ascii",cs:"w:cs",eastAsia:"w:eastAsia",hAnsi:"w:hAnsi",hint:"w:hint"})}}class Co extends rt{constructor(i,e){super("w:rFonts"),this.root.push(new Ps("string"==typeof i?{ascii:i,cs:i,eastAsia:i,hAnsi:i,hint:e}:i))}}let Os=class extends rt{constructor(i){super("w:vertAlign"),this.root.push(new Bt({val:i}))}};class Lp extends Os{constructor(){super("superscript")}}class Vp extends Os{constructor(){super("subscript")}}var Ls=(n=>(n.SINGLE="single",n.WORDS="words",n.DOUBLE="double",n.THICK="thick",n.DOTTED="dotted",n.DOTTEDHEAVY="dottedHeavy",n.DASH="dash",n.DASHEDHEAVY="dashedHeavy",n.DASHLONG="dashLong",n.DASHLONGHEAVY="dashLongHeavy",n.DOTDASH="dotDash",n.DASHDOTHEAVY="dashDotHeavy",n.DOTDOTDASH="dotDotDash",n.DASHDOTDOTHEAVY="dashDotDotHeavy",n.WAVE="wave",n.WAVYHEAVY="wavyHeavy",n.WAVYDOUBLE="wavyDouble",n.NONE="none",n))(Ls||{});class Jp extends rt{constructor(i="single",e){super("w:u"),this.root.push(new Bt({val:i,color:void 0===e?void 0:an(e)}))}}class Ke extends Ne{constructor(i){if(super("w:rPr"),!i)return;void 0!==i.noProof&&this.push(new ct("w:noProof",i.noProof)),void 0!==i.bold&&this.push(new ct("w:b",i.bold)),(void 0===i.boldComplexScript&&void 0!==i.bold||i.boldComplexScript)&&this.push(new ct("w:bCs",i.boldComplexScript??i.bold)),void 0!==i.italics&&this.push(new ct("w:i",i.italics)),(void 0===i.italicsComplexScript&&void 0!==i.italics||i.italicsComplexScript)&&this.push(new ct("w:iCs",i.italicsComplexScript??i.italics)),i.underline&&this.push(new Jp(i.underline.type,i.underline.color)),i.effect&&this.push(new Ue("w:effect",i.effect)),i.emphasisMark&&this.push(new qp(i.emphasisMark.type)),i.color&&this.push(new Mp(i.color)),i.kern&&this.push(new bo("w:kern",i.kern)),i.position&&this.push(new Ue("w:position",i.position)),void 0!==i.size&&this.push(new bo("w:sz",i.size));const e=void 0===i.sizeComplexScript||!0===i.sizeComplexScript?i.size:i.sizeComplexScript;e&&this.push(new bo("w:szCs",e)),void 0!==i.rightToLeft&&this.push(new ct("w:rtl",i.rightToLeft)),void 0!==i.smallCaps?this.push(new ct("w:smallCaps",i.smallCaps)):void 0!==i.allCaps&&this.push(new ct("w:caps",i.allCaps)),void 0!==i.strike&&this.push(new ct("w:strike",i.strike)),void 0!==i.doubleStrike&&this.push(new ct("w:dstrike",i.doubleStrike)),i.subScript&&this.push(new Vp),i.superScript&&this.push(new Lp),i.style&&this.push(new Ue("w:rStyle",i.style)),i.font&&this.push("string"==typeof i.font?new Co(i.font):"name"in i.font?new Co(i.font.name,i.font.hint):new Co(i.font)),i.highlight&&this.push(new Bp(i.highlight));const o=void 0===i.highlightComplexScript||!0===i.highlightComplexScript?i.highlight:i.highlightComplexScript;var n;o&&this.push(new Pp(o)),i.characterSpacing&&this.push(new Up(i.characterSpacing)),void 0!==i.emboss&&this.push(new ct("w:emboss",i.emboss)),void 0!==i.imprint&&this.push(new ct("w:imprint",i.imprint)),i.shading&&this.push(new ti(i.shading)),i.revision&&this.push(new Wp(i.revision)),i.border&&this.push(new Ut("w:bdr",i.border)),i.snapToGrid&&this.push(new ct("w:snapToGrid",i.snapToGrid)),i.vanish&&this.push(new ct("w:vanish",i.vanish)),i.specVanish&&this.push(new ct("w:specVanish",i.vanish)),void 0!==i.scale&&this.push(new qs("w:w",i.scale)),i.language&&this.push(new Us({name:"w:lang",attributes:{value:{key:"w:val",value:(n=i.language).value},eastAsia:{key:"w:eastAsia",value:n.eastAsia},bidirectional:{key:"w:bidi",value:n.bidirectional}}})),i.math&&this.push(new ct("w:oMath",i.math))}push(i){this.root.push(i)}}class Wp extends rt{constructor(i){super("w:rPrChange"),this.root.push(new To({id:i.id,author:i.author,date:i.date})),this.addChildElement(new Ke(i))}}class ei extends rt{constructor(i){return super("w:t"),"string"==typeof i?(this.root.push(new le({space:oe.PRESERVE})),this.root.push(i),this):(this.root.push(new le({space:i.space??oe.DEFAULT})),this.root.push(i.text),this)}}class ln extends rt{constructor(i){if(super("w:r"),W(this,"properties"),this.properties=new Ke(i),this.root.push(this.properties),i.break)for(let e=0;e<i.break;e++)this.root.push(new Bs);if(i.children)for(const e of i.children)if("string"!=typeof e)this.root.push(e);else switch(e){case"CURRENT":this.root.push(new Ie),this.root.push(new Dp),this.root.push(new Me),this.root.push(new Se);break;case"TOTAL_PAGES":this.root.push(new Ie),this.root.push(new Fp),this.root.push(new Me),this.root.push(new Se);break;case"TOTAL_PAGES_IN_SECTION":this.root.push(new Ie),this.root.push(new Zp),this.root.push(new Me),this.root.push(new Se);break;default:this.root.push(new ei(e))}else i.text&&this.root.push(new ei(i.text))}}class mt extends ln{constructor(i){if("string"==typeof i)return super({}),this.root.push(new ei(i)),this;super(i)}}const me=n=>Math.floor(72*n*20),ii=(n=0)=>{let i=n;return()=>++i};class zd extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{id:"w:id",initials:"w:initials",author:"w:author",date:"w:date"})}}class $d extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{"xmlns:cx":"xmlns:cx","xmlns:cx1":"xmlns:cx1","xmlns:cx2":"xmlns:cx2","xmlns:cx3":"xmlns:cx3","xmlns:cx4":"xmlns:cx4","xmlns:cx5":"xmlns:cx5","xmlns:cx6":"xmlns:cx6","xmlns:cx7":"xmlns:cx7","xmlns:cx8":"xmlns:cx8","xmlns:mc":"xmlns:mc","xmlns:aink":"xmlns:aink","xmlns:am3d":"xmlns:am3d","xmlns:o":"xmlns:o","xmlns:r":"xmlns:r","xmlns:m":"xmlns:m","xmlns:v":"xmlns:v","xmlns:wp14":"xmlns:wp14","xmlns:wp":"xmlns:wp","xmlns:w10":"xmlns:w10","xmlns:w":"xmlns:w","xmlns:w14":"xmlns:w14","xmlns:w15":"xmlns:w15","xmlns:w16cex":"xmlns:w16cex","xmlns:w16cid":"xmlns:w16cid","xmlns:w16":"xmlns:w16","xmlns:w16sdtdh":"xmlns:w16sdtdh","xmlns:w16se":"xmlns:w16se","xmlns:wpg":"xmlns:wpg","xmlns:wpi":"xmlns:wpi","xmlns:wne":"xmlns:wne","xmlns:wps":"xmlns:wps"})}}class Xd extends rt{constructor({id:i,initials:e,author:o,date:r=new Date,children:s}){super("w:comment"),this.root.push(new zd({id:i,initials:e,author:o,date:r.toISOString()}));for(const l of s)this.root.push(l)}}class tm extends rt{constructor({children:i}){super("w:comments"),this.root.push(new $d({"xmlns:cx":"http://schemas.microsoft.com/office/drawing/2014/chartex","xmlns:cx1":"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex","xmlns:cx2":"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex","xmlns:cx3":"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex","xmlns:cx4":"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex","xmlns:cx5":"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex","xmlns:cx6":"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex","xmlns:cx7":"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex","xmlns:cx8":"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:aink":"http://schemas.microsoft.com/office/drawing/2016/ink","xmlns:am3d":"http://schemas.microsoft.com/office/drawing/2017/model3d","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:m":"http://schemas.openxmlformats.org/officeDocument/2006/math","xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:wp14":"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing","xmlns:wp":"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing","xmlns:w10":"urn:schemas-microsoft-com:office:word","xmlns:w":"http://schemas.openxmlformats.org/wordprocessingml/2006/main","xmlns:w14":"http://schemas.microsoft.com/office/word/2010/wordml","xmlns:w15":"http://schemas.microsoft.com/office/word/2012/wordml","xmlns:w16cex":"http://schemas.microsoft.com/office/word/2018/wordml/cex","xmlns:w16cid":"http://schemas.microsoft.com/office/word/2016/wordml/cid","xmlns:w16":"http://schemas.microsoft.com/office/word/2018/wordml","xmlns:w16sdtdh":"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash","xmlns:w16se":"http://schemas.microsoft.com/office/word/2015/wordml/symex","xmlns:wpg":"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup","xmlns:wpi":"http://schemas.microsoft.com/office/word/2010/wordprocessingInk","xmlns:wne":"http://schemas.microsoft.com/office/word/2006/wordml","xmlns:wps":"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}));for(const e of i)this.root.push(new Xd(e))}}class om extends rt{constructor(){super("w:pageBreakBefore")}}var oi=(n=>(n.AT_LEAST="atLeast",n.EXACTLY="exactly",n.EXACT="exact",n.AUTO="auto",n))(oi||{});class rm extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{after:"w:after",before:"w:before",line:"w:line",lineRule:"w:lineRule"})}}class sm extends rt{constructor(i){super("w:spacing"),this.root.push(new rm(i))}}var Cn=(n=>(n.HEADING_1="Heading1",n.HEADING_2="Heading2",n.HEADING_3="Heading3",n.HEADING_4="Heading4",n.HEADING_5="Heading5",n.HEADING_6="Heading6",n.TITLE="Title",n))(Cn||{});let ri=class extends rt{constructor(i){super("w:pStyle"),this.root.push(new Bt({val:i}))}};class am extends rt{constructor(i){super("w:tabs");for(const e of i)this.root.push(new pm(e))}}var Do=(n=>(n.LEFT="left",n.RIGHT="right",n.CENTER="center",n.BAR="bar",n.CLEAR="clear",n.DECIMAL="decimal",n.END="end",n.NUM="num",n.START="start",n))(Do||{});class um extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{val:"w:val",pos:"w:pos",leader:"w:leader"})}}class pm extends rt{constructor({type:i,position:e,leader:o}){super("w:tab"),this.root.push(new um({val:i,pos:e,leader:o}))}}class na extends rt{constructor(i,e){super("w:numPr"),this.root.push(new dm(e)),this.root.push(new mm(i))}}class dm extends rt{constructor(i){if(super("w:ilvl"),i>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new Bt({val:i}))}}class mm extends rt{constructor(i){super("w:numId"),this.root.push(new Bt({val:"string"==typeof i?`{${i}}`:i}))}}class ia extends rt{constructor(){super(...arguments),W(this,"fileChild",Symbol())}}class hm extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{id:"Id",type:"Type",target:"Target",targetMode:"TargetMode"})}}var oa=(n=>(n.EXTERNAL="External",n))(oa||{});class fm extends rt{constructor(i,e,o,r){super("Relationship"),this.root.push(new hm({id:i,type:e,target:o,targetMode:r}))}}class gm extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{id:"r:id",history:"w:history",anchor:"w:anchor"})}}class Fo extends rt{constructor(i,e,o){super("w:hyperlink"),W(this,"linkId"),this.linkId=e;const s=new gm({history:1,anchor:o||void 0,id:o?void 0:`rId${this.linkId}`});this.root.push(s),i.forEach(l=>{this.root.push(l)})}}class vm extends rt{constructor(i){super("w:externalHyperlink"),this.options=i}}class ym extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{id:"w:id",name:"w:name"})}}class wm extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{id:"w:id"})}}class Em{constructor(i){W(this,"bookmarkUniqueNumericId",ii()),W(this,"start"),W(this,"children"),W(this,"end");const e=this.bookmarkUniqueNumericId();this.start=new bm(i.id,e),this.children=i.children,this.end=new xm(e)}}class bm extends rt{constructor(i,e){super("w:bookmarkStart");const o=new ym({name:i,id:e});this.root.push(o)}}class xm extends rt{constructor(i){super("w:bookmarkEnd");const e=new wm({id:i});this.root.push(e)}}class Tm extends rt{constructor(i){super("w:outlineLvl"),this.level=i,this.root.push(new Bt({val:i}))}}var zt=(n=>(n.BOTTOM="bottom",n.CENTER="center",n.TOP="top",n))(zt||{});class Am extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{verticalAlign:"w:val"})}}class ra extends rt{constructor(i){super("w:vAlign"),this.root.push(new Am({verticalAlign:i}))}}var cn=(n=>(n.DEFAULT="default",n.FIRST="first",n.EVEN="even",n))(cn||{});class Nm extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{type:"w:type",id:"r:id"})}}var Zo=(n=>(n.HEADER="w:headerReference",n.FOOTER="w:footerReference",n))(Zo||{});class Io extends rt{constructor(i,e){super(i),this.root.push(new Nm({type:e.type||"default",id:`rId${e.id}`}))}}class Dm extends rt{constructor({space:i,count:e,separate:o,equalWidth:r,children:s}){super("w:cols"),this.root.push(new se({space:{key:"w:space",value:void 0===i?void 0:Wt(i)},count:{key:"w:num",value:void 0===e?void 0:Gt(e)},separate:{key:"w:sep",value:o},equalWidth:{key:"w:equalWidth",value:r}})),!r&&s&&s.forEach(l=>this.addChildElement(l))}}class Zm extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{type:"w:type",linePitch:"w:linePitch",charSpace:"w:charSpace"})}}class Im extends rt{constructor(i,e,o){super("w:docGrid"),this.root.push(new Zm({type:o,linePitch:Gt(i),charSpace:e?Gt(e):void 0}))}}class km extends rt{constructor({countBy:i,start:e,restart:o,distance:r}){super("w:lnNumType"),this.root.push(new se({countBy:{key:"w:countBy",value:void 0===i?void 0:Gt(i)},start:{key:"w:start",value:void 0===e?void 0:Gt(e)},restart:{key:"w:restart",value:o},distance:{key:"w:distance",value:void 0===r?void 0:Wt(r)}}))}}class sa extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{display:"w:display",offsetFrom:"w:offsetFrom",zOrder:"w:zOrder"})}}class Mm extends Ne{constructor(i){if(super("w:pgBorders"),!i)return this;this.root.push(new sa(i.pageBorders?{display:i.pageBorders.display,offsetFrom:i.pageBorders.offsetFrom,zOrder:i.pageBorders.zOrder}:{})),i.pageBorderTop&&this.root.push(new Ut("w:top",i.pageBorderTop)),i.pageBorderLeft&&this.root.push(new Ut("w:left",i.pageBorderLeft)),i.pageBorderBottom&&this.root.push(new Ut("w:bottom",i.pageBorderBottom)),i.pageBorderRight&&this.root.push(new Ut("w:right",i.pageBorderRight))}}class Bm extends rt{constructor(i,e,o,r,s,l,a){super("w:pgMar"),this.root.push(new se({top:{key:"w:top",value:Ze(i)},right:{key:"w:right",value:Wt(e)},bottom:{key:"w:bottom",value:Ze(o)},left:{key:"w:left",value:Wt(r)},header:{key:"w:header",value:Wt(s)},footer:{key:"w:footer",value:Wt(l)},gutter:{key:"w:gutter",value:Wt(a)}}))}}class Om extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{start:"w:start",formatType:"w:fmt",separator:"w:chapSep"})}}class Lm extends rt{constructor({start:i,formatType:e,separator:o}){super("w:pgNumType"),this.root.push(new Om({start:void 0===i?void 0:Gt(i),formatType:e,separator:o}))}}var aa=(n=>(n.PORTRAIT="portrait",n.LANDSCAPE="landscape",n))(aa||{});class Vm extends rt{constructor(i,e,o){super("w:pgSz");const r="landscape"===o,s=Wt(i),l=Wt(e);this.root.push(new se({width:{key:"w:w",value:r?l:s},height:{key:"w:h",value:r?s:l},orientation:{key:"w:orient",value:o}}))}}class Hm extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{val:"w:val"})}}class Wm extends rt{constructor(i){super("w:textDirection"),this.root.push(new Hm({val:i}))}}class Km extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{val:"w:val"})}}class Ym extends rt{constructor(i){super("w:type"),this.root.push(new Km({val:i}))}}const So_ORIENTATION=aa.PORTRAIT;class Qm extends rt{constructor({page:{size:{width:i=11906,height:e=16838,orientation:o=So_ORIENTATION}={},margin:{top:r=1440,right:s=1440,bottom:l=1440,left:a=1440,header:p=708,footer:_=708,gutter:T=0}={},pageNumbers:A={},borders:x,textDirection:f}={},grid:{linePitch:b=360,charSpace:y,type:D}={},headerWrapperGroup:v={},footerWrapperGroup:N={},lineNumbers:I,titlePage:q,verticalAlign:P,column:X,type:Y}={}){super("w:sectPr"),this.addHeaderFooterGroup(Zo.HEADER,v),this.addHeaderFooterGroup(Zo.FOOTER,N),Y&&this.root.push(new Ym(Y)),this.root.push(new Vm(i,e,o)),this.root.push(new Bm(r,s,l,a,p,_,T)),x&&this.root.push(new Mm(x)),I&&this.root.push(new km(I)),this.root.push(new Lm(A)),X&&this.root.push(new Dm(X)),P&&this.root.push(new ra(P)),void 0!==q&&this.root.push(new ct("w:titlePg",q)),f&&this.root.push(new Wm(f)),this.root.push(new Im(b,y,D))}addHeaderFooterGroup(i,e){e.default&&this.root.push(new Io(i,{type:cn.DEFAULT,id:e.default.View.ReferenceId})),e.first&&this.root.push(new Io(i,{type:cn.FIRST,id:e.first.View.ReferenceId})),e.even&&this.root.push(new Io(i,{type:cn.EVEN,id:e.even.View.ReferenceId}))}}class jm extends rt{constructor(){super("w:body"),W(this,"sections",[])}addSection(i){const e=this.sections.pop();this.root.push(this.createSectionParagraph(e)),this.sections.push(new Qm(i))}prepForXml(i){return 1===this.sections.length&&(this.root.splice(0,1),this.root.push(this.sections.pop())),super.prepForXml(i)}push(i){this.root.push(i)}createSectionParagraph(i){const e=new Rt({}),o=new un({});return o.push(i),e.addChildElement(o),e}}class An extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type",cx:"xmlns:cx",cx1:"xmlns:cx1",cx2:"xmlns:cx2",cx3:"xmlns:cx3",cx4:"xmlns:cx4",cx5:"xmlns:cx5",cx6:"xmlns:cx6",cx7:"xmlns:cx7",cx8:"xmlns:cx8",aink:"xmlns:aink",am3d:"xmlns:am3d",w16cex:"xmlns:w16cex",w16cid:"xmlns:w16cid",w16:"xmlns:w16",w16sdtdh:"xmlns:w16sdtdh",w16se:"xmlns:w16se"})}}class zm extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{color:"w:color",themeColor:"w:themeColor",themeShade:"w:themeShade",themeTint:"w:themeTint"})}}class $m extends rt{constructor(i){super("w:background"),this.root.push(new zm({color:void 0===i.color?void 0:an(i.color),themeColor:i.themeColor,themeShade:void 0===i.themeShade?void 0:ks(i.themeShade),themeTint:void 0===i.themeTint?void 0:ks(i.themeTint)}))}}class Xm extends rt{constructor(i){super("w:document"),W(this,"body"),this.root.push(new An({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",aink:"http://schemas.microsoft.com/office/drawing/2016/ink",am3d:"http://schemas.microsoft.com/office/drawing/2017/model3d",w16cex:"http://schemas.microsoft.com/office/word/2018/wordml/cex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16:"http://schemas.microsoft.com/office/word/2018/wordml",w16sdtdh:"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex",Ignorable:"w14 w15 wp14"})),this.body=new jm,i.background&&this.root.push(new $m(i.background)),this.root.push(this.body)}add(i){return this.body.push(i),this}get Body(){return this.body}}class th extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{xmlns:"xmlns"})}}class Nn extends rt{constructor(){super("Relationships"),this.root.push(new th({xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}))}createRelationship(i,e,o,r){const s=new fm(`rId${i}`,e,o,r);return this.root.push(s),s}get RelationshipCount(){return this.root.length-1}}class la{constructor(i){W(this,"document"),W(this,"relationships"),this.document=new Xm(i),this.relationships=new Nn}get View(){return this.document}get Relationships(){return this.relationships}}class eh extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{val:"w:val"})}}class nh extends rt{constructor(){super("w:wordWrap"),this.root.push(new eh({val:0}))}}class sh extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{anchorLock:"w:anchorLock",dropCap:"w:dropCap",width:"w:w",height:"w:h",x:"w:x",y:"w:y",anchorHorizontal:"w:hAnchor",anchorVertical:"w:vAnchor",spaceHorizontal:"w:hSpace",spaceVertical:"w:vSpace",rule:"w:hRule",alignmentX:"w:xAlign",alignmentY:"w:yAlign",lines:"w:lines",wrap:"w:wrap"})}}class ah extends rt{constructor(i){var e,o;super("w:framePr"),this.root.push(new sh({anchorLock:i.anchorLock,dropCap:i.dropCap,width:i.width,height:i.height,x:i.position?i.position.x:void 0,y:i.position?i.position.y:void 0,anchorHorizontal:i.anchor.horizontal,anchorVertical:i.anchor.vertical,spaceHorizontal:null==(e=i.space)?void 0:e.horizontal,spaceVertical:null==(o=i.space)?void 0:o.vertical,rule:i.rule,alignmentX:i.alignment?i.alignment.x:void 0,alignmentY:i.alignment?i.alignment.y:void 0,lines:i.lines,wrap:i.wrap}))}}class un extends Ne{constructor(i){if(super("w:pPr"),W(this,"numberingReferences",[]),!i)return this;i.heading&&this.push(new ri(i.heading)),i.bullet&&this.push(new ri("ListParagraph")),i.numbering&&!i.style&&!i.heading&&(i.numbering.custom||this.push(new ri("ListParagraph"))),i.style&&this.push(new ri(i.style)),void 0!==i.keepNext&&this.push(new ct("w:keepNext",i.keepNext)),void 0!==i.keepLines&&this.push(new ct("w:keepLines",i.keepLines)),i.pageBreakBefore&&this.push(new om),i.frame&&this.push(new ah(i.frame)),void 0!==i.widowControl&&this.push(new ct("w:widowControl",i.widowControl)),i.bullet&&this.push(new na(1,i.bullet.level)),i.numbering&&(this.numberingReferences.push({reference:i.numbering.reference,instance:i.numbering.instance??0}),this.push(new na(`${i.numbering.reference}-${i.numbering.instance??0}`,i.numbering.level))),i.border&&this.push(new bp(i.border)),i.thematicBreak&&this.push(new xp),i.shading&&this.push(new ti(i.shading)),i.wordWrap&&this.push(new nh);const e=[...i.rightTabStop?[{type:Do.RIGHT,position:i.rightTabStop}]:[],...i.tabStops?i.tabStops:[],...i.leftTabStop?[{type:Do.LEFT,position:i.leftTabStop}]:[]];e.length>0&&this.push(new am(e)),void 0!==i.bidirectional&&this.push(new ct("w:bidi",i.bidirectional)),i.spacing&&this.push(new sm(i.spacing)),i.indent&&this.push(new Tp(i.indent)),void 0!==i.contextualSpacing&&this.push(new ct("w:contextualSpacing",i.contextualSpacing)),i.alignment&&this.push(new Ms(i.alignment)),void 0!==i.outlineLevel&&this.push(new Tm(i.outlineLevel)),void 0!==i.suppressLineNumbers&&this.push(new ct("w:suppressLineNumbers",i.suppressLineNumbers)),void 0!==i.autoSpaceEastAsianText&&this.push(new ct("w:autoSpaceDN",i.autoSpaceEastAsianText))}push(i){this.root.push(i)}prepForXml(i){if(i.viewWrapper instanceof la)for(const e of this.numberingReferences)i.file.Numbering.createConcreteNumberingInstance(e.reference,e.instance);return super.prepForXml(i)}}class Rt extends ia{constructor(i){if(super("w:p"),W(this,"properties"),"string"==typeof i)return this.properties=new un({}),this.root.push(this.properties),this.root.push(new mt(i)),this;if(this.properties=new un(i),this.root.push(this.properties),i.text&&this.root.push(new mt(i.text)),i.children)for(const e of i.children)if(e instanceof Em){this.root.push(e.start);for(const o of e.children)this.root.push(o);this.root.push(e.end)}else this.root.push(e)}prepForXml(i){for(const e of this.root)if(e instanceof vm){const o=this.root.indexOf(e),r=new Fo(e.options.children,((n=21)=>{let i="",e=n;for(;e--;)i+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return i})().toLowerCase());i.viewWrapper.Relationships.createRelationship(r.linkId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",e.options.link,oa.EXTERNAL),this.root[o]=r}return super.prepForXml(i)}addRunToFront(i){return this.root.splice(1,0,i),this}}class kh extends rt{constructor(i){super("w:tblGrid");for(const e of i)this.root.push(new Rh(e))}}class Rh extends rt{constructor(i){super("w:gridCol"),void 0!==i&&this.root.push(new se({width:{key:"w:w",value:Wt(i)}}))}}var ua=(n=>(n.AUTO="auto",n.DXA="dxa",n.NIL="nil",n.PERCENTAGE="pct",n))(ua||{});class Qe extends rt{constructor(i,{type:e="auto",size:o}){super(i);let r=o;var n;"pct"===e&&"number"==typeof o&&(r=`${o}%`),this.root.push(new se({type:{key:"w:type",value:e},size:{key:"w:w",value:(n=r,"number"==typeof n?Gt(n):"%"===n.slice(-1)?(n=>{const i=n.substring(0,n.length-1);return`${Number(i)}%`})(n):Xn(n))}}))}}var ko=(n=>(n.TABLE="w:tblCellMar",n.TABLE_CELL="w:tcMar",n))(ko||{});class pa extends Ne{constructor(i,{marginUnitType:e=ua.DXA,top:o,left:r,bottom:s,right:l}){super(i),void 0!==o&&this.root.push(new Qe("w:top",{type:e,size:o})),void 0!==r&&this.root.push(new Qe("w:left",{type:e,size:r})),void 0!==s&&this.root.push(new Qe("w:bottom",{type:e,size:s})),void 0!==l&&this.root.push(new Qe("w:right",{type:e,size:l}))}}class qh extends Ne{constructor(i){super("w:tcBorders"),i.top&&this.root.push(new Ut("w:top",i.top)),i.start&&this.root.push(new Ut("w:start",i.start)),i.left&&this.root.push(new Ut("w:left",i.left)),i.bottom&&this.root.push(new Ut("w:bottom",i.bottom)),i.end&&this.root.push(new Ut("w:end",i.end)),i.right&&this.root.push(new Ut("w:right",i.right))}}class Uh extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{val:"w:val"})}}class Mh extends rt{constructor(i){super("w:gridSpan"),this.root.push(new Uh({val:Gt(i)}))}}var Ro=(n=>(n.CONTINUE="continue",n.RESTART="restart",n))(Ro||{});class Bh extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{val:"w:val"})}}class da extends rt{constructor(i){super("w:vMerge"),this.root.push(new Bh({val:i}))}}class Oh extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{val:"w:val"})}}class Lh extends rt{constructor(i){super("w:textDirection"),this.root.push(new Oh({val:i}))}}class Vh extends Ne{constructor(i){super("w:tcPr"),i.width&&this.root.push(new Qe("w:tcW",i.width)),i.columnSpan&&this.root.push(new Mh(i.columnSpan)),i.verticalMerge?this.root.push(new da(i.verticalMerge)):i.rowSpan&&i.rowSpan>1&&this.root.push(new da(Ro.RESTART)),i.borders&&this.root.push(new qh(i.borders)),i.shading&&this.root.push(new ti(i.shading)),i.margins&&this.root.push(new pa(ko.TABLE_CELL,i.margins)),i.textDirection&&this.root.push(new Lh(i.textDirection)),i.verticalAlign&&this.root.push(new ra(i.verticalAlign))}}class Kt extends rt{constructor(i){super("w:tc"),this.options=i,this.root.push(new Vh(i));for(const e of i.children)this.root.push(e)}prepForXml(i){return this.root[this.root.length-1]instanceof Rt||this.root.push(new Rt({})),super.prepForXml(i)}}const pn={style:we.NONE,size:0,color:"auto"},dn={style:we.SINGLE,size:4,color:"auto"};class ma extends rt{constructor(i){super("w:tblBorders"),this.root.push(new Ut("w:top",i.top?i.top:dn)),this.root.push(new Ut("w:left",i.left?i.left:dn)),this.root.push(new Ut("w:bottom",i.bottom?i.bottom:dn)),this.root.push(new Ut("w:right",i.right?i.right:dn)),this.root.push(new Ut("w:insideH",i.insideHorizontal?i.insideHorizontal:dn)),this.root.push(new Ut("w:insideV",i.insideVertical?i.insideVertical:dn))}}W(ma,"NONE",{top:pn,bottom:pn,left:pn,right:pn,insideHorizontal:pn,insideVertical:pn});class Kh extends rt{constructor({horizontalAnchor:i,verticalAnchor:e,absoluteHorizontalPosition:o,relativeHorizontalPosition:r,absoluteVerticalPosition:s,relativeVerticalPosition:l,bottomFromText:a,topFromText:p,leftFromText:_,rightFromText:T,overlap:A}){super("w:tblpPr"),this.root.push(new se({leftFromText:{key:"w:leftFromText",value:void 0===_?void 0:Wt(_)},rightFromText:{key:"w:rightFromText",value:void 0===T?void 0:Wt(T)},topFromText:{key:"w:topFromText",value:void 0===p?void 0:Wt(p)},bottomFromText:{key:"w:bottomFromText",value:void 0===a?void 0:Wt(a)},absoluteHorizontalPosition:{key:"w:tblpX",value:void 0===o?void 0:Ze(o)},absoluteVerticalPosition:{key:"w:tblpY",value:void 0===s?void 0:Ze(s)},horizontalAnchor:{key:"w:horzAnchor",value:void 0===i?void 0:i},relativeHorizontalPosition:{key:"w:tblpXSpec",value:r},relativeVerticalPosition:{key:"w:tblpYSpec",value:l},verticalAnchor:{key:"w:vertAnchor",value:e}})),A&&this.root.push(new yp("w:tblOverlap",A))}}class Qh extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{type:"w:type"})}}class jh extends rt{constructor(i){super("w:tblLayout"),this.root.push(new Qh({type:i}))}}class zh extends Ne{constructor(i){super("w:tblPr"),i.style&&this.root.push(new Ue("w:tblStyle",i.style)),i.float&&this.root.push(new Kh(i.float)),void 0!==i.visuallyRightToLeft&&this.root.push(new ct("w:bidiVisual",i.visuallyRightToLeft)),i.width&&this.root.push(new Qe("w:tblW",i.width)),i.alignment&&this.root.push(new Ms(i.alignment)),i.indent&&this.root.push(new Qe("w:tblInd",i.indent)),i.borders&&this.root.push(new ma(i.borders)),i.shading&&this.root.push(new ti(i.shading)),i.layout&&this.root.push(new jh(i.layout)),i.cellMargin&&this.root.push(new pa(ko.TABLE,i.cellMargin))}}class ha extends ia{constructor({rows:i,width:e,columnWidths:o=Array(Math.max(...i.map(x=>x.CellCount))).fill(100),margins:r,indent:s,float:l,layout:a,style:p,borders:_,alignment:T,visuallyRightToLeft:A}){super("w:tbl"),this.root.push(new zh({borders:_??{},width:e??{size:100},indent:s,float:l,layout:a,style:p,alignment:T,cellMargin:r,visuallyRightToLeft:A})),this.root.push(new kh(o));for(const x of i)this.root.push(x);i.forEach((x,f)=>{if(f===i.length-1)return;let b=0;x.cells.forEach(y=>{if(y.options.rowSpan&&y.options.rowSpan>1){const D=new Kt({rowSpan:y.options.rowSpan-1,columnSpan:y.options.columnSpan,borders:y.options.borders,children:[],verticalMerge:Ro.CONTINUE});i[f+1].addCellToColumnIndex(D,b)}b+=y.options.columnSpan||1})})}}var ai=(n=>(n.AUTO="auto",n.ATLEAST="atLeast",n.EXACT="exact",n))(ai||{});class $h extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{value:"w:val",rule:"w:hRule"})}}class Xh extends rt{constructor(i,e){super("w:trHeight"),this.root.push(new $h({value:Wt(i),rule:e}))}}class tf extends Ne{constructor(i){super("w:trPr"),void 0!==i.cantSplit&&this.root.push(new ct("w:cantSplit",i.cantSplit)),void 0!==i.tableHeader&&this.root.push(new ct("w:tblHeader",i.tableHeader)),i.height&&this.root.push(new Xh(i.height.value,i.height.rule))}}class Zn extends rt{constructor(i){super("w:tr"),this.options=i,this.root.push(new tf(i));for(const e of i.children)this.root.push(e)}get CellCount(){return this.options.children.length}get cells(){return this.root.filter(i=>i instanceof Kt)}addCellToIndex(i,e){this.root.splice(e+1,0,i)}addCellToColumnIndex(i,e){const o=this.columnIndexToRootIndex(e,!0);this.addCellToIndex(i,o-1)}rootIndexToColumnIndex(i){if(i<1||i>=this.root.length)throw new Error("cell 'rootIndex' should between 1 to "+(this.root.length-1));let e=0;for(let o=1;o<i;o++)e+=this.root[o].options.columnSpan||1;return e}columnIndexToRootIndex(i,e=!1){if(i<0)throw new Error("cell 'columnIndex' should not less than zero");let o=0,r=1;for(;o<=i;){if(r>=this.root.length){if(e)return this.root.length;throw new Error("cell 'columnIndex' should not great than "+(o-1))}const s=this.root[r];r+=1,o+=s&&s.options.columnSpan||1}return r-1}}class ef extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{xmlns:"xmlns",vt:"xmlns:vt"})}}class nf extends rt{constructor(){super("Properties"),this.root.push(new ef({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"}))}}class of extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{xmlns:"xmlns"})}}class rf extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{contentType:"ContentType",extension:"Extension"})}}class je extends rt{constructor(i,e){super("Default"),this.root.push(new rf({contentType:i,extension:e}))}}class sf extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{contentType:"ContentType",partName:"PartName"})}}class he extends rt{constructor(i,e){super("Override"),this.root.push(new sf({contentType:i,partName:e}))}}class af extends rt{constructor(){super("Types"),this.root.push(new of({xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"})),this.root.push(new je("image/png","png")),this.root.push(new je("image/jpeg","jpeg")),this.root.push(new je("image/jpeg","jpg")),this.root.push(new je("image/bmp","bmp")),this.root.push(new je("image/gif","gif")),this.root.push(new je("application/vnd.openxmlformats-package.relationships+xml","rels")),this.root.push(new je("application/xml","xml")),this.root.push(new he("application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml","/word/document.xml")),this.root.push(new he("application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml","/word/styles.xml")),this.root.push(new he("application/vnd.openxmlformats-package.core-properties+xml","/docProps/core.xml")),this.root.push(new he("application/vnd.openxmlformats-officedocument.custom-properties+xml","/docProps/custom.xml")),this.root.push(new he("application/vnd.openxmlformats-officedocument.extended-properties+xml","/docProps/app.xml")),this.root.push(new he("application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml","/word/numbering.xml")),this.root.push(new he("application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml","/word/footnotes.xml")),this.root.push(new he("application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml","/word/settings.xml")),this.root.push(new he("application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml","/word/comments.xml"))}addFooter(i){this.root.push(new he("application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml",`/word/footer${i}.xml`))}addHeader(i){this.root.push(new he("application/vnd.openxmlformats-officedocument.wordprocessingml.header+xml",`/word/header${i}.xml`))}}class lf extends rt{constructor(i){super("cp:coreProperties"),this.root.push(new An({cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"})),i.title&&this.root.push(new Ge("dc:title",i.title)),i.subject&&this.root.push(new Ge("dc:subject",i.subject)),i.creator&&this.root.push(new Ge("dc:creator",i.creator)),i.keywords&&this.root.push(new Ge("cp:keywords",i.keywords)),i.description&&this.root.push(new Ge("dc:description",i.description)),i.lastModifiedBy&&this.root.push(new Ge("cp:lastModifiedBy",i.lastModifiedBy)),i.revision&&this.root.push(new Ge("cp:revision",String(i.revision))),this.root.push(new fa("dcterms:created")),this.root.push(new fa("dcterms:modified"))}}class fa extends rt{constructor(i){super(i),this.root.push(new An({type:"dcterms:W3CDTF"})),this.root.push((new Date).toISOString())}}class cf extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{xmlns:"xmlns",vt:"xmlns:vt"})}}class uf extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{fmtid:"fmtid",pid:"pid",name:"name"})}}class pf extends rt{constructor(i,e){super("property"),this.root.push(new uf({fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:i.toString(),name:e.name})),this.root.push(new df(e.value))}}class df extends rt{constructor(i){super("vt:lpwstr"),this.root.push(i)}}class mf extends rt{constructor(i){super("Properties"),W(this,"nextId"),W(this,"properties",[]),this.root.push(new cf({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"})),this.nextId=2;for(const e of i)this.addCustomProperty(e)}prepForXml(i){return this.properties.forEach(e=>this.root.push(e)),super.prepForXml(i)}addCustomProperty(i){this.properties.push(new pf(this.nextId++,i))}}class hf extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type"})}}let ff=class extends Ss{constructor(i,e){super("w:ftr",e),W(this,"refId"),this.refId=i,e||this.root.push(new hf({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}))}get ReferenceId(){return this.refId}add(i){this.root.push(i)}};class gf{constructor(i,e,o){W(this,"footer"),W(this,"relationships"),this.media=i,this.footer=new ff(e,o),this.relationships=new Nn}add(i){this.footer.add(i)}addChildElement(i){this.footer.addChildElement(i)}get View(){return this.footer}get Relationships(){return this.relationships}get Media(){return this.media}}class _f extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{type:"w:type",id:"w:id"})}}class vf extends rt{constructor(){super("w:footnoteRef")}}class yf extends ln{constructor(){super({style:"FootnoteReference"}),this.root.push(new vf)}}var qo=(n=>(n.SEPERATOR="separator",n.CONTINUATION_SEPERATOR="continuationSeparator",n))(qo||{});class Uo extends rt{constructor(i){super("w:footnote"),this.root.push(new _f({type:i.type,id:i.id}));for(let e=0;e<i.children.length;e++){const o=i.children[e];0===e&&o.addRunToFront(new yf),this.root.push(o)}}}class wf extends rt{constructor(){super("w:continuationSeparator")}}class Ef extends ln{constructor(){super({}),this.root.push(new wf)}}class bf extends rt{constructor(){super("w:separator")}}class xf extends ln{constructor(){super({}),this.root.push(new bf)}}class Tf extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"})}}class Cf extends rt{constructor(){super("w:footnotes"),this.root.push(new Tf({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"}));const i=new Uo({id:-1,type:qo.SEPERATOR,children:[new Rt({spacing:{after:0,line:240,lineRule:oi.AUTO},children:[new xf]})]});this.root.push(i);const e=new Uo({id:0,type:qo.CONTINUATION_SEPERATOR,children:[new Rt({spacing:{after:0,line:240,lineRule:oi.AUTO},children:[new Ef]})]});this.root.push(e)}createFootNote(i,e){const o=new Uo({id:i,children:e});this.root.push(o)}}class Af{constructor(){W(this,"footnotess"),W(this,"relationships"),this.footnotess=new Cf,this.relationships=new Nn}get View(){return this.footnotess}get Relationships(){return this.relationships}}class Nf extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type",cx:"xmlns:cx",cx1:"xmlns:cx1",cx2:"xmlns:cx2",cx3:"xmlns:cx3",cx4:"xmlns:cx4",cx5:"xmlns:cx5",cx6:"xmlns:cx6",cx7:"xmlns:cx7",cx8:"xmlns:cx8",w16cid:"xmlns:w16cid",w16se:"xmlns:w16se"})}}let Df=class extends Ss{constructor(i,e){super("w:hdr",e),W(this,"refId"),this.refId=i,e||this.root.push(new Nf({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex"}))}get ReferenceId(){return this.refId}add(i){this.root.push(i)}};class Ff{constructor(i,e,o){W(this,"header"),W(this,"relationships"),this.media=i,this.header=new Df(e,o),this.relationships=new Nn}add(i){return this.header.add(i),this}addChildElement(i){this.header.addChildElement(i)}get View(){return this.header}get Relationships(){return this.relationships}get Media(){return this.media}}class Zf{constructor(){W(this,"map"),this.map=new Map}addImage(i,e){this.map.set(i,e)}get Array(){return Array.from(this.map.values())}}var Ee=(n=>(n.DECIMAL="decimal",n.UPPER_ROMAN="upperRoman",n.LOWER_ROMAN="lowerRoman",n.UPPER_LETTER="upperLetter",n.LOWER_LETTER="lowerLetter",n.ORDINAL="ordinal",n.CARDINAL_TEXT="cardinalText",n.ORDINAL_TEXT="ordinalText",n.HEX="hex",n.CHICAGO="chicago",n.IDEOGRAPH__DIGITAL="ideographDigital",n.JAPANESE_COUNTING="japaneseCounting",n.AIUEO="aiueo",n.IROHA="iroha",n.DECIMAL_FULL_WIDTH="decimalFullWidth",n.DECIMAL_HALF_WIDTH="decimalHalfWidth",n.JAPANESE_LEGAL="japaneseLegal",n.JAPANESE_DIGITAL_TEN_THOUSAND="japaneseDigitalTenThousand",n.DECIMAL_ENCLOSED_CIRCLE="decimalEnclosedCircle",n.DECIMAL_FULL_WIDTH2="decimalFullWidth2",n.AIUEO_FULL_WIDTH="aiueoFullWidth",n.IROHA_FULL_WIDTH="irohaFullWidth",n.DECIMAL_ZERO="decimalZero",n.BULLET="bullet",n.GANADA="ganada",n.CHOSUNG="chosung",n.DECIMAL_ENCLOSED_FULLSTOP="decimalEnclosedFullstop",n.DECIMAL_ENCLOSED_PARENTHESES="decimalEnclosedParen",n.DECIMAL_ENCLOSED_CIRCLE_CHINESE="decimalEnclosedCircleChinese",n.IDEOGRAPH_ENCLOSED_CIRCLE="ideographEnclosedCircle",n.IDEOGRAPH_TRADITIONAL="ideographTraditional",n.IDEOGRAPH_ZODIAC="ideographZodiac",n.IDEOGRAPH_ZODIAC_TRADITIONAL="ideographZodiacTraditional",n.TAIWANESE_COUNTING="taiwaneseCounting",n.IDEOGRAPH_LEGAL_TRADITIONAL="ideographLegalTraditional",n.TAIWANESE_COUNTING_THOUSAND="taiwaneseCountingThousand",n.TAIWANESE_DIGITAL="taiwaneseDigital",n.CHINESE_COUNTING="chineseCounting",n.CHINESE_LEGAL_SIMPLIFIED="chineseLegalSimplified",n.CHINESE_COUNTING_THOUSAND="chineseCountingThousand",n.KOREAN_DIGITAL="koreanDigital",n.KOREAN_COUNTING="koreanCounting",n.KOREAN_LEGAL="koreanLegal",n.KOREAN_DIGITAL2="koreanDigital2",n.VIETNAMESE_COUNTING="vietnameseCounting",n.RUSSIAN_LOWER="russianLower",n.RUSSIAN_UPPER="russianUpper",n.NONE="none",n.NUMBER_IN_DASH="numberInDash",n.HEBREW1="hebrew1",n.HEBREW2="hebrew2",n.ARABIC_ALPHA="arabicAlpha",n.ARABIC_ABJAD="arabicAbjad",n.HINDI_VOWELS="hindiVowels",n.HINDI_CONSONANTS="hindiConsonants",n.HINDI_NUMBERS="hindiNumbers",n.HINDI_COUNTING="hindiCounting",n.THAI_LETTERS="thaiLetters",n.THAI_NUMBERS="thaiNumbers",n.THAI_COUNTING="thaiCounting",n.BAHT_TEXT="bahtText",n.DOLLAR_TEXT="dollarText",n.CUSTOM="custom",n))(Ee||{});class If extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{ilvl:"w:ilvl",tentative:"w15:tentative"})}}class Sf extends rt{constructor(i){super("w:numFmt"),this.root.push(new Bt({val:i}))}}class kf extends rt{constructor(i){super("w:lvlText"),this.root.push(new Bt({val:i}))}}class Rf extends rt{constructor(i){super("w:lvlJc"),this.root.push(new Bt({val:i}))}}class Uf extends rt{constructor(i){super("w:suff"),this.root.push(new Bt({val:i}))}}class Mf extends rt{constructor(){super("w:isLgl")}}class Bf extends rt{constructor({level:i,format:e,text:o,alignment:r=kt.START,start:s=1,style:l,suffix:a,isLegalNumberingStyle:p}){if(super("w:lvl"),W(this,"paragraphProperties"),W(this,"runProperties"),this.root.push(new qs("w:start",Gt(s))),e&&this.root.push(new Sf(e)),a&&this.root.push(new Uf(a)),p&&this.root.push(new Mf),o&&this.root.push(new kf(o)),this.root.push(new Rf(r)),this.paragraphProperties=new un(l&&l.paragraph),this.runProperties=new Ke(l&&l.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties),i>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new If({ilvl:Gt(i),tentative:1}))}}class Pf extends Bf{}class Of extends rt{constructor(i){super("w:multiLevelType"),this.root.push(new Bt({val:i}))}}class Lf extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{abstractNumId:"w:abstractNumId",restartNumberingAfterBreak:"w15:restartNumberingAfterBreak"})}}class ga extends rt{constructor(i,e){super("w:abstractNum"),W(this,"id"),this.root.push(new Lf({abstractNumId:Gt(i),restartNumberingAfterBreak:0})),this.root.push(new Of("hybridMultilevel")),this.id=i;for(const o of e)this.root.push(new Pf(o))}}class Vf extends rt{constructor(i){super("w:abstractNumId"),this.root.push(new Bt({val:i}))}}class Jf extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{numId:"w:numId"})}}class _a extends rt{constructor(i){if(super("w:num"),W(this,"numId"),W(this,"reference"),W(this,"instance"),this.numId=i.numId,this.reference=i.reference,this.instance=i.instance,this.root.push(new Jf({numId:Gt(i.numId)})),this.root.push(new Vf(Gt(i.abstractNumId))),i.overrideLevels&&i.overrideLevels.length)for(const e of i.overrideLevels)this.root.push(new Wf(e.num,e.start))}}class Hf extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{ilvl:"w:ilvl"})}}class Wf extends rt{constructor(i,e){super("w:lvlOverride"),this.root.push(new Hf({ilvl:i})),void 0!==e&&this.root.push(new Kf(e))}}class Gf extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{val:"w:val"})}}class Kf extends rt{constructor(i){super("w:startOverride"),this.root.push(new Gf({val:i}))}}class Yf extends rt{constructor(i){super("w:numbering"),W(this,"abstractNumberingMap",new Map),W(this,"concreteNumberingMap",new Map),W(this,"referenceConfigMap",new Map),W(this,"abstractNumUniqueNumericId",ii()),W(this,"concreteNumUniqueNumericId",ii(1)),this.root.push(new An({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"}));const e=new ga(this.abstractNumUniqueNumericId(),[{level:0,format:Ee.BULLET,text:"\u25cf",alignment:kt.LEFT,style:{paragraph:{indent:{left:me(.5),hanging:me(.25)}}}},{level:1,format:Ee.BULLET,text:"\u25cb",alignment:kt.LEFT,style:{paragraph:{indent:{left:me(1),hanging:me(.25)}}}},{level:2,format:Ee.BULLET,text:"\u25a0",alignment:kt.LEFT,style:{paragraph:{indent:{left:2160,hanging:me(.25)}}}},{level:3,format:Ee.BULLET,text:"\u25cf",alignment:kt.LEFT,style:{paragraph:{indent:{left:2880,hanging:me(.25)}}}},{level:4,format:Ee.BULLET,text:"\u25cb",alignment:kt.LEFT,style:{paragraph:{indent:{left:3600,hanging:me(.25)}}}},{level:5,format:Ee.BULLET,text:"\u25a0",alignment:kt.LEFT,style:{paragraph:{indent:{left:4320,hanging:me(.25)}}}},{level:6,format:Ee.BULLET,text:"\u25cf",alignment:kt.LEFT,style:{paragraph:{indent:{left:5040,hanging:me(.25)}}}},{level:7,format:Ee.BULLET,text:"\u25cf",alignment:kt.LEFT,style:{paragraph:{indent:{left:5760,hanging:me(.25)}}}},{level:8,format:Ee.BULLET,text:"\u25cf",alignment:kt.LEFT,style:{paragraph:{indent:{left:6480,hanging:me(.25)}}}}]);this.concreteNumberingMap.set("default-bullet-numbering",new _a({numId:1,abstractNumId:e.id,reference:"default-bullet-numbering",instance:0,overrideLevels:[{num:0,start:1}]})),this.abstractNumberingMap.set("default-bullet-numbering",e);for(const o of i.config)this.abstractNumberingMap.set(o.reference,new ga(this.abstractNumUniqueNumericId(),o.levels)),this.referenceConfigMap.set(o.reference,o.levels)}prepForXml(i){for(const e of this.abstractNumberingMap.values())this.root.push(e);for(const e of this.concreteNumberingMap.values())this.root.push(e);return super.prepForXml(i)}createConcreteNumberingInstance(i,e){const o=this.abstractNumberingMap.get(i);if(!o)return;const r=`${i}-${e}`;if(this.concreteNumberingMap.has(r))return;const s=this.referenceConfigMap.get(i),l=s&&s[0].start,a={numId:this.concreteNumUniqueNumericId(),abstractNumId:o.id,reference:i,instance:e,overrideLevels:[l&&Number.isInteger(l)?{num:0,start:l}:{num:0,start:1}]};this.concreteNumberingMap.set(r,new _a(a))}get ConcreteNumbering(){return Array.from(this.concreteNumberingMap.values())}get ReferenceConfig(){return Array.from(this.referenceConfigMap.values())}}class Qf extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{version:"w:val",name:"w:name",uri:"w:uri"})}}class jf extends rt{constructor(i){super("w:compatSetting"),this.root.push(new Qf({version:i,uri:"http://schemas.microsoft.com/office/word",name:"compatibilityMode"}))}}class zf extends rt{constructor(i){super("w:compat"),i.version&&this.root.push(new jf(i.version)),i.useSingleBorderforContiguousCells&&this.root.push(new ct("w:useSingleBorderforContiguousCells",i.useSingleBorderforContiguousCells)),i.wordPerfectJustification&&this.root.push(new ct("w:wpJustification",i.wordPerfectJustification)),i.noTabStopForHangingIndent&&this.root.push(new ct("w:noTabHangInd",i.noTabStopForHangingIndent)),i.noLeading&&this.root.push(new ct("w:noLeading",i.noLeading)),i.spaceForUnderline&&this.root.push(new ct("w:spaceForUL",i.spaceForUnderline)),i.noColumnBalance&&this.root.push(new ct("w:noColumnBalance",i.noColumnBalance)),i.balanceSingleByteDoubleByteWidth&&this.root.push(new ct("w:balanceSingleByteDoubleByteWidth",i.balanceSingleByteDoubleByteWidth)),i.noExtraLineSpacing&&this.root.push(new ct("w:noExtraLineSpacing",i.noExtraLineSpacing)),i.doNotLeaveBackslashAlone&&this.root.push(new ct("w:doNotLeaveBackslashAlone",i.doNotLeaveBackslashAlone)),i.underlineTrailingSpaces&&this.root.push(new ct("w:ulTrailSpace",i.underlineTrailingSpaces)),i.doNotExpandShiftReturn&&this.root.push(new ct("w:doNotExpandShiftReturn",i.doNotExpandShiftReturn)),i.spacingInWholePoints&&this.root.push(new ct("w:spacingInWholePoints",i.spacingInWholePoints)),i.lineWrapLikeWord6&&this.root.push(new ct("w:lineWrapLikeWord6",i.lineWrapLikeWord6)),i.printBodyTextBeforeHeader&&this.root.push(new ct("w:printBodyTextBeforeHeader",i.printBodyTextBeforeHeader)),i.printColorsBlack&&this.root.push(new ct("w:printColBlack",i.printColorsBlack)),i.spaceWidth&&this.root.push(new ct("w:wpSpaceWidth",i.spaceWidth)),i.showBreaksInFrames&&this.root.push(new ct("w:showBreaksInFrames",i.showBreaksInFrames)),i.subFontBySize&&this.root.push(new ct("w:subFontBySize",i.subFontBySize)),i.suppressBottomSpacing&&this.root.push(new ct("w:suppressBottomSpacing",i.suppressBottomSpacing)),i.suppressTopSpacing&&this.root.push(new ct("w:suppressTopSpacing",i.suppressTopSpacing)),i.suppressSpacingAtTopOfPage&&this.root.push(new ct("w:suppressSpacingAtTopOfPage",i.suppressSpacingAtTopOfPage)),i.suppressTopSpacingWP&&this.root.push(new ct("w:suppressTopSpacingWP",i.suppressTopSpacingWP)),i.suppressSpBfAfterPgBrk&&this.root.push(new ct("w:suppressSpBfAfterPgBrk",i.suppressSpBfAfterPgBrk)),i.swapBordersFacingPages&&this.root.push(new ct("w:swapBordersFacingPages",i.swapBordersFacingPages)),i.convertMailMergeEsc&&this.root.push(new ct("w:convMailMergeEsc",i.convertMailMergeEsc)),i.truncateFontHeightsLikeWP6&&this.root.push(new ct("w:truncateFontHeightsLikeWP6",i.truncateFontHeightsLikeWP6)),i.macWordSmallCaps&&this.root.push(new ct("w:mwSmallCaps",i.macWordSmallCaps)),i.usePrinterMetrics&&this.root.push(new ct("w:usePrinterMetrics",i.usePrinterMetrics)),i.doNotSuppressParagraphBorders&&this.root.push(new ct("w:doNotSuppressParagraphBorders",i.doNotSuppressParagraphBorders)),i.wrapTrailSpaces&&this.root.push(new ct("w:wrapTrailSpaces",i.wrapTrailSpaces)),i.footnoteLayoutLikeWW8&&this.root.push(new ct("w:footnoteLayoutLikeWW8",i.footnoteLayoutLikeWW8)),i.shapeLayoutLikeWW8&&this.root.push(new ct("w:shapeLayoutLikeWW8",i.shapeLayoutLikeWW8)),i.alignTablesRowByRow&&this.root.push(new ct("w:alignTablesRowByRow",i.alignTablesRowByRow)),i.forgetLastTabAlignment&&this.root.push(new ct("w:forgetLastTabAlignment",i.forgetLastTabAlignment)),i.adjustLineHeightInTable&&this.root.push(new ct("w:adjustLineHeightInTable",i.adjustLineHeightInTable)),i.autoSpaceLikeWord95&&this.root.push(new ct("w:autoSpaceLikeWord95",i.autoSpaceLikeWord95)),i.noSpaceRaiseLower&&this.root.push(new ct("w:noSpaceRaiseLower",i.noSpaceRaiseLower)),i.doNotUseHTMLParagraphAutoSpacing&&this.root.push(new ct("w:doNotUseHTMLParagraphAutoSpacing",i.doNotUseHTMLParagraphAutoSpacing)),i.layoutRawTableWidth&&this.root.push(new ct("w:layoutRawTableWidth",i.layoutRawTableWidth)),i.layoutTableRowsApart&&this.root.push(new ct("w:layoutTableRowsApart",i.layoutTableRowsApart)),i.useWord97LineBreakRules&&this.root.push(new ct("w:useWord97LineBreakRules",i.useWord97LineBreakRules)),i.doNotBreakWrappedTables&&this.root.push(new ct("w:doNotBreakWrappedTables",i.doNotBreakWrappedTables)),i.doNotSnapToGridInCell&&this.root.push(new ct("w:doNotSnapToGridInCell",i.doNotSnapToGridInCell)),i.selectFieldWithFirstOrLastCharacter&&this.root.push(new ct("w:selectFldWithFirstOrLastChar",i.selectFieldWithFirstOrLastCharacter)),i.applyBreakingRules&&this.root.push(new ct("w:applyBreakingRules",i.applyBreakingRules)),i.doNotWrapTextWithPunctuation&&this.root.push(new ct("w:doNotWrapTextWithPunct",i.doNotWrapTextWithPunctuation)),i.doNotUseEastAsianBreakRules&&this.root.push(new ct("w:doNotUseEastAsianBreakRules",i.doNotUseEastAsianBreakRules)),i.useWord2002TableStyleRules&&this.root.push(new ct("w:useWord2002TableStyleRules",i.useWord2002TableStyleRules)),i.growAutofit&&this.root.push(new ct("w:growAutofit",i.growAutofit)),i.useFELayout&&this.root.push(new ct("w:useFELayout",i.useFELayout)),i.useNormalStyleForList&&this.root.push(new ct("w:useNormalStyleForList",i.useNormalStyleForList)),i.doNotUseIndentAsNumberingTabStop&&this.root.push(new ct("w:doNotUseIndentAsNumberingTabStop",i.doNotUseIndentAsNumberingTabStop)),i.useAlternateEastAsianLineBreakRules&&this.root.push(new ct("w:useAltKinsokuLineBreakRules",i.useAlternateEastAsianLineBreakRules)),i.allowSpaceOfSameStyleInTable&&this.root.push(new ct("w:allowSpaceOfSameStyleInTable",i.allowSpaceOfSameStyleInTable)),i.doNotSuppressIndentation&&this.root.push(new ct("w:doNotSuppressIndentation",i.doNotSuppressIndentation)),i.doNotAutofitConstrainedTables&&this.root.push(new ct("w:doNotAutofitConstrainedTables",i.doNotAutofitConstrainedTables)),i.autofitToFirstFixedWidthCell&&this.root.push(new ct("w:autofitToFirstFixedWidthCell",i.autofitToFirstFixedWidthCell)),i.underlineTabInNumberingList&&this.root.push(new ct("w:underlineTabInNumList",i.underlineTabInNumberingList)),i.displayHangulFixedWidth&&this.root.push(new ct("w:displayHangulFixedWidth",i.displayHangulFixedWidth)),i.splitPgBreakAndParaMark&&this.root.push(new ct("w:splitPgBreakAndParaMark",i.splitPgBreakAndParaMark)),i.doNotVerticallyAlignCellWithSp&&this.root.push(new ct("w:doNotVertAlignCellWithSp",i.doNotVerticallyAlignCellWithSp)),i.doNotBreakConstrainedForcedTable&&this.root.push(new ct("w:doNotBreakConstrainedForcedTable",i.doNotBreakConstrainedForcedTable)),i.ignoreVerticalAlignmentInTextboxes&&this.root.push(new ct("w:doNotVertAlignInTxbx",i.ignoreVerticalAlignmentInTextboxes)),i.useAnsiKerningPairs&&this.root.push(new ct("w:useAnsiKerningPairs",i.useAnsiKerningPairs)),i.cachedColumnBalance&&this.root.push(new ct("w:cachedColBalance",i.cachedColumnBalance))}}class $f extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"})}}class Xf extends rt{constructor(i){var e;super("w:settings"),this.root.push(new $f({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"})),this.root.push(new ct("w:displayBackgroundShape",!0)),void 0!==i.trackRevisions&&this.root.push(new ct("w:trackRevisions",i.trackRevisions)),void 0!==i.evenAndOddHeaders&&this.root.push(new ct("w:evenAndOddHeaders",i.evenAndOddHeaders)),void 0!==i.updateFields&&this.root.push(new ct("w:updateFields",i.updateFields)),this.root.push(new zf({...i.compatibility??{},version:(null==(e=i.compatibility)?void 0:e.version)??i.compatibilityModeVersion??15}))}}class va extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{val:"w:val"})}}class tg extends rt{constructor(i){super("w:name"),this.root.push(new va({val:i}))}}class eg extends rt{constructor(i){super("w:uiPriority"),this.root.push(new va({val:Gt(i)}))}}class ng extends Ct{constructor(){super(...arguments),W(this,"xmlKeys",{type:"w:type",styleId:"w:styleId",default:"w:default",customStyle:"w:customStyle"})}}class ya extends rt{constructor(i,e){super("w:style"),this.root.push(new ng(i)),e.name&&this.root.push(new tg(e.name)),e.basedOn&&this.root.push(new Ue("w:basedOn",e.basedOn)),e.next&&this.root.push(new Ue("w:next",e.next)),e.link&&this.root.push(new Ue("w:link",e.link)),void 0!==e.uiPriority&&this.root.push(new eg(e.uiPriority)),void 0!==e.semiHidden&&this.root.push(new ct("w:semiHidden",e.semiHidden)),void 0!==e.unhideWhenUsed&&this.root.push(new ct("w:unhideWhenUsed",e.unhideWhenUsed)),void 0!==e.quickFormat&&this.root.push(new ct("w:qFormat",e.quickFormat))}}class li extends ya{constructor(i){super({type:"paragraph",styleId:i.id},i),W(this,"paragraphProperties"),W(this,"runProperties"),this.paragraphProperties=new un(i.paragraph),this.runProperties=new Ke(i.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties)}}class ci extends ya{constructor(i){super({type:"character",styleId:i.id},{uiPriority:99,unhideWhenUsed:!0,...i}),W(this,"runProperties"),this.runProperties=new Ke(i.run),this.root.push(this.runProperties)}}class Be extends li{constructor(i){super({basedOn:"Normal",next:"Normal",quickFormat:!0,...i})}}class ig extends Be{constructor(i){super({id:"Title",name:"Title",...i})}}class og extends Be{constructor(i){super({id:"Heading1",name:"Heading 1",...i})}}class rg extends Be{constructor(i){super({id:"Heading2",name:"Heading 2",...i})}}class sg extends Be{constructor(i){super({id:"Heading3",name:"Heading 3",...i})}}class ag extends Be{constructor(i){super({id:"Heading4",name:"Heading 4",...i})}}class lg extends Be{constructor(i){super({id:"Heading5",name:"Heading 5",...i})}}class cg extends Be{constructor(i){super({id:"Heading6",name:"Heading 6",...i})}}class ug extends Be{constructor(i){super({id:"Strong",name:"Strong",...i})}}class pg extends li{constructor(i){super({id:"ListParagraph",name:"List Paragraph",basedOn:"Normal",quickFormat:!0,...i})}}class dg extends li{constructor(i){super({id:"FootnoteText",name:"footnote text",link:"FootnoteTextChar",basedOn:"Normal",uiPriority:99,semiHidden:!0,unhideWhenUsed:!0,paragraph:{spacing:{after:0,line:240,lineRule:oi.AUTO}},run:{size:20},...i})}}class mg extends ci{constructor(i){super({id:"FootnoteReference",name:"footnote reference",basedOn:"DefaultParagraphFont",semiHidden:!0,run:{superScript:!0},...i})}}class hg extends ci{constructor(i){super({id:"FootnoteTextChar",name:"Footnote Text Char",basedOn:"DefaultParagraphFont",link:"FootnoteText",semiHidden:!0,run:{size:20},...i})}}class fg extends ci{constructor(i){super({id:"Hyperlink",name:"Hyperlink",basedOn:"DefaultParagraphFont",run:{color:"0563C1",underline:{type:Ls.SINGLE}},...i})}}class Mo extends rt{constructor(i){if(super("w:styles"),i.initialStyles&&this.root.push(i.initialStyles),i.importedStyles)for(const e of i.importedStyles)this.root.push(e);if(i.paragraphStyles)for(const e of i.paragraphStyles)this.root.push(new li(e));if(i.characterStyles)for(const e of i.characterStyles)this.root.push(new ci(e))}}class gg extends rt{constructor(i){super("w:pPrDefault"),this.root.push(new un(i))}}class _g extends rt{constructor(i){super("w:rPrDefault"),this.root.push(new Ke(i))}}class vg extends rt{constructor(i){super("w:docDefaults"),W(this,"runPropertiesDefaults"),W(this,"paragraphPropertiesDefaults"),this.runPropertiesDefaults=new _g(i.run),this.paragraphPropertiesDefaults=new gg(i.paragraph),this.root.push(this.runPropertiesDefaults),this.root.push(this.paragraphPropertiesDefaults)}}class yg{newInstance(i){const e=jn_xml2js(i,{compact:!1});let o;for(const l of e.elements||[])"w:styles"===l.name&&(o=l);if(void 0===o)throw new Error("can not find styles element");const r=o.elements||[];return new Mo({initialStyles:new pp(o.attributes),importedStyles:r.map(l=>Eo(l))})}}class wa{newInstance(i={}){return{initialStyles:new An({mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",Ignorable:"w14 w15"}),importedStyles:[new vg(i.document??{}),new ig({run:{size:56},...i.title}),new og({run:{color:"2E74B5",size:32},...i.heading1}),new rg({run:{color:"2E74B5",size:26},...i.heading2}),new sg({run:{color:"1F4D78",size:24},...i.heading3}),new ag({run:{color:"2E74B5",italics:!0},...i.heading4}),new lg({run:{color:"2E74B5"},...i.heading5}),new cg({run:{color:"1F4D78"},...i.heading6}),new ug({run:{bold:!0},...i.strong}),new pg(i.listParagraph||{}),new fg(i.hyperlink||{}),new mg(i.footnoteReference||{}),new dg(i.footnoteText||{}),new hg(i.footnoteTextChar||{})]}}}class Ea{constructor(i){var e,o;if(W(this,"currentRelationshipId",1),W(this,"documentWrapper"),W(this,"headers",[]),W(this,"footers",[]),W(this,"coreProperties"),W(this,"numbering"),W(this,"media"),W(this,"fileRelationships"),W(this,"footnotesWrapper"),W(this,"settings"),W(this,"contentTypes"),W(this,"customProperties"),W(this,"appProperties"),W(this,"styles"),W(this,"comments"),this.coreProperties=new lf({...i,creator:i.creator??"Un-named",revision:i.revision??1,lastModifiedBy:i.lastModifiedBy??"Un-named"}),this.numbering=new Yf(i.numbering?i.numbering:{config:[]}),this.comments=new tm(i.comments??{children:[]}),this.fileRelationships=new Nn,this.customProperties=new mf(i.customProperties??[]),this.appProperties=new nf,this.footnotesWrapper=new Af,this.contentTypes=new af,this.documentWrapper=new la({background:i.background}),this.settings=new Xf({compatibilityModeVersion:i.compatabilityModeVersion,compatibility:i.compatibility,evenAndOddHeaders:!!i.evenAndOddHeaderAndFooters,trackRevisions:null==(e=i.features)?void 0:e.trackRevisions,updateFields:null==(o=i.features)?void 0:o.updateFields}),this.media=new Zf,i.externalStyles){const r=new yg;this.styles=r.newInstance(i.externalStyles)}else if(i.styles){const s=(new wa).newInstance(i.styles.default);this.styles=new Mo({...s,...i.styles})}else{const r=new wa;this.styles=new Mo(r.newInstance())}this.addDefaultRelationships();for(const r of i.sections)this.addSection(r);if(i.footnotes)for(const r in i.footnotes)this.footnotesWrapper.View.createFootNote(parseFloat(r),i.footnotes[r].children)}addSection({headers:i={},footers:e={},children:o,properties:r}){this.documentWrapper.View.Body.addSection({...r,headerWrapperGroup:{default:i.default?this.createHeader(i.default):void 0,first:i.first?this.createHeader(i.first):void 0,even:i.even?this.createHeader(i.even):void 0},footerWrapperGroup:{default:e.default?this.createFooter(e.default):void 0,first:e.first?this.createFooter(e.first):void 0,even:e.even?this.createFooter(e.even):void 0}});for(const s of o)this.documentWrapper.View.add(s)}createHeader(i){const e=new Ff(this.media,this.currentRelationshipId++);for(const o of i.options.children)e.add(o);return this.addHeaderToDocument(e),e}createFooter(i){const e=new gf(this.media,this.currentRelationshipId++);for(const o of i.options.children)e.add(o);return this.addFooterToDocument(e),e}addHeaderToDocument(i,e=cn.DEFAULT){this.headers.push({header:i,type:e}),this.documentWrapper.Relationships.createRelationship(i.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/header",`header${this.headers.length}.xml`),this.contentTypes.addHeader(this.headers.length)}addFooterToDocument(i,e=cn.DEFAULT){this.footers.push({footer:i,type:e}),this.documentWrapper.Relationships.createRelationship(i.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer",`footer${this.footers.length}.xml`),this.contentTypes.addFooter(this.footers.length)}addDefaultRelationships(){this.fileRelationships.createRelationship(1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument","word/document.xml"),this.fileRelationships.createRelationship(2,"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties","docProps/core.xml"),this.fileRelationships.createRelationship(3,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties","docProps/app.xml"),this.fileRelationships.createRelationship(4,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties","docProps/custom.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles","styles.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/numbering","numbering.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footnotes","footnotes.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/settings","settings.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments","comments.xml")}get Document(){return this.documentWrapper}get Styles(){return this.styles}get CoreProperties(){return this.coreProperties}get Numbering(){return this.numbering}get Media(){return this.media}get FileRelationships(){return this.fileRelationships}get Headers(){return this.headers.map(i=>i.header)}get Footers(){return this.footers.map(i=>i.footer)}get ContentTypes(){return this.contentTypes}get CustomProperties(){return this.customProperties}get AppProperties(){return this.appProperties}get FootNotes(){return this.footnotesWrapper}get Settings(){return this.settings}get Comments(){return this.comments}}function ui(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Aa={exports:{}};Aa.exports=function e(o,r,s){function l(_,T){if(!r[_]){if(!o[_]){if(!T&&ui)return ui(_);if(a)return a(_,!0);var x=new Error("Cannot find module '"+_+"'");throw x.code="MODULE_NOT_FOUND",x}var f=r[_]={exports:{}};o[_][0].call(f.exports,function(b){return l(o[_][1][b]||b)},f,f.exports,e,o,r,s)}return r[_].exports}for(var a=ui,p=0;p<s.length;p++)l(s[p]);return l}({1:[function(e,o,r){var s=e("./utils"),l=e("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(p){for(var _,T,A,f,b,y,D=[],v=0,N=p.length,I=N,q="string"!==s.getTypeOf(p);v<p.length;)I=N-v,A=q?(_=p[v++],T=v<N?p[v++]:0,v<N?p[v++]:0):(_=p.charCodeAt(v++),T=v<N?p.charCodeAt(v++):0,v<N?p.charCodeAt(v++):0),f=(3&_)<<4|T>>4,b=1<I?(15&T)<<2|A>>6:64,y=2<I?63&A:64,D.push(a.charAt(_>>2)+a.charAt(f)+a.charAt(b)+a.charAt(y));return D.join("")},r.decode=function(p){var _,T,A,x,f,b,y=0,D=0,v="data:";if(p.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");var N,I=3*(p=p.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(p.charAt(p.length-1)===a.charAt(64)&&I--,p.charAt(p.length-2)===a.charAt(64)&&I--,I%1!=0)throw new Error("Invalid base64 input, bad content length.");for(N=l.uint8array?new Uint8Array(0|I):new Array(0|I);y<p.length;)_=a.indexOf(p.charAt(y++))<<2|(x=a.indexOf(p.charAt(y++)))>>4,T=(15&x)<<4|(f=a.indexOf(p.charAt(y++)))>>2,A=(3&f)<<6|(b=a.indexOf(p.charAt(y++))),N[D++]=_,64!==f&&(N[D++]=T),64!==b&&(N[D++]=A);return N}},{"./support":30,"./utils":32}],2:[function(e,o,r){var s=e("./external"),l=e("./stream/DataWorker"),a=e("./stream/Crc32Probe"),p=e("./stream/DataLengthProbe");function _(T,A,x,f,b){this.compressedSize=T,this.uncompressedSize=A,this.crc32=x,this.compression=f,this.compressedContent=b}_.prototype={getContentWorker:function(){var T=new l(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new p("data_length")),A=this;return T.on("end",function(){if(this.streamInfo.data_length!==A.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),T},getCompressedWorker:function(){return new l(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},_.createWorkerFrom=function(T,A,x){return T.pipe(new a).pipe(new p("uncompressedSize")).pipe(A.compressWorker(x)).pipe(new p("compressedSize")).withStreamInfo("compression",A)},o.exports=_},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,o,r){var s=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,o,r){var s=e("./utils"),l=function(){for(var a,p=[],_=0;_<256;_++){a=_;for(var T=0;T<8;T++)a=1&a?3988292384^a>>>1:a>>>1;p[_]=a}return p}();o.exports=function(a,p){return void 0!==a&&a.length?"string"!==s.getTypeOf(a)?function(_,T,A,x){var f=l,b=0+A;_^=-1;for(var y=0;y<b;y++)_=_>>>8^f[255&(_^T[y])];return-1^_}(0|p,a,a.length):function(_,T,A,x){var f=l,b=0+A;_^=-1;for(var y=0;y<b;y++)_=_>>>8^f[255&(_^T.charCodeAt(y))];return-1^_}(0|p,a,a.length):0}},{"./utils":32}],5:[function(e,o,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,o,r){var s;s=typeof Promise<"u"?Promise:e("lie"),o.exports={Promise:s}},{lie:37}],7:[function(e,o,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=e("pako"),a=e("./utils"),p=e("./stream/GenericWorker"),_=s?"uint8array":"array";function T(A,x){p.call(this,"FlateWorker/"+A),this._pako=null,this._pakoAction=A,this._pakoOptions=x,this.meta={}}r.magic="\b\0",a.inherits(T,p),T.prototype.processChunk=function(A){this.meta=A.meta,null===this._pako&&this._createPako(),this._pako.push(a.transformTo(_,A.data),!1)},T.prototype.flush=function(){p.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},T.prototype.cleanUp=function(){p.prototype.cleanUp.call(this),this._pako=null},T.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var A=this;this._pako.onData=function(x){A.push({data:x,meta:A.meta})}},r.compressWorker=function(A){return new T("Deflate",A)},r.uncompressWorker=function(){return new T("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,o,r){function s(f,b){var y,D="";for(y=0;y<b;y++)D+=String.fromCharCode(255&f),f>>>=8;return D}function l(f,b,y,D,v,N){var I,q,P=f.file,X=f.compression,Y=N!==_.utf8encode,nt=a.transformTo("string",N(P.name)),F=a.transformTo("string",_.utf8encode(P.name)),lt=P.comment,pt=a.transformTo("string",N(lt)),U=a.transformTo("string",_.utf8encode(lt)),Q=F.length!==P.name.length,C=U.length!==lt.length,et="",_t="",z="",xt=P.dir,st=P.date,gt={crc32:0,compressedSize:0,uncompressedSize:0};b&&!y||(gt.crc32=f.crc32,gt.compressedSize=f.compressedSize,gt.uncompressedSize=f.uncompressedSize);var J=0;b&&(J|=8),Y||!Q&&!C||(J|=2048);var it,g,S=0,H=0;xt&&(S|=16),"UNIX"===v?(H=798,S|=(g=it=P.unixPermissions,it||(g=xt?16893:33204),(65535&g)<<16)):(H=20,S|=function(it){return 63&(it||0)}(P.dosPermissions)),I=st.getUTCHours(),I<<=6,I|=st.getUTCMinutes(),I<<=5,I|=st.getUTCSeconds()/2,q=st.getUTCFullYear()-1980,q<<=4,q|=st.getUTCMonth()+1,q<<=5,q|=st.getUTCDate(),Q&&(_t=s(1,1)+s(T(nt),4)+F,et+="up"+s(_t.length,2)+_t),C&&(z=s(1,1)+s(T(pt),4)+U,et+="uc"+s(z.length,2)+z);var G="";return G+="\n\0",G+=s(J,2),G+=X.magic,G+=s(I,2),G+=s(q,2),G+=s(gt.crc32,4),G+=s(gt.compressedSize,4),G+=s(gt.uncompressedSize,4),G+=s(nt.length,2),G+=s(et.length,2),{fileRecord:A.LOCAL_FILE_HEADER+G+nt+et,dirRecord:A.CENTRAL_FILE_HEADER+s(H,2)+G+s(pt.length,2)+"\0\0\0\0"+s(S,4)+s(D,4)+nt+et+pt}}var a=e("../utils"),p=e("../stream/GenericWorker"),_=e("../utf8"),T=e("../crc32"),A=e("../signature");function x(f,b,y,D){p.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=y,this.encodeFileName=D,this.streamFiles=f,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(x,p),x.prototype.push=function(f){var b=f.meta.percent||0,y=this.entriesCount,D=this._sources.length;this.accumulate?this.contentBuffer.push(f):(this.bytesWritten+=f.data.length,p.prototype.push.call(this,{data:f.data,meta:{currentFile:this.currentFile,percent:y?(b+100*(y-D-1))/y:100}}))},x.prototype.openedSource=function(f){this.currentSourceOffset=this.bytesWritten,this.currentFile=f.file.name;var b=this.streamFiles&&!f.file.dir;if(b){var y=l(f,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:y.fileRecord,meta:{percent:0}})}else this.accumulate=!0},x.prototype.closedSource=function(f){this.accumulate=!1;var D,b=this.streamFiles&&!f.file.dir,y=l(f,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(y.dirRecord),b)this.push({data:(D=f,A.DATA_DESCRIPTOR+s(D.crc32,4)+s(D.compressedSize,4)+s(D.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:y.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},x.prototype.flush=function(){for(var f=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var v,N,I,X,D=(v=this.dirRecords.length,N=this.bytesWritten-f,I=f,X=a.transformTo("string",(0,this.encodeFileName)(this.zipComment)),A.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(v,2)+s(v,2)+s(N,4)+s(I,4)+s(X.length,2)+X);this.push({data:D,meta:{percent:100}})},x.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},x.prototype.registerPrevious=function(f){this._sources.push(f);var b=this;return f.on("data",function(y){b.processChunk(y)}),f.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),f.on("error",function(y){b.error(y)}),this},x.prototype.resume=function(){return!!p.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},x.prototype.error=function(f){var b=this._sources;if(!p.prototype.error.call(this,f))return!1;for(var y=0;y<b.length;y++)try{b[y].error(f)}catch{}return!0},x.prototype.lock=function(){p.prototype.lock.call(this);for(var f=this._sources,b=0;b<f.length;b++)f[b].lock()},o.exports=x},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,o,r){var s=e("../compressions"),l=e("./ZipFileWorker");r.generateWorker=function(a,p,_){var T=new l(p.streamFiles,_,p.platform,p.encodeFileName),A=0;try{a.forEach(function(x,f){A++;var b=function(N,I){var q=N||I,P=s[q];if(!P)throw new Error(q+" is not a valid compression method !");return P}(f.options.compression,p.compression),D=f.dir,v=f.date;f._compressWorker(b,f.options.compressionOptions||p.compressionOptions||{}).withStreamInfo("file",{name:x,dir:D,date:v,comment:f.comment||"",unixPermissions:f.unixPermissions,dosPermissions:f.dosPermissions}).pipe(T)}),T.entriesCount=A}catch(x){T.error(x)}return T}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,o,r){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new s;for(var a in this)"function"!=typeof this[a]&&(l[a]=this[a]);return l}}(s.prototype=e("./object")).loadAsync=e("./load"),s.support=e("./support"),s.defaults=e("./defaults"),s.version="3.10.1",s.loadAsync=function(l,a){return(new s).loadAsync(l,a)},s.external=e("./external"),o.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,o,r){var s=e("./utils"),l=e("./external"),a=e("./utf8"),p=e("./zipEntries"),_=e("./stream/Crc32Probe"),T=e("./nodejsUtils");function A(x){return new l.Promise(function(f,b){var y=x.decompressed.getContentWorker().pipe(new _);y.on("error",function(D){b(D)}).on("end",function(){y.streamInfo.crc32!==x.decompressed.crc32?b(new Error("Corrupted zip : CRC32 mismatch")):f()}).resume()})}o.exports=function(x,f){var b=this;return f=s.extend(f||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),T.isNode&&T.isStream(x)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",x,!0,f.optimizedBinaryString,f.base64).then(function(y){var D=new p(f);return D.load(y),D}).then(function(y){var D=[l.Promise.resolve(y)],v=y.files;if(f.checkCRC32)for(var N=0;N<v.length;N++)D.push(A(v[N]));return l.Promise.all(D)}).then(function(y){for(var D=y.shift(),v=D.files,N=0;N<v.length;N++){var I=v[N],q=I.fileNameStr,P=s.resolve(I.fileNameStr);b.file(P,I.decompressed,{binary:!0,optimizedBinaryString:!0,date:I.date,dir:I.dir,comment:I.fileCommentStr.length?I.fileCommentStr:null,unixPermissions:I.unixPermissions,dosPermissions:I.dosPermissions,createFolders:f.createFolders}),I.dir||(b.file(P).unsafeOriginalName=q)}return D.zipComment.length&&(b.comment=D.zipComment),b})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,o,r){var s=e("../utils"),l=e("../stream/GenericWorker");function a(p,_){l.call(this,"Nodejs stream input adapter for "+p),this._upstreamEnded=!1,this._bindStream(_)}s.inherits(a,l),a.prototype._bindStream=function(p){var _=this;(this._stream=p).pause(),p.on("data",function(T){_.push({data:T,meta:{percent:0}})}).on("error",function(T){_.isPaused?this.generatedError=T:_.error(T)}).on("end",function(){_.isPaused?_._upstreamEnded=!0:_.end()})},a.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},o.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,o,r){var s=e("readable-stream").Readable;function l(a,p,_){s.call(this,p),this._helper=a;var T=this;a.on("data",function(A,x){T.push(A)||T._helper.pause(),_&&_(x)}).on("error",function(A){T.emit("error",A)}).on("end",function(){T.push(null)})}e("../utils").inherits(l,s),l.prototype._read=function(){this._helper.resume()},o.exports=l},{"../utils":32,"readable-stream":16}],14:[function(e,o,r){o.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,l);if("number"==typeof s)throw new Error('The "data" argument must not be a number');return new Buffer(s,l)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var l=new Buffer(s);return l.fill(0),l},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&"function"==typeof s.on&&"function"==typeof s.pause&&"function"==typeof s.resume}}},{}],15:[function(e,o,r){function s(P,X,Y){var nt,U,F=a.getTypeOf(X),lt=a.extend(Y||{},T);lt.date=lt.date||new Date,null!==lt.compression&&(lt.compression=lt.compression.toUpperCase()),"string"==typeof lt.unixPermissions&&(lt.unixPermissions=parseInt(lt.unixPermissions,8)),lt.unixPermissions&&16384&lt.unixPermissions&&(lt.dir=!0),lt.dosPermissions&&16&lt.dosPermissions&&(lt.dir=!0),lt.dir&&(P=v(P)),lt.createFolders&&(nt=D(P))&&N.call(this,nt,!0),Y&&void 0!==Y.binary||(lt.binary=!("string"===F&&!1===lt.binary&&!1===lt.base64)),(X instanceof A&&0===X.uncompressedSize||lt.dir||!X||0===X.length)&&(lt.base64=!1,lt.binary=!0,X="",lt.compression="STORE",F="string"),U=X instanceof A||X instanceof p?X:b.isNode&&b.isStream(X)?new y(P,X):a.prepareContent(P,X,lt.binary,lt.optimizedBinaryString,lt.base64);var Q=new x(P,U,lt);this.files[P]=Q}var l=e("./utf8"),a=e("./utils"),p=e("./stream/GenericWorker"),_=e("./stream/StreamHelper"),T=e("./defaults"),A=e("./compressedObject"),x=e("./zipObject"),f=e("./generate"),b=e("./nodejsUtils"),y=e("./nodejs/NodejsStreamInputAdapter"),D=function(P){"/"===P.slice(-1)&&(P=P.substring(0,P.length-1));var X=P.lastIndexOf("/");return 0<X?P.substring(0,X):""},v=function(P){return"/"!==P.slice(-1)&&(P+="/"),P},N=function(P,X){return X=void 0!==X?X:T.createFolders,P=v(P),this.files[P]||s.call(this,P,null,{dir:!0,createFolders:X}),this.files[P]};function I(P){return"[object RegExp]"===Object.prototype.toString.call(P)}var q={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(P){var X,Y,nt;for(X in this.files)nt=this.files[X],(Y=X.slice(this.root.length,X.length))&&X.slice(0,this.root.length)===this.root&&P(Y,nt)},filter:function(P){var X=[];return this.forEach(function(Y,nt){P(Y,nt)&&X.push(nt)}),X},file:function(P,X,Y){if(1!==arguments.length)return s.call(this,P=this.root+P,X,Y),this;if(I(P)){var nt=P;return this.filter(function(lt,pt){return!pt.dir&&nt.test(lt)})}var F=this.files[this.root+P];return F&&!F.dir?F:null},folder:function(P){if(!P)return this;if(I(P))return this.filter(function(F,lt){return lt.dir&&P.test(F)});var Y=N.call(this,this.root+P),nt=this.clone();return nt.root=Y.name,nt},remove:function(P){var X=this.files[P=this.root+P];if(X||("/"!==P.slice(-1)&&(P+="/"),X=this.files[P]),X&&!X.dir)delete this.files[P];else for(var Y=this.filter(function(F,lt){return lt.name.slice(0,P.length)===P}),nt=0;nt<Y.length;nt++)delete this.files[Y[nt].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(P){var X,Y={};try{if((Y=a.extend(P||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=Y.type.toLowerCase(),Y.compression=Y.compression.toUpperCase(),"binarystring"===Y.type&&(Y.type="string"),!Y.type)throw new Error("No output type specified.");a.checkSupport(Y.type),"darwin"!==Y.platform&&"freebsd"!==Y.platform&&"linux"!==Y.platform&&"sunos"!==Y.platform||(Y.platform="UNIX"),"win32"===Y.platform&&(Y.platform="DOS"),X=f.generateWorker(this,Y,Y.comment||this.comment||"")}catch(F){(X=new p("error")).error(F)}return new _(X,Y.type||"string",Y.mimeType)},generateAsync:function(P,X){return this.generateInternalStream(P).accumulate(X)},generateNodeStream:function(P,X){return(P=P||{}).type||(P.type="nodebuffer"),this.generateInternalStream(P).toNodejsStream(X)}};o.exports=q},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,o,r){o.exports=e("stream")},{stream:void 0}],17:[function(e,o,r){var s=e("./DataReader");function l(a){s.call(this,a);for(var p=0;p<this.data.length;p++)a[p]=255&a[p]}e("../utils").inherits(l,s),l.prototype.byteAt=function(a){return this.data[this.zero+a]},l.prototype.lastIndexOfSignature=function(a){for(var p=a.charCodeAt(0),_=a.charCodeAt(1),T=a.charCodeAt(2),A=a.charCodeAt(3),x=this.length-4;0<=x;--x)if(this.data[x]===p&&this.data[x+1]===_&&this.data[x+2]===T&&this.data[x+3]===A)return x-this.zero;return-1},l.prototype.readAndCheckSignature=function(a){var p=a.charCodeAt(0),_=a.charCodeAt(1),T=a.charCodeAt(2),A=a.charCodeAt(3),x=this.readData(4);return p===x[0]&&_===x[1]&&T===x[2]&&A===x[3]},l.prototype.readData=function(a){if(this.checkOffset(a),0===a)return[];var p=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,p},o.exports=l},{"../utils":32,"./DataReader":18}],18:[function(e,o,r){var s=e("../utils");function l(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var p,_=0;for(this.checkOffset(a),p=this.index+a-1;p>=this.index;p--)_=(_<<8)+this.byteAt(p);return this.index+=a,_},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},o.exports=l},{"../utils":32}],19:[function(e,o,r){var s=e("./Uint8ArrayReader");function l(a){s.call(this,a)}e("../utils").inherits(l,s),l.prototype.readData=function(a){this.checkOffset(a);var p=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,p},o.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,o,r){var s=e("./DataReader");function l(a){s.call(this,a)}e("../utils").inherits(l,s),l.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},l.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},l.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},l.prototype.readData=function(a){this.checkOffset(a);var p=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,p},o.exports=l},{"../utils":32,"./DataReader":18}],21:[function(e,o,r){var s=e("./ArrayReader");function l(a){s.call(this,a)}e("../utils").inherits(l,s),l.prototype.readData=function(a){if(this.checkOffset(a),0===a)return new Uint8Array(0);var p=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,p},o.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(e,o,r){var s=e("../utils"),l=e("../support"),a=e("./ArrayReader"),p=e("./StringReader"),_=e("./NodeBufferReader"),T=e("./Uint8ArrayReader");o.exports=function(A){var x=s.getTypeOf(A);return s.checkSupport(x),"string"!==x||l.uint8array?"nodebuffer"===x?new _(A):l.uint8array?new T(s.transformTo("uint8array",A)):new a(s.transformTo("array",A)):new p(A)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,o,r){r.LOCAL_FILE_HEADER="PK\x03\x04",r.CENTRAL_FILE_HEADER="PK\x01\x02",r.CENTRAL_DIRECTORY_END="PK\x05\x06",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,o,r){var s=e("./GenericWorker"),l=e("../utils");function a(p){s.call(this,"ConvertWorker to "+p),this.destType=p}l.inherits(a,s),a.prototype.processChunk=function(p){this.push({data:l.transformTo(this.destType,p.data),meta:p.meta})},o.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(e,o,r){var s=e("./GenericWorker"),l=e("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(a,s),a.prototype.processChunk=function(p){this.streamInfo.crc32=l(p.data,this.streamInfo.crc32||0),this.push(p)},o.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,o,r){var s=e("../utils"),l=e("./GenericWorker");function a(p){l.call(this,"DataLengthProbe for "+p),this.propName=p,this.withStreamInfo(p,0)}s.inherits(a,l),a.prototype.processChunk=function(p){p&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+p.data.length),l.prototype.processChunk.call(this,p)},o.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(e,o,r){var s=e("../utils"),l=e("./GenericWorker");function a(p){l.call(this,"DataWorker");var _=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,p.then(function(T){_.dataIsReady=!0,_.data=T,_.max=T&&T.length||0,_.type=s.getTypeOf(T),_.isPaused||_._tickAndRepeat()},function(T){_.error(T)})}s.inherits(a,l),a.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var p=null,_=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":p=this.data.substring(this.index,_);break;case"uint8array":p=this.data.subarray(this.index,_);break;case"array":case"nodebuffer":p=this.data.slice(this.index,_)}return this.index=_,this.push({data:p,meta:{percent:this.max?this.index/this.max*100:0}})},o.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(e,o,r){function s(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,a){return this._listeners[l].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,a){if(this._listeners[l])for(var p=0;p<this._listeners[l].length;p++)this._listeners[l][p].call(this,a)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var a=this;return l.on("data",function(p){a.processChunk(p)}),l.on("end",function(){a.end()}),l.on("error",function(p){a.error(p)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,a){return this.extraStreamInfo[l]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},o.exports=s},{}],29:[function(e,o,r){var s=e("../utils"),l=e("./ConvertWorker"),a=e("./GenericWorker"),p=e("../base64"),_=e("../support"),T=e("../external"),A=null;if(_.nodestream)try{A=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(b,y,D){var v=y;switch(y){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=y,this._mimeType=D,s.checkSupport(v),this._worker=b.pipe(new l(v)),b.lock()}catch(N){this._worker=new a("error"),this._worker.error(N)}}f.prototype={accumulate:function(b){return function x(b,y){return new T.Promise(function(D,v){var N=[],I=b._internalType,q=b._outputType,P=b._mimeType;b.on("data",function(X,Y){N.push(X),y&&y(Y)}).on("error",function(X){N=[],v(X)}).on("end",function(){try{var X=function(Y,nt,F){switch(Y){case"blob":return s.newBlob(s.transformTo("arraybuffer",nt),F);case"base64":return p.encode(nt);default:return s.transformTo(Y,nt)}}(q,function(Y,nt){var F,lt=0,pt=null,U=0;for(F=0;F<nt.length;F++)U+=nt[F].length;switch(Y){case"string":return nt.join("");case"array":return Array.prototype.concat.apply([],nt);case"uint8array":for(pt=new Uint8Array(U),F=0;F<nt.length;F++)pt.set(nt[F],lt),lt+=nt[F].length;return pt;case"nodebuffer":return Buffer.concat(nt);default:throw new Error("concat : unsupported type '"+Y+"'")}}(I,N),P);D(X)}catch(Y){v(Y)}N=[]}).resume()})}(this,b)},on:function(b,y){var D=this;return this._worker.on(b,"data"===b?function(v){y.call(D,v.data,v.meta)}:function(){s.delay(y,arguments,D)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(b){if(s.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new A(this,{objectMode:"nodebuffer"!==this._outputType},b)}},o.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,o,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var s=new ArrayBuffer(0);try{r.blob=0===new Blob([s],{type:"application/zip"}).size}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(s),r.blob=0===l.getBlob("application/zip").size}catch{r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(e,o,r){for(var s=e("./utils"),l=e("./support"),a=e("./nodejsUtils"),p=e("./stream/GenericWorker"),_=new Array(256),T=0;T<256;T++)_[T]=252<=T?6:248<=T?5:240<=T?4:224<=T?3:192<=T?2:1;function A(){p.call(this,"utf-8 decode"),this.leftOver=null}function x(){p.call(this,"utf-8 encode")}_[254]=_[254]=1,r.utf8encode=function(f){return l.nodebuffer?a.newBufferFrom(f,"utf-8"):function(b){var y,D,v,N,I,q=b.length,P=0;for(N=0;N<q;N++)55296==(64512&(D=b.charCodeAt(N)))&&N+1<q&&56320==(64512&(v=b.charCodeAt(N+1)))&&(D=65536+(D-55296<<10)+(v-56320),N++),P+=D<128?1:D<2048?2:D<65536?3:4;for(y=l.uint8array?new Uint8Array(P):new Array(P),N=I=0;I<P;N++)55296==(64512&(D=b.charCodeAt(N)))&&N+1<q&&56320==(64512&(v=b.charCodeAt(N+1)))&&(D=65536+(D-55296<<10)+(v-56320),N++),D<128?y[I++]=D:(D<2048?y[I++]=192|D>>>6:(D<65536?y[I++]=224|D>>>12:(y[I++]=240|D>>>18,y[I++]=128|D>>>12&63),y[I++]=128|D>>>6&63),y[I++]=128|63&D);return y}(f)},r.utf8decode=function(f){return l.nodebuffer?s.transformTo("nodebuffer",f).toString("utf-8"):function(b){var y,D,v,N,I=b.length,q=new Array(2*I);for(y=D=0;y<I;)if((v=b[y++])<128)q[D++]=v;else if(4<(N=_[v]))q[D++]=65533,y+=N-1;else{for(v&=2===N?31:3===N?15:7;1<N&&y<I;)v=v<<6|63&b[y++],N--;1<N?q[D++]=65533:v<65536?q[D++]=v:(q[D++]=55296|(v-=65536)>>10&1023,q[D++]=56320|1023&v)}return q.length!==D&&(q.subarray?q=q.subarray(0,D):q.length=D),s.applyFromCharCode(q)}(f=s.transformTo(l.uint8array?"uint8array":"array",f))},s.inherits(A,p),A.prototype.processChunk=function(f){var b=s.transformTo(l.uint8array?"uint8array":"array",f.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var y=b;(b=new Uint8Array(y.length+this.leftOver.length)).set(this.leftOver,0),b.set(y,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var D=function(N,I){var q;for((I=I||N.length)>N.length&&(I=N.length),q=I-1;0<=q&&128==(192&N[q]);)q--;return q<0||0===q?I:q+_[N[q]]>I?q:I}(b),v=b;D!==b.length&&(l.uint8array?(v=b.subarray(0,D),this.leftOver=b.subarray(D,b.length)):(v=b.slice(0,D),this.leftOver=b.slice(D,b.length))),this.push({data:r.utf8decode(v),meta:f.meta})},A.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=A,s.inherits(x,p),x.prototype.processChunk=function(f){this.push({data:r.utf8encode(f.data),meta:f.meta})},r.Utf8EncodeWorker=x},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,o,r){var s=e("./support"),l=e("./base64"),a=e("./nodejsUtils"),p=e("./external");function _(y){return y}function T(y,D){for(var v=0;v<y.length;++v)D[v]=255&y.charCodeAt(v);return D}e("setimmediate"),r.newBlob=function(y,D){r.checkSupport("blob");try{return new Blob([y],{type:D})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(y),v.getBlob(D)}catch{throw new Error("Bug : can't construct the Blob.")}}};var A={stringifyByChunk:function(y,D,v){var N=[],I=0,q=y.length;if(q<=v)return String.fromCharCode.apply(null,y);for(;I<q;)N.push(String.fromCharCode.apply(null,"array"===D||"nodebuffer"===D?y.slice(I,Math.min(I+v,q)):y.subarray(I,Math.min(I+v,q)))),I+=v;return N.join("")},stringifyByChar:function(y){for(var D="",v=0;v<y.length;v++)D+=String.fromCharCode(y[v]);return D},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&1===String.fromCharCode.apply(null,a.allocBuffer(1)).length}catch{return!1}}()}};function x(y){var D=65536,v=r.getTypeOf(y),N=!0;if("uint8array"===v?N=A.applyCanBeUsed.uint8array:"nodebuffer"===v&&(N=A.applyCanBeUsed.nodebuffer),N)for(;1<D;)try{return A.stringifyByChunk(y,v,D)}catch{D=Math.floor(D/2)}return A.stringifyByChar(y)}function f(y,D){for(var v=0;v<y.length;v++)D[v]=y[v];return D}r.applyFromCharCode=x;var b={};b.string={string:_,array:function(y){return T(y,new Array(y.length))},arraybuffer:function(y){return b.string.uint8array(y).buffer},uint8array:function(y){return T(y,new Uint8Array(y.length))},nodebuffer:function(y){return T(y,a.allocBuffer(y.length))}},b.array={string:x,array:_,arraybuffer:function(y){return new Uint8Array(y).buffer},uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return a.newBufferFrom(y)}},b.arraybuffer={string:function(y){return x(new Uint8Array(y))},array:function(y){return f(new Uint8Array(y),new Array(y.byteLength))},arraybuffer:_,uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return a.newBufferFrom(new Uint8Array(y))}},b.uint8array={string:x,array:function(y){return f(y,new Array(y.length))},arraybuffer:function(y){return y.buffer},uint8array:_,nodebuffer:function(y){return a.newBufferFrom(y)}},b.nodebuffer={string:x,array:function(y){return f(y,new Array(y.length))},arraybuffer:function(y){return b.nodebuffer.uint8array(y).buffer},uint8array:function(y){return f(y,new Uint8Array(y.length))},nodebuffer:_},r.transformTo=function(y,D){if(D=D||"",!y)return D;r.checkSupport(y);var v=r.getTypeOf(D);return b[v][y](D)},r.resolve=function(y){for(var D=y.split("/"),v=[],N=0;N<D.length;N++){var I=D[N];"."===I||""===I&&0!==N&&N!==D.length-1||(".."===I?v.pop():v.push(I))}return v.join("/")},r.getTypeOf=function(y){return"string"==typeof y?"string":"[object Array]"===Object.prototype.toString.call(y)?"array":s.nodebuffer&&a.isBuffer(y)?"nodebuffer":s.uint8array&&y instanceof Uint8Array?"uint8array":s.arraybuffer&&y instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(y){if(!s[y.toLowerCase()])throw new Error(y+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(y){var D,v,N="";for(v=0;v<(y||"").length;v++)N+="\\x"+((D=y.charCodeAt(v))<16?"0":"")+D.toString(16).toUpperCase();return N},r.delay=function(y,D,v){setImmediate(function(){y.apply(v||null,D||[])})},r.inherits=function(y,D){function v(){}v.prototype=D.prototype,y.prototype=new v},r.extend=function(){var y,D,v={};for(y=0;y<arguments.length;y++)for(D in arguments[y])Object.prototype.hasOwnProperty.call(arguments[y],D)&&void 0===v[D]&&(v[D]=arguments[y][D]);return v},r.prepareContent=function(y,D,v,N,I){return p.Promise.resolve(D).then(function(q){return s.blob&&(q instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(q)))&&typeof FileReader<"u"?new p.Promise(function(P,X){var Y=new FileReader;Y.onload=function(nt){P(nt.target.result)},Y.onerror=function(nt){X(nt.target.error)},Y.readAsArrayBuffer(q)}):q}).then(function(q){var X,P=r.getTypeOf(q);return P?("arraybuffer"===P?q=r.transformTo("uint8array",q):"string"===P&&(I?q=l.decode(q):v&&!0!==N&&(q=T(X=q,s.uint8array?new Uint8Array(X.length):new Array(X.length)))),q):p.Promise.reject(new Error("Can't read the data of '"+y+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,o,r){var s=e("./reader/readerFor"),l=e("./utils"),a=e("./signature"),p=e("./zipEntry"),_=e("./support");function T(A){this.files=[],this.loadOptions=A}T.prototype={checkSignature:function(A){if(!this.reader.readAndCheckSignature(A)){this.reader.index-=4;var x=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(x)+", expected "+l.pretty(A)+")")}},isSignature:function(A,x){var f=this.reader.index;this.reader.setIndex(A);var b=this.reader.readString(4)===x;return this.reader.setIndex(f),b},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var A=this.reader.readData(this.zipCommentLength),f=l.transformTo(_.uint8array?"uint8array":"array",A);this.zipComment=this.loadOptions.decodeFileName(f)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var A,x,f,b=this.zip64EndOfCentralSize-44;0<b;)A=this.reader.readInt(2),x=this.reader.readInt(4),f=this.reader.readData(x),this.zip64ExtensibleData[A]={id:A,length:x,value:f}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var A,x;for(A=0;A<this.files.length;A++)this.reader.setIndex((x=this.files[A]).localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),x.readLocalPart(this.reader),x.handleUTF8(),x.processAttributes()},readCentralDir:function(){var A;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(A=new p({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(A);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var A=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(A<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(A);var x=A;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(A=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(A),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var f=this.centralDirOffset+this.centralDirSize;this.zip64&&(f+=20,f+=12+this.zip64EndOfCentralSize);var b=x-f;if(0<b)this.isSignature(x,a.CENTRAL_FILE_HEADER)||(this.reader.zero=b);else if(b<0)throw new Error("Corrupted zip: missing "+Math.abs(b)+" bytes.")},prepareReader:function(A){this.reader=s(A)},load:function(A){this.prepareReader(A),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},o.exports=T},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,o,r){var s=e("./reader/readerFor"),l=e("./utils"),a=e("./compressedObject"),p=e("./crc32"),_=e("./utf8"),T=e("./compressions"),A=e("./support");function x(f,b){this.options=f,this.loadOptions=b}x.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(f){var b,y;if(f.skip(22),this.fileNameLength=f.readInt(2),y=f.readInt(2),this.fileName=f.readData(this.fileNameLength),f.skip(y),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(b=function(D){for(var v in T)if(Object.prototype.hasOwnProperty.call(T,v)&&T[v].magic===D)return T[v];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,b,f.readData(this.compressedSize))},readCentralPart:function(f){this.versionMadeBy=f.readInt(2),f.skip(2),this.bitFlag=f.readInt(2),this.compressionMethod=f.readString(2),this.date=f.readDate(),this.crc32=f.readInt(4),this.compressedSize=f.readInt(4),this.uncompressedSize=f.readInt(4);var b=f.readInt(2);if(this.extraFieldsLength=f.readInt(2),this.fileCommentLength=f.readInt(2),this.diskNumberStart=f.readInt(2),this.internalFileAttributes=f.readInt(2),this.externalFileAttributes=f.readInt(4),this.localHeaderOffset=f.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");f.skip(b),this.readExtraFields(f),this.parseZIP64ExtraField(f),this.fileComment=f.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var f=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==f&&(this.dosPermissions=63&this.externalFileAttributes),3==f&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var f=s(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=f.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=f.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=f.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=f.readInt(4))}},readExtraFields:function(f){var b,y,D,v=f.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});f.index+4<v;)b=f.readInt(2),y=f.readInt(2),D=f.readData(y),this.extraFields[b]={id:b,length:y,value:D};f.setIndex(v)},handleUTF8:function(){var f=A.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=_.utf8decode(this.fileName),this.fileCommentStr=_.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(null!==b)this.fileNameStr=b;else{var y=l.transformTo(f,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(y)}var D=this.findExtraFieldUnicodeComment();if(null!==D)this.fileCommentStr=D;else{var v=l.transformTo(f,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var f=this.extraFields[28789];if(f){var b=s(f.value);return 1!==b.readInt(1)||p(this.fileName)!==b.readInt(4)?null:_.utf8decode(b.readData(f.length-5))}return null},findExtraFieldUnicodeComment:function(){var f=this.extraFields[25461];if(f){var b=s(f.value);return 1!==b.readInt(1)||p(this.fileComment)!==b.readInt(4)?null:_.utf8decode(b.readData(f.length-5))}return null}},o.exports=x},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,o,r){function s(b,y,D){this.name=b,this.dir=D.dir,this.date=D.date,this.comment=D.comment,this.unixPermissions=D.unixPermissions,this.dosPermissions=D.dosPermissions,this._data=y,this._dataBinary=D.binary,this.options={compression:D.compression,compressionOptions:D.compressionOptions}}var l=e("./stream/StreamHelper"),a=e("./stream/DataWorker"),p=e("./utf8"),_=e("./compressedObject"),T=e("./stream/GenericWorker");s.prototype={internalStream:function(b){var y=null,D="string";try{if(!b)throw new Error("No output type specified.");var v="string"===(D=b.toLowerCase())||"text"===D;"binarystring"!==D&&"text"!==D||(D="string"),y=this._decompressWorker();var N=!this._dataBinary;N&&!v&&(y=y.pipe(new p.Utf8EncodeWorker)),!N&&v&&(y=y.pipe(new p.Utf8DecodeWorker))}catch(I){(y=new T("error")).error(I)}return new l(y,D,"")},async:function(b,y){return this.internalStream(b).accumulate(y)},nodeStream:function(b,y){return this.internalStream(b||"nodebuffer").toNodejsStream(y)},_compressWorker:function(b,y){if(this._data instanceof _&&this._data.compression.magic===b.magic)return this._data.getCompressedWorker();var D=this._decompressWorker();return this._dataBinary||(D=D.pipe(new p.Utf8EncodeWorker)),_.createWorkerFrom(D,b,y)},_decompressWorker:function(){return this._data instanceof _?this._data.getContentWorker():this._data instanceof T?this._data:new a(this._data)}};for(var A=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],x=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<A.length;f++)s.prototype[A[f]]=x;o.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,o,r){(function(s){var l,a,p=s.MutationObserver||s.WebKitMutationObserver;if(p){var _=0,T=new p(b),A=s.document.createTextNode("");T.observe(A,{characterData:!0}),l=function(){A.data=_=++_%2}}else if(s.setImmediate||void 0===s.MessageChannel)l="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var y=s.document.createElement("script");y.onreadystatechange=function(){b(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},s.document.documentElement.appendChild(y)}:function(){setTimeout(b,0)};else{var x=new s.MessageChannel;x.port1.onmessage=b,l=function(){x.port2.postMessage(0)}}var f=[];function b(){var y,D;a=!0;for(var v=f.length;v;){for(D=f,f=[],y=-1;++y<v;)D[y]();v=f.length}a=!1}o.exports=function(y){1!==f.push(y)||a||l()}}).call(this,typeof de<"u"?de:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,o,r){var s=e("immediate");function l(){}var a={},p=["REJECTED"],_=["FULFILLED"],T=["PENDING"];function A(v){if("function"!=typeof v)throw new TypeError("resolver must be a function");this.state=T,this.queue=[],this.outcome=void 0,v!==l&&y(this,v)}function x(v,N,I){this.promise=v,"function"==typeof N&&(this.onFulfilled=N,this.callFulfilled=this.otherCallFulfilled),"function"==typeof I&&(this.onRejected=I,this.callRejected=this.otherCallRejected)}function f(v,N,I){s(function(){var q;try{q=N(I)}catch(P){return a.reject(v,P)}q===v?a.reject(v,new TypeError("Cannot resolve promise with itself")):a.resolve(v,q)})}function b(v){var N=v&&v.then;if(v&&("object"==typeof v||"function"==typeof v)&&"function"==typeof N)return function(){N.apply(v,arguments)}}function y(v,N){var I=!1;function q(Y){I||(I=!0,a.reject(v,Y))}function P(Y){I||(I=!0,a.resolve(v,Y))}var X=D(function(){N(P,q)});"error"===X.status&&q(X.value)}function D(v,N){var I={};try{I.value=v(N),I.status="success"}catch(q){I.status="error",I.value=q}return I}(o.exports=A).prototype.finally=function(v){if("function"!=typeof v)return this;var N=this.constructor;return this.then(function(I){return N.resolve(v()).then(function(){return I})},function(I){return N.resolve(v()).then(function(){throw I})})},A.prototype.catch=function(v){return this.then(null,v)},A.prototype.then=function(v,N){if("function"!=typeof v&&this.state===_||"function"!=typeof N&&this.state===p)return this;var I=new this.constructor(l);return this.state!==T?f(I,this.state===_?v:N,this.outcome):this.queue.push(new x(I,v,N)),I},x.prototype.callFulfilled=function(v){a.resolve(this.promise,v)},x.prototype.otherCallFulfilled=function(v){f(this.promise,this.onFulfilled,v)},x.prototype.callRejected=function(v){a.reject(this.promise,v)},x.prototype.otherCallRejected=function(v){f(this.promise,this.onRejected,v)},a.resolve=function(v,N){var I=D(b,N);if("error"===I.status)return a.reject(v,I.value);var q=I.value;if(q)y(v,q);else{v.state=_,v.outcome=N;for(var P=-1,X=v.queue.length;++P<X;)v.queue[P].callFulfilled(N)}return v},a.reject=function(v,N){v.state=p,v.outcome=N;for(var I=-1,q=v.queue.length;++I<q;)v.queue[I].callRejected(N);return v},A.resolve=function(v){return v instanceof this?v:a.resolve(new this(l),v)},A.reject=function(v){var N=new this(l);return a.reject(N,v)},A.all=function(v){var N=this;if("[object Array]"!==Object.prototype.toString.call(v))return this.reject(new TypeError("must be an array"));var I=v.length,q=!1;if(!I)return this.resolve([]);for(var P=new Array(I),X=0,Y=-1,nt=new this(l);++Y<I;)F(v[Y],Y);return nt;function F(lt,pt){N.resolve(lt).then(function(U){P[pt]=U,++X!==I||q||(q=!0,a.resolve(nt,P))},function(U){q||(q=!0,a.reject(nt,U))})}},A.race=function(v){if("[object Array]"!==Object.prototype.toString.call(v))return this.reject(new TypeError("must be an array"));var I=v.length,q=!1;if(!I)return this.resolve([]);for(var P=-1,X=new this(l);++P<I;)this.resolve(v[P]).then(function(nt){q||(q=!0,a.resolve(X,nt))},function(nt){q||(q=!0,a.reject(X,nt))});return X}},{immediate:36}],38:[function(e,o,r){var s={};(0,e("./lib/utils/common").assign)(s,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),o.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,o,r){var s=e("./zlib/deflate"),l=e("./utils/common"),a=e("./utils/strings"),p=e("./zlib/messages"),_=e("./zlib/zstream"),T=Object.prototype.toString;function y(v){if(!(this instanceof y))return new y(v);this.options=l.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},v||{});var N=this.options;N.raw&&0<N.windowBits?N.windowBits=-N.windowBits:N.gzip&&0<N.windowBits&&N.windowBits<16&&(N.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var I=s.deflateInit2(this.strm,N.level,N.method,N.windowBits,N.memLevel,N.strategy);if(0!==I)throw new Error(p[I]);if(N.header&&s.deflateSetHeader(this.strm,N.header),N.dictionary){var q;if(q="string"==typeof N.dictionary?a.string2buf(N.dictionary):"[object ArrayBuffer]"===T.call(N.dictionary)?new Uint8Array(N.dictionary):N.dictionary,0!==(I=s.deflateSetDictionary(this.strm,q)))throw new Error(p[I]);this._dict_set=!0}}function D(v,N){var I=new y(N);if(I.push(v,!0),I.err)throw I.msg||p[I.err];return I.result}y.prototype.push=function(v,N){var I,q,P=this.strm,X=this.options.chunkSize;if(this.ended)return!1;q=N===~~N?N:!0===N?4:0,P.input="string"==typeof v?a.string2buf(v):"[object ArrayBuffer]"===T.call(v)?new Uint8Array(v):v,P.next_in=0,P.avail_in=P.input.length;do{if(0===P.avail_out&&(P.output=new l.Buf8(X),P.next_out=0,P.avail_out=X),1!==(I=s.deflate(P,q))&&0!==I)return this.onEnd(I),!(this.ended=!0);0!==P.avail_out&&(0!==P.avail_in||4!==q&&2!==q)||this.onData("string"===this.options.to?a.buf2binstring(l.shrinkBuf(P.output,P.next_out)):l.shrinkBuf(P.output,P.next_out))}while((0<P.avail_in||0===P.avail_out)&&1!==I);return 4===q?(I=s.deflateEnd(this.strm),this.onEnd(I),this.ended=!0,0===I):2!==q||(this.onEnd(0),!(P.avail_out=0))},y.prototype.onData=function(v){this.chunks.push(v)},y.prototype.onEnd=function(v){0===v&&(this.result="string"===this.options.to?this.chunks.join(""):l.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},r.Deflate=y,r.deflate=D,r.deflateRaw=function(v,N){return(N=N||{}).raw=!0,D(v,N)},r.gzip=function(v,N){return(N=N||{}).gzip=!0,D(v,N)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,o,r){var s=e("./zlib/inflate"),l=e("./utils/common"),a=e("./utils/strings"),p=e("./zlib/constants"),_=e("./zlib/messages"),T=e("./zlib/zstream"),A=e("./zlib/gzheader"),x=Object.prototype.toString;function f(y){if(!(this instanceof f))return new f(y);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},y||{});var D=this.options;D.raw&&0<=D.windowBits&&D.windowBits<16&&(D.windowBits=-D.windowBits,0===D.windowBits&&(D.windowBits=-15)),!(0<=D.windowBits&&D.windowBits<16)||y&&y.windowBits||(D.windowBits+=32),15<D.windowBits&&D.windowBits<48&&0==(15&D.windowBits)&&(D.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new T,this.strm.avail_out=0;var v=s.inflateInit2(this.strm,D.windowBits);if(v!==p.Z_OK)throw new Error(_[v]);this.header=new A,s.inflateGetHeader(this.strm,this.header)}function b(y,D){var v=new f(D);if(v.push(y,!0),v.err)throw v.msg||_[v.err];return v.result}f.prototype.push=function(y,D){var v,N,I,q,P,X,Y=this.strm,nt=this.options.chunkSize,F=this.options.dictionary,lt=!1;if(this.ended)return!1;N=D===~~D?D:!0===D?p.Z_FINISH:p.Z_NO_FLUSH,Y.input="string"==typeof y?a.binstring2buf(y):"[object ArrayBuffer]"===x.call(y)?new Uint8Array(y):y,Y.next_in=0,Y.avail_in=Y.input.length;do{if(0===Y.avail_out&&(Y.output=new l.Buf8(nt),Y.next_out=0,Y.avail_out=nt),(v=s.inflate(Y,p.Z_NO_FLUSH))===p.Z_NEED_DICT&&F&&(X="string"==typeof F?a.string2buf(F):"[object ArrayBuffer]"===x.call(F)?new Uint8Array(F):F,v=s.inflateSetDictionary(this.strm,X)),v===p.Z_BUF_ERROR&&!0===lt&&(v=p.Z_OK,lt=!1),v!==p.Z_STREAM_END&&v!==p.Z_OK)return this.onEnd(v),!(this.ended=!0);Y.next_out&&(0!==Y.avail_out&&v!==p.Z_STREAM_END&&(0!==Y.avail_in||N!==p.Z_FINISH&&N!==p.Z_SYNC_FLUSH)||("string"===this.options.to?(I=a.utf8border(Y.output,Y.next_out),q=Y.next_out-I,P=a.buf2string(Y.output,I),Y.next_out=q,Y.avail_out=nt-q,q&&l.arraySet(Y.output,Y.output,I,q,0),this.onData(P)):this.onData(l.shrinkBuf(Y.output,Y.next_out)))),0===Y.avail_in&&0===Y.avail_out&&(lt=!0)}while((0<Y.avail_in||0===Y.avail_out)&&v!==p.Z_STREAM_END);return v===p.Z_STREAM_END&&(N=p.Z_FINISH),N===p.Z_FINISH?(v=s.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===p.Z_OK):N!==p.Z_SYNC_FLUSH||(this.onEnd(p.Z_OK),!(Y.avail_out=0))},f.prototype.onData=function(y){this.chunks.push(y)},f.prototype.onEnd=function(y){y===p.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):l.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},r.Inflate=f,r.inflate=b,r.inflateRaw=function(y,D){return(D=D||{}).raw=!0,b(y,D)},r.ungzip=b},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,o,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(p){for(var _=Array.prototype.slice.call(arguments,1);_.length;){var T=_.shift();if(T){if("object"!=typeof T)throw new TypeError(T+"must be non-object");for(var A in T)T.hasOwnProperty(A)&&(p[A]=T[A])}}return p},r.shrinkBuf=function(p,_){return p.length===_?p:p.subarray?p.subarray(0,_):(p.length=_,p)};var l={arraySet:function(p,_,T,A,x){if(_.subarray&&p.subarray)p.set(_.subarray(T,T+A),x);else for(var f=0;f<A;f++)p[x+f]=_[T+f]},flattenChunks:function(p){var _,T,A,x,f,b;for(_=A=0,T=p.length;_<T;_++)A+=p[_].length;for(b=new Uint8Array(A),_=x=0,T=p.length;_<T;_++)b.set(f=p[_],x),x+=f.length;return b}},a={arraySet:function(p,_,T,A,x){for(var f=0;f<A;f++)p[x+f]=_[T+f]},flattenChunks:function(p){return[].concat.apply([],p)}};r.setTyped=function(p){p?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,l)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,a))},r.setTyped(s)},{}],42:[function(e,o,r){var s=e("./common"),l=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var p=new s.Buf8(256),_=0;_<256;_++)p[_]=252<=_?6:248<=_?5:240<=_?4:224<=_?3:192<=_?2:1;function T(A,x){if(x<65537&&(A.subarray&&a||!A.subarray&&l))return String.fromCharCode.apply(null,s.shrinkBuf(A,x));for(var f="",b=0;b<x;b++)f+=String.fromCharCode(A[b]);return f}p[254]=p[254]=1,r.string2buf=function(A){var x,f,b,y,D,v=A.length,N=0;for(y=0;y<v;y++)55296==(64512&(f=A.charCodeAt(y)))&&y+1<v&&56320==(64512&(b=A.charCodeAt(y+1)))&&(f=65536+(f-55296<<10)+(b-56320),y++),N+=f<128?1:f<2048?2:f<65536?3:4;for(x=new s.Buf8(N),y=D=0;D<N;y++)55296==(64512&(f=A.charCodeAt(y)))&&y+1<v&&56320==(64512&(b=A.charCodeAt(y+1)))&&(f=65536+(f-55296<<10)+(b-56320),y++),f<128?x[D++]=f:(f<2048?x[D++]=192|f>>>6:(f<65536?x[D++]=224|f>>>12:(x[D++]=240|f>>>18,x[D++]=128|f>>>12&63),x[D++]=128|f>>>6&63),x[D++]=128|63&f);return x},r.buf2binstring=function(A){return T(A,A.length)},r.binstring2buf=function(A){for(var x=new s.Buf8(A.length),f=0,b=x.length;f<b;f++)x[f]=A.charCodeAt(f);return x},r.buf2string=function(A,x){var f,b,y,D,v=x||A.length,N=new Array(2*v);for(f=b=0;f<v;)if((y=A[f++])<128)N[b++]=y;else if(4<(D=p[y]))N[b++]=65533,f+=D-1;else{for(y&=2===D?31:3===D?15:7;1<D&&f<v;)y=y<<6|63&A[f++],D--;1<D?N[b++]=65533:y<65536?N[b++]=y:(N[b++]=55296|(y-=65536)>>10&1023,N[b++]=56320|1023&y)}return T(N,b)},r.utf8border=function(A,x){var f;for((x=x||A.length)>A.length&&(x=A.length),f=x-1;0<=f&&128==(192&A[f]);)f--;return f<0||0===f?x:f+p[A[f]]>x?f:x}},{"./common":41}],43:[function(e,o,r){o.exports=function(s,l,a,p){for(var _=65535&s|0,T=s>>>16&65535|0,A=0;0!==a;){for(a-=A=2e3<a?2e3:a;T=T+(_=_+l[p++]|0)|0,--A;);_%=65521,T%=65521}return _|T<<16|0}},{}],44:[function(e,o,r){o.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,o,r){var s=function(){for(var l,a=[],p=0;p<256;p++){l=p;for(var _=0;_<8;_++)l=1&l?3988292384^l>>>1:l>>>1;a[p]=l}return a}();o.exports=function(l,a,p,_){var T=s,A=_+p;l^=-1;for(var x=_;x<A;x++)l=l>>>8^T[255&(l^a[x])];return-1^l}},{}],46:[function(e,o,r){var s,l=e("../utils/common"),a=e("./trees"),p=e("./adler32"),_=e("./crc32"),T=e("./messages"),b=-2,lt=258,pt=262,Q=113;function xt(m,j){return m.msg=T[j],j}function st(m){return(m<<1)-(4<m?9:0)}function gt(m){for(var j=m.length;0<=--j;)m[j]=0}function J(m){var j=m.state,w=j.pending;w>m.avail_out&&(w=m.avail_out),0!==w&&(l.arraySet(m.output,j.pending_buf,j.pending_out,w,m.next_out),m.next_out+=w,j.pending_out+=w,m.total_out+=w,m.avail_out-=w,j.pending-=w,0===j.pending&&(j.pending_out=0))}function S(m,j){a._tr_flush_block(m,0<=m.block_start?m.block_start:-1,m.strstart-m.block_start,j),m.block_start=m.strstart,J(m.strm)}function H(m,j){m.pending_buf[m.pending++]=j}function G(m,j){m.pending_buf[m.pending++]=j>>>8&255,m.pending_buf[m.pending++]=255&j}function it(m,j){var w,c,u=m.max_chain_length,d=m.strstart,R=m.prev_length,L=m.nice_match,B=m.strstart>m.w_size-pt?m.strstart-(m.w_size-pt):0,ot=m.window,ut=m.w_mask,at=m.prev,dt=m.strstart+lt,Tt=ot[d+R-1],Nt=ot[d+R];m.prev_length>=m.good_match&&(u>>=2),L>m.lookahead&&(L=m.lookahead);do{if(ot[(w=j)+R]===Nt&&ot[w+R-1]===Tt&&ot[w]===ot[d]&&ot[++w]===ot[d+1]){d+=2,w++;do{}while(ot[++d]===ot[++w]&&ot[++d]===ot[++w]&&ot[++d]===ot[++w]&&ot[++d]===ot[++w]&&ot[++d]===ot[++w]&&ot[++d]===ot[++w]&&ot[++d]===ot[++w]&&ot[++d]===ot[++w]&&d<dt);if(c=lt-(dt-d),d=dt-lt,R<c){if(m.match_start=j,L<=(R=c))break;Tt=ot[d+R-1],Nt=ot[d+R]}}}while((j=at[j&ut])>B&&0!=--u);return R<=m.lookahead?R:m.lookahead}function V(m){var j,w,c,u,d,R,L,B,ot,ut,at=m.w_size;do{if(u=m.window_size-m.lookahead-m.strstart,m.strstart>=at+(at-pt)){for(l.arraySet(m.window,m.window,at,at,0),m.match_start-=at,m.strstart-=at,m.block_start-=at,j=w=m.hash_size;c=m.head[--j],m.head[j]=at<=c?c-at:0,--w;);for(j=w=at;c=m.prev[--j],m.prev[j]=at<=c?c-at:0,--w;);u+=at}if(0===m.strm.avail_in)break;if(L=m.window,B=m.strstart+m.lookahead,ut=void 0,(ot=u)<(ut=(R=m.strm).avail_in)&&(ut=ot),w=0===ut?0:(R.avail_in-=ut,l.arraySet(L,R.input,R.next_in,ut,B),1===R.state.wrap?R.adler=p(R.adler,L,ut,B):2===R.state.wrap&&(R.adler=_(R.adler,L,ut,B)),R.next_in+=ut,R.total_in+=ut,ut),m.lookahead+=w,m.lookahead+m.insert>=3)for(m.ins_h=m.window[d=m.strstart-m.insert],m.ins_h=(m.ins_h<<m.hash_shift^m.window[d+1])&m.hash_mask;m.insert&&(m.ins_h=(m.ins_h<<m.hash_shift^m.window[d+3-1])&m.hash_mask,m.prev[d&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=d,d++,m.insert--,!(m.lookahead+m.insert<3)););}while(m.lookahead<pt&&0!==m.strm.avail_in)}function g(m,j){for(var w,c;;){if(m.lookahead<pt){if(V(m),m.lookahead<pt&&0===j)return 1;if(0===m.lookahead)break}if(w=0,m.lookahead>=3&&(m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+3-1])&m.hash_mask,w=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart),0!==w&&m.strstart-w<=m.w_size-pt&&(m.match_length=it(m,w)),m.match_length>=3)if(c=a._tr_tally(m,m.strstart-m.match_start,m.match_length-3),m.lookahead-=m.match_length,m.match_length<=m.max_lazy_match&&m.lookahead>=3){for(m.match_length--;m.strstart++,m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+3-1])&m.hash_mask,w=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart,0!=--m.match_length;);m.strstart++}else m.strstart+=m.match_length,m.match_length=0,m.ins_h=m.window[m.strstart],m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+1])&m.hash_mask;else c=a._tr_tally(m,0,m.window[m.strstart]),m.lookahead--,m.strstart++;if(c&&(S(m,!1),0===m.strm.avail_out))return 1}return m.insert=m.strstart<2?m.strstart:2,4===j?(S(m,!0),0===m.strm.avail_out?3:4):m.last_lit&&(S(m,!1),0===m.strm.avail_out)?1:2}function h(m,j){for(var w,c,u;;){if(m.lookahead<pt){if(V(m),m.lookahead<pt&&0===j)return 1;if(0===m.lookahead)break}if(w=0,m.lookahead>=3&&(m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+3-1])&m.hash_mask,w=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart),m.prev_length=m.match_length,m.prev_match=m.match_start,m.match_length=2,0!==w&&m.prev_length<m.max_lazy_match&&m.strstart-w<=m.w_size-pt&&(m.match_length=it(m,w),m.match_length<=5&&(1===m.strategy||3===m.match_length&&4096<m.strstart-m.match_start)&&(m.match_length=2)),m.prev_length>=3&&m.match_length<=m.prev_length){for(u=m.strstart+m.lookahead-3,c=a._tr_tally(m,m.strstart-1-m.prev_match,m.prev_length-3),m.lookahead-=m.prev_length-1,m.prev_length-=2;++m.strstart<=u&&(m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+3-1])&m.hash_mask,w=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart),0!=--m.prev_length;);if(m.match_available=0,m.match_length=2,m.strstart++,c&&(S(m,!1),0===m.strm.avail_out))return 1}else if(m.match_available){if((c=a._tr_tally(m,0,m.window[m.strstart-1]))&&S(m,!1),m.strstart++,m.lookahead--,0===m.strm.avail_out)return 1}else m.match_available=1,m.strstart++,m.lookahead--}return m.match_available&&(c=a._tr_tally(m,0,m.window[m.strstart-1]),m.match_available=0),m.insert=m.strstart<2?m.strstart:2,4===j?(S(m,!0),0===m.strm.avail_out?3:4):m.last_lit&&(S(m,!1),0===m.strm.avail_out)?1:2}function O(m,j,w,c,u){this.good_length=m,this.max_lazy=j,this.nice_length=w,this.max_chain=c,this.func=u}function M(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(1146),this.dyn_dtree=new l.Buf16(122),this.bl_tree=new l.Buf16(78),gt(this.dyn_ltree),gt(this.dyn_dtree),gt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(16),this.heap=new l.Buf16(573),gt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(573),gt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Z(m){var j;return m&&m.state?(m.total_in=m.total_out=0,m.data_type=2,(j=m.state).pending=0,j.pending_out=0,j.wrap<0&&(j.wrap=-j.wrap),j.status=j.wrap?42:Q,m.adler=2===j.wrap?0:1,j.last_flush=0,a._tr_init(j),0):xt(m,b)}function k(m){var w,j=Z(m);return 0===j&&((w=m.state).window_size=2*w.w_size,gt(w.head),w.max_lazy_match=s[w.level].max_lazy,w.good_match=s[w.level].good_length,w.nice_match=s[w.level].nice_length,w.max_chain_length=s[w.level].max_chain,w.strstart=0,w.block_start=0,w.lookahead=0,w.insert=0,w.match_length=w.prev_length=2,w.match_available=0,w.ins_h=0),j}function tt(m,j,w,c,u,d){if(!m)return b;var R=1;if(-1===j&&(j=6),c<0?(R=0,c=-c):15<c&&(R=2,c-=16),u<1||9<u||8!==w||c<8||15<c||j<0||9<j||d<0||4<d)return xt(m,b);8===c&&(c=9);var L=new M;return(m.state=L).strm=m,L.wrap=R,L.gzhead=null,L.w_bits=c,L.w_size=1<<L.w_bits,L.w_mask=L.w_size-1,L.hash_bits=u+7,L.hash_size=1<<L.hash_bits,L.hash_mask=L.hash_size-1,L.hash_shift=~~((L.hash_bits+3-1)/3),L.window=new l.Buf8(2*L.w_size),L.head=new l.Buf16(L.hash_size),L.prev=new l.Buf16(L.w_size),L.lit_bufsize=1<<u+6,L.pending_buf_size=4*L.lit_bufsize,L.pending_buf=new l.Buf8(L.pending_buf_size),L.d_buf=1*L.lit_bufsize,L.l_buf=3*L.lit_bufsize,L.level=j,L.strategy=d,L.method=w,k(m)}s=[new O(0,0,0,0,function(m,j){var w=65535;for(w>m.pending_buf_size-5&&(w=m.pending_buf_size-5);;){if(m.lookahead<=1){if(V(m),0===m.lookahead&&0===j)return 1;if(0===m.lookahead)break}m.strstart+=m.lookahead,m.lookahead=0;var c=m.block_start+w;if((0===m.strstart||m.strstart>=c)&&(m.lookahead=m.strstart-c,m.strstart=c,S(m,!1),0===m.strm.avail_out)||m.strstart-m.block_start>=m.w_size-pt&&(S(m,!1),0===m.strm.avail_out))return 1}return m.insert=0,4===j?(S(m,!0),0===m.strm.avail_out?3:4):(m.strstart>m.block_start&&S(m,!1),1)}),new O(4,4,8,4,g),new O(4,5,16,8,g),new O(4,6,32,32,g),new O(4,4,16,16,h),new O(8,16,32,32,h),new O(8,16,128,128,h),new O(8,32,128,256,h),new O(32,128,258,1024,h),new O(32,258,258,4096,h)],r.deflateInit=function(m,j){return tt(m,j,8,15,8,0)},r.deflateInit2=tt,r.deflateReset=k,r.deflateResetKeep=Z,r.deflateSetHeader=function(m,j){return m&&m.state?2!==m.state.wrap?b:(m.state.gzhead=j,0):b},r.deflate=function(m,j){var w,c,u,d;if(!m||!m.state||5<j||j<0)return m?xt(m,b):b;if(c=m.state,!m.output||!m.input&&0!==m.avail_in||666===c.status&&4!==j)return xt(m,0===m.avail_out?-5:b);if(c.strm=m,w=c.last_flush,c.last_flush=j,42===c.status)if(2===c.wrap)m.adler=0,H(c,31),H(c,139),H(c,8),c.gzhead?(H(c,(c.gzhead.text?1:0)+(c.gzhead.hcrc?2:0)+(c.gzhead.extra?4:0)+(c.gzhead.name?8:0)+(c.gzhead.comment?16:0)),H(c,255&c.gzhead.time),H(c,c.gzhead.time>>8&255),H(c,c.gzhead.time>>16&255),H(c,c.gzhead.time>>24&255),H(c,9===c.level?2:2<=c.strategy||c.level<2?4:0),H(c,255&c.gzhead.os),c.gzhead.extra&&c.gzhead.extra.length&&(H(c,255&c.gzhead.extra.length),H(c,c.gzhead.extra.length>>8&255)),c.gzhead.hcrc&&(m.adler=_(m.adler,c.pending_buf,c.pending,0)),c.gzindex=0,c.status=69):(H(c,0),H(c,0),H(c,0),H(c,0),H(c,0),H(c,9===c.level?2:2<=c.strategy||c.level<2?4:0),H(c,3),c.status=Q);else{var R=8+(c.w_bits-8<<4)<<8;R|=(2<=c.strategy||c.level<2?0:c.level<6?1:6===c.level?2:3)<<6,0!==c.strstart&&(R|=32),R+=31-R%31,c.status=Q,G(c,R),0!==c.strstart&&(G(c,m.adler>>>16),G(c,65535&m.adler)),m.adler=1}if(69===c.status)if(c.gzhead.extra){for(u=c.pending;c.gzindex<(65535&c.gzhead.extra.length)&&(c.pending!==c.pending_buf_size||(c.gzhead.hcrc&&c.pending>u&&(m.adler=_(m.adler,c.pending_buf,c.pending-u,u)),J(m),u=c.pending,c.pending!==c.pending_buf_size));)H(c,255&c.gzhead.extra[c.gzindex]),c.gzindex++;c.gzhead.hcrc&&c.pending>u&&(m.adler=_(m.adler,c.pending_buf,c.pending-u,u)),c.gzindex===c.gzhead.extra.length&&(c.gzindex=0,c.status=73)}else c.status=73;if(73===c.status)if(c.gzhead.name){u=c.pending;do{if(c.pending===c.pending_buf_size&&(c.gzhead.hcrc&&c.pending>u&&(m.adler=_(m.adler,c.pending_buf,c.pending-u,u)),J(m),u=c.pending,c.pending===c.pending_buf_size)){d=1;break}d=c.gzindex<c.gzhead.name.length?255&c.gzhead.name.charCodeAt(c.gzindex++):0,H(c,d)}while(0!==d);c.gzhead.hcrc&&c.pending>u&&(m.adler=_(m.adler,c.pending_buf,c.pending-u,u)),0===d&&(c.gzindex=0,c.status=91)}else c.status=91;if(91===c.status)if(c.gzhead.comment){u=c.pending;do{if(c.pending===c.pending_buf_size&&(c.gzhead.hcrc&&c.pending>u&&(m.adler=_(m.adler,c.pending_buf,c.pending-u,u)),J(m),u=c.pending,c.pending===c.pending_buf_size)){d=1;break}d=c.gzindex<c.gzhead.comment.length?255&c.gzhead.comment.charCodeAt(c.gzindex++):0,H(c,d)}while(0!==d);c.gzhead.hcrc&&c.pending>u&&(m.adler=_(m.adler,c.pending_buf,c.pending-u,u)),0===d&&(c.status=103)}else c.status=103;if(103===c.status&&(c.gzhead.hcrc?(c.pending+2>c.pending_buf_size&&J(m),c.pending+2<=c.pending_buf_size&&(H(c,255&m.adler),H(c,m.adler>>8&255),m.adler=0,c.status=Q)):c.status=Q),0!==c.pending){if(J(m),0===m.avail_out)return c.last_flush=-1,0}else if(0===m.avail_in&&st(j)<=st(w)&&4!==j)return xt(m,-5);if(666===c.status&&0!==m.avail_in)return xt(m,-5);if(0!==m.avail_in||0!==c.lookahead||0!==j&&666!==c.status){var L=2===c.strategy?function(B,ot){for(var ut;;){if(0===B.lookahead&&(V(B),0===B.lookahead)){if(0===ot)return 1;break}if(B.match_length=0,ut=a._tr_tally(B,0,B.window[B.strstart]),B.lookahead--,B.strstart++,ut&&(S(B,!1),0===B.strm.avail_out))return 1}return B.insert=0,4===ot?(S(B,!0),0===B.strm.avail_out?3:4):B.last_lit&&(S(B,!1),0===B.strm.avail_out)?1:2}(c,j):3===c.strategy?function(B,ot){for(var ut,at,dt,Tt,Nt=B.window;;){if(B.lookahead<=lt){if(V(B),B.lookahead<=lt&&0===ot)return 1;if(0===B.lookahead)break}if(B.match_length=0,B.lookahead>=3&&0<B.strstart&&(at=Nt[dt=B.strstart-1])===Nt[++dt]&&at===Nt[++dt]&&at===Nt[++dt]){Tt=B.strstart+lt;do{}while(at===Nt[++dt]&&at===Nt[++dt]&&at===Nt[++dt]&&at===Nt[++dt]&&at===Nt[++dt]&&at===Nt[++dt]&&at===Nt[++dt]&&at===Nt[++dt]&&dt<Tt);B.match_length=lt-(Tt-dt),B.match_length>B.lookahead&&(B.match_length=B.lookahead)}if(B.match_length>=3?(ut=a._tr_tally(B,1,B.match_length-3),B.lookahead-=B.match_length,B.strstart+=B.match_length,B.match_length=0):(ut=a._tr_tally(B,0,B.window[B.strstart]),B.lookahead--,B.strstart++),ut&&(S(B,!1),0===B.strm.avail_out))return 1}return B.insert=0,4===ot?(S(B,!0),0===B.strm.avail_out?3:4):B.last_lit&&(S(B,!1),0===B.strm.avail_out)?1:2}(c,j):s[c.level].func(c,j);if(3!==L&&4!==L||(c.status=666),1===L||3===L)return 0===m.avail_out&&(c.last_flush=-1),0;if(2===L&&(1===j?a._tr_align(c):5!==j&&(a._tr_stored_block(c,0,0,!1),3===j&&(gt(c.head),0===c.lookahead&&(c.strstart=0,c.block_start=0,c.insert=0))),J(m),0===m.avail_out))return c.last_flush=-1,0}return 4!==j?0:c.wrap<=0?1:(2===c.wrap?(H(c,255&m.adler),H(c,m.adler>>8&255),H(c,m.adler>>16&255),H(c,m.adler>>24&255),H(c,255&m.total_in),H(c,m.total_in>>8&255),H(c,m.total_in>>16&255),H(c,m.total_in>>24&255)):(G(c,m.adler>>>16),G(c,65535&m.adler)),J(m),0<c.wrap&&(c.wrap=-c.wrap),0!==c.pending?0:1)},r.deflateEnd=function(m){var j;return m&&m.state?42!==(j=m.state.status)&&69!==j&&73!==j&&91!==j&&103!==j&&j!==Q&&666!==j?xt(m,b):(m.state=null,j===Q?xt(m,-3):0):b},r.deflateSetDictionary=function(m,j){var w,c,u,d,R,L,B,ot,ut=j.length;if(!m||!m.state||2===(d=(w=m.state).wrap)||1===d&&42!==w.status||w.lookahead)return b;for(1===d&&(m.adler=p(m.adler,j,ut,0)),w.wrap=0,ut>=w.w_size&&(0===d&&(gt(w.head),w.strstart=0,w.block_start=0,w.insert=0),ot=new l.Buf8(w.w_size),l.arraySet(ot,j,ut-w.w_size,w.w_size,0),j=ot,ut=w.w_size),R=m.avail_in,L=m.next_in,B=m.input,m.avail_in=ut,m.next_in=0,m.input=j,V(w);w.lookahead>=3;){for(c=w.strstart,u=w.lookahead-2;w.ins_h=(w.ins_h<<w.hash_shift^w.window[c+3-1])&w.hash_mask,w.prev[c&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=c,c++,--u;);w.strstart=c,w.lookahead=2,V(w)}return w.strstart+=w.lookahead,w.block_start=w.strstart,w.insert=w.lookahead,w.lookahead=0,w.match_length=w.prev_length=2,w.match_available=0,m.next_in=L,m.input=B,m.avail_in=R,w.wrap=d,0},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,o,r){o.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,o,r){o.exports=function(s,l){var a,p,_,T,A,x,f,b,y,D,v,N,I,q,P,X,Y,nt,F,lt,pt,U,Q,C,et;C=s.input,_=(p=s.next_in)+(s.avail_in-5),et=s.output,A=(T=s.next_out)-(l-s.avail_out),x=T+(s.avail_out-257),f=(a=s.state).dmax,b=a.wsize,y=a.whave,D=a.wnext,v=a.window,N=a.hold,I=a.bits,q=a.lencode,P=a.distcode,X=(1<<a.lenbits)-1,Y=(1<<a.distbits)-1;t:do{I<15&&(N+=C[p++]<<I,N+=C[p++]<<(I+=8),I+=8),nt=q[N&X];e:for(;;){if(N>>>=F=nt>>>24,I-=F,0==(F=nt>>>16&255))et[T++]=65535&nt;else{if(!(16&F)){if(0==(64&F)){nt=q[(65535&nt)+(N&(1<<F)-1)];continue e}if(32&F){a.mode=12;break t}s.msg="invalid literal/length code",a.mode=30;break t}lt=65535&nt,(F&=15)&&(I<F&&(N+=C[p++]<<I,I+=8),lt+=N&(1<<F)-1,N>>>=F,I-=F),I<15&&(N+=C[p++]<<I,N+=C[p++]<<(I+=8),I+=8),nt=P[N&Y];n:for(;;){if(N>>>=F=nt>>>24,I-=F,!(16&(F=nt>>>16&255))){if(0==(64&F)){nt=P[(65535&nt)+(N&(1<<F)-1)];continue n}s.msg="invalid distance code",a.mode=30;break t}if(pt=65535&nt,I<(F&=15)&&(N+=C[p++]<<I,(I+=8)<F&&(N+=C[p++]<<I,I+=8)),f<(pt+=N&(1<<F)-1)){s.msg="invalid distance too far back",a.mode=30;break t}if(N>>>=F,I-=F,(F=T-A)<pt){if(y<(F=pt-F)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break t}if(Q=v,(U=0)===D){if(U+=b-F,F<lt){for(lt-=F;et[T++]=v[U++],--F;);U=T-pt,Q=et}}else if(D<F){if(U+=b+D-F,(F-=D)<lt){for(lt-=F;et[T++]=v[U++],--F;);if(U=0,D<lt){for(lt-=F=D;et[T++]=v[U++],--F;);U=T-pt,Q=et}}}else if(U+=D-F,F<lt){for(lt-=F;et[T++]=v[U++],--F;);U=T-pt,Q=et}for(;2<lt;)et[T++]=Q[U++],et[T++]=Q[U++],et[T++]=Q[U++],lt-=3;lt&&(et[T++]=Q[U++],1<lt&&(et[T++]=Q[U++]))}else{for(U=T-pt;et[T++]=et[U++],et[T++]=et[U++],et[T++]=et[U++],2<(lt-=3););lt&&(et[T++]=et[U++],1<lt&&(et[T++]=et[U++]))}break}}break}}while(p<_&&T<x);p-=lt=I>>3,N&=(1<<(I-=lt<<3))-1,s.next_in=p,s.next_out=T,s.avail_in=p<_?_-p+5:5-(p-_),s.avail_out=T<x?x-T+257:257-(T-x),a.hold=N,a.bits=I}},{}],49:[function(e,o,r){var s=e("../utils/common"),l=e("./adler32"),a=e("./crc32"),p=e("./inffast"),_=e("./inftrees"),f=-2;function v(U){return(U>>>24&255)+(U>>>8&65280)+((65280&U)<<8)+((255&U)<<24)}function N(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function I(U){var Q;return U&&U.state?(U.total_in=U.total_out=(Q=U.state).total=0,U.msg="",Q.wrap&&(U.adler=1&Q.wrap),Q.mode=1,Q.last=0,Q.havedict=0,Q.dmax=32768,Q.head=null,Q.hold=0,Q.bits=0,Q.lencode=Q.lendyn=new s.Buf32(852),Q.distcode=Q.distdyn=new s.Buf32(592),Q.sane=1,Q.back=-1,0):f}function q(U){var Q;return U&&U.state?((Q=U.state).wsize=0,Q.whave=0,Q.wnext=0,I(U)):f}function P(U,Q){var C,et;return U&&U.state?(et=U.state,Q<0?(C=0,Q=-Q):(C=1+(Q>>4),Q<48&&(Q&=15)),Q&&(Q<8||15<Q)?f:(null!==et.window&&et.wbits!==Q&&(et.window=null),et.wrap=C,et.wbits=Q,q(U))):f}function X(U,Q){var C,et;return U?(et=new N,(U.state=et).window=null,0!==(C=P(U,Q))&&(U.state=null),C):f}var Y,nt,F=!0;function lt(U){if(F){var Q;for(Y=new s.Buf32(512),nt=new s.Buf32(32),Q=0;Q<144;)U.lens[Q++]=8;for(;Q<256;)U.lens[Q++]=9;for(;Q<280;)U.lens[Q++]=7;for(;Q<288;)U.lens[Q++]=8;for(_(1,U.lens,0,288,Y,0,U.work,{bits:9}),Q=0;Q<32;)U.lens[Q++]=5;_(2,U.lens,0,32,nt,0,U.work,{bits:5}),F=!1}U.lencode=Y,U.lenbits=9,U.distcode=nt,U.distbits=5}function pt(U,Q,C,et){var _t,z=U.state;return null===z.window&&(z.wsize=1<<z.wbits,z.wnext=0,z.whave=0,z.window=new s.Buf8(z.wsize)),et>=z.wsize?(s.arraySet(z.window,Q,C-z.wsize,z.wsize,0),z.wnext=0,z.whave=z.wsize):(et<(_t=z.wsize-z.wnext)&&(_t=et),s.arraySet(z.window,Q,C-et,_t,z.wnext),(et-=_t)?(s.arraySet(z.window,Q,C-et,et,0),z.wnext=et,z.whave=z.wsize):(z.wnext+=_t,z.wnext===z.wsize&&(z.wnext=0),z.whave<z.wsize&&(z.whave+=_t))),0}r.inflateReset=q,r.inflateReset2=P,r.inflateResetKeep=I,r.inflateInit=function(U){return X(U,15)},r.inflateInit2=X,r.inflate=function(U,Q){var C,et,_t,z,xt,st,gt,J,S,H,G,it,V,g,h,O,M,Z,k,tt,m,j,w,c,u=0,d=new s.Buf8(4),R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!U||!U.state||!U.output||!U.input&&0!==U.avail_in)return f;12===(C=U.state).mode&&(C.mode=13),xt=U.next_out,_t=U.output,z=U.next_in,et=U.input,J=C.hold,S=C.bits,H=st=U.avail_in,G=gt=U.avail_out,j=0;t:for(;;)switch(C.mode){case 1:if(0===C.wrap){C.mode=13;break}for(;S<16;){if(0===st)break t;st--,J+=et[z++]<<S,S+=8}if(2&C.wrap&&35615===J){d[C.check=0]=255&J,d[1]=J>>>8&255,C.check=a(C.check,d,2,0),S=J=0,C.mode=2;break}if(C.flags=0,C.head&&(C.head.done=!1),!(1&C.wrap)||(((255&J)<<8)+(J>>8))%31){U.msg="incorrect header check",C.mode=30;break}if(8!=(15&J)){U.msg="unknown compression method",C.mode=30;break}if(S-=4,m=8+(15&(J>>>=4)),0===C.wbits)C.wbits=m;else if(m>C.wbits){U.msg="invalid window size",C.mode=30;break}C.dmax=1<<m,U.adler=C.check=1,C.mode=512&J?10:12,S=J=0;break;case 2:for(;S<16;){if(0===st)break t;st--,J+=et[z++]<<S,S+=8}if(C.flags=J,8!=(255&C.flags)){U.msg="unknown compression method",C.mode=30;break}if(57344&C.flags){U.msg="unknown header flags set",C.mode=30;break}C.head&&(C.head.text=J>>8&1),512&C.flags&&(d[0]=255&J,d[1]=J>>>8&255,C.check=a(C.check,d,2,0)),S=J=0,C.mode=3;case 3:for(;S<32;){if(0===st)break t;st--,J+=et[z++]<<S,S+=8}C.head&&(C.head.time=J),512&C.flags&&(d[0]=255&J,d[1]=J>>>8&255,d[2]=J>>>16&255,d[3]=J>>>24&255,C.check=a(C.check,d,4,0)),S=J=0,C.mode=4;case 4:for(;S<16;){if(0===st)break t;st--,J+=et[z++]<<S,S+=8}C.head&&(C.head.xflags=255&J,C.head.os=J>>8),512&C.flags&&(d[0]=255&J,d[1]=J>>>8&255,C.check=a(C.check,d,2,0)),S=J=0,C.mode=5;case 5:if(1024&C.flags){for(;S<16;){if(0===st)break t;st--,J+=et[z++]<<S,S+=8}C.length=J,C.head&&(C.head.extra_len=J),512&C.flags&&(d[0]=255&J,d[1]=J>>>8&255,C.check=a(C.check,d,2,0)),S=J=0}else C.head&&(C.head.extra=null);C.mode=6;case 6:if(1024&C.flags&&(st<(it=C.length)&&(it=st),it&&(C.head&&(m=C.head.extra_len-C.length,C.head.extra||(C.head.extra=new Array(C.head.extra_len)),s.arraySet(C.head.extra,et,z,it,m)),512&C.flags&&(C.check=a(C.check,et,it,z)),st-=it,z+=it,C.length-=it),C.length))break t;C.length=0,C.mode=7;case 7:if(2048&C.flags){if(0===st)break t;for(it=0;m=et[z+it++],C.head&&m&&C.length<65536&&(C.head.name+=String.fromCharCode(m)),m&&it<st;);if(512&C.flags&&(C.check=a(C.check,et,it,z)),st-=it,z+=it,m)break t}else C.head&&(C.head.name=null);C.length=0,C.mode=8;case 8:if(4096&C.flags){if(0===st)break t;for(it=0;m=et[z+it++],C.head&&m&&C.length<65536&&(C.head.comment+=String.fromCharCode(m)),m&&it<st;);if(512&C.flags&&(C.check=a(C.check,et,it,z)),st-=it,z+=it,m)break t}else C.head&&(C.head.comment=null);C.mode=9;case 9:if(512&C.flags){for(;S<16;){if(0===st)break t;st--,J+=et[z++]<<S,S+=8}if(J!==(65535&C.check)){U.msg="header crc mismatch",C.mode=30;break}S=J=0}C.head&&(C.head.hcrc=C.flags>>9&1,C.head.done=!0),U.adler=C.check=0,C.mode=12;break;case 10:for(;S<32;){if(0===st)break t;st--,J+=et[z++]<<S,S+=8}U.adler=C.check=v(J),S=J=0,C.mode=11;case 11:if(0===C.havedict)return U.next_out=xt,U.avail_out=gt,U.next_in=z,U.avail_in=st,C.hold=J,C.bits=S,2;U.adler=C.check=1,C.mode=12;case 12:if(5===Q||6===Q)break t;case 13:if(C.last){J>>>=7&S,S-=7&S,C.mode=27;break}for(;S<3;){if(0===st)break t;st--,J+=et[z++]<<S,S+=8}switch(C.last=1&J,S-=1,3&(J>>>=1)){case 0:C.mode=14;break;case 1:if(lt(C),C.mode=20,6!==Q)break;J>>>=2,S-=2;break t;case 2:C.mode=17;break;case 3:U.msg="invalid block type",C.mode=30}J>>>=2,S-=2;break;case 14:for(J>>>=7&S,S-=7&S;S<32;){if(0===st)break t;st--,J+=et[z++]<<S,S+=8}if((65535&J)!=(J>>>16^65535)){U.msg="invalid stored block lengths",C.mode=30;break}if(C.length=65535&J,S=J=0,C.mode=15,6===Q)break t;case 15:C.mode=16;case 16:if(it=C.length){if(st<it&&(it=st),gt<it&&(it=gt),0===it)break t;s.arraySet(_t,et,z,it,xt),st-=it,z+=it,gt-=it,xt+=it,C.length-=it;break}C.mode=12;break;case 17:for(;S<14;){if(0===st)break t;st--,J+=et[z++]<<S,S+=8}if(C.nlen=257+(31&J),S-=5,C.ndist=1+(31&(J>>>=5)),S-=5,C.ncode=4+(15&(J>>>=5)),J>>>=4,S-=4,286<C.nlen||30<C.ndist){U.msg="too many length or distance symbols",C.mode=30;break}C.have=0,C.mode=18;case 18:for(;C.have<C.ncode;){for(;S<3;){if(0===st)break t;st--,J+=et[z++]<<S,S+=8}C.lens[R[C.have++]]=7&J,J>>>=3,S-=3}for(;C.have<19;)C.lens[R[C.have++]]=0;if(C.lencode=C.lendyn,C.lenbits=7,j=_(0,C.lens,0,19,C.lencode,0,C.work,w={bits:C.lenbits}),C.lenbits=w.bits,j){U.msg="invalid code lengths set",C.mode=30;break}C.have=0,C.mode=19;case 19:for(;C.have<C.nlen+C.ndist;){for(;O=(u=C.lencode[J&(1<<C.lenbits)-1])>>>16&255,M=65535&u,!((h=u>>>24)<=S);){if(0===st)break t;st--,J+=et[z++]<<S,S+=8}if(M<16)J>>>=h,S-=h,C.lens[C.have++]=M;else{if(16===M){for(c=h+2;S<c;){if(0===st)break t;st--,J+=et[z++]<<S,S+=8}if(J>>>=h,S-=h,0===C.have){U.msg="invalid bit length repeat",C.mode=30;break}m=C.lens[C.have-1],it=3+(3&J),J>>>=2,S-=2}else if(17===M){for(c=h+3;S<c;){if(0===st)break t;st--,J+=et[z++]<<S,S+=8}S-=h,m=0,it=3+(7&(J>>>=h)),J>>>=3,S-=3}else{for(c=h+7;S<c;){if(0===st)break t;st--,J+=et[z++]<<S,S+=8}S-=h,m=0,it=11+(127&(J>>>=h)),J>>>=7,S-=7}if(C.have+it>C.nlen+C.ndist){U.msg="invalid bit length repeat",C.mode=30;break}for(;it--;)C.lens[C.have++]=m}}if(30===C.mode)break;if(0===C.lens[256]){U.msg="invalid code -- missing end-of-block",C.mode=30;break}if(C.lenbits=9,j=_(1,C.lens,0,C.nlen,C.lencode,0,C.work,w={bits:C.lenbits}),C.lenbits=w.bits,j){U.msg="invalid literal/lengths set",C.mode=30;break}if(C.distbits=6,C.distcode=C.distdyn,j=_(2,C.lens,C.nlen,C.ndist,C.distcode,0,C.work,w={bits:C.distbits}),C.distbits=w.bits,j){U.msg="invalid distances set",C.mode=30;break}if(C.mode=20,6===Q)break t;case 20:C.mode=21;case 21:if(6<=st&&258<=gt){U.next_out=xt,U.avail_out=gt,U.next_in=z,U.avail_in=st,C.hold=J,C.bits=S,p(U,G),xt=U.next_out,_t=U.output,gt=U.avail_out,z=U.next_in,et=U.input,st=U.avail_in,J=C.hold,S=C.bits,12===C.mode&&(C.back=-1);break}for(C.back=0;O=(u=C.lencode[J&(1<<C.lenbits)-1])>>>16&255,M=65535&u,!((h=u>>>24)<=S);){if(0===st)break t;st--,J+=et[z++]<<S,S+=8}if(O&&0==(240&O)){for(Z=h,k=O,tt=M;O=(u=C.lencode[tt+((J&(1<<Z+k)-1)>>Z)])>>>16&255,M=65535&u,!(Z+(h=u>>>24)<=S);){if(0===st)break t;st--,J+=et[z++]<<S,S+=8}J>>>=Z,S-=Z,C.back+=Z}if(J>>>=h,S-=h,C.back+=h,C.length=M,0===O){C.mode=26;break}if(32&O){C.back=-1,C.mode=12;break}if(64&O){U.msg="invalid literal/length code",C.mode=30;break}C.extra=15&O,C.mode=22;case 22:if(C.extra){for(c=C.extra;S<c;){if(0===st)break t;st--,J+=et[z++]<<S,S+=8}C.length+=J&(1<<C.extra)-1,J>>>=C.extra,S-=C.extra,C.back+=C.extra}C.was=C.length,C.mode=23;case 23:for(;O=(u=C.distcode[J&(1<<C.distbits)-1])>>>16&255,M=65535&u,!((h=u>>>24)<=S);){if(0===st)break t;st--,J+=et[z++]<<S,S+=8}if(0==(240&O)){for(Z=h,k=O,tt=M;O=(u=C.distcode[tt+((J&(1<<Z+k)-1)>>Z)])>>>16&255,M=65535&u,!(Z+(h=u>>>24)<=S);){if(0===st)break t;st--,J+=et[z++]<<S,S+=8}J>>>=Z,S-=Z,C.back+=Z}if(J>>>=h,S-=h,C.back+=h,64&O){U.msg="invalid distance code",C.mode=30;break}C.offset=M,C.extra=15&O,C.mode=24;case 24:if(C.extra){for(c=C.extra;S<c;){if(0===st)break t;st--,J+=et[z++]<<S,S+=8}C.offset+=J&(1<<C.extra)-1,J>>>=C.extra,S-=C.extra,C.back+=C.extra}if(C.offset>C.dmax){U.msg="invalid distance too far back",C.mode=30;break}C.mode=25;case 25:if(0===gt)break t;if(C.offset>(it=G-gt)){if((it=C.offset-it)>C.whave&&C.sane){U.msg="invalid distance too far back",C.mode=30;break}V=it>C.wnext?C.wsize-(it-=C.wnext):C.wnext-it,it>C.length&&(it=C.length),g=C.window}else g=_t,V=xt-C.offset,it=C.length;for(gt<it&&(it=gt),gt-=it,C.length-=it;_t[xt++]=g[V++],--it;);0===C.length&&(C.mode=21);break;case 26:if(0===gt)break t;_t[xt++]=C.length,gt--,C.mode=21;break;case 27:if(C.wrap){for(;S<32;){if(0===st)break t;st--,J|=et[z++]<<S,S+=8}if(U.total_out+=G-=gt,C.total+=G,G&&(U.adler=C.check=C.flags?a(C.check,_t,G,xt-G):l(C.check,_t,G,xt-G)),G=gt,(C.flags?J:v(J))!==C.check){U.msg="incorrect data check",C.mode=30;break}S=J=0}C.mode=28;case 28:if(C.wrap&&C.flags){for(;S<32;){if(0===st)break t;st--,J+=et[z++]<<S,S+=8}if(J!==(4294967295&C.total)){U.msg="incorrect length check",C.mode=30;break}S=J=0}C.mode=29;case 29:j=1;break t;case 30:j=-3;break t;case 31:return-4;default:return f}return U.next_out=xt,U.avail_out=gt,U.next_in=z,U.avail_in=st,C.hold=J,C.bits=S,(C.wsize||G!==U.avail_out&&C.mode<30&&(C.mode<27||4!==Q))&&pt(U,U.output,U.next_out,G-U.avail_out)?(C.mode=31,-4):(G-=U.avail_out,U.total_in+=H-=U.avail_in,U.total_out+=G,C.total+=G,C.wrap&&G&&(U.adler=C.check=C.flags?a(C.check,_t,G,U.next_out-G):l(C.check,_t,G,U.next_out-G)),U.data_type=C.bits+(C.last?64:0)+(12===C.mode?128:0)+(20===C.mode||15===C.mode?256:0),(0==H&&0===G||4===Q)&&0===j&&(j=-5),j)},r.inflateEnd=function(U){if(!U||!U.state)return f;var Q=U.state;return Q.window&&(Q.window=null),U.state=null,0},r.inflateGetHeader=function(U,Q){var C;return U&&U.state?0==(2&(C=U.state).wrap)?f:((C.head=Q).done=!1,0):f},r.inflateSetDictionary=function(U,Q){var C,et=Q.length;return U&&U.state?0!==(C=U.state).wrap&&11!==C.mode?f:11===C.mode&&l(1,Q,et,0)!==C.check?-3:pt(U,Q,et,et)?(C.mode=31,-4):(C.havedict=1,0):f},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,o,r){var s=e("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],p=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],_=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];o.exports=function(T,A,x,f,b,y,D,v){var N,I,q,P,X,Y,nt,F,lt,pt=v.bits,U=0,Q=0,C=0,et=0,_t=0,z=0,xt=0,st=0,gt=0,J=0,S=null,H=0,G=new s.Buf16(16),it=new s.Buf16(16),V=null,g=0;for(U=0;U<=15;U++)G[U]=0;for(Q=0;Q<f;Q++)G[A[x+Q]]++;for(_t=pt,et=15;1<=et&&0===G[et];et--);if(et<_t&&(_t=et),0===et)return b[y++]=20971520,b[y++]=20971520,v.bits=1,0;for(C=1;C<et&&0===G[C];C++);for(_t<C&&(_t=C),U=st=1;U<=15;U++)if(st<<=1,(st-=G[U])<0)return-1;if(0<st&&(0===T||1!==et))return-1;for(it[1]=0,U=1;U<15;U++)it[U+1]=it[U]+G[U];for(Q=0;Q<f;Q++)0!==A[x+Q]&&(D[it[A[x+Q]]++]=Q);if(Y=0===T?(S=V=D,19):1===T?(S=l,H-=257,V=a,g-=257,256):(S=p,V=_,-1),U=C,X=y,xt=Q=J=0,q=-1,P=(gt=1<<(z=_t))-1,1===T&&852<gt||2===T&&592<gt)return 1;for(;;){for(nt=U-xt,lt=D[Q]<Y?(F=0,D[Q]):D[Q]>Y?(F=V[g+D[Q]],S[H+D[Q]]):(F=96,0),N=1<<U-xt,C=I=1<<z;b[X+(J>>xt)+(I-=N)]=nt<<24|F<<16|lt|0,0!==I;);for(N=1<<U-1;J&N;)N>>=1;if(0!==N?(J&=N-1,J+=N):J=0,Q++,0==--G[U]){if(U===et)break;U=A[x+D[Q]]}if(_t<U&&(J&P)!==q){for(0===xt&&(xt=_t),X+=C,st=1<<(z=U-xt);z+xt<et&&!((st-=G[z+xt])<=0);)z++,st<<=1;if(gt+=1<<z,1===T&&852<gt||2===T&&592<gt)return 1;b[q=J&P]=_t<<24|z<<16|X-y|0}}return 0!==J&&(b[X+J]=U-xt<<24|64<<16|0),v.bits=_t,0}},{"../utils/common":41}],51:[function(e,o,r){o.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,o,r){var s=e("../utils/common");function p(u){for(var d=u.length;0<=--d;)u[d]=0}var A=256,x=286,f=30,D=15,Y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],nt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],lt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],pt=new Array(576);p(pt);var U=new Array(60);p(U);var Q=new Array(512);p(Q);var C=new Array(256);p(C);var et=new Array(29);p(et);var _t,z,xt,st=new Array(f);function gt(u,d,R,L,B){this.static_tree=u,this.extra_bits=d,this.extra_base=R,this.elems=L,this.max_length=B,this.has_stree=u&&u.length}function J(u,d){this.dyn_tree=u,this.max_code=0,this.stat_desc=d}function S(u){return u<256?Q[u]:Q[256+(u>>>7)]}function H(u,d){u.pending_buf[u.pending++]=255&d,u.pending_buf[u.pending++]=d>>>8&255}function G(u,d,R){u.bi_valid>16-R?(u.bi_buf|=d<<u.bi_valid&65535,H(u,u.bi_buf),u.bi_buf=d>>16-u.bi_valid,u.bi_valid+=R-16):(u.bi_buf|=d<<u.bi_valid&65535,u.bi_valid+=R)}function it(u,d,R){G(u,R[2*d],R[2*d+1])}function V(u,d){for(var R=0;R|=1&u,u>>>=1,R<<=1,0<--d;);return R>>>1}function g(u,d,R){var L,B,ot=new Array(16),ut=0;for(L=1;L<=D;L++)ot[L]=ut=ut+R[L-1]<<1;for(B=0;B<=d;B++){var at=u[2*B+1];0!==at&&(u[2*B]=V(ot[at]++,at))}}function h(u){var d;for(d=0;d<x;d++)u.dyn_ltree[2*d]=0;for(d=0;d<f;d++)u.dyn_dtree[2*d]=0;for(d=0;d<19;d++)u.bl_tree[2*d]=0;u.dyn_ltree[512]=1,u.opt_len=u.static_len=0,u.last_lit=u.matches=0}function O(u){8<u.bi_valid?H(u,u.bi_buf):0<u.bi_valid&&(u.pending_buf[u.pending++]=u.bi_buf),u.bi_buf=0,u.bi_valid=0}function M(u,d,R,L){var B=2*d,ot=2*R;return u[B]<u[ot]||u[B]===u[ot]&&L[d]<=L[R]}function Z(u,d,R){for(var L=u.heap[R],B=R<<1;B<=u.heap_len&&(B<u.heap_len&&M(d,u.heap[B+1],u.heap[B],u.depth)&&B++,!M(d,L,u.heap[B],u.depth));)u.heap[R]=u.heap[B],R=B,B<<=1;u.heap[R]=L}function k(u,d,R){var L,B,ot,ut,at=0;if(0!==u.last_lit)for(;L=u.pending_buf[u.d_buf+2*at]<<8|u.pending_buf[u.d_buf+2*at+1],B=u.pending_buf[u.l_buf+at],at++,0===L?it(u,B,d):(it(u,(ot=C[B])+A+1,d),0!==(ut=Y[ot])&&G(u,B-=et[ot],ut),it(u,ot=S(--L),R),0!==(ut=nt[ot])&&G(u,L-=st[ot],ut)),at<u.last_lit;);it(u,256,d)}function tt(u,d){var R,L,B,ot=d.dyn_tree,ut=d.stat_desc.static_tree,at=d.stat_desc.has_stree,dt=d.stat_desc.elems,Tt=-1;for(u.heap_len=0,u.heap_max=573,R=0;R<dt;R++)0!==ot[2*R]?(u.heap[++u.heap_len]=Tt=R,u.depth[R]=0):ot[2*R+1]=0;for(;u.heap_len<2;)ot[2*(B=u.heap[++u.heap_len]=Tt<2?++Tt:0)]=1,u.depth[B]=0,u.opt_len--,at&&(u.static_len-=ut[2*B+1]);for(d.max_code=Tt,R=u.heap_len>>1;1<=R;R--)Z(u,ot,R);for(B=dt;R=u.heap[1],u.heap[1]=u.heap[u.heap_len--],Z(u,ot,1),L=u.heap[1],u.heap[--u.heap_max]=R,u.heap[--u.heap_max]=L,ot[2*B]=ot[2*R]+ot[2*L],u.depth[B]=(u.depth[R]>=u.depth[L]?u.depth[R]:u.depth[L])+1,ot[2*R+1]=ot[2*L+1]=B,u.heap[1]=B++,Z(u,ot,1),2<=u.heap_len;);u.heap[--u.heap_max]=u.heap[1],function(Nt,$t){var Oe,be,Rn,Ht,vi,ir,ke=$t.dyn_tree,Oa=$t.max_code,jE=$t.stat_desc.static_tree,zE=$t.stat_desc.has_stree,$E=$t.stat_desc.extra_bits,La=$t.stat_desc.extra_base,qn=$t.stat_desc.max_length,yi=0;for(Ht=0;Ht<=D;Ht++)Nt.bl_count[Ht]=0;for(ke[2*Nt.heap[Nt.heap_max]+1]=0,Oe=Nt.heap_max+1;Oe<573;Oe++)qn<(Ht=ke[2*ke[2*(be=Nt.heap[Oe])+1]+1]+1)&&(Ht=qn,yi++),ke[2*be+1]=Ht,Oa<be||(Nt.bl_count[Ht]++,vi=0,La<=be&&(vi=$E[be-La]),Nt.opt_len+=(ir=ke[2*be])*(Ht+vi),zE&&(Nt.static_len+=ir*(jE[2*be+1]+vi)));if(0!==yi){do{for(Ht=qn-1;0===Nt.bl_count[Ht];)Ht--;Nt.bl_count[Ht]--,Nt.bl_count[Ht+1]+=2,Nt.bl_count[qn]--,yi-=2}while(0<yi);for(Ht=qn;0!==Ht;Ht--)for(be=Nt.bl_count[Ht];0!==be;)Oa<(Rn=Nt.heap[--Oe])||(ke[2*Rn+1]!==Ht&&(Nt.opt_len+=(Ht-ke[2*Rn+1])*ke[2*Rn],ke[2*Rn+1]=Ht),be--)}}(u,d),g(ot,Tt,u.bl_count)}function m(u,d,R){var L,B,ot=-1,ut=d[1],at=0,dt=7,Tt=4;for(0===ut&&(dt=138,Tt=3),d[2*(R+1)+1]=65535,L=0;L<=R;L++)B=ut,ut=d[2*(L+1)+1],++at<dt&&B===ut||(at<Tt?u.bl_tree[2*B]+=at:0!==B?(B!==ot&&u.bl_tree[2*B]++,u.bl_tree[32]++):at<=10?u.bl_tree[34]++:u.bl_tree[36]++,ot=B,Tt=(at=0)===ut?(dt=138,3):B===ut?(dt=6,3):(dt=7,4))}function j(u,d,R){var L,B,ot=-1,ut=d[1],at=0,dt=7,Tt=4;for(0===ut&&(dt=138,Tt=3),L=0;L<=R;L++)if(B=ut,ut=d[2*(L+1)+1],!(++at<dt&&B===ut)){if(at<Tt)for(;it(u,B,u.bl_tree),0!=--at;);else 0!==B?(B!==ot&&(it(u,B,u.bl_tree),at--),it(u,16,u.bl_tree),G(u,at-3,2)):at<=10?(it(u,17,u.bl_tree),G(u,at-3,3)):(it(u,18,u.bl_tree),G(u,at-11,7));ot=B,Tt=(at=0)===ut?(dt=138,3):B===ut?(dt=6,3):(dt=7,4)}}p(st);var w=!1;function c(u,d,R,L){var B,ot,ut;G(u,0+(L?1:0),3),ot=d,ut=R,O(B=u),H(B,ut),H(B,~ut),s.arraySet(B.pending_buf,B.window,ot,ut,B.pending),B.pending+=ut}r._tr_init=function(u){w||(function(){var d,R,L,B,ot,ut=new Array(16);for(B=L=0;B<28;B++)for(et[B]=L,d=0;d<1<<Y[B];d++)C[L++]=B;for(C[L-1]=B,B=ot=0;B<16;B++)for(st[B]=ot,d=0;d<1<<nt[B];d++)Q[ot++]=B;for(ot>>=7;B<f;B++)for(st[B]=ot<<7,d=0;d<1<<nt[B]-7;d++)Q[256+ot++]=B;for(R=0;R<=D;R++)ut[R]=0;for(d=0;d<=143;)pt[2*d+1]=8,d++,ut[8]++;for(;d<=255;)pt[2*d+1]=9,d++,ut[9]++;for(;d<=279;)pt[2*d+1]=7,d++,ut[7]++;for(;d<=287;)pt[2*d+1]=8,d++,ut[8]++;for(g(pt,287,ut),d=0;d<f;d++)U[2*d+1]=5,U[2*d]=V(d,5);_t=new gt(pt,Y,257,x,D),z=new gt(U,nt,0,f,D),xt=new gt(new Array(0),F,0,19,7)}(),w=!0),u.l_desc=new J(u.dyn_ltree,_t),u.d_desc=new J(u.dyn_dtree,z),u.bl_desc=new J(u.bl_tree,xt),u.bi_buf=0,u.bi_valid=0,h(u)},r._tr_stored_block=c,r._tr_flush_block=function(u,d,R,L){var B,ot,ut=0;0<u.level?(2===u.strm.data_type&&(u.strm.data_type=function(at){var dt,Tt=4093624447;for(dt=0;dt<=31;dt++,Tt>>>=1)if(1&Tt&&0!==at.dyn_ltree[2*dt])return 0;if(0!==at.dyn_ltree[18]||0!==at.dyn_ltree[20]||0!==at.dyn_ltree[26])return 1;for(dt=32;dt<A;dt++)if(0!==at.dyn_ltree[2*dt])return 1;return 0}(u)),tt(u,u.l_desc),tt(u,u.d_desc),ut=function(at){var dt;for(m(at,at.dyn_ltree,at.l_desc.max_code),m(at,at.dyn_dtree,at.d_desc.max_code),tt(at,at.bl_desc),dt=18;3<=dt&&0===at.bl_tree[2*lt[dt]+1];dt--);return at.opt_len+=3*(dt+1)+5+5+4,dt}(u),(ot=u.static_len+3+7>>>3)<=(B=u.opt_len+3+7>>>3)&&(B=ot)):B=ot=R+5,R+4<=B&&-1!==d?c(u,d,R,L):4===u.strategy||ot===B?(G(u,2+(L?1:0),3),k(u,pt,U)):(G(u,4+(L?1:0),3),function(at,dt,Tt,Nt){var $t;for(G(at,dt-257,5),G(at,Tt-1,5),G(at,Nt-4,4),$t=0;$t<Nt;$t++)G(at,at.bl_tree[2*lt[$t]+1],3);j(at,at.dyn_ltree,dt-1),j(at,at.dyn_dtree,Tt-1)}(u,u.l_desc.max_code+1,u.d_desc.max_code+1,ut+1),k(u,u.dyn_ltree,u.dyn_dtree)),h(u),L&&O(u)},r._tr_tally=function(u,d,R){return u.pending_buf[u.d_buf+2*u.last_lit]=d>>>8&255,u.pending_buf[u.d_buf+2*u.last_lit+1]=255&d,u.pending_buf[u.l_buf+u.last_lit]=255&R,u.last_lit++,0===d?u.dyn_ltree[2*R]++:(u.matches++,d--,u.dyn_ltree[2*(C[R]+A+1)]++,u.dyn_dtree[2*S(d)]++),u.last_lit===u.lit_bufsize-1},r._tr_align=function(u){var d;G(u,2,3),it(u,256,pt),16===(d=u).bi_valid?(H(d,d.bi_buf),d.bi_buf=0,d.bi_valid=0):8<=d.bi_valid&&(d.pending_buf[d.pending++]=255&d.bi_buf,d.bi_buf>>=8,d.bi_valid-=8)}},{"../utils/common":41}],53:[function(e,o,r){o.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,o,r){(function(s){!function(l,a){if(!l.setImmediate){var p,_,T,A,x=1,f={},b=!1,y=l.document,D=Object.getPrototypeOf&&Object.getPrototypeOf(l);D=D&&D.setTimeout?D:l,p="[object process]"==={}.toString.call(l.process)?function(q){Zt.nextTick(function(){N(q)})}:function(){if(l.postMessage&&!l.importScripts){var q=!0,P=l.onmessage;return l.onmessage=function(){q=!1},l.postMessage("","*"),l.onmessage=P,q}}()?(A="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",I,!1):l.attachEvent("onmessage",I),function(q){l.postMessage(A+q,"*")}):l.MessageChannel?((T=new MessageChannel).port1.onmessage=function(q){N(q.data)},function(q){T.port2.postMessage(q)}):y&&"onreadystatechange"in y.createElement("script")?(_=y.documentElement,function(q){var P=y.createElement("script");P.onreadystatechange=function(){N(q),P.onreadystatechange=null,_.removeChild(P),P=null},_.appendChild(P)}):function(q){setTimeout(N,0,q)},D.setImmediate=function(q){"function"!=typeof q&&(q=new Function(""+q));for(var P=new Array(arguments.length-1),X=0;X<P.length;X++)P[X]=arguments[X+1];return f[x]={callback:q,args:P},p(x),x++},D.clearImmediate=v}function v(q){delete f[q]}function N(q){if(b)setTimeout(N,0,q);else{var P=f[q];if(P){b=!0;try{!function(X){var Y=X.callback,nt=X.args;switch(nt.length){case 0:Y();break;case 1:Y(nt[0]);break;case 2:Y(nt[0],nt[1]);break;case 3:Y(nt[0],nt[1],nt[2]);break;default:Y.apply(void 0,nt)}}(P)}finally{v(q),b=!1}}}}function I(q){q.source===l&&"string"==typeof q.data&&0===q.data.indexOf(A)&&N(+q.data.slice(A.length))}}(typeof self>"u"?void 0===s?this:s:self)}).call(this,typeof de<"u"?de:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10);const Fg=Ei(Aa.exports);var pi={exports:{}},Zg={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"},Po=function Ig(n){return n&&n.replace?n.replace(/([&"<>'])/g,function(i,e){return Zg[e]}):n},Na=go.Stream;function di(n,i,e){var r,o=function Ug(n,i){return new Array(i||0).join(n||"")}(i,e=e||0),s=n;if("object"==typeof n&&(s=n[r=Object.keys(n)[0]])&&s._elem)return s._elem.name=r,s._elem.icount=e,s._elem.indent=i,s._elem.indents=o,s._elem.interrupt=s,s._elem;var T,p=[],_=[];function A(x){Object.keys(x).forEach(function(b){p.push(function Mg(n,i){return n+'="'+Po(i)+'"'}(b,x[b]))})}switch(typeof s){case"object":if(null===s)break;s._attr&&A(s._attr),s._cdata&&_.push(("<![CDATA["+s._cdata).replace(/\]\]>/g,"]]]]><![CDATA[>")+"]]>"),s.forEach&&(T=!1,_.push(""),s.forEach(function(x){"object"==typeof x?"_attr"==Object.keys(x)[0]?A(x._attr):_.push(di(x,i,e+1)):(_.pop(),T=!0,_.push(Po(x)))}),T||_.push(""));break;default:_.push(Po(s))}return{name:r,interrupt:!1,attributes:p,content:_,icount:e,indents:o,indent:i}}function Oo(n,i,e){if("object"!=typeof i)return n(!1,i);var o=i.interrupt?1:i.content.length;function r(){for(;i.content.length;){var l=i.content.shift();if(void 0!==l){if(s(l))return;Oo(n,l)}}n(!1,(o>1?i.indents:"")+(i.name?"</"+i.name+">":"")+(i.indent&&!e?"\n":"")),e&&e()}function s(l){return!!l.interrupt&&(l.interrupt.append=n,l.interrupt.end=r,l.interrupt=!1,n(!0),!0)}if(n(!1,i.indents+(i.name?"<"+i.name:"")+(i.attributes.length?" "+i.attributes.join(" "):"")+(o?i.name?">":"":i.name?"/>":"")+(i.indent&&o>1?"\n":"")),!o)return n(!1,i.indent?"\n":"");s(i)||r()}pi.exports=function Rg(n,i){"object"!=typeof i&&(i={indent:i});var e=i.stream?new Na:null,o="",r=!1,s=i.indent?!0===i.indent?"    ":i.indent:"",l=!0;function a(x){l?Zt.nextTick(x):x()}function p(x,f){if(void 0!==f&&(o+=f),x&&!r&&(e=e||new Na,r=!0),x&&r){var b=o;a(function(){e.emit("data",b)}),o=""}}function _(x,f){Oo(p,di(x,s,s?1:0),f)}function T(){if(e){var x=o;a(function(){e.emit("data",x),e.emit("end"),e.readable=!1,e.emit("close")})}}return a(function(){l=!1}),i.declaration&&function A(x){var b={version:"1.0",encoding:x.encoding||"UTF-8"};x.standalone&&(b.standalone=x.standalone),_({"?xml":{_attr:b}}),o=o.replace("/>","?>")}(i.declaration),n&&n.forEach?n.forEach(function(x,f){var b;f+1===n.length&&(b=T),_(x,b)}):_(n,T),e?(e.readable=!0,e):o},pi.exports.element=pi.exports.Element=function qg(){var n=Array.prototype.slice.call(arguments),i={_elem:di(n),push:function(e){if(!this.append)throw new Error("not assigned to a parent!");var o=this,r=this._elem.indent;Oo(this.append,di(e,r,this._elem.icount+(r?1:0)),function(){o.append(!0)})},close:function(e){void 0!==e&&this.push(e),this.end&&this.end()}};return i};const Vt=Ei(pi.exports);class Lo{format(i,e={stack:[]}){const o=i.prepForXml(e);if(o)return o;throw Error("XMLComponent did not format correctly")}}class Da{replace(i,e,o){let r=i;return e.forEach((s,l)=>{r=r.replace(new RegExp(`{${s.fileName}}`,"g"),(o+l).toString())}),r}getMediaData(i,e){return e.Array.filter(o=>i.search(`{${o.fileName}}`)>0)}}class Pg{replace(i,e){let o=i;for(const r of e)o=o.replace(new RegExp(`{${r.reference}-${r.instance}}`,"g"),r.numId.toString());return o}}const In=n=>!0===n?"  ":!1===n?void 0:n;class Vo{static toString(i,e){var o=this;return Ln(function*(){return yield o.compiler.compile(i,In(e)).generateAsync({type:"string",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})()}static toBuffer(i,e){var o=this;return Ln(function*(){return yield o.compiler.compile(i,In(e)).generateAsync({type:"nodebuffer",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})()}static toBase64String(i,e){var o=this;return Ln(function*(){return yield o.compiler.compile(i,In(e)).generateAsync({type:"base64",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})()}static toBlob(i,e){var o=this;return Ln(function*(){return yield o.compiler.compile(i,In(e)).generateAsync({type:"blob",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})()}static toStream(i,e){const o=new go.Stream;return this.compiler.compile(i,In(e)).generateAsync({type:"nodebuffer",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"}).then(s=>{o.emit("data",s),o.emit("end")}),o}}W(Vo,"compiler",new class Og{constructor(){W(this,"formatter"),W(this,"imageReplacer"),W(this,"numberingReplacer"),this.formatter=new Lo,this.imageReplacer=new Da,this.numberingReplacer=new Pg}compile(i,e){const o=new Fg,r=this.xmlifyFile(i,e),s=new Map(Object.entries(r));for(const[,l]of s)if(Array.isArray(l))for(const a of l)o.file(a.path,a.data);else o.file(l.path,l.data);for(const{stream:l,fileName:a}of i.Media.Array)o.file(`word/media/${a}`,l);return o}xmlifyFile(i,e){const o=i.Document.Relationships.RelationshipCount+1,r=Vt(this.formatter.format(i.Document.View,{viewWrapper:i.Document,file:i,stack:[]}),{indent:e,declaration:{standalone:"yes",encoding:"UTF-8"}}),s=this.imageReplacer.getMediaData(r,i.Media);return{Relationships:{data:(()=>(s.forEach((l,a)=>{i.Document.Relationships.createRelationship(o+a,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${l.fileName}`)}),Vt(this.formatter.format(i.Document.Relationships,{viewWrapper:i.Document,file:i,stack:[]}),{indent:e,declaration:{encoding:"UTF-8"}})))(),path:"word/_rels/document.xml.rels"},Document:{data:(()=>{const l=this.imageReplacer.replace(r,s,o);return this.numberingReplacer.replace(l,i.Numbering.ConcreteNumbering)})(),path:"word/document.xml"},Styles:{data:(()=>{const l=Vt(this.formatter.format(i.Styles,{viewWrapper:i.Document,file:i,stack:[]}),{indent:e,declaration:{standalone:"yes",encoding:"UTF-8"}});return this.numberingReplacer.replace(l,i.Numbering.ConcreteNumbering)})(),path:"word/styles.xml"},Properties:{data:Vt(this.formatter.format(i.CoreProperties,{viewWrapper:i.Document,file:i,stack:[]}),{indent:e,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/core.xml"},Numbering:{data:Vt(this.formatter.format(i.Numbering,{viewWrapper:i.Document,file:i,stack:[]}),{indent:e,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/numbering.xml"},FileRelationships:{data:Vt(this.formatter.format(i.FileRelationships,{viewWrapper:i.Document,file:i,stack:[]}),{indent:e,declaration:{encoding:"UTF-8"}}),path:"_rels/.rels"},HeaderRelationships:i.Headers.map((l,a)=>{const p=Vt(this.formatter.format(l.View,{viewWrapper:l,file:i,stack:[]}),{indent:e,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(p,i.Media).forEach((T,A)=>{l.Relationships.createRelationship(A,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${T.fileName}`)}),{data:Vt(this.formatter.format(l.Relationships,{viewWrapper:l,file:i,stack:[]}),{indent:e,declaration:{encoding:"UTF-8"}}),path:`word/_rels/header${a+1}.xml.rels`}}),FooterRelationships:i.Footers.map((l,a)=>{const p=Vt(this.formatter.format(l.View,{viewWrapper:l,file:i,stack:[]}),{indent:e,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(p,i.Media).forEach((T,A)=>{l.Relationships.createRelationship(A,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${T.fileName}`)}),{data:Vt(this.formatter.format(l.Relationships,{viewWrapper:l,file:i,stack:[]}),{indent:e,declaration:{encoding:"UTF-8"}}),path:`word/_rels/footer${a+1}.xml.rels`}}),Headers:i.Headers.map((l,a)=>{const p=Vt(this.formatter.format(l.View,{viewWrapper:l,file:i,stack:[]}),{indent:e,declaration:{encoding:"UTF-8"}}),_=this.imageReplacer.getMediaData(p,i.Media),T=this.imageReplacer.replace(p,_,0);return{data:this.numberingReplacer.replace(T,i.Numbering.ConcreteNumbering),path:`word/header${a+1}.xml`}}),Footers:i.Footers.map((l,a)=>{const p=Vt(this.formatter.format(l.View,{viewWrapper:l,file:i,stack:[]}),{indent:e,declaration:{encoding:"UTF-8"}}),_=this.imageReplacer.getMediaData(p,i.Media),T=this.imageReplacer.replace(p,_,0);return{data:this.numberingReplacer.replace(T,i.Numbering.ConcreteNumbering),path:`word/footer${a+1}.xml`}}),ContentTypes:{data:Vt(this.formatter.format(i.ContentTypes,{viewWrapper:i.Document,file:i,stack:[]}),{indent:e,declaration:{encoding:"UTF-8"}}),path:"[Content_Types].xml"},CustomProperties:{data:Vt(this.formatter.format(i.CustomProperties,{viewWrapper:i.Document,file:i,stack:[]}),{indent:e,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/custom.xml"},AppProperties:{data:Vt(this.formatter.format(i.AppProperties,{viewWrapper:i.Document,file:i,stack:[]}),{indent:e,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/app.xml"},FootNotes:{data:Vt(this.formatter.format(i.FootNotes.View,{viewWrapper:i.FootNotes,file:i,stack:[]}),{indent:e,declaration:{encoding:"UTF-8"}}),path:"word/footnotes.xml"},FootNotesRelationships:{data:Vt(this.formatter.format(i.FootNotes.Relationships,{viewWrapper:i.FootNotes,file:i,stack:[]}),{indent:e,declaration:{encoding:"UTF-8"}}),path:"word/_rels/footnotes.xml.rels"},Settings:{data:Vt(this.formatter.format(i.Settings,{viewWrapper:i.Document,file:i,stack:[]}),{indent:e,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/settings.xml"},Comments:{data:Vt(this.formatter.format(i.Comments,{viewWrapper:i.Document,file:i,stack:[]}),{indent:e,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/comments.xml"}}}}),new Lo,new Lo,new Da;var qa=Et(4327);let Ko=(()=>{class n{createContract(e){let o=new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"});const r=e.services||[];return new Ea({styles:{paragraphStyles:[{id:"content",name:"content",run:{font:"Times New Roman",size:28,color:"#000000"},paragraph:{spacing:{after:300,before:300,line:450}}},{id:"heading",name:"heading",run:{font:"Times New Roman",size:30,color:"#000000"}}]},sections:[{properties:{},children:[new Rt({style:"heading",text:"C\u1ed8NG H\xd2A X\xc3 H\u1ed8I CH\u1ee6 NGH\u0128A VI\u1ec6T NAM",heading:Cn.HEADING_1,alignment:kt.CENTER}),new Rt({style:"heading",text:"\u0110\u1ed9c l\u1eadp - T\u1ef1 do - H\u1ea1nh ph\xfac",heading:Cn.HEADING_2,alignment:kt.CENTER}),new Rt({}),new Rt({}),new Rt({}),new Rt({style:"heading",text:"H\u1ee2P \u0110\u1ed2NG THU\xca PH\xd2NG TR\u1ecc",alignment:kt.CENTER,heading:Cn.HEADING_2}),new Rt({alignment:kt.LEFT,style:"content",children:[new mt({text:"H\xf4m nay ng\xe0y .......... th\xe1ng .......... n\u0103m ..........",break:1}),new mt({text:"Ch\xfang t\xf4i g\u1ed3m:",bold:!0,break:1}),new mt({text:"1. \u0110\u1ea1i di\u1ec7n b\xean cho thu\xea ph\xf2ng tr\u1ecd (B\xean A):",break:1}),new mt({text:`\xd4ng/b\xe0: ${e.lanlord.fullname}`,break:1}),new mt({text:`CMND s\u1ed1: ${e.lanlord.identifyNum}`,break:1}),new mt({text:`S\u1ed1 \u0111i\u1ec7n tho\u1ea1i: ${e.lanlord.phone}`,break:1}),new mt({text:"2. B\xean thu\xea ph\xf2ng tr\u1ecd (B\xean B):",break:1}),new mt({text:`\xd4ng/b\xe0:  ${e.representative.fullname}`,break:1}),new mt({text:`CMND s\u1ed1: ${e.representative?.identifyNum}`,break:1}),new mt({text:`S\u1ed1 \u0111i\u1ec7n tho\u1ea1i: ${e.representative?.phone}`,break:1}),new mt({text:"Sau khi b\xe0n b\u1ea1c tr\xean tinh th\u1ea7n d\xe2n ch\u1ee7, hai b\xean c\xf9ng c\xf3 l\u1ee3i, c\xf9ng th\u1ed1ng nh\u1ea5t nh\u01b0 sau:",bold:!0,break:1}),new mt({text:`B\xean A \u0111\u1ed3ng \xfd cho b\xean B thu\xea 01 ph\xf2ng \u1edf t\u1ea1i \u0111\u1ecba ch\u1ec9: ${e.lanlord.address}`,break:1}),new mt({text:`Gi\xe1 thu\xea: ${e.room.price} /th\xe1ng`,break:1}),...r.map(l=>{const a=[];return a.push(new mt({text:`${l.name}: ${o.format(l.price)} /${l.unit} v\u1edbi s\u1ed1 l\u01b0\u1ee3ng: ${l.quantity}`,break:1})),a}).reduce((l,a)=>l.concat(a),[]),new mt({text:`Ti\u1ec1n \u0111\u1eb7t c\u1ecdc: ${e.deposit}`,break:1}),new mt({text:`H\u1ee3p \u0111\u1ed3ng c\xf3 gi\xe1 tr\u1ecb k\u1ec3 t\u1eeb ng\xe0y ${e.startDate.day} th\xe1ng ${e.startDate.month} n\u0103m ${e.startDate.year} \u0111\u1ebfn ng\xe0y ${e.endDate.day} th\xe1ng ${e.endDate.month} n\u0103m ${e.endDate.year}`,break:1})]}),new Rt({alignment:kt.LEFT,style:"content",children:[new mt({text:"TR\xc1CH NHI\u1ec6M C\u1ee6A C\xc1C B\xcaN",bold:!0,break:2}),new mt({text:"* Tr\xe1ch nhi\u1ec7m c\u1ee7a b\xean A:",bold:!0,break:1}),new mt({text:"- T\u1ea1o m\u1ecdi \u0111i\u1ec1u ki\u1ec7n thu\u1eadn l\u1ee3i \u0111\u1ec3 b\xean B th\u1ef1c hi\u1ec7n theo h\u1ee3p \u0111\u1ed3ng",break:1}),new mt({text:"- Cung c\u1ea5p \u0111\u1ea7y \u0111\u1ee7 d\u1ecbch v\u1ee5 nh\u01b0 \u0111\xe3 li\u1ec7t k\xea cho b\xean B s\u1eed d\u1ee5ng.",break:1}),new mt({text:"* Tr\xe1ch nhi\u1ec7m c\u1ee7a b\xean B:",bold:!0,break:1}),new mt({text:"- Thanh to\xe1n \u0111\u1ea7y \u0111\u1ee7 c\xe1c kho\u1ea3n ti\u1ec1n theo \u0111\xfang th\u1ecfa thu\u1eadn",break:1}),new mt({text:"- B\u1ea3o qu\u1ea3n c\xe1c trang thi\u1ebft b\u1ecb v\xe0 c\u01a1 s\u1edf v\u1eadt ch\u1ea5t c\u1ee7a b\xean A trang b\u1ecb cho ban \u0111\u1ea7u (l\xe0m h\u1ecfng ph\u1ea3i s\u1eeda, m\u1ea5t ph\u1ea3i \u0111\u1ec1n).",break:1}),new mt({text:"- Kh\xf4ng \u0111\u01b0\u1ee3c t\u1ef1 \xfd s\u1eeda ch\u1eefa, c\u1ea3i t\u1ea1o c\u01a1 s\u1edf v\u1eadt ch\u1ea5t khi ch\u01b0a \u0111\u01b0\u1ee3c s\u1ef1 \u0111\u1ed3ng \xfd c\u1ee7a b\xean A.",break:1}),new mt({text:"- Gi\u1eef g\xecn v\u1ec7 sinh trong v\xe0 ngo\xe0i khu\xf4n vi\xean c\u1ee7a ph\xf2ng tr\u1ecd.",break:1}),new mt({text:"- B\xean B ph\u1ea3i ch\u1ea5p h\xe0nh m\u1ecdi quy \u0111\u1ecbnh c\u1ee7a ph\xe1p lu\u1eadt Nh\xe0 n\u01b0\u1edbc v\xe0 quy \u0111\u1ecbnh c\u1ee7a \u0111\u1ecba ph\u01b0\u01a1ng.",break:1}),new mt({text:"- N\u1ebfu b\xean B cho kh\xe1ch \u1edf qua \u0111\xeam th\xec ph\u1ea3i b\xe1o v\xe0 \u0111\u01b0\u1ee3c s\u1ef1 \u0111\u1ed3ng \xfd c\u1ee7a ch\u1ee7 nh\xe0 \u0111\u1ed3ng th\u1eddi ph\u1ea3i ch\u1ecbu tr\xe1ch nhi\u1ec7m v\u1ec1 c\xe1c h\xe0nh vi vi ph\u1ea1m ph\xe1p lu\u1eadt c\u1ee7a kh\xe1ch trong th\u1eddi gian \u1edf l\u1ea1i..",break:1}),new mt({text:"TR\xc1CH NHI\u1ec6M CHUNG",bold:!0,break:1}),new mt({text:"- Hai b\xean ph\u1ea3i t\u1ea1o \u0111i\u1ec1u ki\u1ec7n cho nhau th\u1ef1c hi\u1ec7n h\u1ee3p \u0111\u1ed3ng",break:1}),new mt({text:"- Trong th\u1eddi gian h\u1ee3p \u0111\u1ed3ng c\xf2n hi\u1ec7u l\u1ef1c n\u1ebfu b\xean n\xe0o vi ph\u1ea1m c\xe1c \u0111i\u1ec1u kho\u1ea3n \u0111\xe3 th\u1ecfa thu\u1eadn th\xec b\xean c\xf2n l\u1ea1i c\xf3 quy\u1ec1n \u0111\u01a1n ph\u01b0\u01a1ng ch\u1ea5m d\u1ee9t h\u1ee3p \u0111\u1ed3ng; n\u1ebfu s\u1ef1 vi ph\u1ea1m h\u1ee3p \u0111\u1ed3ng \u0111\xf3 g\xe2y t\u1ed5n th\u1ea5t cho b\xean b\u1ecb vi ph\u1ea1m h\u1ee3p \u0111\u1ed3ng th\xec b\xean vi ph\u1ea1m h\u1ee3p \u0111\u1ed3ng ph\u1ea3i b\u1ed3i th\u01b0\u1eddng thi\u1ec7t h\u1ea1i",break:1}),new mt({text:"- M\u1ed9t trong hai b\xean mu\u1ed1n ch\u1ea5m d\u1ee9t h\u1ee3p \u0111\u1ed3ng tr\u01b0\u1edbc th\u1eddi h\u1ea1n th\xec ph\u1ea3i b\xe1o tr\u01b0\u1edbc cho b\xean kia \xedt nh\u1ea5t 30 ng\xe0y v\xe0 hai b\xean ph\u1ea3i c\xf3 s\u1ef1 th\u1ed1ng nh\u1ea5t",break:1}),new mt({text:"- B\xean A ph\u1ea3i tr\u1ea3 l\u1ea1i ti\u1ec1n \u0111\u1eb7t c\u1ecdc cho b\xean B",break:1}),new mt({text:"- B\xean n\xe0o vi ph\u1ea1m \u0111i\u1ec1u kho\u1ea3n chung th\xec ph\u1ea3i ch\u1ecbu tr\xe1ch nhi\u1ec7m tr\u01b0\u1edbc ph\xe1p lu\u1eadt",break:1}),new mt({text:"- H\u1ee3p \u0111\u1ed3ng \u0111\u01b0\u1ee3c l\u1eadp th\xe0nh 02 b\u1ea3n c\xf3 gi\xe1 tr\u1ecb ph\xe1p l\xfd nh\u01b0 nhau, m\u1ed7i b\xean gi\u1eef m\u1ed9t b\u1ea3n",break:1})]}),new Rt({alignment:kt.LEFT,style:"content",children:[new mt({text:"BI\xcaN B\u1ea2N THANH TO\xc1N L\u1ea6N \u0110\u1ea6U",bold:!0,break:2}),new mt({text:`S\u1ed1 ti\u1ec1n \u0111\xe3 \u0111\u1eb7t c\u1ecdc: ${e.deposit}`,break:1}),new mt({text:"+",break:1}),new mt({text:`S\u1ed1 ng\xe0y \u0111\xe3 \u1edf: ${e.dayStayedBefore} k\u1ec3 t\u1eeb ng\xe0y ${e.startDate.day}/${e.startDate.month}/${e.startDate.year} \u0111\u1ebfn ng\xe0y ${e.endDayStayedBefor})`,break:1}),new mt({text:`Th\xe0nh ti\u1ec1n: ${e.dayStayedMoney}`,break:1}),new mt({text:"-",break:1}),new mt({text:`Ti\u1ec1n c\u1ecdc gi\u1eef ph\xf2ng (\u0111\u1ed3ng): ${e.holdRoomMoney}`,break:1}),new mt({text:"=",break:1}),new mt({text:`S\u1ed1 ti\u1ec1n ph\u1ea3i thanh to\xe1n: ${e.firstTotalPayment}`,break:1}),new mt({text:"\u0110\u1ea0I DI\u1ec6N B\xcaN B                                                           \u0110\u1ea0I DI\u1ec6N B\xcaN A",break:1,bold:!0})]})]}]})}createInvoice(e){const o=new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}),r=e.services,s=e.electricsWaterNum,l=e.banks;return new Ea({styles:{paragraphStyles:[{id:"content",name:"content",run:{font:"Times New Roman",size:24,color:"#000000"},paragraph:{spacing:{after:300,before:300,line:450}}},{id:"table-content",name:"table-content",run:{font:"Times New Roman",size:24,color:"#000000"},paragraph:{alignment:kt.CENTER}},{id:"heading",name:"heading",run:{font:"Times New Roman",size:28,color:"#000000"}}]},sections:[{children:[new Rt({style:"heading",text:"HO\xc1 \u0110\u01a0N TI\u1ec0N PH\xd2NG",heading:Cn.HEADING_1,alignment:kt.CENTER,children:[new mt({text:`T\xean ph\xf2ng: ${e.roomName}`,bold:!0,break:2}),new mt({text:`Th\u1eddi gian: ${e.month}`,bold:!0,break:1})]}),new Rt({}),new ha({width:{size:"17cm"},alignment:kt.CENTER,rows:[new Zn({height:{value:"0.8cm",rule:ai.ATLEAST},children:[new Kt({children:[new Rt({style:"table-content",children:[new mt({text:"Chi ti\u1ebft c\xe1c kho\u1ea3n chi",bold:!0})],alignment:kt.CENTER})],verticalAlign:zt.CENTER}),new Kt({children:[new Rt({style:"table-content",children:[new mt({text:"S\u1ed1 l\u01b0\u1ee3ng",bold:!0})],alignment:kt.CENTER})],verticalAlign:zt.CENTER}),new Kt({children:[new Rt({style:"table-content",children:[new mt({text:"Th\xe0nh ti\u1ec1n",bold:!0})],alignment:kt.CENTER})],verticalAlign:zt.CENTER})]}),...r.map(p=>{const _=[];return _.push(new Zn({height:{value:"0.8cm",rule:ai.ATLEAST},children:[new Kt({children:[new Rt({style:"table-content",children:[new mt({text:`${p.name}`})],alignment:kt.CENTER})],verticalAlign:zt.CENTER}),new Kt({children:[new Rt({style:"table-content",children:[new mt({text:`${p.quantity}`})],alignment:kt.CENTER})],verticalAlign:zt.CENTER}),new Kt({children:[new Rt({style:"table-content",children:[new mt({text:`${o.format(p.price)}`})],alignment:kt.CENTER})],verticalAlign:zt.CENTER})]})),_}).reduce((p,_)=>p.concat(_),[]),...s.map(p=>{const _=[];return _.push(new Zn({height:{value:"0.8cm",rule:ai.ATLEAST},children:[new Kt({children:[new Rt({style:"table-content",children:[new mt({text:`${p.name}`})],alignment:kt.CENTER})],verticalAlign:zt.CENTER}),new Kt({width:{size:"8cm"},children:[new ha({borders:{insideHorizontal:{style:we.THICK,size:1},insideVertical:{style:we.THICK,size:1},bottom:{style:we.NONE,size:0},top:{style:we.NONE,size:0},right:{style:we.NONE,size:0},left:{style:we.NONE,size:0}},width:{size:"8cm"},rows:[new Zn({children:[new Kt({children:[new Rt({style:"table-content",children:[new mt({text:"S\u1ed1 \u0111\u1ea7u"})],alignment:kt.CENTER})],verticalAlign:zt.CENTER}),new Kt({children:[new Rt({style:"table-content",children:[new mt({text:"S\u1ed1 cu\u1ed1i"})],alignment:kt.CENTER})],verticalAlign:zt.CENTER}),new Kt({children:[new Rt({style:"table-content",children:[new mt({text:"S\u1ed1 ti\xeau th\u1ee5"})],alignment:kt.CENTER})],verticalAlign:zt.CENTER})]}),new Zn({children:[new Kt({children:[new Rt({style:"table-content",children:[new mt({text:`${p.firstNum}`})],alignment:kt.CENTER})],verticalAlign:zt.CENTER}),new Kt({children:[new Rt({style:"table-content",children:[new mt({text:`${p.lastNum}`})],alignment:kt.CENTER})],verticalAlign:zt.CENTER}),new Kt({children:[new Rt({style:"table-content",children:[new mt({text:`${p.quantity}`})],alignment:kt.CENTER})],verticalAlign:zt.CENTER})]})]})],verticalAlign:zt.CENTER}),new Kt({children:[new Rt({style:"table-content",children:[new mt({text:`${o.format(p.price)}`})],alignment:kt.CENTER})],verticalAlign:zt.CENTER})]})),_}).reduce((p,_)=>p.concat(_),[])]}),new Rt({style:"content",alignment:kt.LEFT,children:[new mt({text:"Chi ti\u1ebft thanh to\xe1n",bold:!0,break:1}),new mt({text:`T\u1ed5ng ti\u1ec1n d\u1ecbch v\u1ee5: ${o.format(e.totalService)}`,break:1}),new mt({text:`N\u1ee3 th\xe1ng ${e.debtMonth}: ${o.format(e.debt)}`,break:1}),new mt({text:`T\u1ed5ng ti\u1ec1n: ${o.format(e.totalPrice)}`,break:1}),new mt({text:`Gi\u1ea3m gi\xe1 (\u0111\u1ed3ng): ${e.discount}`,break:1}),new mt({text:`Th\xe0nh ti\u1ec1n: ${o.format(e.totalPayment)}`,break:1})]}),new Rt({style:"content",children:[new mt({text:"Kh\xe1ch h\xe0ng thanh to\xe1n b\u1eb1ng ti\u1ec1n m\u1eb7t ho\u1eb7c chuy\u1ec3n kho\u1ea3n theo th\xf4ng tin sau:",break:1}),...l.map(p=>{const _=[];return _.push(new mt({text:`Ng\xe2n h\xe0ng: ${p.bankName}`,break:1}),new mt({text:`Ch\u1ee7 t\xe0i kho\u1ea3n: ${p.accountOwner}`,break:1}),new mt({text:`S\u1ed1 t\xe0i kho\u1ea3n: ${p.bankNumber}`,break:1})),_}).reduce((p,_)=>p.concat(_),[])]})]}]})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Yo=(()=>{class n{constructor(e){this.http=e}getBillsMonthByAccomodation(e){return this.http.post(`${vt.N.apiUrl}/invoice`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}getElectricWaterByRoomAndMonth(e){return this.http.post(`${vt.N.apiUrl}/invoice/room/electric-water`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}saveElectricWater(e){return this.http.post(`${vt.N.apiUrl}/invoice/electric-water/save`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}getMonthInvoiceByAccomodation(e){return this.http.post(`${vt.N.apiUrl}/invoice`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}sendInvoice(e){return this.http.post(`${vt.N.apiUrl}/invoice/send`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}checkRoomIsInputWaterElectric(e){return this.http.post(`${vt.N.apiUrl}/invoice/room/electric-water`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}checkIsRoomReturnValid(e){return this.http.post(`${vt.N.apiUrl}/invoice/room`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}returnRoom(e){return this.http.post(`${vt.N.apiUrl}/invoice/return`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}getElectricWaterByAccomodation(e){return this.http.post(`${vt.N.apiUrl}/invoice/electric-water`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}issueInvoice(e){return this.http.post(`${vt.N.apiUrl}/invoice/issue`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}issueReturnInvoice(e){return this.http.post(`${vt.N.apiUrl}/invoice/return/issue`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}getInvoiceDetail(e){return this.http.post(`${vt.N.apiUrl}/invoice/detail`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}getReturnInvoiceDetail(e){return this.http.post(`${vt.N.apiUrl}/invoice/return/detail`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}getPreviewInvoice(e){return this.http.post(`${vt.N.apiUrl}/invoice/issue/preview`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}updateInvoice(e){return this.http.put(`${vt.N.apiUrl}/invoice`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}confirmPayment(e){return this.http.put(`${vt.N.apiUrl}/invoice/confirm`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}removeInvoice(e){return this.http.delete(`${vt.N.apiUrl}/invoice/${e}`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(fe.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Qo=Et(3054),mn=Et(5108),mi=Et(1327);function $g(n,i){}const Xg=function(){return{width:"100%"}};function t1(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",19)(1,"p-dropdown",20),t.NdJ("onChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onSelectAccomodation())})("ngModelChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.selectedAccomodation=r)}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Akn(t.DdM(4,Xg)),t.Q6J("options",e.accomodations)("ngModel",e.selectedAccomodation)}}function e1(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",21)(1,"h5",22),t._uU(2,"Xu\u1ea5t ho\xe1 \u0111\u01a1n ph\xf2ng h\xe0ng th\xe1ng"),t.qZA(),t.TgZ(3,"span",23)(4,"p-calendar",24),t.NdJ("onSelect",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.getInvoiceByMonth())})("ngModelChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.selectedMonth=r)}),t.qZA()(),t.TgZ(5,"span",23),t._UZ(6,"i",25),t.TgZ(7,"input",26),t.NdJ("input",function(r){t.CHM(e);const s=t.oxw(),l=t.MAs(8);return t.KtG(s.onGlobalFilter(l,r))}),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngModel",e.selectedMonth)("showIcon",!0)}}function n1(n,i){1&n&&(t.TgZ(0,"tr")(1,"th",27),t._uU(2,"T\xean ph\xf2ng"),t._UZ(3,"p-sortIcon",28),t.qZA(),t.TgZ(4,"th",29),t._uU(5,"Th\xe1ng"),t._UZ(6,"p-sortIcon",30),t.qZA(),t.TgZ(7,"th",31),t._uU(8,"Ng\u01b0\u1eddi \u0111\u1ea1i di\u1ec7n"),t._UZ(9,"p-sortIcon",32),t.qZA(),t.TgZ(10,"th",33),t._uU(11,"Th\xe0nh ti\u1ec1n"),t._UZ(12,"p-sortIcon",34),t.qZA(),t.TgZ(13,"th",35),t._uU(14,"Thanh to\xe1n"),t._UZ(15,"p-sortIcon",36),t.qZA(),t.TgZ(16,"th",37),t._uU(17,"N\u1ee3"),t._UZ(18,"p-sortIcon",38),t.qZA(),t.TgZ(19,"th",39),t._uU(20,"Ng\xe0y thanh to\xe1n"),t._UZ(21,"p-sortIcon",40),t.qZA(),t.TgZ(22,"th",41),t._uU(23,"Tr\u1ea1ng th\xe1i"),t._UZ(24,"p-sortIcon",42),t.qZA(),t.TgZ(25,"th"),t._uU(26,"S\u1ed1 l\u1ea7n g\u1eedi mail"),t.qZA(),t._UZ(27,"th")(28,"th"),t.qZA())}function i1(n,i){1&n&&t._UZ(0,"p-tag",47)}function o1(n,i){1&n&&t._UZ(0,"p-tag",48)}function r1(n,i){if(1&n&&(t.ynx(0),t.YNc(1,i1,1,0,"p-tag",45),t.YNc(2,o1,1,0,"p-tag",46),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.isPay),t.xp6(1),t.Q6J("ngIf",!e.isPay)}}function s1(n,i){1&n&&(t.ynx(0),t._UZ(1,"p-tag",49),t.BQk())}function a1(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",50)(2,"p-menu",51,52),t.NdJ("onShow",function(){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw();return t.KtG(s.onShowMenu(r))}),t.qZA(),t.TgZ(4,"button",53),t.NdJ("click",function(r){t.CHM(e);const s=t.MAs(3),l=t.oxw(2);return t.KtG(l.toggleMenu(s,r))}),t.qZA()(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("model",e.items)("popup",!0)}}function l1(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",54)(2,"button",55),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw();return t.KtG(s.getInvoicePreview(r))}),t.qZA()(),t.BQk()}if(2&n){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("loading",e.loading)}}function c1(n,i){if(1&n&&(t.TgZ(0,"tr")(1,"td",43),t._uU(2),t.qZA(),t.TgZ(3,"td",43),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td",44),t._uU(7),t.qZA(),t.TgZ(8,"td",43),t._uU(9),t.ALo(10,"currency"),t.qZA(),t.TgZ(11,"td",43),t._uU(12),t.ALo(13,"currency"),t.qZA(),t.TgZ(14,"td",43),t._uU(15),t.ALo(16,"currency"),t.qZA(),t.TgZ(17,"td",44),t._uU(18),t.ALo(19,"date"),t.qZA(),t.TgZ(20,"td",43),t.YNc(21,r1,3,2,"ng-container",17),t.YNc(22,s1,2,0,"ng-container",17),t.qZA(),t.TgZ(23,"td",43),t._uU(24),t.qZA(),t._UZ(25,"td"),t.TgZ(26,"td"),t.YNc(27,a1,5,2,"ng-container",17),t.YNc(28,l1,3,1,"ng-container",17),t.qZA()()),2&n){const e=i.$implicit,o=t.oxw();t.xp6(2),t.Oqu(e.room.name),t.xp6(2),t.Oqu(t.xi3(5,12,o.selectedMonth,"MM/yyyy")),t.xp6(3),t.Oqu(e.representative),t.xp6(2),t.Oqu(t.Dn7(10,15,e.totalPayment,"VND","symbol")),t.xp6(3),t.Oqu(t.Dn7(13,19,e.paidMoney,"VND","symbol")),t.xp6(3),t.Oqu(t.Dn7(16,23,e.debt,"VND","symbol")),t.xp6(3),t.Oqu(t.xi3(19,27,e.paymentDate,"dd/MM/yyyy")),t.xp6(3),t.Q6J("ngIf",e.id),t.xp6(1),t.Q6J("ngIf",!e.id),t.xp6(2),t.Oqu(e.quantitySent),t.xp6(3),t.Q6J("ngIf",e.id),t.xp6(1),t.Q6J("ngIf",!e.id)}}function u1(n,i){1&n&&(t.TgZ(0,"tr")(1,"th",83),t._uU(2,"T\xean d\u1ecbch v\u1ee5"),t.qZA(),t.TgZ(3,"th",44),t._uU(4,"\u0110\u01a1n v\u1ecb"),t.qZA(),t.TgZ(5,"th",44),t._uU(6,"\u0110\u01a1n gi\xe1"),t.qZA(),t.TgZ(7,"th",84),t._uU(8,"S\u1ed1 l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(9,"th",83),t._uU(10,"Th\xe0nh ti\u1ec1n"),t.qZA()())}function p1(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.quantity)}}function d1(n,i){if(1&n&&(t.TgZ(0,"td")(1,"div",54)(2,"div",87),t._uU(3),t.qZA(),t.TgZ(4,"div",87),t._uU(5),t.qZA(),t.TgZ(6,"div",60),t._uU(7),t.qZA()()()),2&n){const e=t.oxw(2).$implicit;t.xp6(3),t.hij(" ",e.firstElectricNum," "),t.xp6(2),t.hij(" ",e.lastElectricNum," "),t.xp6(2),t.hij(" ",e.electricNum," ")}}function m1(n,i){if(1&n&&(t.TgZ(0,"td")(1,"div",54)(2,"div",87),t._uU(3),t.qZA(),t.TgZ(4,"div",87),t._uU(5),t.qZA(),t.TgZ(6,"div",60),t._uU(7),t.qZA()()()),2&n){const e=t.oxw(2).$implicit;t.xp6(3),t.hij(" ",e.firstWaterNum," "),t.xp6(2),t.hij(" ",e.lastWaterNum," "),t.xp6(2),t.hij(" ",e.waterNum," ")}}function h1(n,i){if(1&n&&(t.YNc(0,d1,8,3,"td",17),t.YNc(1,m1,8,3,"td",17)),2&n){const e=t.oxw().$implicit,o=t.oxw(2);t.Q6J("ngIf",e.serviceName===o.staticElectricPriceName),t.xp6(1),t.Q6J("ngIf",e.serviceName===o.staticWaterPriceName)}}function f1(n,i){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"currency"),t.qZA(),t.YNc(8,p1,3,1,"ng-container",85),t.YNc(9,h1,2,2,"ng-template",null,86,t.W1O),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"currency"),t.qZA()()),2&n){const e=i.$implicit,o=t.MAs(10),r=t.oxw(2);t.xp6(2),t.Oqu(e.serviceName),t.xp6(2),t.Oqu(e.unit),t.xp6(2),t.Oqu(t.Dn7(7,6,e.price,"VND","symbol")),t.xp6(2),t.Q6J("ngIf",e.serviceName!==r.staticElectricPriceName&&e.serviceName!==r.staticWaterPriceName)("ngIfElse",o),t.xp6(4),t.Oqu(t.Dn7(13,10,e.totalPrice,"VND","symbol"))}}function g1(n,i){1&n&&(t.TgZ(0,"small",88),t._uU(1,"S\u1ed1 ti\u1ec1n gi\u1ea3m gi\xe1 v\u01b0\u1ee3t qu\xe1 t\u1ed5ng ti\u1ec1n."),t.qZA())}function _1(n,i){1&n&&(t.TgZ(0,"small",88),t._uU(1,"S\u1ed1 ti\u1ec1n thanh to\xe1n v\u01b0\u1ee3t qu\xe1 t\u1ed5ng thanh to\xe1n."),t.qZA())}function v1(n,i){1&n&&(t.TgZ(0,"div",89),t._UZ(1,"img",90),t.qZA())}const y1=function(){return[]},Pe=function(n){return{"ng-invalid ng-dirty":n}};function w1(n,i){if(1&n&&(t.TgZ(0,"div",56)(1,"div",57)(2,"div",58)(3,"label",59),t._uU(4,"T\xean ph\xf2ng/S\u1ed1 ph\xf2ng"),t.qZA(),t.TgZ(5,"div",60),t._uU(6),t.qZA()(),t.TgZ(7,"div",58)(8,"label",59),t._uU(9,"Gi\xe1 ph\xf2ng"),t.qZA(),t.TgZ(10,"div",60),t._uU(11),t.ALo(12,"currency"),t.qZA()(),t.TgZ(13,"div",58)(14,"label",61),t._uU(15,"Th\xe1ng"),t.qZA(),t.TgZ(16,"div",60),t._uU(17),t.ALo(18,"date"),t.qZA()()(),t.TgZ(19,"div",62)(20,"p-table",63),t.YNc(21,u1,11,0,"ng-template",9),t.YNc(22,f1,14,14,"ng-template",10),t.qZA()(),t._UZ(23,"p-divider"),t.TgZ(24,"form",64)(25,"div",65)(26,"div",66)(27,"div",62)(28,"label",67),t._uU(29,"T\u1ed5ng ti\u1ec1n d\u1ecbch v\u1ee5"),t.qZA(),t._UZ(30,"p-inputNumber",68),t.qZA(),t.TgZ(31,"div",62)(32,"label",69),t._uU(33),t.ALo(34,"date"),t.qZA(),t._UZ(35,"p-inputNumber",70),t.qZA(),t.TgZ(36,"div",62)(37,"label",71),t._uU(38,"T\u1ed5ng ti\u1ec1n"),t.qZA(),t._UZ(39,"p-inputNumber",72),t.qZA(),t.TgZ(40,"div",62)(41,"label",73),t._uU(42,"Gi\u1ea3m gi\xe1 (\u0111\u1ed3ng)"),t.qZA(),t._UZ(43,"p-inputNumber",74),t.YNc(44,g1,2,0,"small",75),t.qZA(),t.TgZ(45,"div",62)(46,"label",76),t._uU(47,"Th\xe0nh ti\u1ec1n"),t.qZA(),t._UZ(48,"p-inputNumber",77),t.qZA()(),t.TgZ(49,"div",66)(50,"div",62)(51,"label",78),t._uU(52,"Thanh to\xe1n"),t.qZA(),t._UZ(53,"p-inputNumber",79),t.YNc(54,_1,2,0,"small",75),t.qZA(),t.TgZ(55,"div",62)(56,"label",80),t._uU(57,"M\xf4 t\u1ea3"),t.qZA(),t._UZ(58,"textarea",81),t.qZA()(),t.YNc(59,v1,2,0,"div",82),t.qZA()()()),2&n){const e=t.oxw();let o,r;t.xp6(6),t.Oqu(null==e.invoice.room?null:e.invoice.room.name),t.xp6(5),t.Oqu(t.Dn7(12,26,null==e.invoice.room?null:e.invoice.room.price,"VND","symbol")),t.xp6(6),t.Oqu(t.xi3(18,30,e.selectedMonth,"mm/yyyy")),t.xp6(3),t.Q6J("value",e.invoice.service||t.DdM(36,y1)),t.xp6(4),t.Q6J("formGroup",e.invoiceForm),t.xp6(6),t.Q6J("readonly",!0)("ngClass",t.VKq(37,Pe,e.invoiceForm.controls.totalService.invalid&&(e.invoiceForm.controls.totalService.dirty||e.invoiceForm.controls.totalService.touched))),t.xp6(3),t.hij("N\u1ee3 th\xe1ng ",t.xi3(34,33,e.preMonth,"MM/yyyy"),""),t.xp6(2),t.Q6J("readonly",!0)("ngClass",t.VKq(39,Pe,e.invoiceForm.controls.debt.invalid&&(e.invoiceForm.controls.debt.dirty||e.invoiceForm.controls.debt.touched))),t.xp6(4),t.Q6J("readonly",!0)("ngClass",t.VKq(41,Pe,e.invoiceForm.controls.totalPrice.invalid&&(e.invoiceForm.controls.totalPrice.dirty||e.invoiceForm.controls.totalPrice.touched))),t.xp6(4),t.ekj("disabled",e.isEdit),t.Q6J("readonly",e.isEdit)("ngClass",t.VKq(43,Pe,e.invoiceForm.controls.discount.invalid&&(e.invoiceForm.controls.discount.dirty||e.invoiceForm.controls.discount.touched))),t.xp6(1),t.Q6J("ngIf",(null==(o=e.invoiceForm.get("discount"))?null:o.invalid)&&(e.invoiceForm.controls.discount.dirty||e.invoiceForm.controls.discount.touched)),t.xp6(4),t.Q6J("readonly",!0)("ngClass",t.VKq(45,Pe,e.invoiceForm.controls.totalPayment.invalid&&(e.invoiceForm.controls.totalPayment.dirty||e.invoiceForm.controls.totalPayment.touched))),t.xp6(5),t.Q6J("readonly",!0)("ngClass",t.VKq(47,Pe,e.invoiceForm.controls.paidMoney.invalid&&(e.invoiceForm.controls.paidMoney.dirty||e.invoiceForm.controls.paidMoney.touched))),t.xp6(1),t.Q6J("ngIf",(null==(r=e.invoiceForm.get("paidMoney"))?null:r.invalid)&&(e.invoiceForm.controls.paidMoney.dirty||e.invoiceForm.controls.paidMoney.touched)),t.xp6(4),t.ekj("disabled",e.isEdit),t.Q6J("readonly",e.isEdit),t.xp6(1),t.Q6J("ngIf",e.invoice.isPay)}}function E1(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",96),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.issueInvoice())}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.invoiceForm.invalid)}}function b1(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",97),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.printInvoice(r.invoice.id))}),t.qZA()}}function x1(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",91)(1,"div",92)(2,"button",93),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.hideDialog())}),t.qZA()(),t.TgZ(3,"div",54),t.YNc(4,E1,1,1,"button",94),t.YNc(5,b1,1,0,"button",95),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",!e.invoice.id),t.xp6(1),t.Q6J("ngIf",!e.invoice.isPay&&e.invoice.id)}}function T1(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1,"X\xe1c nh\u1eadn thanh to\xe1n ho\xe1 \u0111\u01a1n th\xe1ng "),t.TgZ(2,"b"),t._uU(3),t.ALo(4,"date"),t.qZA(),t._uU(5),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(t.xi3(4,2,e.invoice.billDate,"MM/yyyy")),t.xp6(2),t.hij(" ph\xf2ng ",null==e.invoice.room?null:e.invoice.room.name,"")}}function C1(n,i){1&n&&(t.TgZ(0,"small",88),t._uU(1,"Vui l\xf2ng nh\u1eadp s\u1ed1 ti\u1ec1n \u0111\xe3 thanh to\xe1n."),t.qZA())}function A1(n,i){1&n&&(t.TgZ(0,"small",88),t._uU(1,"S\u1ed1 ti\u1ec1n kh\xf4ng h\u1ee3p l\u1ec7."),t.qZA())}function N1(n,i){if(1&n&&(t.TgZ(0,"form",64)(1,"div",62)(2,"label",78),t._uU(3,"S\u1ed1 ti\u1ec1n c\u1ea7n thanh to\xe1n"),t.qZA(),t.TgZ(4,"div",98),t._uU(5),t.ALo(6,"currency"),t.qZA()(),t.TgZ(7,"div",62)(8,"label",78),t._uU(9,"S\u1ed1 ti\u1ec1n \u0111\xe3 thanh to\xe1n"),t.qZA(),t.TgZ(10,"div",99),t._UZ(11,"p-inputNumber",100),t.qZA(),t.YNc(12,C1,2,0,"small",75),t.YNc(13,A1,2,0,"small",75),t.qZA(),t.TgZ(14,"div",62)(15,"label",69),t._uU(16,"S\u1ed1 ti\u1ec1n c\xf2n n\u1ee3"),t.qZA(),t._UZ(17,"p-inputNumber",101),t.qZA()()),2&n){const e=t.oxw();let o,r;t.Q6J("formGroup",e.confirmInvoiceForm),t.xp6(5),t.hij(" ",t.Dn7(6,6,e.invoice.paidMoney,"VND","symbol")," "),t.xp6(6),t.Q6J("ngClass",t.VKq(10,Pe,e.confirmInvoiceForm.controls.paidMoney.invalid&&(e.confirmInvoiceForm.controls.paidMoney.dirty||e.confirmInvoiceForm.controls.paidMoney.touched))),t.xp6(1),t.Q6J("ngIf",(null==(o=e.confirmInvoiceForm.get("paidMoney"))?null:o.getError("required"))&&(e.confirmInvoiceForm.controls.paidMoney.dirty||e.confirmInvoiceForm.controls.paidMoney.touched)),t.xp6(1),t.Q6J("ngIf",(null==(r=e.confirmInvoiceForm.get("paidMoney"))?null:r.getError("invalid"))&&(e.confirmInvoiceForm.controls.paidMoney.dirty||e.confirmInvoiceForm.controls.paidMoney.touched)),t.xp6(4),t.Q6J("ngClass",t.VKq(12,Pe,e.confirmInvoiceForm.controls.debt.invalid&&(e.confirmInvoiceForm.controls.debt.dirty||e.confirmInvoiceForm.controls.debt.touched)))}}function D1(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",102),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.confirmPaymentDialog=!1)}),t.qZA(),t.TgZ(1,"button",103),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.confirmPayment())}),t.qZA()}}function F1(n,i){1&n&&(t.TgZ(0,"div",104),t._UZ(1,"p-progressSpinner"),t.qZA())}const Z1=function(){return["name","capacity","price","acreage"]},I1=function(){return[10,20,30]},S1=function(){return{width:"1050px"}},k1=function(){return{width:"450px"}};let R1=(()=>{class n{constructor(e,o,r,s,l){this.accomodationService=e,this.auth=o,this.billService=r,this.userService=s,this.messageService=l,this.invoiceDialog=!1,this.accomodations=[],this.invoices=[],this.invoice={},this.rowsPerPageOptions=[5,10,20],this.dataLoading=!1,this.loading=!1,this.isEdit=!1,this.confirmPaymentDialog=!1,this.items=[],this.paidMoney=0,this.debt=0,this.selectedMonth=ft().toDate(),this.preMonth=ft(this.selectedMonth).subtract(1,"months").endOf("month").toDate(),this.invoiceForm=new E.cw({totalService:new E.NI(this.invoice.totalService,[]),discount:new E.NI(this.invoice.discount,[E.kI.required,E.kI.min(0)]),totalPrice:new E.NI(this.invoice.totalPrice,[]),paidMoney:new E.NI(this.invoice.paidMoney,[E.kI.required]),totalPayment:new E.NI(this.invoice.totalPayment,[]),debt:new E.NI(this.invoice.debt,[]),newDebt:new E.NI(this.invoice.newDebt,[]),description:new E.NI(this.invoice.description,[])}),this.confirmInvoiceForm=new E.cw({paidMoney:new E.NI(this.paidMoney,[E.kI.required]),debt:new E.NI(this.debt,[E.kI.required])})}ngOnInit(){this.user=this.auth.userValue,this.getDropdownAccomodation(),this.confirmInvoiceForm.get("paidMoney")?.valueChanges.subscribe(e=>{if(e&&(this.paidMoney=e,this.invoice.paidMoney)){let o=this.invoice.paidMoney-this.paidMoney;o<0||o>this.invoice.paidMoney?this.confirmInvoiceForm.get("paidMoney")?.setErrors({invalid:!0}):this.confirmInvoiceForm.get("debt")?.setValue(o)}}),this.confirmInvoiceForm.get("debt")?.valueChanges.subscribe(e=>{this.debt=e}),this.invoiceForm.get("totalService")?.valueChanges.subscribe(e=>{this.invoice.totalService=e}),this.invoiceForm.get("discount")?.valueChanges.subscribe(e=>{if(this.invoice.discount=e,this.invoice.totalPrice&&null!=this.invoice.discount){let o=this.invoice.totalPrice-this.invoice.discount;this.invoiceForm.get("totalPayment")?.setValue(o)}this.invoiceForm.get("newDebt")?.value<0?(console.log(this.invoiceForm.get("newDebt")),this.invoiceForm.setErrors({incorrect:!0}),this.invoiceForm.get("newDebt")?.markAsTouched()):(this.invoiceForm.setErrors(null),this.invoiceForm.get("newDebt")?.markAsTouched())}),this.invoiceForm.get("totalPrice")?.valueChanges.subscribe(e=>{this.invoice.totalPrice=e}),this.invoiceForm.get("totalPayment")?.valueChanges.subscribe(e=>{if(this.invoice.totalPayment=e,this.invoice.totalPayment&&this.invoice.paidMoney){let o=this.invoice.totalPayment-this.invoice.paidMoney;this.invoiceForm.get("newDebt")?.setValue(o)}this.invoiceForm.get("paidMoney")?.setValue(this.invoice.totalPayment)}),this.invoiceForm.get("paidMoney")?.valueChanges.subscribe(e=>{if(this.invoice.paidMoney=e,this.invoice.totalPayment&&this.invoice.paidMoney){let o=this.invoice.totalPayment-this.invoice.paidMoney;this.invoiceForm.get("newDebt")?.setValue(o)}}),this.invoiceForm.get("debt")?.valueChanges.subscribe(e=>{this.invoice.debt=e}),this.invoiceForm.get("newDebt")?.valueChanges.subscribe(e=>{this.invoice.newDebt=e}),this.invoiceForm.get("description")?.valueChanges.subscribe(e=>{this.invoice.description=e})}openNew(){this.invoice={},this.invoiceDialog=!0}onShowMenu(e){this.getMenuItems(e)}getMenuItems(e){return this.items=[{icon:"pi pi-info-circle",label:"Xem chi ti\u1ebft ho\xe1 \u0111\u01a1n",command:o=>{this.isEdit=!0,this.getInvoiceDetail(o.item.data.id)}},{icon:"pi pi-print",label:"In ho\xe1 \u0111\u01a1n",visible:!!e.id,command:o=>{this.printInvoice(o.item.data.id)}},{icon:"pi pi-check",label:"X\xe1c nh\u1eadn thanh to\xe1n",disabled:e.isPay,command:o=>{this.invoice=o.item.data,this.onConfirmPayment()}},{label:"G\u1eedi mail",icon:"pi pi-send",disabled:e.isPay,command:o=>{this.sendInvoiceMail(o.item.data.id)}},{label:"Xo\xe1",icon:"pi pi-trash",command:o=>{this.removeInvoice(o.item.data.id)}}],this.items.forEach(o=>{o.data=e}),this.items}initPrintData(e){return this.loading=!0,(0,Mt.D)({invoice:this.billService.getInvoiceDetail({id:e,month:this.selectedMonth}),landlord:this.userService.getUserByUserId(this.user?.id)})}printInvoice(e){let o,r;this.initPrintData(e).pipe((0,K.x)(()=>{console.log(o),this.loading=!1;let s=[],l=[];o.service?.forEach(x=>{null!==x.electricNum?l.push({name:"Ti\u1ec1n \u0111i\u1ec7n",firstNum:x.firstElectricNum,lastNum:x.lastElectricNum,price:x.totalPrice,quantity:x.electricNum}):null!==x.waterNum?l.push({name:"Ti\u1ec1n n\u01b0\u1edbc",firstNum:x.firstWaterNum,lastNum:x.lastWaterNum,price:x.totalPrice,quantity:x.waterNum}):s.push({name:x.serviceName,price:x.totalPrice,quantity:x.quantity})});const a=ft(o.billDate).format("MM/YYYY"),p=ft(this.preMonth).format("MM/YYYY");let _={services:s,electricsWaterNum:l,roomName:o.room?.name,month:a,totalService:o.totalService,debtMonth:p,debt:o.debt,totalPrice:o.totalPrice,discount:o.discount,totalPayment:o.totalPayment,paidMoney:o.paidMoney,banks:r.bankAccounts};const A=(new Ko).createInvoice(_);Vo.toBlob(A).then(x=>{console.log(x),qa(x,`Hoa_don_phong_${o.room?.name}_thang_${a}.docx`),console.log("Document created successfully")})})).subscribe(s=>{r=s.landlord.data,o=s.invoice.data})}toggleMenu(e,o){e.toggle(o)}onDialogHide(){this.isEdit=!1}getDropdownAccomodation(){this.loading=!0,this.accomodationService.getDropdownAccomodation(this.user?.id).pipe((0,K.x)(()=>{this.selectedAccomodation=this.accomodations[0],this.loading=!1,this.getInvoiceByAccomodation().subscribe(e=>this.invoices=e.data)})).subscribe(e=>this.accomodations=e.data)}getInvoiceByAccomodation(){return this.loading=!0,this.getInvoiceRequest={id:this.selectedAccomodation.id,month:this.selectedMonth},this.billService.getMonthInvoiceByAccomodation(this.getInvoiceRequest).pipe((0,K.x)(()=>{this.loading=!1}))}getInvoiceByMonth(){this.loading=!0,this.getInvoiceRequest={id:this.selectedAccomodation.id,month:this.selectedMonth},this.preMonth=ft(this.selectedMonth).subtract(1,"months").endOf("month").toDate(),this.billService.getMonthInvoiceByAccomodation(this.getInvoiceRequest).pipe((0,K.x)(()=>{this.loading=!1})).subscribe(e=>this.invoices=e.data)}onSelectAccomodation(){this.getInvoiceByAccomodation().subscribe(e=>this.invoices=e.data)}getInvoicePreview(e){e.loading=!0,this.issueRequest={roomId:e.room?.id,month:this.selectedMonth},this.billService.getPreviewInvoice(this.issueRequest).pipe((0,K.x)(()=>{e.loading=!1,this.editInvoice()})).subscribe(o=>this.invoice=o.data)}issueInvoice(){this.loading=!0,this.invoice.billDate=ft(this.selectedMonth).toDate(),this.billService.issueInvoice(this.invoice).pipe((0,K.x)(()=>{this.hideDialog(),this.getInvoiceByAccomodation().pipe((0,K.x)(()=>{this.messageService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"Xu\u1ea5t ho\xe1 \u0111\u01a1n th\xe0nh c\xf4ng"})})).subscribe(e=>this.invoices=e.data)})).subscribe(e=>console.log(e))}sendInvoiceMail(e){this.loading=!0,this.billService.sendInvoice({id:e,month:this.selectedMonth}).pipe((0,K.x)(()=>{this.loading=!1,this.messageService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"Mail \u0111\xe3 g\u1eedi th\xe0nh c\xf4ng"})})).subscribe(r=>console.log(r))}editInvoice(){this.invoiceDialog=!0,this.invoiceForm.get("totalService")?.setValue(this.invoice.totalService),this.invoiceForm.get("description")?.setValue(this.invoice.description),this.invoiceForm.get("discount")?.setValue(this.invoice.discount||0),this.invoiceForm.get("totalPrice")?.setValue(this.invoice.totalPrice),this.invoiceForm.get("paidMoney")?.setValue(this.invoice.paidMoney),this.invoiceForm.get("totalPayment")?.setValue(this.invoice.totalPayment),this.invoiceForm.get("debt")?.setValue(this.invoice.debt),this.invoiceForm.get("newDebt")?.setValue(this.invoice.newDebt);let e=this.invoice.totalPayment||0,o=this.invoice.totalPrice||0;this.invoiceForm.get("paidMoney")?.setValidators([E.kI.max(e)]),this.invoiceForm.get("discount")?.setValidators([E.kI.max(o)]),this.invoiceForm.get("paidMoney")?.updateValueAndValidity(),this.invoiceForm.get("discount")?.updateValueAndValidity()}getInvoiceDetail(e){this.loading=!0,this.billService.getInvoiceDetail({id:e,month:this.selectedMonth}).pipe((0,K.x)(()=>{this.loading=!1,console.log(this.invoice),this.editInvoice()})).subscribe(r=>this.invoice=r.data)}removeInvoice(e){this.loading=!0,this.billService.removeInvoice(e).pipe((0,K.x)(()=>{this.getInvoiceByAccomodation().subscribe(o=>this.invoices=o.data)})).subscribe(o=>console.log(o))}hideDialog(){this.invoiceDialog=!1}confirmPayment(){this.loading=!0,this.billService.confirmPayment({invoiceId:this.invoice.id,paidMoney:this.paidMoney,debt:this.debt}).pipe((0,K.x)(()=>{this.hideDialog(),this.getInvoiceByAccomodation().pipe((0,K.x)(()=>{this.confirmPaymentDialog=!1,this.messageService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"Xu\u1ea5t ho\xe1 \u0111\u01a1n th\xe0nh c\xf4ng"})})).subscribe(o=>this.invoices=o.data)})).subscribe(o=>console.log(o))}onConfirmPayment(){this.confirmPaymentDialog=!0,this.confirmInvoiceForm.get("paidMoney")?.setValue(this.invoice.paidMoney),this.confirmInvoiceForm.get("debt")?.setValue(0)}updateInvoice(){this.invoiceForm.invalid?this.invoiceForm.markAllAsTouched():(this.loading=!0,this.billService.updateInvoice(this.invoice).pipe((0,K.x)(()=>{this.hideDialog(),this.getInvoiceByAccomodation().pipe((0,K.x)(()=>{this.messageService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"Xu\u1ea5t ho\xe1 \u0111\u01a1n th\xe0nh c\xf4ng"})})).subscribe(e=>this.invoices=e.data)})).subscribe(e=>console.log(e)))}onGlobalFilter(e,o){e.filterGlobal(o.target.value,"contains")}get staticElectricPriceName(){return Dt.$.ELECTRIC_PRICE_NAME}get staticWaterPriceName(){return Dt.$.WATER_PRICE_NAME}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Yt),t.Y36(Pt.$),t.Y36(Yo),t.Y36(Bn.K),t.Y36(ht.ez))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-invoice"]],features:[t._Bn([ht.ez])],decls:22,vars:20,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","dataKey","id",3,"value","rows","globalFilterFields","paginator","rowsPerPageOptions","rowHover"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Xu\u1ea5t ho\xe1 \u0111\u01a1n",1,"p-fluid",3,"visible","modal","onHide","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","X\xe1c nh\u1eadn",1,"p-fluid",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center","mb-4"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[4,"ngIf"],["class","progress-spinner",4,"ngIf"],[1,"flex","justify-content-center"],["optionLabel","name","autoWidth","false",3,"options","ngModel","onChange","ngModelChange"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],["view","month","dateFormat","mm/yy","placeholder","Ch\u1ecdn th\xe1ng...",3,"ngModel","showIcon","onSelect","ngModelChange"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","T\xecm ki\u1ebfm...",1,"w-full","sm:w-auto",3,"input"],["pSortableColumn","name"],["field","name"],["pSortableColumn","month"],["field","month"],["pSortableColumn","representative"],["field","representative"],["pSortableColumn","totalPrice"],["field","totalPrice"],["pSortableColumn","totalPayment"],["field","totalPayment"],["pSortableColumn","debt"],["field","debt"],["pSortableColumn","paymentDate"],["field","paymentDate"],["pSortableColumn","isPay"],["field","isPay"],[2,"width","10%"],[2,"width","15%"],["severity","success","value","\u0110\xe3 thanh to\xe1n",4,"ngIf"],["severity","warning","value","Ch\u01b0a thanh to\xe1n",4,"ngIf"],["severity","success","value","\u0110\xe3 thanh to\xe1n"],["severity","warning","value","Ch\u01b0a thanh to\xe1n"],["severity","info","value","Ch\u01b0a xu\u1ea5t ho\xe1 \u0111\u01a1n"],[1,"flex","align-items-center",2,"position","relative"],[3,"model","popup","onShow"],["menu",""],["pButton","","type","button","pTooltip","T\xe1c v\u1ee5","tooltipPosition","top","icon","pi pi-bars",1,"p-button-rounded",3,"click"],[1,"flex"],["pButton","","pRipple","","icon","pi pi-file-export","pTooltip","Xu\u1ea5t ho\xe1 \u0111\u01a1n","tooltipPosition","top",1,"p-button-rounded",3,"loading","click"],["id","contentToConvert"],[1,"formgrid","grid"],[1,"field","col"],["for","name"],["pInputText",""],["for","price"],[1,"field"],[3,"value"],[3,"formGroup"],[1,"formgrid","grid",2,"position","relative"],[1,"field","col","mr-3"],["for","totalService"],["id","totalService","formControlName","totalService",1,"disabled",3,"readonly","ngClass"],["for","debt"],["id","debt","formControlName","debt",1,"disabled",3,"readonly","ngClass"],["for","totalPrice"],["id","totalPrice","formControlName","totalPrice",1,"disabled",3,"readonly","ngClass"],["for","discount"],["id","discount","formControlName","discount",3,"readonly","ngClass"],["class","ng-dirty ng-invalid",4,"ngIf"],["for","totalPayment"],["id","totalPayment","formControlName","totalPayment",1,"disabled",3,"readonly","ngClass"],["for","paidMoney"],["id","paidMoney","formControlName","paidMoney",1,"disabled",3,"readonly","ngClass"],["for","description"],["type","text","pInputTextarea","","id","description","formControlName","description",3,"readonly"],["style","position: absolute;top: 0;right: 50%;transform: translateX(50%);;",4,"ngIf"],[2,"width","20%"],[2,"width","30%"],[4,"ngIf","ngIfElse"],["isCustomUnit",""],["pInputText","",1,"mr-3"],[1,"ng-dirty","ng-invalid"],[2,"position","absolute","top","0","right","50%","transform","translateX(50%)"],["src","../../../../../assets/images/paid.svg",2,"width","300px","transform","rotate(45deg)"],[1,"flex","justify-content-between"],[1,""],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Xu\u1ea5t ho\xe1 \u0111\u01a1n","icon","pi pi-file-export","class","p-button-text",3,"disabled","click",4,"ngIf"],["pButton","","pRipple","","label","In ho\xe1 \u0111\u01a1n","icon","pi pi-print","class","p-button-text",3,"click",4,"ngIf"],["pButton","","pRipple","","label","Xu\u1ea5t ho\xe1 \u0111\u01a1n","icon","pi pi-file-export",1,"p-button-text",3,"disabled","click"],["pButton","","pRipple","","label","In ho\xe1 \u0111\u01a1n","icon","pi pi-print",1,"p-button-text",3,"click"],["pInputText","",2,"padding-top","14px","padding-bottom","14px"],[1,"input-box"],["id","paidMoney","formControlName","paidMoney",3,"ngClass"],["id","debt","formControlName","debt",3,"ngClass"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",1,"p-button-text",3,"click"],[1,"progress-spinner"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"p-toast"),t.TgZ(4,"p-toolbar",3),t.YNc(5,$g,0,0,"ng-template",4),t.YNc(6,t1,2,5,"ng-template",5),t.qZA(),t.TgZ(7,"p-table",6,7),t.YNc(9,e1,8,2,"ng-template",8),t.YNc(10,n1,29,0,"ng-template",9),t.YNc(11,c1,29,30,"ng-template",10),t.qZA()(),t.TgZ(12,"p-dialog",11),t.NdJ("onHide",function(){return o.onDialogHide()})("visibleChange",function(s){return o.invoiceDialog=s}),t.YNc(13,w1,60,49,"ng-template",12),t.YNc(14,x1,6,2,"ng-template",13),t.qZA(),t.TgZ(15,"p-dialog",14),t.NdJ("visibleChange",function(s){return o.confirmPaymentDialog=s}),t.TgZ(16,"div",15),t._UZ(17,"i",16),t.YNc(18,T1,6,5,"span",17),t.qZA(),t.YNc(19,N1,18,14,"ng-template",12),t.YNc(20,D1,2,0,"ng-template",13),t.qZA()()(),t.YNc(21,F1,2,0,"div",18)),2&e&&(t.xp6(7),t.Q6J("value",o.invoices)("rows",10)("globalFilterFields",t.DdM(16,Z1))("paginator",!0)("rowsPerPageOptions",t.DdM(17,I1))("rowHover",!0),t.xp6(5),t.Akn(t.DdM(18,S1)),t.Q6J("visible",o.invoiceDialog)("modal",!0),t.xp6(3),t.Akn(t.DdM(19,k1)),t.Q6J("visible",o.confirmPaymentDialog)("modal",!0),t.xp6(3),t.Q6J("ngIf",o.invoice),t.xp6(3),t.Q6J("ngIf",o.loading))},dependencies:[bt.mk,bt.O5,ht.jx,Xt.Hq,Ce.u,ne.o,E._Y,E.Fj,E.JJ,E.JL,E.On,te.FN,pe.o,Ft.iA,Ft.lQ,Ft.fz,ie.V,re.Lt,Qo.g,ge.Rn,ee.G,E.sg,E.u,qe.f,mn.i,mi.v2,yn.V,bt.H9,bt.uU],styles:["app-invoice[_nghost-%COMP%]     .p-menu-overlay{position:absolute;top:45px!important;left:-60px!important}  .p-datatable .p-datatable-wrapper{overflow:unset!important}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.8}"]}),n})(),q1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-room-images"]],features:[t._Bn([ht.YP,ht.ez])],decls:0,vars:0,template:function(e,o){}}),n})();function U1(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",18)(1,"button",19),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.openNewService())}),t.qZA()()}}const M1=function(){return{width:"100%"}};function B1(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",20)(1,"p-dropdown",21),t.NdJ("onChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onSelectAccomodation())})("ngModelChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.selectedAccomodation=r)}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Akn(t.DdM(4,M1)),t.Q6J("options",e.accomodations)("ngModel",e.selectedAccomodation)}}function P1(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",22)(1,"h5",23),t._uU(2,"Qu\u1ea3n l\xfd d\u1ecbch v\u1ee5"),t.qZA(),t.TgZ(3,"span",24),t._UZ(4,"i",25),t.TgZ(5,"input",26),t.NdJ("input",function(r){t.CHM(e);const s=t.oxw(),l=t.MAs(8);return t.KtG(s.onGlobalFilter(l,r))}),t.qZA()()()}}function O1(n,i){1&n&&(t.TgZ(0,"tr")(1,"th",27),t._uU(2,"T\xean d\u1ecbch v\u1ee5"),t._UZ(3,"p-sortIcon",28),t.qZA(),t.TgZ(4,"th",29),t._uU(5,"\u0110\u01a1n gi\xe1"),t._UZ(6,"p-sortIcon",30),t.qZA(),t.TgZ(7,"th",31),t._uU(8,"\u0110\u01a1n v\u1ecb"),t._UZ(9,"p-sortIcon",32),t.qZA(),t.TgZ(10,"th",33),t._uU(11,"M\xf4 t\u1ea3"),t._UZ(12,"p-sortIcon",34),t.qZA(),t._UZ(13,"th"),t.qZA())}function L1(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",35),t._uU(2),t.qZA(),t.TgZ(3,"td",35),t._uU(4),t.ALo(5,"currency"),t.qZA(),t.TgZ(6,"td",35),t._uU(7),t.qZA(),t.TgZ(8,"td",35),t._uU(9),t.qZA(),t.TgZ(10,"td")(11,"div",36)(12,"button",37),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.editService(s))}),t.qZA(),t.TgZ(13,"button",38),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.deleteService(s))}),t.qZA()()()()}if(2&n){const e=i.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(t.Dn7(5,6,e.price,"VND","symbol")),t.xp6(3),t.Oqu(e.unit),t.xp6(2),t.Oqu(e.description),t.xp6(4),t.Q6J("pTooltip",e.isDefault?"Kh\xf4ng th\u1ec3 xo\xe1 d\u1ecbch v\u1ee5 m\u1eb7c \u0111\u1ecbnh":"Xo\xe1")("disabled",e.isDefault)}}function V1(n,i){1&n&&t._UZ(0,"i",54)}function J1(n,i){1&n&&(t.TgZ(0,"small",55),t._uU(1,"Vui l\xf2ng nh\u1eadp t\xean d\u1ecbch v\u1ee5."),t.qZA())}function H1(n,i){1&n&&(t.TgZ(0,"small",55),t._uU(1,"D\u1ecbch v\u1ee5 \u0111\xe3 t\u1ed3n t\u1ea1i."),t.qZA())}function W1(n,i){1&n&&(t.TgZ(0,"small",55),t._uU(1,"Vui l\xf2ng nh\u1eadp \u0111\u01a1n gi\xe1."),t.qZA())}function G1(n,i){1&n&&(t.TgZ(0,"small",55),t._uU(1,"Vui l\xf2ng ch\u1ecdn \u0111\u01a1n v\u1ecb."),t.qZA())}const jo=function(n){return{"ng-invalid ng-dirty":n}};function K1(n,i){if(1&n&&(t.TgZ(0,"form",39)(1,"div",40)(2,"label",41),t._uU(3,"T\xean d\u1ecbch v\u1ee5 "),t.TgZ(4,"span",42),t._uU(5,"*"),t.qZA()(),t.TgZ(6,"span",43),t.YNc(7,V1,1,0,"i",44),t.TgZ(8,"div",45),t._UZ(9,"input",46),t.qZA()(),t.YNc(10,J1,2,0,"small",47),t.YNc(11,H1,2,0,"small",47),t.qZA(),t.TgZ(12,"div",40)(13,"label",48),t._uU(14,"\u0110\u01a1n gi\xe1 (\u0111\u1ed3ng) "),t.TgZ(15,"span",42),t._uU(16,"*"),t.qZA()(),t.TgZ(17,"div",45),t._UZ(18,"p-inputNumber",49),t.qZA(),t.YNc(19,W1,2,0,"small",47),t.qZA(),t.TgZ(20,"div",40)(21,"label",50),t._uU(22,"\u0110\u01a1n v\u1ecb "),t.TgZ(23,"span",42),t._uU(24,"*"),t.qZA()(),t.TgZ(25,"div",45),t._UZ(26,"p-dropdown",51),t.qZA(),t.YNc(27,G1,2,0,"small",47),t.qZA(),t.TgZ(28,"div",40)(29,"label",52),t._uU(30,"M\xf4 t\u1ea3"),t.qZA(),t._UZ(31,"input",53),t.qZA()()),2&n){const e=t.oxw();let o,r,s,l;t.Q6J("formGroup",e.serviceForm),t.xp6(7),t.Q6J("ngIf",e.isValidating),t.xp6(2),t.Q6J("ngClass",t.VKq(10,jo,e.serviceForm.controls.name.invalid&&(e.serviceForm.controls.name.dirty||e.serviceForm.controls.name.touched))),t.xp6(1),t.Q6J("ngIf",(null==(o=e.serviceForm.get("name"))?null:o.hasError("required"))&&(e.serviceForm.controls.name.dirty||e.serviceForm.controls.name.touched)),t.xp6(1),t.Q6J("ngIf",(null==(r=e.serviceForm.get("name"))?null:r.hasError("nameExisted"))&&(e.serviceForm.controls.name.dirty||e.serviceForm.controls.name.touched)),t.xp6(7),t.Q6J("ngClass",t.VKq(12,jo,e.serviceForm.controls.price.invalid&&(e.serviceForm.controls.price.dirty||e.serviceForm.controls.price.touched))),t.xp6(1),t.Q6J("ngIf",(null==(s=e.serviceForm.get("price"))?null:s.invalid)&&(e.serviceForm.controls.price.dirty||e.serviceForm.controls.price.touched)),t.xp6(7),t.Q6J("options",e.units)("ngClass",t.VKq(14,jo,e.serviceForm.controls.unit.invalid&&(e.serviceForm.controls.unit.dirty||e.serviceForm.controls.unit.touched))),t.xp6(1),t.Q6J("ngIf",(null==(l=e.serviceForm.get("unit"))?null:l.invalid)&&(e.serviceForm.controls.unit.dirty||e.serviceForm.controls.unit.touched))}}function Y1(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",56),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.hideDialog())}),t.qZA(),t.TgZ(1,"button",57),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.saveService())}),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.isValidating||e.serviceForm.invalid)}}function Q1(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",58),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.deleteDialog=!1)}),t.qZA()}}function j1(n,i){1&n&&(t.TgZ(0,"div",59),t._UZ(1,"p-progressSpinner"),t.qZA())}const z1=function(){return["name","unit","description"]},$1=function(){return[10,20,30]},X1=function(){return{width:"550px"}},t_=function(){return{width:"450px"}};let e_=(()=>{class n{constructor(e,o,r){this.accomodationService=e,this.auth=o,this.messageService=r,this.addDialog=!1,this.accomodations=[],this.cols=[],this.rowsPerPageOptions=[5,10,20],this.loading=!1,this.deleteDialog=!1,this.services=[],this.service={},this.units=Dt.$.UNITS,this.isValidating=!1,this.oldName="",this.serviceForm=new E.cw({name:new E.NI(this.service.name,[E.kI.required]),price:new E.NI(this.service.price,[E.kI.required]),unit:new E.NI(this.service.unit,[E.kI.required]),description:new E.NI(this.service.description,[])})}ngOnInit(){this.user=this.auth.userValue,this.serviceForm.get("name")?.valueChanges.pipe((0,Xe.b)(500),tn()).subscribe(e=>{e&&(this.service.name=e,this.oldName!==this.service.name&&this.checkValidService())}),this.serviceForm.get("price")?.valueChanges.subscribe(e=>{this.service.price=e}),this.serviceForm.get("unit")?.valueChanges.subscribe(e=>{this.service.unit=e}),this.serviceForm.get("description")?.valueChanges.subscribe(e=>{this.service.description=e}),this.getDropdownAccomodation()}checkValidService(){let e=!1;this.isValidating=!0,this.service.accomodationId=this.selectedAccomodation.id,this.accomodationService.checkValidService(this.service).pipe((0,K.x)(()=>{this.isValidating=!1,e||this.serviceForm.get("name")?.setErrors({nameExisted:!0})})).subscribe(o=>e=o.data)}onHideAddDialog(){this.serviceForm.reset()}getDropdownAccomodation(){this.loading=!0,this.accomodationService.getDropdownAccomodation(this.user?.id).pipe((0,K.x)(()=>{this.selectedAccomodation=this.accomodations[0],this.getServiceByAccomodation().pipe((0,K.x)(()=>{this.loading=!1})).subscribe(e=>this.services=e.data)})).subscribe(e=>this.accomodations=e.data)}openNewService(){this.addDialog=!0,this.service={},this.oldName="",this.serviceForm.get("name")?.setValue(null),this.serviceForm.get("price")?.setValue(null),this.serviceForm.get("unit")?.setValue(null),this.serviceForm.get("description")?.setValue(null),this.serviceForm.get("name")?.enable(),this.serviceForm.get("unit")?.enable()}getServiceByAccomodation(){return this.accomodationService.getAccomodationService(this.selectedAccomodation.id)}onSelectAccomodation(){this.loading=!0,this.getServiceByAccomodation().pipe((0,K.x)(()=>{this.loading=!1})).subscribe(e=>this.services=e.data)}editService(e){this.service={...e},this.oldName=e.name,this.serviceForm.get("name")?.setValue(this.service.name),this.serviceForm.get("price")?.setValue(this.service.price),this.serviceForm.get("unit")?.setValue(this.service.unit),this.serviceForm.get("description")?.setValue(this.service.description),this.service.isDefault?(this.serviceForm.get("name")?.disable(),this.serviceForm.get("unit")?.disable()):(this.serviceForm.get("name")?.enable(),this.serviceForm.get("unit")?.enable()),this.addDialog=!0}deleteService(e){this.deleteDialog=!0}hideDialog(){this.addDialog=!1}saveService(){if(this.serviceForm.invalid)this.serviceForm.markAllAsTouched();else{let e;this.loading=!0,e=this.service.id?"Ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng":"Th\xeam th\xe0nh c\xf4ng",this.service.accomodationId=this.selectedAccomodation.id,this.accomodationService.saveService(this.service).pipe((0,K.x)(()=>{this.loading=!1,this.messageService.add({severity:"success",summary:"Successful",detail:e,life:3e3})})).subscribe(o=>this.services=o.data),this.addDialog=!1}}onGlobalFilter(e,o){e.filterGlobal(o.target.value,"contains")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Yt),t.Y36(Pt.$),t.Y36(ht.ez))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-room-service"]],features:[t._Bn([ht.ez])],decls:22,vars:20,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","selectionMode","multiple","dataKey","id",3,"value","columns","rows","globalFilterFields","paginator","rowsPerPageOptions","rowHover"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Chi ti\u1ebft d\u1ecbch v\u1ee5",1,"p-fluid",3,"visible","modal","onHide","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","X\xe1c nh\u1eadn xo\xe1 d\u1ecbch v\u1ee5",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],["class","progress-spinner",4,"ngIf"],[1,"my-2"],["pButton","","pRipple","","label","Th\xeam d\u1ecbch v\u1ee5","loadingIcon","pi pi-spin pi-spinner","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],[1,"flex","justify-content-center"],["placeholder","Ch\u1ecdn ph\xf2ng tr\u1ecd","optionLabel","name","autoWidth","false",3,"options","ngModel","onChange","ngModelChange"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","T\xecm ki\u1ebfm...",1,"w-full","sm:w-auto",3,"input"],["pSortableColumn","name"],["field","name"],["pSortableColumn","price"],["field","price"],["pSortableColumn","unit"],["field","unit"],["pSortableColumn","description"],["field","description"],[2,"width","25%","min-width","10rem"],[1,"flex"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash","tooltipPosition","top",1,"p-button-rounded","p-button-warning",3,"pTooltip","disabled","click"],[3,"formGroup"],[1,"field"],["for","name"],[1,"mandatory-sign"],[1,"p-input-icon-right"],["class","pi pi-spin pi-spinner",4,"ngIf"],[1,"input-box"],["type","text","pInputText","","id","name","formControlName","name",3,"ngClass"],["class","ng-dirty ng-invalid",4,"ngIf"],["for","price"],["id","price","formControlName","price",3,"ngClass"],["for","unit"],["appendTo","body","placeholder","\u0110\u01a1n v\u1ecb","formControlName","unit",3,"options","ngClass"],["for","description"],["type","text","pInputText","","id","description","formControlName","description"],[1,"pi","pi-spin","pi-spinner"],[1,"ng-dirty","ng-invalid"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"disabled","click"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],[1,"progress-spinner"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"p-toast"),t.TgZ(4,"p-toolbar",3),t.YNc(5,U1,2,0,"ng-template",4),t.YNc(6,B1,2,5,"ng-template",5),t.qZA(),t.TgZ(7,"p-table",6,7),t.YNc(9,P1,6,0,"ng-template",8),t.YNc(10,O1,14,0,"ng-template",9),t.YNc(11,L1,14,10,"ng-template",10),t.qZA()(),t.TgZ(12,"p-dialog",11),t.NdJ("onHide",function(){return o.onHideAddDialog()})("visibleChange",function(s){return o.addDialog=s}),t.YNc(13,K1,32,16,"ng-template",12),t.YNc(14,Y1,2,1,"ng-template",13),t.qZA(),t.TgZ(15,"p-dialog",14),t.NdJ("visibleChange",function(s){return o.deleteDialog=s}),t.TgZ(16,"div",15),t._UZ(17,"i",16),t.TgZ(18,"span"),t._uU(19,"D\u1ecbch v\u1ee5 s\u1ebd b\u1ecb xo\xe1 v\u0129nh vi\u1ec5n?"),t.qZA()(),t.YNc(20,Q1,1,0,"ng-template",13),t.qZA()()(),t.YNc(21,j1,2,0,"div",17)),2&e&&(t.xp6(7),t.Q6J("value",o.services)("columns",o.cols)("rows",10)("globalFilterFields",t.DdM(16,z1))("paginator",!0)("rowsPerPageOptions",t.DdM(17,$1))("rowHover",!0),t.xp6(5),t.Akn(t.DdM(18,X1)),t.Q6J("visible",o.addDialog)("modal",!0),t.xp6(3),t.Akn(t.DdM(19,t_)),t.Q6J("visible",o.deleteDialog)("modal",!0),t.xp6(6),t.Q6J("ngIf",o.loading))},dependencies:[bt.mk,bt.O5,ht.jx,Xt.Hq,Ce.u,ne.o,E._Y,E.Fj,E.JJ,E.JL,E.On,te.FN,pe.o,Ft.iA,Ft.lQ,Ft.fz,ie.V,re.Lt,ge.Rn,ee.G,E.sg,E.u,bt.H9]}),n})(),n_=(()=>{class n{constructor(e){this.http=e}saveEquipment(e){return this.http.post(`${vt.N.apiUrl}/equipment`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}getByAccomodation(e){return this.http.get(`${vt.N.apiUrl}/equipment/accomodation/${e}`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}getByRoom(e){return this.http.get(`${vt.N.apiUrl}/equipment/room/${e}`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}getByName(e){return this.http.get(`${vt.N.apiUrl}/equipment?name=${e}`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}deleleById(e){return this.http.delete(`${vt.N.apiUrl}/equipment/${e}`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(fe.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var i_=Et(7913),o_=Et(5722);function r_(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",20)(1,"button",21),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.openNew())}),t.qZA()()}}const s_=function(){return{width:"100%"}};function a_(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",22)(1,"p-dropdown",23),t.NdJ("onChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onSelectAccomodation())})("ngModelChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.selectedAccomodation=r)}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Akn(t.DdM(4,s_)),t.Q6J("options",e.accomodations)("ngModel",e.selectedAccomodation)}}function l_(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",24)(1,"h5",25),t._uU(2,"Qu\u1ea3n l\xfd thi\u1ebft b\u1ecb"),t.qZA(),t.TgZ(3,"span",26),t._UZ(4,"i",27),t.TgZ(5,"p-dropdown",28),t.NdJ("onChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onFilterByRoom())})("ngModelChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.filterRoom=r)}),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(5),t.Q6J("showClear",!0)("ngModel",e.filterRoom)("options",e.rooms)}}function c_(n,i){1&n&&(t.TgZ(0,"tr"),t._UZ(1,"th"),t.TgZ(2,"th",29),t._uU(3,"T\xean thi\u1ebft b\u1ecb"),t._UZ(4,"p-sortIcon",30),t.qZA(),t.TgZ(5,"th",31),t._uU(6,"\u0110\u01a1n v\u1ecb"),t._UZ(7,"p-sortIcon",32),t.qZA(),t.TgZ(8,"th",33),t._uU(9,"Gi\xe1"),t._UZ(10,"p-sortIcon",34),t.qZA(),t.TgZ(11,"th",35),t._uU(12,"Tr\u1ea1ng th\xe1i"),t._UZ(13,"p-sortIcon",36),t.qZA(),t.TgZ(14,"th",37),t._uU(15,"M\xf4 t\u1ea3"),t._UZ(16,"p-sortIcon",38),t.qZA(),t.TgZ(17,"th",39),t._uU(18,"S\u1ed1 l\u01b0\u1ee3ng"),t._UZ(19,"p-sortIcon",40),t.qZA(),t._UZ(20,"th"),t.qZA())}function u_(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",43)(1,"button",46),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw();return t.KtG(s.onExpand(r))}),t.qZA()()}if(2&n){const e=t.oxw(),o=e.$implicit,r=e.expanded;t.xp6(1),t.Q6J("pRowToggler",o)("icon",r?"pi pi-chevron-down":"pi pi-chevron-right")}}function p_(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",47),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw();return t.KtG(s.editEquipment(r))}),t.qZA()}}function d_(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t.YNc(2,u_,2,2,"div",41),t.qZA(),t.TgZ(3,"td",42),t._uU(4),t.qZA(),t.TgZ(5,"td",42),t._uU(6),t.qZA(),t.TgZ(7,"td",42),t._uU(8),t.ALo(9,"currency"),t.qZA(),t.TgZ(10,"td",42),t._uU(11),t.qZA(),t.TgZ(12,"td",42),t._uU(13),t.qZA(),t.TgZ(14,"td",42),t._uU(15),t.qZA(),t.TgZ(16,"td",42)(17,"div",43),t.YNc(18,p_,1,0,"button",44),t.TgZ(19,"button",45),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.deleteRoom(s))}),t.qZA()()()()}if(2&n){const e=i.$implicit,o=t.oxw();t.xp6(2),t.Q6J("ngIf",!o.filterRoom),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.unit),t.xp6(2),t.Oqu(t.Dn7(9,8,e.price,"VND","symbol")),t.xp6(3),t.Oqu(e.status),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.Oqu(e.quantity),t.xp6(3),t.Q6J("ngIf",o.filterRoom)}}function m_(n,i){1&n&&(t.TgZ(0,"tr"),t._UZ(1,"th"),t.TgZ(2,"th"),t._uU(3,"T\xean thi\u1ebft b\u1ecb"),t.qZA(),t.TgZ(4,"th"),t._uU(5,"\u0110\u01a1n v\u1ecb"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Gi\xe1"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Tr\u1ea1ng th\xe1i"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"M\xf4 t\u1ea3"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Ph\xf2ng"),t.qZA(),t._UZ(14,"th",52),t.qZA())}function h_(n,i){if(1&n&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.room.name)}}function f_(n,i){1&n&&(t.TgZ(0,"td"),t._uU(1,"Tr\u1ed1ng"),t.qZA())}function g_(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr"),t._UZ(1,"td"),t.TgZ(2,"td",42),t._uU(3),t.qZA(),t.TgZ(4,"td",42),t._uU(5),t.qZA(),t.TgZ(6,"td",42),t._uU(7),t.ALo(8,"currency"),t.qZA(),t.TgZ(9,"td",42),t._uU(10),t.qZA(),t.TgZ(11,"td",42),t._uU(12),t.qZA(),t.YNc(13,h_,2,1,"td",53),t.YNc(14,f_,2,0,"ng-template",54,55,t.W1O),t.TgZ(16,"td",42)(17,"div",43)(18,"button",47),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.editEquipment(s))}),t.qZA(),t.TgZ(19,"button",45),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.deleteRoom(s))}),t.qZA()()()()}if(2&n){const e=i.$implicit,o=t.MAs(15);t.xp6(3),t.Oqu(e.name),t.xp6(2),t.Oqu(e.unit),t.xp6(2),t.Oqu(t.Dn7(8,7,e.price,"VND","symbol")),t.xp6(3),t.Oqu(e.status),t.xp6(2),t.Oqu(e.description),t.xp6(1),t.Q6J("ngIf",e.room.name)("ngIfElse",o)}}function __(n,i){1&n&&t._UZ(0,"tr")}function v_(n,i){if(1&n&&(t.TgZ(0,"tr")(1,"td",48)(2,"div",49)(3,"p-table",50),t.YNc(4,m_,15,0,"ng-template",9),t.YNc(5,g_,20,11,"ng-template",10),t.YNc(6,__,1,0,"ng-template",51),t.qZA()()()()),2&n){const e=i.$implicit;t.xp6(3),t.Q6J("value",e.child)}}function y_(n,i){1&n&&(t.TgZ(0,"small",74),t._uU(1,"Vui l\xf2ng nh\u1eadp t\xean thi\u1ebft b\u1ecb."),t.qZA())}function w_(n,i){1&n&&(t.TgZ(0,"small",74),t._uU(1,"Vui l\xf2ng nh\u1eadp \u0111\u01a1n v\u1ecb."),t.qZA())}function E_(n,i){1&n&&(t.TgZ(0,"small",74),t._uU(1,"Vui l\xf2ng ch\u1ecdn tr\u1ea1ng th\xe1i."),t.qZA())}function b_(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",63)(1,"div",75)(2,"p-dropdown",76),t.NdJ("onClear",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.onClearRoom())}),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("filter",!0)("showClear",!0)("options",e.rooms)}}function x_(n,i){1&n&&(t.TgZ(0,"small",74),t._uU(1,"Vui l\xf2ng nh\u1eadp s\u1ed1 l\u01b0\u1ee3ng."),t.qZA())}function T_(n,i){1&n&&(t.TgZ(0,"small",74),t._uU(1,"Vui l\xf2ng ch\u1ecdn ph\xf2ng."),t.qZA())}const Sn=function(n){return{"ng-invalid ng-dirty":n}};function C_(n,i){if(1&n&&(t.TgZ(0,"div",63)(1,"div",77)(2,"label",78),t._uU(3,"Th\xeam thi\u1ebft b\u1ecb v\xe0o ph\xf2ng tr\u1ecd"),t.qZA(),t._UZ(4,"p-inputSwitch",79),t.qZA(),t.TgZ(5,"div",75)(6,"div",80),t._UZ(7,"p-inputNumber",81),t.YNc(8,x_,2,0,"small",62),t.qZA(),t.TgZ(9,"div"),t._UZ(10,"p-multiSelect",82),t.YNc(11,T_,2,0,"small",62),t.qZA()()()),2&n){const e=t.oxw(2);let o,r;t.xp6(5),t.Udp("visibility",e.equipment.isAddRoom?"visible":"hidden"),t.xp6(2),t.Q6J("ngClass",t.VKq(7,Sn,e.equipmentForm.controls.quantity.invalid&&(e.equipmentForm.controls.quantity.dirty||e.equipmentForm.controls.quantity.touched))),t.xp6(1),t.Q6J("ngIf",(null==(o=e.equipmentForm.get("quantity"))?null:o.invalid)&&(e.equipmentForm.controls.quantity.dirty||e.equipmentForm.controls.quantity.touched)),t.xp6(2),t.Q6J("options",e.rooms)("ngClass",t.VKq(9,Sn,e.equipmentForm.controls.selectedRoom.invalid&&(e.equipmentForm.controls.selectedRoom.dirty||e.equipmentForm.controls.selectedRoom.touched))),t.xp6(1),t.Q6J("ngIf",(null==(r=e.equipmentForm.get("selectedRoom"))?null:r.invalid)&&(e.equipmentForm.controls.selectedRoom.dirty||e.equipmentForm.controls.selectedRoom.touched))}}function A_(n,i){if(1&n&&(t.TgZ(0,"form",56)(1,"div",57)(2,"label",58),t._uU(3,"T\xean thi\u1ebft b\u1ecb "),t.TgZ(4,"span",59),t._uU(5,"*"),t.qZA()(),t.TgZ(6,"div",60),t._UZ(7,"input",61),t.qZA(),t.YNc(8,y_,2,0,"small",62),t.qZA(),t.TgZ(9,"div",63)(10,"div",64)(11,"label",65),t._uU(12,"\u0110\u01a1n v\u1ecb "),t.TgZ(13,"span",59),t._uU(14,"*"),t.qZA()(),t.TgZ(15,"div",60),t._UZ(16,"p-dropdown",66),t.qZA(),t.YNc(17,w_,2,0,"small",62),t.qZA(),t.TgZ(18,"div",64)(19,"label",67),t._uU(20,"Tr\u1ea1ng th\xe1i "),t.TgZ(21,"span",59),t._uU(22,"*"),t.qZA()(),t.TgZ(23,"div",60),t._UZ(24,"p-dropdown",68),t.qZA(),t.YNc(25,E_,2,0,"small",62),t.qZA()(),t.TgZ(26,"div",57)(27,"label",69),t._uU(28,"Gi\xe1 (\u0111\u1ed3ng) "),t.TgZ(29,"span",59),t._uU(30,"*"),t.qZA()(),t.TgZ(31,"div",60),t._UZ(32,"p-inputNumber",70),t.qZA()(),t.TgZ(33,"div",57)(34,"label",71),t._uU(35,"M\xf4 t\u1ea3"),t.qZA(),t._UZ(36,"input",72),t.qZA(),t.YNc(37,b_,3,3,"div",73),t.YNc(38,C_,12,11,"div",73),t.qZA()),2&n){const e=t.oxw();let o,r,s;t.Q6J("formGroup",e.equipmentForm),t.xp6(7),t.Q6J("ngClass",t.VKq(11,Sn,e.equipmentForm.controls.name.invalid&&(e.equipmentForm.controls.name.dirty||e.equipmentForm.controls.name.touched))),t.xp6(1),t.Q6J("ngIf",(null==(o=e.equipmentForm.get("name"))?null:o.invalid)&&(e.equipmentForm.controls.name.dirty||e.equipmentForm.controls.name.touched)),t.xp6(8),t.Q6J("options",e.units)("ngClass",t.VKq(13,Sn,e.equipmentForm.controls.unit.invalid&&(e.equipmentForm.controls.unit.dirty||e.equipmentForm.controls.unit.touched))),t.xp6(1),t.Q6J("ngIf",(null==(r=e.equipmentForm.get("unit"))?null:r.invalid)&&(e.equipmentForm.controls.unit.dirty||e.equipmentForm.controls.unit.touched)),t.xp6(7),t.Q6J("options",e.status)("ngClass",t.VKq(15,Sn,e.equipmentForm.controls.status.invalid&&(e.equipmentForm.controls.status.dirty||e.equipmentForm.controls.status.touched))),t.xp6(1),t.Q6J("ngIf",(null==(s=e.equipmentForm.get("status"))?null:s.invalid)&&(e.equipmentForm.controls.status.dirty||e.equipmentForm.controls.status.touched)),t.xp6(12),t.Q6J("ngIf",!e.isNew),t.xp6(1),t.Q6J("ngIf",e.isNew)}}function N_(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",83),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.hideDialog())}),t.qZA(),t.TgZ(1,"button",84),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.saveEquipment())}),t.qZA()}}function D_(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1,"Are you sure you want to delete "),t.TgZ(2,"b"),t._uU(3),t.qZA(),t._uU(4,"?"),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.equipment.name)}}function F_(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",85),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.deleteProductDialog=!1)}),t.qZA(),t.TgZ(1,"button",86),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.confirmDelete())}),t.qZA()}}function Z_(n,i){1&n&&(t.TgZ(0,"div",87),t._UZ(1,"p-progressSpinner"),t.qZA())}const I_=function(){return["name","capacity","price","acreage","isRent"]},S_=function(){return[10,20,30]},k_=function(){return{width:"550px"}},R_=function(){return{width:"450px"}};let q_=(()=>{class n{constructor(e,o,r,s,l){this.accomodationService=e,this.auth=o,this.messageService=r,this.equipmentService=s,this.roomService=l,this.addDialog=!1,this.deleteProductDialog=!1,this.accomodations=[],this.equipments=[],this.equipment={},this.cols=[],this.rowsPerPageOptions=[5,10,20],this.dataLoading=!1,this.loading=!1,this.isAddRoom=!1,this.rooms=[],this.expandedRows={},this.units=Dt.$.UNITS,this.status=Dt.$.EQUIPMENT_STATUS,this.loadingChild=!1,this.isNew=!1,this.equipmentForm=new E.cw({name:new E.NI(this.equipment.name,[E.kI.required]),unit:new E.NI(this.equipment.unit,[E.kI.required]),status:new E.NI(this.equipment.status,[E.kI.required]),description:new E.NI(this.equipment.description,[E.kI.required]),price:new E.NI(this.equipment.price,[]),isAddRoom:new E.NI(this.equipment.isAddRoom,[]),selectedRoom:new E.NI(this.equipment.selectedRoom,[]),quantity:new E.NI(this.equipment.quantity,[]),room:new E.NI})}ngOnInit(){this.user=this.auth.userValue,this.getDropdownAccomodation().subscribe(e=>this.accomodations=e.data),this.equipmentForm.get("name")?.valueChanges.subscribe(e=>{this.equipment.name=e}),this.equipmentForm.get("unit")?.valueChanges.subscribe(e=>{this.equipment.unit=e}),this.equipmentForm.get("price")?.valueChanges.subscribe(e=>{this.equipment.price=e}),this.equipmentForm.get("status")?.valueChanges.subscribe(e=>{this.equipment.status=e}),this.equipmentForm.get("description")?.valueChanges.subscribe(e=>{this.equipment.description=e}),this.equipmentForm.get("isAddRoom")?.valueChanges.subscribe(e=>{this.equipment.isAddRoom=e,this.equipment.isAddRoom?(this.equipmentForm.get("selectedRoom")?.setValidators([E.kI.required]),this.equipmentForm.get("quantity")?.setValidators([E.kI.required])):(this.equipmentForm.get("selectedRoom")?.setValidators([]),this.equipmentForm.get("quantity")?.setValidators([])),this.equipmentForm.get("selectedRoom")?.updateValueAndValidity(),this.equipmentForm.get("quantity")?.updateValueAndValidity()}),this.equipmentForm.get("selectedRoom")?.valueChanges.subscribe(e=>{this.equipment.selectedRoom=e}),this.equipmentForm.get("quantity")?.valueChanges.subscribe(e=>{this.equipment.quantity=e}),this.equipmentForm.get("room")?.valueChanges.subscribe(e=>{e&&(this.equipment.roomId=e.id)})}openNew(){this.equipment={},this.addDialog=!0,this.isNew=!0,this.equipmentForm.get("name")?.setValue(null),this.equipmentForm.get("price")?.setValue(null),this.equipmentForm.get("unit")?.setValue(null),this.equipmentForm.get("status")?.setValue(null),this.equipmentForm.get("description")?.setValue(null),this.equipmentForm.get("isAddRoom")?.setValue(!1),this.equipmentForm.get("selectedRoom")?.setValue([]),this.equipmentForm.get("quantity")?.setValue(null),this.equipmentForm.get("room")?.setValue(null)}onHideDialog(){this.equipmentForm.reset()}onFilterByRoom(){this.filterRoom?(this.loading=!0,this.equipmentService.getByRoom(this.filterRoom).pipe((0,K.x)(()=>{this.loading=!1,this.collapse()})).subscribe(e=>this.equipments=e.data)):this.onSelectAccomodation()}onExpand(e){if(Object.keys(this.expandedRows).length&&this.expandedRows[e.id]&&!e.child){let o;this.loading=!0,this.equipmentService.getByName(e.name).pipe((0,K.x)(()=>{this.loading=!1,e.child=o})).subscribe(r=>o=r.data)}}getDropdownAccomodation(){return this.loading=!0,this.accomodationService.getDropdownAccomodation(this.user?.id).pipe((0,K.x)(()=>{this.selectedAccomodation=this.accomodations[0],this.getRoomsAndEqip()}))}getRoomsAndEqip(){(0,Mt.D)({rooms:this.getRoomByAccomodation(),equips:this.getEquipByAccomodation()}).pipe((0,K.x)(()=>{this.loading=!1})).subscribe(e=>{this.rooms=e.rooms.data,this.equipments=e.equips.data})}getRoomByAccomodation(){return this.roomService.getRoomDropDown(this.selectedAccomodation.id)}getEquipByAccomodation(){return this.equipmentService.getByAccomodation(this.selectedAccomodation.id)}onSelectAccomodation(){this.filterRoom&&(this.filterRoom=null),this.loading=!0,this.getEquipByAccomodation().pipe((0,K.x)(()=>{this.loading=!1})).subscribe(e=>this.equipments=e.data)}editEquipment(e){this.equipment={...e},this.isNew=!1,this.equipmentForm.get("name")?.setValue(this.equipment.name),this.equipmentForm.get("price")?.setValue(this.equipment.price),this.equipmentForm.get("unit")?.setValue(this.equipment.unit),this.equipmentForm.get("status")?.setValue(this.equipment.status),this.equipmentForm.get("description")?.setValue(this.equipment.description),this.equipmentForm.get("isAddRoom")?.setValue(e.isAddRoom),this.equipmentForm.get("selectedRoom")?.setValue(e.selectedRoom),this.equipmentForm.get("room")?.setValue(e.room),this.addDialog=!0}deleteRoom(e){this.deleteProductDialog=!0,this.equipment={...e}}confirmDelete(){this.deleteProductDialog=!1}hideDialog(){this.addDialog=!1,this.isNew=!1}collapse(){Object.keys(this.expandedRows).length&&(this.expandedRows={})}onClearRoom(){this.equipment.roomId=void 0}saveEquipment(){let e;this.loading=!0,this.equipment.accomodationId=this.selectedAccomodation.id,e=this.equipment.id?"Ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng":"Th\xeam th\xe0nh c\xf4ng";let l,o=[],r=this.equipmentForm.get("quantity")?.value,s=this.equipmentForm.get("selectedRoom")?.value;if(r>0)for(let a=0;a<s.length;a++)for(let p=0;p<r;p++)l=Object.assign({},this.equipment),l.roomId=s[a],o.push(l);else o.push(this.equipment);this.equipmentService.saveEquipment(o).pipe((0,K.x)(()=>{this.loading=!1,this.equipment={},this.collapse(),this.messageService.add({severity:"success",summary:"Successful",detail:e,life:3e3})})).subscribe(a=>this.equipments=a.data),this.addDialog=!1}onGlobalFilter(e,o){e.filterGlobal(o.target.value,"contains")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Yt),t.Y36(Pt.$),t.Y36(ht.ez),t.Y36(n_),t.Y36(Te))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-equipment"]],features:[t._Bn([ht.ez])],decls:22,vars:21,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","dataKey","id",3,"value","columns","expandedRowKeys","rows","globalFilterFields","paginator","rowsPerPageOptions"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["header","Chi ti\u1ebft thi\u1ebft b\u1ecb",1,"p-fluid",3,"visible","modal","onHide","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[4,"ngIf"],["class","progress-spinner",4,"ngIf"],[1,"my-2"],["pButton","","pRipple","","label","Th\xeam thi\u1ebft b\u1ecb","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],[1,"flex","justify-content-center"],["placeholder","Ch\u1ecdn ph\xf2ng tr\u1ecd","optionLabel","name","autoWidth","false",3,"options","ngModel","onChange","ngModelChange"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["optionLabel","name","optionValue","id","placeholder","L\u1ecdc theo ph\xf2ng",3,"showClear","ngModel","options","onChange","ngModelChange"],["pSortableColumn","name"],["field","name"],["pSortableColumn","unit"],["field","unit"],["pSortableColumn","price"],["field","price"],["pSortableColumn","status"],["field","status"],["pSortableColumn","description"],["field","description"],["pSortableColumn","quantity"],["field","quantity"],["class","flex",4,"ngIf"],[2,"width","15%"],[1,"flex"],["pButton","","pRipple","","pTooltip","Ch\u1ec9nh s\u1eeda","icon","pi pi-pencil","tooltipPosition","top","class","p-button-rounded p-button-success mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","pTooltip","Xo\xe1","icon","pi pi-trash","tooltipPosition","top",1,"p-button-rounded","p-button-warning","mr-2",3,"click"],["type","button","pButton","","pRipple","",1,"p-button-text","p-button-rounded",3,"pRowToggler","icon","click"],["pButton","","pRipple","","pTooltip","Ch\u1ec9nh s\u1eeda","icon","pi pi-pencil","tooltipPosition","top",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["colspan","7"],[1,"p-3"],["styleClass","p-datatable-sm","dataKey","id","responsiveLayout","scroll",3,"value"],["pTemplate","emptymessage"],[2,"width","4rem"],["style","width:15%;",4,"ngIf","ngIfElse"],["style","width:15%;"],["isExistRoom",""],[3,"formGroup"],[1,"field"],["for","name"],[1,"mandatory-sign"],[1,"input-box"],["type","text","pInputText","","id","name","formControlName","name","required","","autofocus","",3,"ngClass"],["class","ng-dirty ng-invalid",4,"ngIf"],[1,"formgrid","grid"],[1,"field","col"],["for","unit"],["appendTo","body","placeholder","\u0110\u01a1n v\u1ecb","formControlName","unit",3,"options","ngClass"],["for","status"],["appendTo","body","placeholder","Tr\u1ea1ng th\xe1i","formControlName","status",3,"options","ngClass"],["for","price"],["id","price","formControlName","price"],["for","description"],["type","text","pInputText","","id","description","formControlName","description"],["class","formgrid grid",4,"ngIf"],[1,"ng-dirty","ng-invalid"],[1,"field","col",2,"max-width","50%"],["appendTo","body","filterBy","name","formControlName","room","optionLabel","name","placeholder","L\u1ecdc theo ph\xf2ng",3,"filter","showClear","options","onClear"],[1,"field","col","flex","align-items-center"],["for","description",1,"mr-3"],["formControlName","isAddRoom"],[2,"margin-bottom","5px"],["placeholder","S\u1ed1 l\u01b0\u1ee3ng","formControlName","quantity",3,"ngClass"],["appendTo","body","placeholder","Ch\u1ecdn ph\xf2ng","formControlName","selectedRoom","optionLabel","name","optionValue","id","display","chip",3,"options","ngClass"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",1,"p-button-text",3,"click"],[1,"progress-spinner"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"p-toast"),t.TgZ(4,"p-toolbar",3),t.YNc(5,r_,2,0,"ng-template",4),t.YNc(6,a_,2,5,"ng-template",5),t.qZA(),t.TgZ(7,"p-table",6,7),t.YNc(9,l_,6,3,"ng-template",8),t.YNc(10,c_,21,0,"ng-template",9),t.YNc(11,d_,20,12,"ng-template",10),t.YNc(12,v_,7,1,"ng-template",11),t.qZA()(),t.TgZ(13,"p-dialog",12),t.NdJ("onHide",function(){return o.onHideDialog()})("visibleChange",function(s){return o.addDialog=s}),t.YNc(14,A_,39,17,"ng-template",13),t.YNc(15,N_,2,0,"ng-template",14),t.qZA(),t.TgZ(16,"p-dialog",15),t.NdJ("visibleChange",function(s){return o.deleteProductDialog=s}),t.TgZ(17,"div",16),t._UZ(18,"i",17),t.YNc(19,D_,5,1,"span",18),t.qZA(),t.YNc(20,F_,2,0,"ng-template",14),t.qZA()()(),t.YNc(21,Z_,2,0,"div",19)),2&e&&(t.xp6(7),t.Q6J("value",o.equipments)("columns",o.cols)("expandedRowKeys",o.expandedRows)("rows",10)("globalFilterFields",t.DdM(17,I_))("paginator",!0)("rowsPerPageOptions",t.DdM(18,S_)),t.xp6(6),t.Akn(t.DdM(19,k_)),t.Q6J("visible",o.addDialog)("modal",!0),t.xp6(3),t.Akn(t.DdM(20,R_)),t.Q6J("visible",o.deleteProductDialog)("modal",!0),t.xp6(3),t.Q6J("ngIf",o.equipment),t.xp6(2),t.Q6J("ngIf",o.loading))},dependencies:[bt.mk,bt.O5,ht.jx,Xt.Hq,Ce.u,ne.o,E._Y,E.Fj,E.JJ,E.JL,E.Q7,E.On,i_.Ql,te.FN,pe.o,Ft.iA,Ft.lQ,Ft.jB,Ft.fz,ie.V,re.Lt,ge.Rn,ee.G,E.sg,E.u,o_.NU,bt.H9]}),n})();class U_{}let Ua=(()=>{class n{constructor(e){this.http=e}getDepositByAccomodation(e){return this.http.get(`${vt.N.apiUrl}/deposit/${e}`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}saveDeposit(e){return this.http.post(`${vt.N.apiUrl}/deposit`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}cancelDeposit(e){return this.http.put(`${vt.N.apiUrl}/deposit`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(fe.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zo=(()=>{class n{constructor(e){this.http=e}getContractByAccomodationId(e){return this.http.get(`${vt.N.apiUrl}/contract/accomodation/${e}`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}saveContract(e){return this.http.post(`${vt.N.apiUrl}/contract`,e).pipe((0,wt.X)(1),(0,yt.g)(1e3))}isCanRemove(e){return this.http.get(`${vt.N.apiUrl}/contract/check/remove/${e}`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}removeContract(e){return this.http.delete(`${vt.N.apiUrl}/contract/${e}`).pipe((0,wt.X)(1),(0,yt.g)(1e3))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(fe.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var M_=Et(613),$o=Et(395);function B_(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",21)(1,"button",22),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.openNew())}),t.qZA()()}}const P_=function(){return{width:"100%"}};function O_(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",23)(1,"p-dropdown",24),t.NdJ("onChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onSelectAccomodation())})("ngModelChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.selectedAccomodation=r)}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Akn(t.DdM(4,P_)),t.Q6J("options",e.accomodations)("ngModel",e.selectedAccomodation)}}function L_(n,i){1&n&&(t.TgZ(0,"div",25)(1,"h5",26),t._uU(2,"\u0110\u1eb7t c\u1ecdc ph\xf2ng"),t.qZA()())}function V_(n,i){1&n&&(t.TgZ(0,"tr"),t._UZ(1,"th"),t.TgZ(2,"th",27),t._uU(3,"Ph\xf2ng"),t._UZ(4,"p-sortIcon",28),t.qZA(),t.TgZ(5,"th",29),t._uU(6,"Ng\u01b0\u1eddi \u0111\u1eb7t c\u1ecdc"),t._UZ(7,"p-sortIcon",30),t.qZA(),t.TgZ(8,"th",31),t._uU(9,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),t._UZ(10,"p-sortIcon",32),t.qZA(),t.TgZ(11,"th",33),t._uU(12,"Ti\u1ec1n \u0111\u1eb7t c\u1ecdc"),t._UZ(13,"p-sortIcon",34),t.qZA(),t.TgZ(14,"th",35),t._uU(15,"Ng\xe0y \u0111\u1eb7t c\u1ecdc"),t._UZ(16,"p-sortIcon",36),t.qZA(),t.TgZ(17,"th",37),t._uU(18,"Ng\xe0y h\u1ebft h\u1ea1n"),t._UZ(19,"p-sortIcon",38),t.qZA(),t._UZ(20,"th"),t.qZA())}function J_(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"div",39)(3,"button",40),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.createContract(s))}),t.qZA()()(),t.TgZ(4,"td",41),t._uU(5),t.qZA(),t.TgZ(6,"td",41),t._uU(7),t.qZA(),t.TgZ(8,"td",41),t._uU(9),t.qZA(),t.TgZ(10,"td",41),t._uU(11),t.ALo(12,"currency"),t.qZA(),t.TgZ(13,"td",41),t._uU(14),t.ALo(15,"date"),t.qZA(),t.TgZ(16,"td",41),t._uU(17),t.ALo(18,"date"),t.qZA(),t.TgZ(19,"td",41)(20,"div",39)(21,"button",42),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.editDeposit(s))}),t.qZA(),t.TgZ(22,"button",43),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.cancelDeposit(s))}),t.qZA()()()()}if(2&n){const e=i.$implicit;t.xp6(3),t.Q6J("loading",e.loading),t.xp6(2),t.Oqu(e.room.name),t.xp6(2),t.AsE("",e.firstName," ",e.lastName,""),t.xp6(2),t.Oqu(e.phone),t.xp6(2),t.Oqu(t.Dn7(12,8,e.deposit,"VND","symbol")),t.xp6(3),t.Oqu(t.xi3(15,12,e.startDate,"dd/MM/yyyy")),t.xp6(3),t.Oqu(t.xi3(18,15,e.dueDate,"dd/MM/yyyy"))}}function H_(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"Vui l\xf2ng ch\u1ecdn ph\xf2ng."),t.qZA())}function W_(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"Ph\xf2ng \u0111\xe3 \u0111\u01b0\u1ee3c \u0111\u1eb7t c\u1ecdc."),t.qZA())}function G_(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"Vui l\xf2ng ch\u1ecdn ng\xe0y \u0111\u1eb7t c\u1ecdc."),t.qZA())}function K_(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"Vui l\xf2ng ch\u1ecdn ng\xe0y h\u1ebft h\u1ea1n."),t.qZA())}function Y_(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"Ng\xe0y h\u1ebft h\u1ea1n c\u1ea7n sau ng\xe0y \u0111\u1eb7t c\u1ecdc."),t.qZA())}function Q_(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"Vui l\xf2ng nh\u1eadp ti\u1ec1n \u0111\u1eb7t c\u1ecdc."),t.qZA())}const Xo=function(){return{standalone:!0}};function j_(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",45)(1,"div",62)(2,"label",76),t._uU(3,"Kh\xe1ch thu\xea "),t.TgZ(4,"span",51),t._uU(5,"*"),t.qZA()(),t.TgZ(6,"div",77)(7,"div")(8,"div",78)(9,"label",79),t._uU(10,"Th\xeam m\u1edbi"),t.qZA(),t.TgZ(11,"p-radioButton",80),t.NdJ("ngModelChange",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.onSwitch())})("ngModelChange",function(r){t.CHM(e);const s=t.oxw(2);return t.KtG(s.isChooseExisted=r)}),t.qZA()()(),t.TgZ(12,"div")(13,"div",78)(14,"label",79),t._uU(15,"\u0110\xe3 t\u1ed3n t\u1ea1i"),t.qZA(),t.TgZ(16,"p-radioButton",80),t.NdJ("ngModelChange",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.onSwitch())})("ngModelChange",function(r){t.CHM(e);const s=t.oxw(2);return t.KtG(s.isChooseExisted=r)}),t.qZA()()()()()()}if(2&n){const e=t.oxw(2);t.xp6(11),t.Q6J("ngModel",e.isChooseExisted)("value",!0)("ngModelOptions",t.DdM(6,Xo)),t.xp6(5),t.Q6J("ngModel",e.isChooseExisted)("value",!1)("ngModelOptions",t.DdM(7,Xo))}}function z_(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"Vui l\xf2ng nh\u1eadp h\u1ecd."),t.qZA())}function $_(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"Vui l\xf2ng nh\u1eadp nh\u1eadp t\xean."),t.qZA())}const Ot=function(n){return{"ng-invalid ng-dirty":n}};function X_(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"div",81)(2,"label",82),t._uU(3,"H\u1ecd "),t.TgZ(4,"span",51),t._uU(5,"*"),t.qZA()(),t._UZ(6,"input",83),t.YNc(7,z_,2,0,"small",53),t.qZA(),t.TgZ(8,"div",84)(9,"label",85),t._uU(10,"T\xean "),t.TgZ(11,"span",51),t._uU(12,"*"),t.qZA()(),t._UZ(13,"input",86),t.YNc(14,$_,2,0,"small",53),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);let o,r;t.xp6(6),t.Q6J("ngClass",t.VKq(4,Ot,e.depositForm.controls.firstName.invalid&&(e.depositForm.controls.firstName.dirty||e.depositForm.controls.firstName.touched))),t.xp6(1),t.Q6J("ngIf",(null==(o=e.depositForm.get("firstName"))?null:o.invalid)&&(e.depositForm.controls.firstName.dirty||e.depositForm.controls.firstName.touched)),t.xp6(6),t.Q6J("ngClass",t.VKq(6,Ot,e.depositForm.controls.lastName.invalid&&(e.depositForm.controls.lastName.dirty||e.depositForm.controls.lastName.touched))),t.xp6(1),t.Q6J("ngIf",(null==(r=e.depositForm.get("lastName"))?null:r.invalid)&&(e.depositForm.controls.lastName.dirty||e.depositForm.controls.lastName.touched))}}function t0(n,i){if(1&n&&(t.TgZ(0,"div",91)(1,"div"),t._uU(2),t.qZA()()),2&n){const e=t.oxw(4);t.xp6(2),t.AsE("",e.selectedTenant.firstName," ",e.selectedTenant.lastName,"")}}function e0(n,i){if(1&n&&t.YNc(0,t0,3,2,"div",90),2&n){const e=t.oxw(3);t.Q6J("ngIf",e.selectedTenant)}}function n0(n,i){if(1&n&&(t.TgZ(0,"div",91)(1,"div"),t._uU(2),t.qZA()()),2&n){const e=i.$implicit;t.xp6(2),t.AsE("",e.firstName," ",e.lastName,"")}}function i0(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"Vui l\xf2ng ch\u1ecdn kh\xe1ch thu\xea."),t.qZA())}function o0(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",62)(1,"p-dropdown",87),t.NdJ("onChange",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.onChangeTenant())}),t.YNc(2,e0,1,1,"ng-template",88),t.YNc(3,n0,3,2,"ng-template",89),t.qZA(),t.YNc(4,i0,2,0,"small",53),t.qZA()}if(2&n){const e=t.oxw(2);let o;t.xp6(1),t.Q6J("options",e.tenants)("ngClass",t.VKq(3,Ot,e.depositForm.controls.selectedTenant.invalid&&(e.depositForm.controls.selectedTenant.dirty||e.depositForm.controls.selectedTenant.touched))),t.xp6(3),t.Q6J("ngIf",(null==(o=e.depositForm.get("selectedTenant"))?null:o.invalid)&&(e.depositForm.controls.selectedTenant.dirty||e.depositForm.controls.selectedTenant.touched))}}function r0(n,i){1&n&&t._UZ(0,"i",92)}function s0(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"Vui l\xf2ng nh\u1eadp s\u1ed1 CCCD."),t.qZA())}function a0(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"S\u1ed1 CCCD \u0111\xe3 t\u1ed3n t\u1ea1i."),t.qZA())}function l0(n,i){1&n&&t._UZ(0,"i",92)}function c0(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i."),t.qZA())}function u0(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng h\u1ee3p l\u1ec7."),t.qZA())}function p0(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\xe3 t\u1ed3n t\u1ea1i."),t.qZA())}function d0(n,i){1&n&&t._UZ(0,"i",92)}function m0(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"Vui l\xf2ng nh\u1eadp email."),t.qZA())}function h0(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"Email kh\xf4ng h\u1ee3p l\u1ec7."),t.qZA())}function f0(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\xe3 t\u1ed3n t\u1ea1i."),t.qZA())}function g0(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"form",44)(1,"div",45)(2,"div",46)(3,"div",47)(4,"label",48),t._uU(5,"Khu/To\xe0 nh\xe0"),t.qZA(),t.TgZ(6,"div",49),t._uU(7),t.qZA()(),t.TgZ(8,"div",47)(9,"label",50),t._uU(10,"Ph\xf2ng "),t.TgZ(11,"span",51),t._uU(12,"*"),t.qZA()(),t.TgZ(13,"p-dropdown",52),t.NdJ("onChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onChangeRoom())}),t.qZA(),t.YNc(14,H_,2,0,"small",53),t.YNc(15,W_,2,0,"small",53),t.qZA(),t.TgZ(16,"div",47)(17,"label",54),t._uU(18,"Ng\xe0y \u0111\u1eb7t c\u1ecdc "),t.TgZ(19,"span",51),t._uU(20,"*"),t.qZA()(),t._UZ(21,"p-calendar",55),t.YNc(22,G_,2,0,"small",53),t.qZA(),t.TgZ(23,"div",47)(24,"label",56),t._uU(25,"Ng\xe0y h\u1ebft h\u1ea1n "),t.TgZ(26,"span",51),t._uU(27,"*"),t.qZA()(),t._UZ(28,"p-calendar",57),t.YNc(29,K_,2,0,"small",53),t.YNc(30,Y_,2,0,"small",53),t.qZA(),t.TgZ(31,"div",47)(32,"label",58),t._uU(33,"Ti\u1ec1n \u0111\u1eb7t c\u1ecdc (\u0111\u1ed3ng) "),t.TgZ(34,"span",51),t._uU(35,"*"),t.qZA()(),t._UZ(36,"p-inputNumber",59),t.YNc(37,Q_,2,0,"small",53),t.qZA(),t.TgZ(38,"div",47)(39,"label",60),t._uU(40,"Ghi ch\xfa"),t.qZA(),t._UZ(41,"input",61),t.qZA()(),t.TgZ(42,"div",62),t.YNc(43,j_,17,8,"div",63),t.TgZ(44,"div",45),t.YNc(45,X_,15,8,"ng-container",64),t.YNc(46,o0,5,5,"ng-template",null,65,t.W1O),t.qZA(),t.TgZ(48,"div",47)(49,"label",66),t._uU(50,"S\u1ed1 CCCD "),t.TgZ(51,"span",51),t._uU(52,"*"),t.qZA()(),t.TgZ(53,"span",67),t.YNc(54,r0,1,0,"i",68),t.TgZ(55,"div",69),t._UZ(56,"input",70),t.qZA()(),t.YNc(57,s0,2,0,"small",53),t.YNc(58,a0,2,0,"small",53),t.qZA(),t.TgZ(59,"div",47)(60,"label",71),t._uU(61,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),t.TgZ(62,"span",51),t._uU(63,"*"),t.qZA()(),t.TgZ(64,"span",67),t.YNc(65,l0,1,0,"i",68),t.TgZ(66,"div",69),t._UZ(67,"input",72),t.qZA()(),t.YNc(68,c0,2,0,"small",53),t.YNc(69,u0,2,0,"small",53),t.YNc(70,p0,2,0,"small",53),t.qZA(),t.TgZ(71,"div",47)(72,"label",73),t._uU(73,"Email "),t.TgZ(74,"span",51),t._uU(75,"*"),t.qZA()(),t.TgZ(76,"span",67),t.YNc(77,d0,1,0,"i",68),t.TgZ(78,"div",69),t._UZ(79,"input",74),t.qZA()(),t.YNc(80,m0,2,0,"small",53),t.YNc(81,h0,2,0,"small",53),t.YNc(82,f0,2,0,"small",53),t.qZA()()()()}if(2&n){const e=t.MAs(47),o=t.oxw();let r,s,l,a,p,_,T,A,x,f,b,y,D,v;t.Q6J("formGroup",o.depositForm),t.xp6(7),t.hij(" ",o.selectedAccomodation.name," "),t.xp6(6),t.Q6J("options",o.rooms)("ngClass",t.VKq(37,Ot,o.depositForm.controls.room.invalid&&(o.depositForm.controls.room.dirty||o.depositForm.controls.room.touched))),t.xp6(1),t.Q6J("ngIf",(null==(r=o.depositForm.get("room"))?null:r.hasError("required"))&&(o.depositForm.controls.room.dirty||o.depositForm.controls.room.touched)),t.xp6(1),t.Q6J("ngIf",(null==(s=o.depositForm.get("room"))?null:s.hasError("roomInvalid"))&&(o.depositForm.controls.room.dirty||o.depositForm.controls.room.touched)),t.xp6(6),t.Q6J("minDate",o.minDate)("maxDate",o.maxDate)("ngClass",t.VKq(39,Ot,o.depositForm.controls.startDate.invalid&&(o.depositForm.controls.startDate.dirty||o.depositForm.controls.startDate.touched))),t.xp6(1),t.Q6J("ngIf",(null==(l=o.depositForm.get("startDate"))?null:l.invalid)&&(o.depositForm.controls.startDate.dirty||o.depositForm.controls.startDate.touched)),t.xp6(6),t.Q6J("minDate",o.minEndDate)("maxDate",o.maxEndDate)("ngClass",t.VKq(41,Ot,o.depositForm.controls.dueDate.invalid&&(o.depositForm.controls.dueDate.dirty||o.depositForm.controls.dueDate.touched))),t.xp6(1),t.Q6J("ngIf",(null==(a=o.depositForm.get("dueDate"))?null:a.hasError("required"))&&(o.depositForm.controls.dueDate.dirty||o.depositForm.controls.dueDate.touched)),t.xp6(1),t.Q6J("ngIf",(null==(p=o.depositForm.get("dueDate"))?null:p.hasError("dateInvalid"))&&(o.depositForm.controls.dueDate.dirty||o.depositForm.controls.dueDate.touched)),t.xp6(6),t.Q6J("ngClass",t.VKq(43,Ot,o.depositForm.controls.deposit.invalid&&(o.depositForm.controls.deposit.dirty||o.depositForm.controls.deposit.touched))),t.xp6(1),t.Q6J("ngIf",(null==(_=o.depositForm.get("deposit"))?null:_.invalid)&&(o.depositForm.controls.deposit.dirty||o.depositForm.controls.deposit.touched)),t.xp6(6),t.Q6J("ngIf",o.isAddNew),t.xp6(2),t.Q6J("ngIf",o.isChooseExisted)("ngIfElse",e),t.xp6(9),t.Q6J("ngIf",o.isValidating),t.xp6(2),t.Q6J("readOnly",!o.isChooseExisted)("ngClass",t.VKq(45,Ot,o.depositForm.controls.identifyNum.invalid&&(o.depositForm.controls.identifyNum.dirty||o.depositForm.controls.identifyNum.touched))),t.xp6(1),t.Q6J("ngIf",(null==(T=o.depositForm.get("identifyNum"))?null:T.getError("required"))&&(o.depositForm.controls.identifyNum.dirty||o.depositForm.controls.identifyNum.touched)),t.xp6(1),t.Q6J("ngIf",(null==(A=o.depositForm.get("identifyNum"))?null:A.getError("duplicated"))&&(o.depositForm.controls.identifyNum.dirty||o.depositForm.controls.identifyNum.touched)),t.xp6(7),t.Q6J("ngIf",o.phoneLoading),t.xp6(2),t.Q6J("readOnly",!o.isChooseExisted)("ngClass",t.VKq(47,Ot,o.depositForm.controls.phone.invalid&&(o.depositForm.controls.phone.dirty||o.depositForm.controls.phone.touched))),t.xp6(1),t.Q6J("ngIf",(null==(x=o.depositForm.get("phone"))?null:x.getError("required"))&&(o.depositForm.controls.phone.dirty||o.depositForm.controls.phone.touched)),t.xp6(1),t.Q6J("ngIf",(null==(f=o.depositForm.get("phone"))?null:f.getError("phoneInvalid"))&&(o.depositForm.controls.phone.dirty||o.depositForm.controls.phone.touched)),t.xp6(1),t.Q6J("ngIf",(null==(b=o.depositForm.get("phone"))?null:b.getError("duplicated"))&&(o.depositForm.controls.phone.dirty||o.depositForm.controls.phone.touched)),t.xp6(7),t.Q6J("ngIf",o.emailLoading),t.xp6(2),t.Q6J("readOnly",!o.isChooseExisted)("ngClass",t.VKq(49,Ot,o.depositForm.controls.email.invalid&&(o.depositForm.controls.email.dirty||o.depositForm.controls.email.touched))),t.xp6(1),t.Q6J("ngIf",(null==(y=o.depositForm.get("email"))?null:y.getError("required"))&&(o.depositForm.controls.email.dirty||o.depositForm.controls.email.touched)),t.xp6(1),t.Q6J("ngIf",(null==(D=o.depositForm.get("email"))?null:D.getError("mailInvalid"))&&(o.depositForm.controls.email.dirty||o.depositForm.controls.email.touched)),t.xp6(1),t.Q6J("ngIf",(null==(v=o.depositForm.get("email"))?null:v.getError("duplicated"))&&(o.depositForm.controls.email.dirty||o.depositForm.controls.email.touched))}}function _0(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",93),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.hideDialog())}),t.qZA(),t.TgZ(1,"button",94),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.saveDeposit())}),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.depositForm.invalid)}}function v0(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1,"Hu\u1ef7 \u0111\u1eb7t c\u1ecdc ph\xf2ng "),t.TgZ(2,"b"),t._uU(3),t.qZA(),t._uU(4,"?"),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(null==e.deposit.room?null:e.deposit.room.name)}}function y0(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",95)(1,"div",78)(2,"label",96),t._uU(3,"Tr\u1ea3 l\u1ea1i ti\u1ec1n"),t.qZA(),t.TgZ(4,"p-radioButton",97),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.isRepaid=r)}),t.qZA()(),t.TgZ(5,"div",78)(6,"label",98),t._uU(7,"Kh\xf4ng tr\u1ea3 l\u1ea1i ti\u1ec1n"),t.qZA(),t.TgZ(8,"p-radioButton",99),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.isRepaid=r)}),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngModel",e.isRepaid)("value",!0),t.xp6(4),t.Q6J("ngModel",e.isRepaid)("value",!1)}}function w0(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",100),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.cancelDepositDialog=!1)}),t.qZA(),t.TgZ(1,"button",101),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.confirmCancelDeposit())}),t.qZA()}}function E0(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"Vui l\xf2ng ch\u1ecdn ph\xf2ng."),t.qZA())}function b0(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"Ph\xf2ng \u0111\xe3 \u0111\u01b0\u1ee3c \u0111\u1eb7t c\u1ecdc, kh\xe1ch thu\xea \u0111\xe3 \u0111\u1eb7t c\u1ecdc c\u1ea7n trong m\u1ee5c kh\xe1ch thu\xea \u0111\u01b0\u1ee3c ch\u1ecdn."),t.qZA())}function x0(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"S\u1ed1 l\u01b0\u1ee3ng kh\xe1ch thu\xea v\u01b0\u1ee3t qu\xe1 s\u1ed1 l\u01b0\u1ee3ng kh\xe1ch \u1edf t\u1ed1i \u0111a trong ph\xf2ng."),t.qZA())}function T0(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"label"),t._uU(2,"Gi\xe1"),t.qZA(),t.TgZ(3,"div",126),t._uU(4),t.ALo(5,"currency"),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(4),t.Oqu(t.xi3(5,1,e.contract.room.price,"VND"))}}function C0(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"label"),t._uU(2,"S\u1ed1 ng\u01b0\u1eddi \u1edf t\u1ed1i \u0111a"),t.qZA(),t.TgZ(3,"div",126),t._uU(4),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(4),t.Oqu(e.contract.room.capacity)}}function A0(n,i){if(1&n&&(t.TgZ(0,"div",127)(1,"div",128)(2,"span",123),t._uU(3),t.qZA()(),t._UZ(4,"div"),t.qZA()),2&n){const e=i.$implicit;t.xp6(3),t.AsE("",e.firstName," ",e.lastName,"")}}function N0(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",128)(1,"span"),t._uU(2,"S\u1ed1 l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(3,"p-inputNumber",130),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw().$implicit;return t.KtG(s.quantity=r)}),t.qZA()()}if(2&n){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(3),t.Q6J("disabled",e.name===o.getStaticEletricName()||e.name===o.getStaticWaterName())("ngModel",e.quantity)("ngModelOptions",t.DdM(3,Xo))}}function D0(n,i){if(1&n&&(t.TgZ(0,"div",127)(1,"div",128)(2,"span"),t._uU(3),t.qZA()(),t.TgZ(4,"div",128)(5,"span"),t._uU(6),t.ALo(7,"currency"),t.qZA()(),t.TgZ(8,"div",128)(9,"span"),t._uU(10),t.qZA()(),t.YNc(11,N0,4,4,"div",129),t.qZA()),2&n){const e=i.$implicit,o=t.oxw(2);t.ekj("disabled",e.disabled),t.xp6(3),t.Oqu(e.name),t.xp6(3),t.Oqu(t.Dn7(7,6,e.price,"VND","symbol")),t.xp6(4),t.Oqu(e.unit),t.xp6(1),t.Q6J("ngIf",o.selectedServices.includes(e)&&"Ti\u1ec1n \u0111i\u1ec7n"!==e.name&&"Ti\u1ec1n n\u01b0\u1edbc"!==e.name)}}function F0(n,i){if(1&n&&t._uU(0),2&n){const e=i.$implicit;t.AsE(" ",e.firstName," ",e.lastName," ")}}function Z0(n,i){if(1&n&&(t.TgZ(0,"div",91)(1,"div"),t._uU(2),t.qZA()()),2&n){const e=i.$implicit;t.xp6(2),t.AsE("",e.firstName," ",e.lastName,"")}}function I0(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"Vui l\xf2ng ch\u1ecdn ng\u01b0\u1eddi \u0111\u1ea1i di\u1ec7n."),t.qZA())}function S0(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"Vui l\xf2ng ch\u1ecdn k\xec h\u1ea1n h\u1ee3p \u0111\u1ed3ng."),t.qZA())}function k0(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"Vui l\xf2ng ch\u1ecdn ng\xe0y b\u1eaft \u0111\u1ea7u h\u1ee3p \u0111\u1ed3ng."),t.qZA())}function R0(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"Vui l\xf2ng nh\u1eadp ti\u1ec1n \u0111\u1eb7t c\u1ecdc."),t.qZA())}function q0(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n \u0111\u1ea7u."),t.qZA())}function U0(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n cu\u1ed1i."),t.qZA())}function M0(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"label",124),t._uU(2,"Ti\u1ec1n c\u1ecdc gi\u1eef ph\xf2ng (\u0111\u1ed3ng)"),t.qZA(),t.TgZ(3,"div",49),t._uU(4),t.ALo(5,"currency"),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(4),t.hij(" ",t.Dn7(5,1,e.contract.keepRoomDeposit||0,"VND","symbol")," ")}}const hi=function(){return{height:"15rem"}};function B0(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"form",44)(1,"div",45)(2,"div",62)(3,"label",102),t._uU(4,"Ph\xf2ng "),t.TgZ(5,"span",51),t._uU(6,"*"),t.qZA()(),t.TgZ(7,"div",69)(8,"p-dropdown",103),t.NdJ("onChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onChangeRoomContract())}),t.qZA()(),t.YNc(9,E0,2,0,"small",53),t.YNc(10,b0,2,0,"small",53),t.YNc(11,x0,2,0,"small",53),t.qZA(),t.TgZ(12,"div",62),t.YNc(13,T0,6,4,"ng-container",17),t.qZA(),t.TgZ(14,"div",62),t.YNc(15,C0,5,1,"ng-container",17),t.qZA()(),t.TgZ(16,"p-tabView")(17,"p-tabPanel",104)(18,"div",105)(19,"div")(20,"button",106),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.newTenant())}),t.qZA()()(),t.TgZ(21,"p-pickList",107),t.NdJ("onMoveToTarget",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onMoveTenant())})("onMoveAllToTarget",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onMoveTenant())})("onMoveToSource",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onMoveBackTenant())})("onMoveAllToSource",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onMoveBackTenant())}),t.YNc(22,A0,5,2,"ng-template",89),t.qZA()(),t.TgZ(23,"p-tabPanel",108)(24,"p-pickList",109),t.NdJ("onMoveAllToSource",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.onMoveBackService(r))})("onMoveToSource",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.onMoveBackService(r))}),t.YNc(25,D0,12,10,"ng-template",89),t.qZA()()(),t._UZ(26,"p-divider",110),t.TgZ(27,"div",45)(28,"div",46)(29,"div",47)(30,"label",50),t._uU(31,"Ng\u01b0\u1eddi \u0111\u1ea1i di\u1ec7n "),t.TgZ(32,"span",51),t._uU(33,"*"),t.qZA()(),t.TgZ(34,"div",69)(35,"p-dropdown",111),t.YNc(36,F0,1,2,"ng-template",88),t.YNc(37,Z0,3,2,"ng-template",89),t.qZA()(),t.YNc(38,I0,2,0,"small",53),t.qZA(),t.TgZ(39,"div",47)(40,"label",112),t._uU(41,"K\xec h\u1ea1n h\u1ee3p \u0111\u1ed3ng (th\xe1ng) k\u1ec3 t\u1eeb ng\xe0y b\u1eaft \u0111\u1ea7u \u1edf "),t.TgZ(42,"span",51),t._uU(43,"*"),t.qZA()(),t.TgZ(44,"div",69),t._UZ(45,"p-dropdown",113),t.qZA(),t.YNc(46,S0,2,0,"small",53),t.qZA(),t.TgZ(47,"div",47)(48,"div",45)(49,"div",62)(50,"label",54),t._uU(51,"K\u1ec3 t\u1eeb ng\xe0y "),t.TgZ(52,"span",51),t._uU(53,"*"),t.qZA()(),t.TgZ(54,"div",69),t._UZ(55,"p-calendar",114),t.qZA(),t.YNc(56,k0,2,0,"small",53),t.qZA(),t.TgZ(57,"div",62)(58,"label",115),t._uU(59,"\u0110\u1ebfn ng\xe0y"),t.qZA(),t.TgZ(60,"div",49),t._uU(61),t.ALo(62,"date"),t.qZA()()()()(),t.TgZ(63,"div",46)(64,"div",47)(65,"label",58),t._uU(66,"Ti\u1ec1n \u0111\u1eb7t c\u1ecdc (\u0111\u1ed3ng) "),t.TgZ(67,"span",51),t._uU(68,"*"),t.qZA()(),t.TgZ(69,"div",69),t._UZ(70,"p-inputNumber",59),t.qZA(),t.YNc(71,R0,2,0,"small",53),t.qZA(),t.TgZ(72,"div",47)(73,"div",45)(74,"div",62)(75,"label",116),t._uU(76,"S\u1ed1 \u0111i\u1ec7n \u0111\u1ea7u "),t.TgZ(77,"span",51),t._uU(78,"*"),t.qZA()(),t.TgZ(79,"div",69),t._UZ(80,"p-inputNumber",117),t.qZA(),t.YNc(81,q0,2,0,"small",53),t.qZA(),t.TgZ(82,"div",62)(83,"label",118),t._uU(84,"S\u1ed1 n\u01b0\u1edbc \u0111\u1ea7u "),t.TgZ(85,"span",51),t._uU(86,"*"),t.qZA()(),t.TgZ(87,"div",69),t._UZ(88,"p-inputNumber",119),t.qZA(),t.YNc(89,U0,2,0,"small",53),t.qZA()()()()(),t._UZ(90,"p-divider",110),t.TgZ(91,"p-card",120)(92,"div",121)(93,"div",45)(94,"div",62)(95,"label"),t._uU(96,"Ti\u1ec1n \u0111\u1eb7t c\u1ecdc (\u0111\u1ed3ng)"),t.qZA(),t.TgZ(97,"div",49),t._uU(98),t.ALo(99,"currency"),t.qZA()(),t.TgZ(100,"div",62),t.YNc(101,M0,6,5,"ng-container",17),t.qZA()(),t.TgZ(102,"div",45)(103,"div",62)(104,"label",122),t._uU(105,"S\u1ed1 ng\xe0y \u1edf \u0111\u1ebfn "),t.TgZ(106,"span",123),t._uU(107),t.ALo(108,"date"),t.qZA()(),t.TgZ(109,"div",49),t._uU(110),t.qZA()(),t.TgZ(111,"div",62)(112,"label",124),t._uU(113,"Ti\u1ec1n s\u1ed1 ng\xe0y \u0111\xe3 \u1edf (\u0111\u1ed3ng)"),t.qZA(),t.TgZ(114,"div",49),t._uU(115),t.ALo(116,"currency"),t.qZA()()(),t.TgZ(117,"div",45)(118,"div",62)(119,"label",125),t._uU(120,"S\u1ed1 ti\u1ec1n ph\u1ea3i thanh to\xe1n"),t.qZA(),t.TgZ(121,"div",49),t._uU(122),t.ALo(123,"currency"),t.qZA()(),t._UZ(124,"div",62),t.qZA()()()()}if(2&n){const e=t.oxw();let o,r,s,l,a,p,_,T,A;t.Q6J("formGroup",e.contractForm),t.xp6(8),t.Q6J("options",e.rooms)("ngClass",t.VKq(59,Ot,e.contractForm.controls.room.invalid&&(e.contractForm.controls.room.dirty||e.contractForm.controls.room.touched))),t.xp6(1),t.Q6J("ngIf",(null==(o=e.contractForm.get("room"))?null:o.hasError("required"))&&(e.contractForm.controls.room.dirty||e.contractForm.controls.room.touched)),t.xp6(1),t.Q6J("ngIf",(null==(r=e.contractForm.get("room"))?null:r.hasError("roomBooked"))&&(e.contractForm.controls.room.dirty||e.contractForm.controls.room.touched)),t.xp6(1),t.Q6J("ngIf",(null==(s=e.contractForm.get("room"))?null:s.hasError("overCapacity"))&&(e.contractForm.controls.room.dirty||e.contractForm.controls.room.touched)),t.xp6(2),t.Q6J("ngIf",e.contract.room&&e.contract.room.price),t.xp6(2),t.Q6J("ngIf",e.contract.room&&e.contract.room.price),t.xp6(6),t.Q6J("source",e.tenantsDisplayed)("target",e.selectedTenants)("dragdrop",!0)("responsive",!0)("sourceStyle",t.DdM(61,hi))("targetStyle",t.DdM(62,hi)),t.xp6(3),t.Q6J("source",e.servicesDisplayed)("target",e.selectedServices)("dragdrop",!0)("responsive",!0)("sourceStyle",t.DdM(63,hi))("targetStyle",t.DdM(64,hi)),t.xp6(11),t.Q6J("options",e.selectedTenants)("ngClass",t.VKq(65,Ot,e.contractForm.controls.representative.invalid&&(e.contractForm.controls.representative.dirty||e.contractForm.controls.representative.touched))),t.xp6(3),t.Q6J("ngIf",(null==(l=e.contractForm.get("representative"))?null:l.hasError("required"))&&(e.contractForm.controls.representative.dirty||e.contractForm.controls.representative.touched)),t.xp6(7),t.Q6J("options",e.durations)("ngClass",t.VKq(67,Ot,e.contractForm.controls.duration.invalid&&(e.contractForm.controls.duration.dirty||e.contractForm.controls.duration.touched))),t.xp6(1),t.Q6J("ngIf",(null==(a=e.contractForm.get("duration"))?null:a.invalid)&&(e.contractForm.controls.duration.dirty||e.contractForm.controls.duration.touched)),t.xp6(9),t.Q6J("ngClass",t.VKq(69,Ot,e.contractForm.controls.startDate.invalid&&(e.contractForm.controls.startDate.dirty||e.contractForm.controls.startDate.touched))),t.xp6(1),t.Q6J("ngIf",(null==(p=e.contractForm.get("startDate"))?null:p.invalid)&&(e.contractForm.controls.startDate.dirty||e.contractForm.controls.startDate.touched)),t.xp6(5),t.Oqu(t.xi3(62,41,e.contract.endDate,"dd/MM/yyyy")),t.xp6(9),t.Q6J("ngClass",t.VKq(71,Ot,e.contractForm.controls.deposit.invalid&&(e.contractForm.controls.deposit.dirty||e.contractForm.controls.deposit.touched))),t.xp6(1),t.Q6J("ngIf",(null==(_=e.contractForm.get("deposit"))?null:_.invalid)&&(e.contractForm.controls.deposit.dirty||e.contractForm.controls.deposit.touched)),t.xp6(9),t.Q6J("ngClass",t.VKq(73,Ot,e.contractForm.controls.firstElectricNum.invalid&&(e.contractForm.controls.firstElectricNum.dirty||e.contractForm.controls.firstElectricNum.touched))),t.xp6(1),t.Q6J("ngIf",(null==(T=e.contractForm.get("firstElectricNum"))?null:T.invalid)&&(e.contractForm.controls.firstElectricNum.dirty||e.contractForm.controls.firstElectricNum.touched)),t.xp6(7),t.Q6J("ngClass",t.VKq(75,Ot,e.contractForm.controls.firstWaterNum.invalid&&(e.contractForm.controls.firstWaterNum.dirty||e.contractForm.controls.firstWaterNum.touched))),t.xp6(1),t.Q6J("ngIf",(null==(A=e.contractForm.get("firstWaterNum"))?null:A.invalid)&&(e.contractForm.controls.firstWaterNum.dirty||e.contractForm.controls.firstWaterNum.touched)),t.xp6(9),t.hij(" ",t.Dn7(99,44,e.contract.deposit||0,"VND","symbol")," "),t.xp6(3),t.Q6J("ngIf",e.contract.keepRoomDeposit),t.xp6(6),t.Oqu(t.xi3(108,48,e.nextMonth,"dd/MM/yyyy")),t.xp6(3),t.hij(" ",e.contract.dayStayedBefore," "),t.xp6(5),t.hij(" ",t.Dn7(116,51,e.dayStayedMoney,"VND","symbol")," "),t.xp6(7),t.hij(" ",t.Dn7(123,55,e.contract.firstComePayment,"VND","symbol")," ")}}function P0(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",93),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.contractDialog=!1)}),t.qZA(),t.TgZ(1,"button",94),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.saveContract())}),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.contractForm.invalid)}}function O0(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"Vui l\xf2ng nh\u1eadp h\u1ecd."),t.qZA())}function L0(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"Vui l\xf2ng nh\u1eadp t\xean."),t.qZA())}function V0(n,i){1&n&&t._UZ(0,"i",92)}function J0(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"Vui l\xf2ng nh\u1eadp s\u1ed1 CCCD."),t.qZA())}function H0(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"S\u1ed1 CCCD \u0111\xe3 t\u1ed3n t\u1ea1i."),t.qZA())}function W0(n,i){1&n&&t._UZ(0,"i",92)}function G0(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"Vui l\xf2ng nh\u1eadp email."),t.qZA())}function K0(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"Email kh\xf4ng h\u1ee3p l\u1ec7."),t.qZA())}function Y0(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"Email \u0111\xe3 t\u1ed3n t\u1ea1i."),t.qZA())}function Q0(n,i){1&n&&t._UZ(0,"i",92)}function j0(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i."),t.qZA())}function z0(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng h\u1ee3p l\u1ec7."),t.qZA())}function $0(n,i){1&n&&(t.TgZ(0,"small",75),t._uU(1,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\xe3 t\u1ed3n t\u1ea1i."),t.qZA())}function X0(n,i){if(1&n&&(t.TgZ(0,"form",44)(1,"div",131)(2,"div",132)(3,"label",82),t._uU(4,"H\u1ecd "),t.TgZ(5,"span",51),t._uU(6,"*"),t.qZA()(),t.TgZ(7,"div",69),t._UZ(8,"input",133),t.qZA(),t.YNc(9,O0,2,0,"small",53),t.qZA(),t.TgZ(10,"div",134)(11,"label",85),t._uU(12,"T\xean "),t.TgZ(13,"span",51),t._uU(14,"*"),t.qZA()(),t.TgZ(15,"div",69),t._UZ(16,"input",135),t.qZA(),t.YNc(17,L0,2,0,"small",53),t.qZA()(),t.TgZ(18,"div",47)(19,"label",66),t._uU(20,"S\u1ed1 CCCD "),t.TgZ(21,"span",51),t._uU(22,"*"),t.qZA()(),t.TgZ(23,"span",67),t.YNc(24,V0,1,0,"i",68),t.TgZ(25,"div",69),t._UZ(26,"input",136),t.qZA()(),t.YNc(27,J0,2,0,"small",53),t.YNc(28,H0,2,0,"small",53),t.qZA(),t.TgZ(29,"div",47)(30,"label",137),t._uU(31,"Gi\u1edbi t\xednh"),t.qZA(),t.TgZ(32,"div",69),t._UZ(33,"p-dropdown",138),t.qZA()(),t.TgZ(34,"div",47)(35,"label",73),t._uU(36,"Email "),t.TgZ(37,"span",51),t._uU(38,"*"),t.qZA()(),t.TgZ(39,"span",67),t.YNc(40,W0,1,0,"i",68),t.TgZ(41,"div",69),t._UZ(42,"input",139),t.qZA()(),t.YNc(43,G0,2,0,"small",53),t.YNc(44,K0,2,0,"small",53),t.YNc(45,Y0,2,0,"small",53),t.qZA(),t.TgZ(46,"div",47)(47,"label",71),t._uU(48,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),t.TgZ(49,"span",51),t._uU(50,"*"),t.qZA()(),t.TgZ(51,"span",67),t.YNc(52,Q0,1,0,"i",68),t.TgZ(53,"div",69),t._UZ(54,"input",140),t.qZA()(),t.YNc(55,j0,2,0,"small",53),t.YNc(56,z0,2,0,"small",53),t.YNc(57,$0,2,0,"small",53),t.qZA(),t.TgZ(58,"div",47)(59,"label",48),t._uU(60,"Ng\xe0y b\u1eaft \u0111\u1ea7u \u1edf"),t.qZA(),t.TgZ(61,"div",69),t._UZ(62,"p-calendar",141),t.qZA()()()),2&n){const e=t.oxw();let o,r,s,l,a,p,_,T,A,x;t.Q6J("formGroup",e.tenantForm),t.xp6(8),t.Q6J("ngClass",t.VKq(21,Ot,e.tenantForm.controls.firstName.invalid&&(e.tenantForm.controls.firstName.dirty||e.tenantForm.controls.firstName.touched))),t.xp6(1),t.Q6J("ngIf",(null==(o=e.tenantForm.get("firstName"))?null:o.getError("required"))&&(e.tenantForm.controls.firstName.dirty||e.tenantForm.controls.firstName.touched)),t.xp6(7),t.Q6J("ngClass",t.VKq(23,Ot,e.tenantForm.controls.lastName.invalid&&(e.tenantForm.controls.lastName.dirty||e.tenantForm.controls.lastName.touched))),t.xp6(1),t.Q6J("ngIf",(null==(r=e.tenantForm.get("lastName"))?null:r.getError("required"))&&(e.tenantForm.controls.lastName.dirty||e.tenantForm.controls.lastName.touched)),t.xp6(7),t.Q6J("ngIf",e.isValidating),t.xp6(2),t.Q6J("ngClass",t.VKq(25,Ot,e.tenantForm.controls.identifyNum.invalid&&(e.tenantForm.controls.identifyNum.dirty||e.tenantForm.controls.identifyNum.touched))),t.xp6(1),t.Q6J("ngIf",(null==(s=e.tenantForm.get("identifyNum"))?null:s.getError("required"))&&(e.tenantForm.controls.identifyNum.dirty||e.tenantForm.controls.identifyNum.touched)),t.xp6(1),t.Q6J("ngIf",(null==(l=e.tenantForm.get("identifyNum"))?null:l.getError("duplicated"))&&(e.tenantForm.controls.identifyNum.dirty||e.tenantForm.controls.identifyNum.touched)),t.xp6(5),t.Q6J("options",e.gender),t.xp6(7),t.Q6J("ngIf",e.emailLoading),t.xp6(2),t.Q6J("ngClass",t.VKq(27,Ot,e.tenantForm.controls.email.invalid&&(e.tenantForm.controls.email.dirty||e.tenantForm.controls.email.touched))),t.xp6(1),t.Q6J("ngIf",(null==(a=e.tenantForm.get("email"))?null:a.getError("required"))&&(e.tenantForm.controls.email.dirty||e.tenantForm.controls.email.touched)),t.xp6(1),t.Q6J("ngIf",(null==(p=e.tenantForm.get("email"))?null:p.getError("mailInvalid"))&&(e.tenantForm.controls.email.dirty||e.tenantForm.controls.email.touched)),t.xp6(1),t.Q6J("ngIf",(null==(_=e.tenantForm.get("email"))?null:_.getError("duplicated"))&&(e.tenantForm.controls.email.dirty||e.tenantForm.controls.email.touched)),t.xp6(7),t.Q6J("ngIf",e.phoneLoading),t.xp6(2),t.Q6J("ngClass",t.VKq(29,Ot,e.tenantForm.controls.phone.invalid&&(e.tenantForm.controls.phone.dirty||e.tenantForm.controls.phone.touched))),t.xp6(1),t.Q6J("ngIf",(null==(T=e.tenantForm.get("phone"))?null:T.getError("required"))&&(e.tenantForm.controls.phone.dirty||e.tenantForm.controls.phone.touched)),t.xp6(1),t.Q6J("ngIf",(null==(A=e.tenantForm.get("phone"))?null:A.getError("phoneInvalid"))&&(e.tenantForm.controls.phone.dirty||e.tenantForm.controls.phone.touched)),t.xp6(1),t.Q6J("ngIf",(null==(x=e.tenantForm.get("phone"))?null:x.getError("duplicated"))&&(e.tenantForm.controls.phone.dirty||e.tenantForm.controls.phone.touched)),t.xp6(5),t.Q6J("touchUI",!0)}}function tv(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",93),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.tenantDialog=!1)}),t.qZA(),t.TgZ(1,"button",94),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.saveTenant())}),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.tenantForm.invalid)}}function ev(n,i){1&n&&(t.TgZ(0,"div",142),t._UZ(1,"p-progressSpinner"),t.qZA())}const nv=function(){return["name","capacity","price","acreage","isRent"]},iv=function(){return[10,20,30]},ov=function(){return{width:"650px"}},Ma=function(){return{width:"450px"}},rv=function(){return{width:"1150px"}};let sv=(()=>{class n{constructor(e,o,r,s,l,a,p){this.accomodationService=e,this.auth=o,this.messageService=r,this.depositService=s,this.roomService=l,this.tenantService=a,this.contractService=p,this.addDialog=!1,this.contractDialog=!1,this.deleteProductDialog=!1,this.cancelDepositDialog=!1,this.accomodations=[],this.deposits=[],this.deposit={},this.cols=[],this.rowsPerPageOptions=[5,10,20],this.dataLoading=!1,this.loading=!1,this.rooms=[],this.tenants=[],this.loadingChild=!1,this.isAddNew=!1,this.selectedTenant={},this.existedTenant=new Set,this.roomInvalids=[],this.isRepaid=!1,this.isChooseExisted=!1,this.contract={},this.tenantsDisplayed=[],this.services=[],this.servicesDisplayed=[],this.selectedServices=[],this.selectedTenants=[],this.contractInfoLoading=!1,this.isValidating=!1,this.oldIdentifyNum="",this.durations=[{value:6,display:"6 th\xe1ng"},{value:12,display:"12 th\xe1ng"}],this.oldDeposit=0,this.gender=Dt.$.GENDER,this.tentant={},this.tenantDialog=!1,this.emailLoading=!1,this.phoneLoading=!1,this.oldEmail="",this.oldPhone="",this.depositForm=new E.cw({startDate:new E.NI(this.deposit.startDate,[E.kI.required]),dueDate:new E.NI(this.deposit.dueDate,[E.kI.required]),note:new E.NI(this.deposit.note,[]),deposit:new E.NI(this.deposit.deposit,[E.kI.required]),firstName:new E.NI(this.deposit.firstName,[E.kI.required]),lastName:new E.NI(this.deposit.lastName,[E.kI.required]),phone:new E.NI(this.deposit.phone,[E.kI.required]),identifyNum:new E.NI(this.deposit.identifyNum,[E.kI.required]),email:new E.NI(this.deposit.email,[E.kI.required]),room:new E.NI(this.deposit.room,[E.kI.required]),selectedTenant:new E.NI(this.selectedTenant,[])}),this.contractForm=new E.cw({startDate:new E.NI(this.contract.startDate,[E.kI.required]),endDate:new E.NI(this.contract.endDate,[E.kI.required]),deposit:new E.NI(this.contract.deposit,[E.kI.required]),representative:new E.NI(this.contract.representative,[E.kI.required]),duration:new E.NI(this.contract.duration,[E.kI.required]),firstElectricNum:new E.NI(this.contract.firstElectricNum,[E.kI.required]),firstWaterNum:new E.NI(this.contract.firstWaterNum,[E.kI.required]),room:new E.NI(this.contract.room,[E.kI.required]),dayNumber:new E.NI(this.contract.dayStayedBefore,[E.kI.required]),firstTotalPayment:new E.NI(this.contract.firstComePayment,[E.kI.required]),holdRoomMoney:new E.NI(this.contract.keepRoomDeposit,[])}),this.tenantForm=new E.cw({firstName:new E.NI(this.tentant.firstName,[E.kI.required]),lastName:new E.NI(this.tentant.lastName,[E.kI.required]),startDate:new E.NI(this.tentant.startDate,[]),gender:new E.NI(this.tentant.gender,[]),identifyNum:new E.NI(this.tentant.identifyNum,[E.kI.required]),phone:new E.NI(this.tentant.phone,[E.kI.required]),email:new E.NI(this.tentant.email,[E.kI.required])}),this.validateDate()}ngOnInit(){this.user=this.auth.userValue,this.getDropdownAccomodation().subscribe(e=>this.accomodations=e.data),this.depositForm.get("startDate")?.valueChanges.subscribe(e=>{this.deposit.startDate=e,this.minEndDate=ft(this.deposit.startDate).add(4,"days").toDate(),this.maxEndDate=ft(this.deposit.startDate).add(15,"days").toDate()}),this.depositForm.get("dueDate")?.valueChanges.subscribe(e=>{if(this.deposit.dueDate=e,this.deposit.startDate){let o=ft(this.deposit.startDate);e&&(ft(this.deposit.dueDate).isAfter(o)?this.depositForm.get("dueDate")?.invalid||this.depositForm.get("dueDate")?.setErrors(null):this.depositForm.get("dueDate")?.setErrors({dateInvalid:!0}))}}),this.depositForm.get("note")?.valueChanges.subscribe(e=>{this.deposit.note=e}),this.depositForm.get("deposit")?.valueChanges.subscribe(e=>{this.deposit.deposit=e}),this.depositForm.get("firstName")?.valueChanges.subscribe(e=>{this.deposit.firstName=e}),this.depositForm.get("identifyNum")?.valueChanges.subscribe(e=>{e&&(this.deposit.identifyNum=e,this.oldIdentifyNum!==this.deposit.identifyNum&&this.checkDuplicatedTenant())}),this.depositForm.get("lastName")?.valueChanges.subscribe(e=>{this.deposit.lastName=e}),this.depositForm.get("phone")?.valueChanges.subscribe(e=>{e&&(this.deposit.phone=e,this.validatePhoneNumber(e)?this.depositForm.get("phone")?.setErrors(null):this.depositForm.get("phone")?.setErrors({phoneInvalid:!0}),this.oldPhone!==this.tentant.phone&&this.depositForm.get("phone")?.valid&&this.checkDuplicatedTenantPhone())}),this.depositForm.get("email")?.valueChanges.subscribe(e=>{e&&(this.deposit.email=e,this.validateGmail(e)?this.depositForm.get("email")?.setErrors(null):this.depositForm.get("email")?.setErrors({mailInvalid:!0}),this.oldEmail!==this.tentant.email&&this.depositForm.get("email")?.valid&&this.checkDuplicatedTenantEmail())}),this.depositForm.get("room")?.valueChanges.subscribe(e=>{this.deposit.room=e}),this.depositForm.get("selectedTenant")?.valueChanges.subscribe(e=>{this.selectedTenant=e,e&&(this.deposit.tenantId=e.id)}),this.contractForm.get("representative")?.valueChanges.subscribe(e=>{this.selectedTenant=e,this.contract.representative=e}),this.contractForm.get("startDate")?.valueChanges.subscribe(e=>{this.contract.startDate=e,this.getNumberDayStayed(),this.getTotalFirstPayment();let o=ft(this.contract.startDate);if(this.contract.duration){let r=this.contract.duration,s=ft(o).add(r,"M");this.contractForm.get("endDate")?.setValue(s.toDate())}else this.contractForm.get("endDate")?.setValue(o.toDate())}),this.contractForm.get("endDate")?.valueChanges.subscribe(e=>{this.contract.endDate=e}),this.contractForm.get("firstElectricNum")?.valueChanges.subscribe(e=>{this.contract.firstElectricNum=e}),this.contractForm.get("firstWaterNum")?.valueChanges.subscribe(e=>{this.contract.firstWaterNum=e}),this.contractForm.get("deposit")?.valueChanges.subscribe(e=>{this.contract.deposit=e,this.getTotalFirstPayment()}),this.contractForm.get("dayNumber")?.valueChanges.subscribe(e=>{this.contract.dayStayedBefore=e}),this.contractForm.get("firstTotalPayment")?.valueChanges.subscribe(e=>{this.contract.firstComePayment=e}),this.contractForm.get("holdRoomMoney")?.valueChanges.subscribe(e=>{this.contract.keepRoomDeposit=e}),this.contractForm.get("duration")?.valueChanges.subscribe(e=>{this.contract.duration=e;let o=ft(this.contract.startDate),r=ft(o).add(e,"M");this.contractForm.get("endDate")?.setValue(r.toDate())}),this.contractForm.get("room")?.valueChanges.subscribe(e=>{this.contract.room=e,this.contract.room&&(this.checkRoomCapacity(),this.onChangeRoomContract())}),this.tenantForm.get("firstName")?.valueChanges.subscribe(e=>this.tentant.firstName=e),this.tenantForm.get("lastName")?.valueChanges.subscribe(e=>this.tentant.lastName=e),this.tenantForm.get("startDate")?.valueChanges.subscribe(e=>this.tentant.startDate=e),this.tenantForm.get("identifyNum")?.valueChanges.pipe((0,Xe.b)(500),tn()).subscribe(e=>{e&&(this.tentant.identifyNum=e,this.oldIdentifyNum!==this.tentant.identifyNum&&this.checkDuplicated())}),this.tenantForm.get("phone")?.valueChanges.subscribe(e=>{e&&(this.tentant.phone=e,this.validatePhoneNumber(e)?this.tenantForm.get("phone")?.setErrors(null):this.tenantForm.get("phone")?.setErrors({phoneInvalid:!0}),this.oldPhone!==this.tentant.phone&&this.tenantForm.get("phone")?.valid&&this.checkDuplicatedPhone())}),this.tenantForm.get("email")?.valueChanges.subscribe(e=>{e&&(this.tentant.email=e,this.validateGmail(e)?this.tenantForm.get("email")?.setErrors(null):this.tenantForm.get("email")?.setErrors({mailInvalid:!0}),this.oldEmail!==this.tentant.email&&this.tenantForm.get("email")?.valid&&this.checkDuplicatedEmail())}),this.tenantForm.get("gender")?.valueChanges.subscribe(e=>{e&&(this.tentant.gender=e.key)})}checkDuplicated(){let e=!1;this.isValidating=!0,this.tenantService.checkDuplicatedIdentify(this.tentant.identifyNum).pipe((0,K.x)(()=>{this.isValidating=!1,e&&this.tenantForm.get("identifyNum")?.setErrors({duplicated:!0})})).subscribe(o=>e=o.data)}checkDuplicatedIdentify(){let e=!1;this.isValidating=!0,this.tenantService.checkDuplicatedIdentify(this.tentant.identifyNum).pipe((0,K.x)(()=>{this.isValidating=!1,e&&this.tenantForm.get("identifyNum")?.setErrors({duplicated:!0})})).subscribe(o=>e=o.data)}checkDuplicatedEmail(){let e=!1;this.emailLoading=!0,this.tenantService.checkDuplicatedEmail(this.tentant.email).pipe((0,K.x)(()=>{this.emailLoading=!1,e&&this.tenantForm.get("email")?.setErrors({duplicated:!0})})).subscribe(o=>e=o.data)}checkDuplicatedPhone(){let e=!1;this.phoneLoading=!0,this.tenantService.checkDuplicatedPhone(this.tentant.phone).pipe((0,K.x)(()=>{this.phoneLoading=!1,e&&this.tenantForm.get("phone")?.setErrors({duplicated:!0})})).subscribe(o=>e=o.data)}validatePhoneNumber(e){return e.toLowerCase().match(/(84|0[3|5|7|8|9])+([0-9]{8})\b/g)}validateGmail(e){return e.toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}getNumberDayStayed(){let e=ft(this.contract.startDate);this.nextMonth=ft(this.contract.startDate).endOf("month").toDate();let o=ft(this.nextMonth).diff(e,"days");this.contractForm.get("dayNumber")?.setValue(o)}getTotalFirstPayment(){const e=ft(this.contract.startDate).startOf("month"),r=ft(this.contract.startDate).endOf("month").diff(e,"days"),s=this.contract.room?.price,l=this.contract.deposit||0,_=this.contract.keepRoomDeposit||0;this.dayStayedMoney=(s/r||0)*(this.contract.dayStayedBefore||0);let T=this.dayStayedMoney-_+l||0;T<0&&(T=0),console.log("total",T),this.contractForm.get("firstTotalPayment")?.setValue(T)}checkRoomCapacity(){this.contract.room&&(this.contract.room.capacity&&this.contract.room.capacity<this.selectedTenants.length?this.contractForm.get("room")?.setErrors({overCapacity:!0}):this.contractForm.get("room")?.setErrors(null))}newTenant(){this.tentant={},this.oldEmail="",this.oldPhone="",this.tenantForm.get("firstName")?.setValue(null),this.tenantForm.get("lastName")?.setValue(null),this.tenantForm.get("startDate")?.setValue(null),this.tenantForm.get("identifyNum")?.setValue(null),this.tenantForm.get("phone")?.setValue(null),this.tenantForm.get("email")?.setValue(null),this.tenantForm.get("gender")?.setValue({key:"UNKNOWN",value:"Ch\u01b0a bi\u1ebft"}),this.tentant.accomodationId=this.selectedAccomodation.id,this.tenantDialog=!0}saveTenant(){let e;this.loading=!0,e=this.tentant.id?"Ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng":"Th\xeam th\xe0nh c\xf4ng",this.tenantService.saveTenant(this.tentant).pipe((0,K.x)(()=>{this.getTenantByAccomodation().pipe((0,K.x)(()=>{this.messageService.add({severity:"success",summary:"Successful",detail:e,life:3e3}),this.loading=!1,this.tenantsDisplayed=JSON.parse(JSON.stringify(this.tenants))})).subscribe(o=>this.tenants=o.data)})).subscribe(o=>console.log(o))}checkDuplicatedTenant(){let e=!1;this.isValidating=!0,this.tenantService.checkDuplicatedIdentify(this.deposit.identifyNum).pipe((0,K.x)(()=>{this.isValidating=!1,e&&this.depositForm.get("identifyNum")?.setErrors({duplicated:!0})})).subscribe(o=>e=o.data)}checkDuplicatedTenantEmail(){let e=!1;this.emailLoading=!0,this.tenantService.checkDuplicatedEmail(this.deposit.email).pipe((0,K.x)(()=>{this.emailLoading=!1,e&&this.depositForm.get("email")?.setErrors({duplicated:!0})})).subscribe(o=>e=o.data)}checkDuplicatedTenantPhone(){let e=!1;this.phoneLoading=!0,this.tenantService.checkDuplicatedPhone(this.deposit.phone).pipe((0,K.x)(()=>{this.phoneLoading=!1,e&&this.depositForm.get("phone")?.setErrors({duplicated:!0})})).subscribe(o=>e=o.data)}validateDate(){let e=new Date;this.minDate=ft(e).subtract(5,"days").toDate(),this.maxDate=ft(e).add(5,"days").toDate(),this.minEndDate=this.minDate}onChangeRoomContract(){this.contractForm.get("deposit")?.setValue(this.contract.room?.price)}onDialogHide(){this.roomPresent&&(this.rooms=this.rooms.filter(e=>e.id!==this.roomPresent.id)),this.depositForm.reset()}getAccomdationService(){return this.accomodationService.getAccomodationService(this.selectedAccomodation.id)}initContractData(){return(0,Mt.D)({rooms:this.getRoomByAccomodation(),tenants:this.getTenantByAccomodation(),services:this.getAccomdationService()}).pipe((0,K.x)(()=>{this.loading=!1,this.servicesDisplayed=JSON.parse(JSON.stringify(this.services)),this.tenantsDisplayed=JSON.parse(JSON.stringify(this.tenants))}))}onMoveTenant(){}onMoveBackTenant(){this.selectedTenants.find(e=>e.id===this.selectedTenant?.id)||this.contractForm.get("representative")?.setValue(null)}onMoveBackService(e){e.items.forEach(o=>o.quantity=1)}openNew(){this.deposit={},this.preRoom={},this.addDialog=!0,this.isAddNew=!0,this.oldIdentifyNum="",this.oldEmail="",this.oldPhone="",this.depositForm.get("startDate")?.setValue(null),this.depositForm.get("dueDate")?.setValue(null),this.depositForm.get("note")?.setValue(null),this.depositForm.get("deposit")?.setValue(null),this.depositForm.get("firstName")?.setValue(null),this.depositForm.get("lastName")?.setValue(null),this.depositForm.get("identifyNum")?.setValue(null),this.depositForm.get("phone")?.setValue(null),this.depositForm.get("room")?.setValue(null),this.depositForm.get("email")?.setValue(null)}getDropdownAccomodation(){return this.loading=!0,this.accomodationService.getDropdownAccomodation(this.user?.id).pipe((0,K.x)(()=>{this.selectedAccomodation=this.accomodations[0],this.initData()}))}onSwitch(){this.isChooseExisted?(this.depositForm.get("firstName")?.setValue(this.selectedTenant.firstName),this.depositForm.get("lastName")?.setValue(this.selectedTenant.lastName),this.depositForm.get("identifyNum")?.setValue(this.selectedTenant.identifyNum),this.depositForm.get("phone")?.setValue(this.selectedTenant.phone),this.depositForm.get("email")?.setValue(this.selectedTenant.email),this.depositForm.get("selectedTenant")?.setValidators([])):(this.depositForm.get("firstName")?.setValue(null),this.depositForm.get("lastName")?.setValue(null),this.depositForm.get("identifyNum")?.setValue(null),this.depositForm.get("phone")?.setValue(null),this.depositForm.get("email")?.setValue(null),this.depositForm.get("selectedTenant")?.setValidators([E.kI.required])),this.depositForm.get("selectedTenant")?.updateValueAndValidity(),this.depositForm.updateValueAndValidity()}onChangeTenant(){this.oldIdentifyNum=this.selectedTenant.identifyNum,this.oldEmail=this.selectedTenant.email,this.oldPhone=this.selectedTenant.phone,this.depositForm.get("firstName")?.setValue(this.selectedTenant.firstName),this.depositForm.get("lastName")?.setValue(this.selectedTenant.lastName),this.depositForm.get("identifyNum")?.setValue(this.selectedTenant.identifyNum),this.depositForm.get("phone")?.setValue(this.selectedTenant.phone),this.depositForm.get("email")?.setValue(this.selectedTenant.email)}initData(){(0,Mt.D)({rooms:this.getRoomNoDepositByAccomodation(),deposits:this.getDepositByAccomodation(),tenants:this.getTenantWithoutDepositByAccomodation()}).pipe((0,K.x)(()=>{this.loading=!1})).subscribe(e=>{this.rooms=e.rooms.data,this.deposits=e.deposits.data,this.tenants=e.tenants.data})}getRoomNoDepositByAccomodation(){return this.roomService.getRoomNotDeposit(this.selectedAccomodation.id)}getDepositByAccomodation(){return this.depositService.getDepositByAccomodation(this.selectedAccomodation.id)}getTenantWithoutDepositByAccomodation(){return this.tenantService.getTenantWithoutDeposit(this.selectedAccomodation.id)}getTenantByAccomodation(){return this.tenantService.getTenantWithoutContract(this.selectedAccomodation.id)}onSelectAccomodation(){this.loading=!0,this.getDepositByAccomodation().pipe((0,K.x)(()=>{this.initData()})).subscribe(e=>this.deposits=e.data)}editDeposit(e){this.isAddNew=!1,this.deposit={...e},this.oldIdentifyNum=e.identifyNum,this.preRoom=this.deposit.room?.id,this.depositForm.get("startDate")?.setValue(ft(this.deposit.startDate).toDate()),this.depositForm.get("dueDate")?.setValue(ft(this.deposit.dueDate).toDate()),this.depositForm.get("note")?.setValue(this.deposit.note),this.depositForm.get("deposit")?.setValue(this.deposit.deposit),this.depositForm.get("firstName")?.setValue(this.deposit.firstName),this.depositForm.get("lastName")?.setValue(this.deposit.lastName),this.depositForm.get("identifyNum")?.setValue(this.deposit.identifyNum),this.depositForm.get("phone")?.setValue(this.deposit.phone),this.depositForm.get("email")?.setValue(this.deposit.email),this.depositForm.get("room")?.setValue(this.deposit.room),this.roomPresent=this.deposit.room,this.rooms.push(this.roomPresent),this.addDialog=!0,this.isChooseExisted=!0}getEditingTenant(e){return this.tenants.find(r=>r.id===e)}onChangeRoom(){this.roomInvalids.includes(this.deposit.room?.id)&&this.preRoom!==this.deposit.room?.id?this.depositForm.get("room")?.setErrors({roomInvalid:!0}):this.depositForm.get("room")?.invalid||this.depositForm.get("room")?.setErrors(null)}cancelDeposit(e){this.cancelDepositDialog=!0,this.deposit={...e}}confirmCancelDeposit(){this.cancelDepositDialog=!1;let e=new U_;e.depositId=this.deposit.id,e.isRepaid=this.isRepaid,this.loading=!0,this.depositService.cancelDeposit(e).pipe((0,K.x)(()=>{this.loading=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"Hu\u1ef7 \u0111\u1eb7t c\u1ecdc th\xe0nh c\xf4ng",life:3e3})})).subscribe()}getRoomByAccomodation(){return this.roomService.getRoomNotRented(this.selectedAccomodation.id)}findTenant(e){return this.tenants.find(o=>o.id===e)}defaultService(){this.services.forEach(e=>{e.isDefault&&(e.disabled=!0,this.selectedServices.push(e),this.servicesDisplayed=this.servicesDisplayed.filter(o=>o.id!==e.id))})}filterTenant(){this.contract.tenants?.forEach(e=>{this.selectedTenants.push(e)})}createContract(e){e.loading=!0,this.contractInfoLoading=!0,this.initContractData().pipe((0,K.x)(()=>{this.contract={},this.contractInfoLoading=!1,this.contractDialog=!0,this.isAddNew=!0,e.loading=!1;let o=this.findTenant(e.tenantId);o&&(this.selectedTenants.push(o),this.tenantsDisplayed=this.tenantsDisplayed.filter(r=>r.id!==o?.id)),this.contractForm.get("startDate")?.setValue(ft(new Date).toDate()),this.contractForm.get("endDate")?.setValue(ft(new Date).toDate()),this.contractForm.get("deposit")?.setValue(null),this.contractForm.get("representative")?.setValue(null),this.contractForm.get("duration")?.setValue(null),this.contractForm.get("firstElectricNum")?.setValue(null),this.contractForm.get("firstWaterNum")?.setValue(null),this.contractForm.get("room")?.setValue({id:e.room?.id,name:e.room?.name,price:e.room?.price,capacity:e.room?.capacity}),this.oldDeposit=e.deposit,this.contractForm.get("holdRoomMoney")?.setValue(this.oldDeposit),this.roomPresent=this.contract.room,this.rooms.push(this.roomPresent)})).subscribe(o=>{this.rooms=o.rooms.data,this.tenants=o.tenants.data,this.services=o.services.data})}saveContract(){let e=!1;if(0===this.selectedTenants.length)e=!0,this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"Vui l\xf2ng ch\u1ecdn \xedt nh\u1ea5t m\u1ed9t kh\xe1ch thu\xea",life:3e3});else if(0===this.selectedServices.length)e=!0,this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"Vui l\xf2ng ch\u1ecdn \xedt nh\u1ea5t m\u1ed9t d\u1ecbch v\u1ee5",life:3e3});else if(this.contractForm.invalid)this.contractForm.markAllAsTouched();else{let o;this.loading=!0,o=this.contract.id?"Ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng":"Th\xeam th\xe0nh c\xf4ng",this.contract.tenants=this.selectedTenants,this.contract.services=this.selectedServices,this.contractService.saveContract(this.contract).pipe((0,K.x)(()=>{this.initData(),this.contractDialog=!1,this.contract={},this.messageService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:o,life:3e3})})).subscribe(),e=!1}e||(this.addDialog=!1)}onDialogContractHide(){this.roomPresent&&(this.rooms=this.rooms.filter(e=>e.id!==this.roomPresent.id)),this.selectedServices=[],this.selectedTenants=[],this.servicesDisplayed=JSON.parse(JSON.stringify(this.services)),this.tenantsDisplayed=JSON.parse(JSON.stringify(this.tenants)),this.contractForm.reset()}hideDialog(){this.addDialog=!1,this.isChooseExisted=!1}onHideTenantDialog(){this.tenantForm.reset()}saveDeposit(){if(this.depositForm.invalid)this.depositForm.markAllAsTouched();else{let e;this.loading=!0,this.deposit.accomodationId=this.selectedAccomodation.id,e=this.deposit.id?"Ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng":"Th\xeam th\xe0nh c\xf4ng",this.depositService.saveDeposit(this.deposit).pipe((0,K.x)(()=>{this.messageService.add({severity:"success",summary:"Successful",detail:e,life:3e3}),this.initData()})).subscribe(),this.addDialog=!1}}onGlobalFilter(e,o){e.filterGlobal(o.target.value,"contains")}getStaticEletricName(){return Dt.$.ELECTRIC_PRICE_NAME}getStaticWaterName(){return Dt.$.WATER_PRICE_NAME}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Yt),t.Y36(Pt.$),t.Y36(ht.ez),t.Y36(Ua),t.Y36(Te),t.Y36(On),t.Y36(zo))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-deposit"]],features:[t._Bn([ht.ez])],decls:28,vars:31,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","selectionMode","multiple","dataKey","id",3,"value","columns","rows","globalFilterFields","paginator","rowsPerPageOptions","rowHover"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Chi ti\u1ebft th\xf4ng tin \u0111\u1eb7t c\u1ecdc ph\xf2ng",1,"p-fluid",3,"visible","modal","onHide","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","Hu\u1ef7 \u0111\u1eb7t c\u1ecdc ph\xf2ng",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[4,"ngIf"],["header","Chi ti\u1ebft h\u1ee3p \u0111\u1ed3ng","position","top",1,"p-fluid",3,"visible","modal","onHide","visibleChange"],["header","Chi ti\u1ebft kh\xe1ch thu\xea tr\u1ecd",1,"p-fluid",3,"visible","modal","onHide","visibleChange"],["class","progress-spinner",4,"ngIf"],[1,"my-2"],["pButton","","pRipple","","label","Th\xeam","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],[1,"flex","justify-content-center"],["placeholder","Ch\u1ecdn ph\xf2ng tr\u1ecd","optionLabel","name","autoWidth","false",3,"options","ngModel","onChange","ngModelChange"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],["pSortableColumn","name"],["field","name"],["pSortableColumn","unit"],["field","unit"],["pSortableColumn","price"],["field","price"],["pSortableColumn","status"],["field","status"],["pSortableColumn","description"],["field","description"],["pSortableColumn","quantity"],["field","quantity"],[1,"flex"],["type","button","pButton","","pTooltip","T\u1ea1o h\u1ee3p \u0111\u1ed3ng","icon","pi pi-directions","tooltipPosition","top",1,"p-button-rounded","p-button-success",3,"loading","click"],[2,"width","15%"],["pButton","","pRipple","","pTooltip","Ch\u1ec9nh s\u1eeda","icon","pi pi-pencil","tooltipPosition","top",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","pTooltip","Hu\u1ef7 \u0111\u1eb7t c\u1ecdc","icon","pi pi-replay","tooltipPosition","top",1,"p-button-rounded","p-button-warning","mr-2",3,"click"],[3,"formGroup"],[1,"formgrid","grid"],[1,"field","col","mr-3"],[1,"field"],["for","name"],["pInputText","",2,"padding-top","14px","padding-bottom","14px"],["for","description"],[1,"mandatory-sign"],["appendTo","body","id","description","formControlName","room","optionLabel","name","placeholder","Ch\u1ecdn theo ph\xf2ng",3,"options","ngClass","onChange"],["class","ng-dirty ng-invalid",4,"ngIf"],["for","startDate"],["appendTo","body","id","startDate","formControlName","startDate","dateFormat","dd/mm/yy",3,"minDate","maxDate","ngClass"],["for","dueDate"],["appendTo","body","id","dueDate","formControlName","dueDate","dateFormat","dd/mm/yy",3,"minDate","maxDate","ngClass"],["for","deposit"],["id","deposit","formControlName","deposit",3,"ngClass"],["for","note"],["type","text","pInputText","","id","note","formControlName","note"],[1,"field","col"],["class","formgrid grid",4,"ngIf"],[4,"ngIf","ngIfElse"],["isNew",""],["for","identifyNum"],[1,"p-input-icon-right"],["class","pi pi-spin pi-spinner",4,"ngIf"],[1,"input-box"],["type","text","onlyNumber","","pInputText","","id","identifyNum","formControlName","identifyNum",3,"readOnly","ngClass"],["for","phone"],["type","text","onlyNumber","","pInputText","","id","phone","formControlName","phone",3,"readOnly","ngClass"],["for","email"],["formControlName","email","type","text","pInputText","","id","email",3,"readOnly","ngClass"],[1,"ng-dirty","ng-invalid"],["for","name",1,"ml-2"],[1,"flex","align-items-center"],[1,"field-checkbox"],[1,"mr-2"],[3,"ngModel","value","ngModelOptions","ngModelChange"],[1,"field","col-8"],["for","firstName"],["type","text","pInputText","","id","firstName","formControlName","firstName",3,"ngClass"],[1,"field","col-4"],["for","lastName"],["type","text","pInputText","","id","lastName","formControlName","lastName",3,"ngClass"],["placeholder","Ch\u1ecdn","formControlName","selectedTenant","placeholder","Ch\u1ecdn kh\xe1ch thu\xea",3,"options","ngClass","onChange"],["pTemplate","selectedItem"],["pTemplate","item"],["class","flex align-items-center gap-2",4,"ngIf"],[1,"flex","align-items-center","gap-2"],[1,"pi","pi-spin","pi-spinner"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"disabled","click"],[1,"flex","align-items-center","justify-content-center",2,"margin-top","25px"],["for","repaid",1,"mr-2"],["id","repaid",3,"ngModel","value","ngModelChange"],["for","non-repaid",1,"mr-2"],["id","non-repaid",3,"ngModel","value","ngModelChange"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",1,"p-button-text",3,"click"],["for","room"],["appendTo","body","id","room","formControlName","room","optionLabel","name","placeholder","Ch\u1ecdn theo ph\xf2ng",3,"options","ngClass","onChange"],["header","Ch\u1ecdn kh\xe1ch thu\xea"],[1,"flex","justify-content-start","mb-3"],["pButton","","pRipple","","label","Th\xeam m\u1edbi kh\xe1ch thu\xea","icon","pi pi-plus",1,"p-button-text",3,"click"],["sourceHeader","Kh\xe1ch thu\xea","targetHeader","Kh\xe1ch thu\xea \u0111\xe3 ch\u1ecdn","filterBy","firstName,lastName","sourceFilterPlaceholder","T\xecm ki\u1ebfm...","targetFilterPlaceholder","T\xecm ki\u1ebfm...","breakpoint","1400px",3,"source","target","dragdrop","responsive","sourceStyle","targetStyle","onMoveToTarget","onMoveAllToTarget","onMoveToSource","onMoveAllToSource"],["header","Ch\u1ecdn d\u1ecbch v\u1ee5"],["sourceHeader","D\u1ecbch v\u1ee5","targetHeader","D\u1ecbch v\u1ee5 \u0111\xe3 ch\u1ecdn","filterBy","name","sourceFilterPlaceholder","T\xecm ki\u1ebfm...","targetFilterPlaceholder","T\xecm ki\u1ebfm...","breakpoint","1400px",3,"source","target","dragdrop","responsive","sourceStyle","targetStyle","onMoveAllToSource","onMoveToSource"],[1,"w-full","bg-surface-200"],["appendTo","body","id","description","formControlName","representative","placeholder","Ch\u1ecdn ng\u01b0\u1eddi \u0111\u1ea1i di\u1ec7n",3,"options","ngClass"],["for","duration"],["appendTo","body","id","duration","formControlName","duration","optionLabel","display","optionValue","value","placeholder","Ch\u1ecdn k\xec h\u1ea1n h\u1ee3p \u0111\u1ed3ng",3,"options","ngClass"],["appendTo","body","id","startDate","formControlName","startDate","dateFormat","dd/mm/yy",3,"ngClass"],["for","endDate"],["for","firstElectricNum"],["id","firstElectricNum","formControlName","firstElectricNum",3,"ngClass"],["for","firstWaterNum"],["id","firstWaterNum","formControlName","firstWaterNum",3,"ngClass"],["header","Thanh to\xe1n l\u1ea7n \u0111\u1ea7u"],[2,"position","relative"],["for","dayNumber"],[1,"font-bold"],["for","holdRoomMoney"],["for","firstTotalPayment"],["pInputText",""],[1,"flex","flex-wrap","p-2","align-items-center","gap-3"],[1,"flex-1","flex","flex-column","gap-2"],["class","flex-1 flex flex-column gap-2",4,"ngIf"],[3,"disabled","ngModel","ngModelOptions","ngModelChange"],[1,"formgrid","grid","w-full"],[1,"field","col-7"],["formControlName","firstName","type","text","pInputText","","id","firstName",3,"ngClass"],[1,"field","col-5"],["formControlName","lastName","pInputText","","type","text","id","lastName",3,"ngClass"],["formControlName","identifyNum","onlyNumber","","type","text","pInputText","","id","identifyNum",3,"ngClass"],["for","gender"],["id","gender","formControlName","gender","optionLabel","value","placeholder","Ch\u1ecdn gi\u1edbi t\xednh",3,"options"],["formControlName","email","type","text","pInputText","","id","email",3,"ngClass"],["formControlName","phone","onlyNumber","","type","text","pInputText","","id","phone",3,"ngClass"],["formControlName","startDate","dateFormat","dd/mm/yy",3,"touchUI"],[1,"progress-spinner"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"p-toast"),t.TgZ(4,"p-toolbar",3),t.YNc(5,B_,2,0,"ng-template",4),t.YNc(6,O_,2,5,"ng-template",5),t.qZA(),t.TgZ(7,"p-table",6,7),t.YNc(9,L_,3,0,"ng-template",8),t.YNc(10,V_,21,0,"ng-template",9),t.YNc(11,J_,23,18,"ng-template",10),t.qZA()(),t.TgZ(12,"p-dialog",11),t.NdJ("onHide",function(){return o.onDialogHide()})("visibleChange",function(s){return o.addDialog=s}),t.YNc(13,g0,83,51,"ng-template",12),t.YNc(14,_0,2,1,"ng-template",13),t.qZA(),t.TgZ(15,"p-dialog",14),t.NdJ("visibleChange",function(s){return o.cancelDepositDialog=s}),t.TgZ(16,"div",15),t._UZ(17,"i",16),t.YNc(18,v0,5,1,"span",17),t.qZA(),t.YNc(19,y0,9,4,"ng-template",12),t.YNc(20,w0,2,0,"ng-template",13),t.qZA(),t.TgZ(21,"p-dialog",18),t.NdJ("onHide",function(){return o.onDialogContractHide()})("visibleChange",function(s){return o.contractDialog=s}),t.YNc(22,B0,125,77,"ng-template",12),t.YNc(23,P0,2,1,"ng-template",13),t.qZA(),t.TgZ(24,"p-dialog",19),t.NdJ("onHide",function(){return o.onHideTenantDialog()})("visibleChange",function(s){return o.tenantDialog=s}),t.YNc(25,X0,63,31,"ng-template",12),t.YNc(26,tv,2,1,"ng-template",13),t.qZA()()(),t.YNc(27,ev,2,0,"div",20)),2&e&&(t.xp6(7),t.Q6J("value",o.deposits)("columns",o.cols)("rows",10)("globalFilterFields",t.DdM(25,nv))("paginator",!0)("rowsPerPageOptions",t.DdM(26,iv))("rowHover",!0),t.xp6(5),t.Akn(t.DdM(27,ov)),t.Q6J("visible",o.addDialog)("modal",!0),t.xp6(3),t.Akn(t.DdM(28,Ma)),t.Q6J("visible",o.cancelDepositDialog)("modal",!0),t.xp6(3),t.Q6J("ngIf",o.deposit),t.xp6(3),t.Akn(t.DdM(29,rv)),t.Q6J("visible",o.contractDialog)("modal",!0),t.xp6(3),t.Akn(t.DdM(30,Ma)),t.Q6J("visible",o.tenantDialog)("modal",!0),t.xp6(3),t.Q6J("ngIf",o.loading))},dependencies:[bt.mk,bt.O5,ht.jx,Xt.Hq,Ce.u,ne.o,E._Y,E.Fj,E.JJ,E.JL,E.On,te.FN,pe.o,vn.p,Ft.iA,Ft.lQ,Ft.fz,ie.V,re.Lt,M_.EU,ge.Rn,ee.G,Re.xf,Re.x4,Pn.Z,E.sg,E.u,qe.f,mn.i,$o.G,bt.H9,bt.uU],styles:[".p-picklist-buttons.p-picklist-target-controls,   .p-picklist-buttons.p-picklist-source-controls{display:none}  .p-picklist-item:not(.cdk-drag-disabled){cursor:move;z-index:10000!important}.disabled[_ngcontent-%COMP%]{opacity:.5;-webkit-user-select:none;user-select:none;cursor:default;pointer-events:none}  li:has(.disabled){-webkit-user-select:none;user-select:none;cursor:default;pointer-events:none}"]}),n})();function av(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",21)(1,"button",22),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.openNew())}),t.qZA()()}}const lv=function(){return{width:"100%"}};function cv(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",23)(1,"p-dropdown",24),t.NdJ("onChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onSelectAccomodation())})("ngModelChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.selectedAccomodation=r)}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Akn(t.DdM(4,lv)),t.Q6J("options",e.accomodations)("ngModel",e.selectedAccomodation)}}function uv(n,i){1&n&&(t.TgZ(0,"div",25)(1,"h5",26),t._uU(2,"Qu\u1ea3n l\xfd h\u1ee3p \u0111\u1ed3ng"),t.qZA()())}function pv(n,i){1&n&&(t.TgZ(0,"tr")(1,"th",27),t._uU(2,"Ph\xf2ng"),t._UZ(3,"p-sortIcon",28),t.qZA(),t.TgZ(4,"th",29),t._uU(5,"Ng\u01b0\u1eddi \u0111\u1ea1i di\u1ec7n"),t._UZ(6,"p-sortIcon",30),t.qZA(),t.TgZ(7,"th",31),t._uU(8,"Th\u1eddi h\u1ea1n h\u1ee3p \u0111\u1ed3ng"),t._UZ(9,"p-sortIcon",32),t.qZA(),t.TgZ(10,"th",33),t._uU(11,"Ti\u1ec1n \u0111\u1eb7t c\u1ecdc"),t._UZ(12,"p-sortIcon",34),t.qZA(),t.TgZ(13,"th",35),t._uU(14,"Ng\xe0y b\u1eaft \u0111\u1ea7u"),t._UZ(15,"p-sortIcon",36),t.qZA(),t.TgZ(16,"th",37),t._uU(17,"Ng\xe0y h\u1ebft h\u1ea1n"),t._UZ(18,"p-sortIcon",38),t.qZA(),t._UZ(19,"th"),t.qZA())}function dv(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",39),t._uU(2),t.qZA(),t.TgZ(3,"td",39),t._uU(4),t.qZA(),t.TgZ(5,"td",39),t._uU(6),t.qZA(),t.TgZ(7,"td",39),t._uU(8),t.ALo(9,"currency"),t.qZA(),t.TgZ(10,"td",39),t._uU(11),t.ALo(12,"date"),t.qZA(),t.TgZ(13,"td",39),t._uU(14),t.ALo(15,"date"),t.qZA(),t.TgZ(16,"td",39)(17,"div",40)(18,"button",41),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.printContract(s))}),t.qZA(),t.TgZ(19,"button",42),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.editContract(s))}),t.qZA(),t.TgZ(20,"button",43),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.deleteContract(s))}),t.qZA()()()()}if(2&n){const e=i.$implicit;t.xp6(2),t.Oqu(e.room.name),t.xp6(2),t.AsE("",(null==e.representative?null:e.representative.firstName)||""," ",(null==e.representative?null:e.representative.lastName)||"",""),t.xp6(2),t.hij("",e.duration," th\xe1ng"),t.xp6(2),t.Oqu(t.Dn7(9,8,e.deposit,"VND","symbol")),t.xp6(3),t.Oqu(t.xi3(12,12,e.startDate,"dd/MM/yyyy")),t.xp6(3),t.Oqu(t.xi3(15,15,e.endDate,"dd/MM/yyyy")),t.xp6(6),t.Q6J("loading",e.removeLoading)}}function mv(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1,"X\xe1c nh\u1eadn xo\xe1 h\u1ee3p \u0111\u1ed3ng ph\xf2ng "),t.TgZ(2,"b"),t._uU(3),t.qZA(),t._uU(4,"?"),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(null==e.contract.room?null:e.contract.room.name)}}function hv(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",44),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.deleteContractDialog=!1)}),t.qZA(),t.TgZ(1,"button",45),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.confirmDeleteContract())}),t.qZA()}}function fv(n,i){1&n&&(t.TgZ(0,"small",85),t._uU(1,"Vui l\xf2ng ch\u1ecdn ph\xf2ng."),t.qZA())}function gv(n,i){1&n&&(t.TgZ(0,"small",85),t._uU(1,"Ph\xf2ng \u0111\xe3 \u0111\u01b0\u1ee3c \u0111\u1eb7t c\u1ecdc, kh\xe1ch thu\xea \u0111\xe3 \u0111\u1eb7t c\u1ecdc c\u1ea7n trong m\u1ee5c kh\xe1ch thu\xea \u0111\u01b0\u1ee3c ch\u1ecdn."),t.qZA())}function _v(n,i){1&n&&(t.TgZ(0,"small",85),t._uU(1,"S\u1ed1 l\u01b0\u1ee3ng kh\xe1ch thu\xea v\u01b0\u1ee3t qu\xe1 s\u1ed1 l\u01b0\u1ee3ng kh\xe1ch \u1edf t\u1ed1i \u0111a trong ph\xf2ng."),t.qZA())}function vv(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"label"),t._uU(2,"Gi\xe1"),t.qZA(),t.TgZ(3,"div",86),t._uU(4),t.ALo(5,"currency"),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(4),t.Oqu(t.xi3(5,1,e.contract.room.price,"VND"))}}function yv(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"label"),t._uU(2,"S\u1ed1 ng\u01b0\u1eddi \u1edf t\u1ed1i \u0111a"),t.qZA(),t.TgZ(3,"div",86),t._uU(4),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(4),t.Oqu(e.contract.room.capacity)}}function wv(n,i){if(1&n&&(t.TgZ(0,"div",87)(1,"div",88)(2,"span",82),t._uU(3),t.qZA()(),t._UZ(4,"div"),t.qZA()),2&n){const e=i.$implicit;t.xp6(3),t.AsE("",e.firstName," ",e.lastName,"")}}const Ev=function(){return{standalone:!0}};function bv(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",88)(1,"span"),t._uU(2,"S\u1ed1 l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(3,"p-inputNumber",90),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw().$implicit;return t.KtG(s.quantity=r)}),t.qZA()()}if(2&n){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(3),t.Q6J("disabled",e.name===o.getStaticEletricName()||e.name===o.getStaticWaterName())("ngModel",e.quantity)("ngModelOptions",t.DdM(3,Ev))}}function xv(n,i){if(1&n&&(t.TgZ(0,"div",87)(1,"div",88)(2,"span"),t._uU(3),t.qZA()(),t.TgZ(4,"div",88)(5,"span"),t._uU(6),t.ALo(7,"currency"),t.qZA()(),t.TgZ(8,"div",88)(9,"span"),t._uU(10),t.qZA()(),t.YNc(11,bv,4,4,"div",89),t.qZA()),2&n){const e=i.$implicit,o=t.oxw(2);t.ekj("disabled",e.disabled),t.xp6(3),t.Oqu(e.name),t.xp6(3),t.Oqu(t.Dn7(7,6,e.price,"VND","symbol")),t.xp6(4),t.Oqu(e.unit),t.xp6(1),t.Q6J("ngIf",o.selectedServices.includes(e)&&"Ti\u1ec1n \u0111i\u1ec7n"!==e.name&&"Ti\u1ec1n n\u01b0\u1edbc"!==e.name)}}function Tv(n,i){if(1&n&&t._uU(0),2&n){const e=i.$implicit;t.AsE(" ",e.firstName," ",e.lastName," ")}}function Cv(n,i){if(1&n&&(t.TgZ(0,"div",91)(1,"div"),t._uU(2),t.qZA()()),2&n){const e=i.$implicit;t.xp6(2),t.AsE("",e.firstName," ",e.lastName,"")}}function Av(n,i){1&n&&(t.TgZ(0,"small",85),t._uU(1,"Vui l\xf2ng ch\u1ecdn ng\u01b0\u1eddi \u0111\u1ea1i di\u1ec7n."),t.qZA())}function Nv(n,i){1&n&&(t.TgZ(0,"small",85),t._uU(1,"Vui l\xf2ng ch\u1ecdn k\xec h\u1ea1n h\u1ee3p \u0111\u1ed3ng."),t.qZA())}function Dv(n,i){1&n&&(t.TgZ(0,"small",85),t._uU(1,"Vui l\xf2ng ch\u1ecdn ng\xe0y b\u1eaft \u0111\u1ea7u h\u1ee3p \u0111\u1ed3ng."),t.qZA())}function Fv(n,i){1&n&&(t.TgZ(0,"small",85),t._uU(1,"Vui l\xf2ng nh\u1eadp ti\u1ec1n \u0111\u1eb7t c\u1ecdc."),t.qZA())}function Zv(n,i){1&n&&(t.TgZ(0,"small",85),t._uU(1,"Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n \u0111\u1ea7u."),t.qZA())}function Iv(n,i){1&n&&(t.TgZ(0,"small",85),t._uU(1,"Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n cu\u1ed1i."),t.qZA())}function Sv(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"label",83),t._uU(2,"Ti\u1ec1n c\u1ecdc gi\u1eef ph\xf2ng (\u0111\u1ed3ng)"),t.qZA(),t.TgZ(3,"div",72),t._uU(4),t.ALo(5,"currency"),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(4),t.hij(" ",t.Dn7(5,1,e.contract.keepRoomDeposit||0,"VND","symbol")," ")}}const ue=function(n){return{"ng-invalid ng-dirty":n}},fi=function(){return{height:"15rem"}};function kv(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"form",46)(1,"div",47)(2,"div",48)(3,"label",49),t._uU(4,"Ph\xf2ng "),t.TgZ(5,"span",50),t._uU(6,"*"),t.qZA()(),t.TgZ(7,"div",51)(8,"p-dropdown",52),t.NdJ("onChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onChangeRoom())}),t.qZA()(),t.YNc(9,fv,2,0,"small",53),t.YNc(10,gv,2,0,"small",53),t.YNc(11,_v,2,0,"small",53),t.qZA(),t.TgZ(12,"div",48),t.YNc(13,vv,6,4,"ng-container",14),t.qZA(),t.TgZ(14,"div",48),t.YNc(15,yv,5,1,"ng-container",14),t.qZA()(),t.TgZ(16,"p-tabView")(17,"p-tabPanel",54)(18,"div",55)(19,"div")(20,"button",56),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.newTenant())}),t.qZA()()(),t.TgZ(21,"p-pickList",57),t.NdJ("onMoveToTarget",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onMoveTenant())})("onMoveAllToTarget",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onMoveTenant())})("onMoveToSource",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onMoveBackTenant())})("onMoveAllToSource",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onMoveBackTenant())}),t.YNc(22,wv,5,2,"ng-template",58),t.qZA()(),t.TgZ(23,"p-tabPanel",59)(24,"p-pickList",60),t.NdJ("onMoveAllToSource",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.onMoveBackService(r))})("onMoveToSource",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.onMoveBackService(r))}),t.YNc(25,xv,12,10,"ng-template",58),t.qZA()()(),t._UZ(26,"p-divider",61),t.TgZ(27,"div",47)(28,"div",62)(29,"div",63)(30,"label",64),t._uU(31,"Ng\u01b0\u1eddi \u0111\u1ea1i di\u1ec7n "),t.TgZ(32,"span",50),t._uU(33,"*"),t.qZA()(),t.TgZ(34,"div",51)(35,"p-dropdown",65),t.YNc(36,Tv,1,2,"ng-template",66),t.YNc(37,Cv,3,2,"ng-template",58),t.qZA()(),t.YNc(38,Av,2,0,"small",53),t.qZA(),t.TgZ(39,"div",63)(40,"label",67),t._uU(41,"K\xec h\u1ea1n h\u1ee3p \u0111\u1ed3ng (th\xe1ng) k\u1ec3 t\u1eeb ng\xe0y b\u1eaft \u0111\u1ea7u \u1edf "),t.TgZ(42,"span",50),t._uU(43,"*"),t.qZA()(),t.TgZ(44,"div",51),t._UZ(45,"p-dropdown",68),t.qZA(),t.YNc(46,Nv,2,0,"small",53),t.qZA(),t.TgZ(47,"div",63)(48,"div",47)(49,"div",48)(50,"label",69),t._uU(51,"K\u1ec3 t\u1eeb ng\xe0y "),t.TgZ(52,"span",50),t._uU(53,"*"),t.qZA()(),t.TgZ(54,"div",51),t._UZ(55,"p-calendar",70),t.qZA(),t.YNc(56,Dv,2,0,"small",53),t.qZA(),t.TgZ(57,"div",48)(58,"label",71),t._uU(59,"\u0110\u1ebfn ng\xe0y"),t.qZA(),t.TgZ(60,"div",72),t._uU(61),t.ALo(62,"date"),t.qZA()()()()(),t.TgZ(63,"div",62)(64,"div",63)(65,"label",73),t._uU(66,"Ti\u1ec1n \u0111\u1eb7t c\u1ecdc (\u0111\u1ed3ng) "),t.TgZ(67,"span",50),t._uU(68,"*"),t.qZA()(),t.TgZ(69,"div",51),t._UZ(70,"p-inputNumber",74),t.qZA(),t.YNc(71,Fv,2,0,"small",53),t.qZA(),t.TgZ(72,"div",63)(73,"div",47)(74,"div",48)(75,"label",75),t._uU(76,"S\u1ed1 \u0111i\u1ec7n \u0111\u1ea7u "),t.TgZ(77,"span",50),t._uU(78,"*"),t.qZA()(),t.TgZ(79,"div",51),t._UZ(80,"p-inputNumber",76),t.qZA(),t.YNc(81,Zv,2,0,"small",53),t.qZA(),t.TgZ(82,"div",48)(83,"label",77),t._uU(84,"S\u1ed1 n\u01b0\u1edbc \u0111\u1ea7u "),t.TgZ(85,"span",50),t._uU(86,"*"),t.qZA()(),t.TgZ(87,"div",51),t._UZ(88,"p-inputNumber",78),t.qZA(),t.YNc(89,Iv,2,0,"small",53),t.qZA()()()()(),t._UZ(90,"p-divider",61),t.TgZ(91,"p-card",79)(92,"div",80)(93,"div",47)(94,"div",48)(95,"label"),t._uU(96,"Ti\u1ec1n \u0111\u1eb7t c\u1ecdc (\u0111\u1ed3ng)"),t.qZA(),t.TgZ(97,"div",72),t._uU(98),t.ALo(99,"currency"),t.qZA()(),t.TgZ(100,"div",48),t.YNc(101,Sv,6,5,"ng-container",14),t.qZA()(),t.TgZ(102,"div",47)(103,"div",48)(104,"label",81),t._uU(105,"S\u1ed1 ng\xe0y \u1edf \u0111\u1ebfn "),t.TgZ(106,"span",82),t._uU(107),t.ALo(108,"date"),t.qZA()(),t.TgZ(109,"div",72),t._uU(110),t.qZA()(),t.TgZ(111,"div",48)(112,"label",83),t._uU(113,"Ti\u1ec1n s\u1ed1 ng\xe0y \u0111\xe3 \u1edf (\u0111\u1ed3ng)"),t.qZA(),t.TgZ(114,"div",72),t._uU(115),t.ALo(116,"currency"),t.qZA()()(),t.TgZ(117,"div",47)(118,"div",48)(119,"label",84),t._uU(120,"S\u1ed1 ti\u1ec1n ph\u1ea3i thanh to\xe1n"),t.qZA(),t.TgZ(121,"div",72),t._uU(122),t.ALo(123,"currency"),t.qZA()(),t._UZ(124,"div",48),t.qZA()()()()}if(2&n){const e=t.oxw();let o,r,s,l,a,p,_,T,A;t.Q6J("formGroup",e.contractForm),t.xp6(8),t.Q6J("options",e.rooms)("ngClass",t.VKq(59,ue,e.contractForm.controls.room.invalid&&(e.contractForm.controls.room.dirty||e.contractForm.controls.room.touched))),t.xp6(1),t.Q6J("ngIf",(null==(o=e.contractForm.get("room"))?null:o.hasError("required"))&&(e.contractForm.controls.room.dirty||e.contractForm.controls.room.touched)),t.xp6(1),t.Q6J("ngIf",(null==(r=e.contractForm.get("room"))?null:r.hasError("roomBooked"))&&(e.contractForm.controls.room.dirty||e.contractForm.controls.room.touched)),t.xp6(1),t.Q6J("ngIf",(null==(s=e.contractForm.get("room"))?null:s.hasError("overCapacity"))&&(e.contractForm.controls.room.dirty||e.contractForm.controls.room.touched)),t.xp6(2),t.Q6J("ngIf",e.contract.room&&e.contract.room.price),t.xp6(2),t.Q6J("ngIf",e.contract.room&&e.contract.room.price),t.xp6(6),t.Q6J("source",e.tenantsDisplayed)("target",e.selectedTenants)("dragdrop",!0)("responsive",!0)("sourceStyle",t.DdM(61,fi))("targetStyle",t.DdM(62,fi)),t.xp6(3),t.Q6J("source",e.servicesDisplayed)("target",e.selectedServices)("dragdrop",!0)("responsive",!0)("sourceStyle",t.DdM(63,fi))("targetStyle",t.DdM(64,fi)),t.xp6(11),t.Q6J("options",e.selectedTenants)("ngClass",t.VKq(65,ue,e.contractForm.controls.representative.invalid&&(e.contractForm.controls.representative.dirty||e.contractForm.controls.representative.touched))),t.xp6(3),t.Q6J("ngIf",(null==(l=e.contractForm.get("representative"))?null:l.hasError("required"))&&(e.contractForm.controls.representative.dirty||e.contractForm.controls.representative.touched)),t.xp6(7),t.Q6J("options",e.durations)("ngClass",t.VKq(67,ue,e.contractForm.controls.duration.invalid&&(e.contractForm.controls.duration.dirty||e.contractForm.controls.duration.touched))),t.xp6(1),t.Q6J("ngIf",(null==(a=e.contractForm.get("duration"))?null:a.invalid)&&(e.contractForm.controls.duration.dirty||e.contractForm.controls.duration.touched)),t.xp6(9),t.Q6J("ngClass",t.VKq(69,ue,e.contractForm.controls.startDate.invalid&&(e.contractForm.controls.startDate.dirty||e.contractForm.controls.startDate.touched))),t.xp6(1),t.Q6J("ngIf",(null==(p=e.contractForm.get("startDate"))?null:p.invalid)&&(e.contractForm.controls.startDate.dirty||e.contractForm.controls.startDate.touched)),t.xp6(5),t.Oqu(t.xi3(62,41,e.contract.endDate,"dd/MM/yyyy")),t.xp6(9),t.Q6J("ngClass",t.VKq(71,ue,e.contractForm.controls.deposit.invalid&&(e.contractForm.controls.deposit.dirty||e.contractForm.controls.deposit.touched))),t.xp6(1),t.Q6J("ngIf",(null==(_=e.contractForm.get("deposit"))?null:_.invalid)&&(e.contractForm.controls.deposit.dirty||e.contractForm.controls.deposit.touched)),t.xp6(9),t.Q6J("ngClass",t.VKq(73,ue,e.contractForm.controls.firstElectricNum.invalid&&(e.contractForm.controls.firstElectricNum.dirty||e.contractForm.controls.firstElectricNum.touched))),t.xp6(1),t.Q6J("ngIf",(null==(T=e.contractForm.get("firstElectricNum"))?null:T.invalid)&&(e.contractForm.controls.firstElectricNum.dirty||e.contractForm.controls.firstElectricNum.touched)),t.xp6(7),t.Q6J("ngClass",t.VKq(75,ue,e.contractForm.controls.firstWaterNum.invalid&&(e.contractForm.controls.firstWaterNum.dirty||e.contractForm.controls.firstWaterNum.touched))),t.xp6(1),t.Q6J("ngIf",(null==(A=e.contractForm.get("firstWaterNum"))?null:A.invalid)&&(e.contractForm.controls.firstWaterNum.dirty||e.contractForm.controls.firstWaterNum.touched)),t.xp6(9),t.hij(" ",t.Dn7(99,44,e.contract.deposit||0,"VND","symbol")," "),t.xp6(3),t.Q6J("ngIf",e.contract.keepRoomDeposit),t.xp6(6),t.Oqu(t.xi3(108,48,e.nextMonth,"dd/MM/yyyy")),t.xp6(3),t.hij(" ",e.contract.dayStayedBefore," "),t.xp6(5),t.hij(" ",t.Dn7(116,51,e.dayStayedMoney,"VND","symbol")," "),t.xp6(7),t.hij(" ",t.Dn7(123,55,e.contract.firstComePayment,"VND","symbol")," ")}}function Rv(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",92),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.hideDialog())}),t.qZA(),t.TgZ(1,"button",93),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.saveContract())}),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.contractForm.invalid)}}function qv(n,i){1&n&&(t.TgZ(0,"small",85),t._uU(1,"Vui l\xf2ng nh\u1eadp h\u1ecd."),t.qZA())}function Uv(n,i){1&n&&(t.TgZ(0,"small",85),t._uU(1,"Vui l\xf2ng nh\u1eadp t\xean."),t.qZA())}function Mv(n,i){1&n&&t._UZ(0,"i",113)}function Bv(n,i){1&n&&(t.TgZ(0,"small",85),t._uU(1,"Vui l\xf2ng nh\u1eadp s\u1ed1 CCCD."),t.qZA())}function Pv(n,i){1&n&&(t.TgZ(0,"small",85),t._uU(1,"S\u1ed1 CCCD \u0111\xe3 t\u1ed3n t\u1ea1i."),t.qZA())}function Ov(n,i){1&n&&(t.TgZ(0,"small",85),t._uU(1,"Vui l\xf2ng nh\u1eadp email."),t.qZA())}function Lv(n,i){1&n&&(t.TgZ(0,"small",85),t._uU(1,"Email kh\xf4ng h\u1ee3p l\u1ec7."),t.qZA())}function Vv(n,i){1&n&&(t.TgZ(0,"small",85),t._uU(1,"Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i."),t.qZA())}function Jv(n,i){1&n&&(t.TgZ(0,"small",85),t._uU(1,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng h\u1ee3p l\u1ec7."),t.qZA())}function Hv(n,i){if(1&n&&(t.TgZ(0,"form",46)(1,"div",94)(2,"div",95)(3,"label",96),t._uU(4,"H\u1ecd "),t.TgZ(5,"span",50),t._uU(6,"*"),t.qZA()(),t.TgZ(7,"div",51),t._UZ(8,"input",97),t.qZA(),t.YNc(9,qv,2,0,"small",53),t.qZA(),t.TgZ(10,"div",98)(11,"label",99),t._uU(12,"T\xean "),t.TgZ(13,"span",50),t._uU(14,"*"),t.qZA()(),t.TgZ(15,"div",51),t._UZ(16,"input",100),t.qZA(),t.YNc(17,Uv,2,0,"small",53),t.qZA()(),t.TgZ(18,"div",63)(19,"label",101),t._uU(20,"S\u1ed1 CCCD "),t.TgZ(21,"span",50),t._uU(22,"*"),t.qZA()(),t.TgZ(23,"span",102),t.YNc(24,Mv,1,0,"i",103),t.TgZ(25,"div",51),t._UZ(26,"input",104),t.qZA()(),t.YNc(27,Bv,2,0,"small",53),t.YNc(28,Pv,2,0,"small",53),t.qZA(),t.TgZ(29,"div",63)(30,"label",105),t._uU(31,"Gi\u1edbi t\xednh"),t.qZA(),t.TgZ(32,"div",51),t._UZ(33,"p-dropdown",106),t.qZA()(),t.TgZ(34,"div",63)(35,"label",107),t._uU(36,"Email "),t.TgZ(37,"span",50),t._uU(38,"*"),t.qZA()(),t.TgZ(39,"div",51),t._UZ(40,"input",108),t.qZA(),t.YNc(41,Ov,2,0,"small",53),t.YNc(42,Lv,2,0,"small",53),t.qZA(),t.TgZ(43,"div",63)(44,"label",109),t._uU(45,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),t.TgZ(46,"span",50),t._uU(47,"*"),t.qZA()(),t.TgZ(48,"div",51),t._UZ(49,"input",110),t.qZA(),t.YNc(50,Vv,2,0,"small",53),t.YNc(51,Jv,2,0,"small",53),t.qZA(),t.TgZ(52,"div",63)(53,"label",111),t._uU(54,"Ng\xe0y b\u1eaft \u0111\u1ea7u \u1edf"),t.qZA(),t.TgZ(55,"div",51),t._UZ(56,"p-calendar",112),t.qZA()()()),2&n){const e=t.oxw();let o,r,s,l,a,p,_,T;t.Q6J("formGroup",e.tenantForm),t.xp6(8),t.Q6J("ngClass",t.VKq(17,ue,e.tenantForm.controls.firstName.invalid&&(e.tenantForm.controls.firstName.dirty||e.tenantForm.controls.firstName.touched))),t.xp6(1),t.Q6J("ngIf",(null==(o=e.tenantForm.get("firstName"))?null:o.getError("required"))&&(e.tenantForm.controls.firstName.dirty||e.tenantForm.controls.firstName.touched)),t.xp6(7),t.Q6J("ngClass",t.VKq(19,ue,e.tenantForm.controls.lastName.invalid&&(e.tenantForm.controls.lastName.dirty||e.tenantForm.controls.lastName.touched))),t.xp6(1),t.Q6J("ngIf",(null==(r=e.tenantForm.get("lastName"))?null:r.getError("required"))&&(e.tenantForm.controls.lastName.dirty||e.tenantForm.controls.lastName.touched)),t.xp6(7),t.Q6J("ngIf",e.isValidating),t.xp6(2),t.Q6J("ngClass",t.VKq(21,ue,e.tenantForm.controls.identifyNum.invalid&&(e.tenantForm.controls.identifyNum.dirty||e.tenantForm.controls.identifyNum.touched))),t.xp6(1),t.Q6J("ngIf",(null==(s=e.tenantForm.get("identifyNum"))?null:s.getError("required"))&&(e.tenantForm.controls.identifyNum.dirty||e.tenantForm.controls.identifyNum.touched)),t.xp6(1),t.Q6J("ngIf",(null==(l=e.tenantForm.get("identifyNum"))?null:l.getError("duplicated"))&&(e.tenantForm.controls.identifyNum.dirty||e.tenantForm.controls.identifyNum.touched)),t.xp6(5),t.Q6J("options",e.gender),t.xp6(7),t.Q6J("ngClass",t.VKq(23,ue,e.tenantForm.controls.email.invalid&&(e.tenantForm.controls.email.dirty||e.tenantForm.controls.email.touched))),t.xp6(1),t.Q6J("ngIf",(null==(a=e.tenantForm.get("email"))?null:a.getError("required"))&&(e.tenantForm.controls.email.dirty||e.tenantForm.controls.email.touched)),t.xp6(1),t.Q6J("ngIf",(null==(p=e.tenantForm.get("email"))?null:p.getError("mailInvalid"))&&(e.tenantForm.controls.email.dirty||e.tenantForm.controls.email.touched)),t.xp6(7),t.Q6J("ngClass",t.VKq(25,ue,e.tenantForm.controls.phone.invalid&&(e.tenantForm.controls.phone.dirty||e.tenantForm.controls.phone.touched))),t.xp6(1),t.Q6J("ngIf",(null==(_=e.tenantForm.get("phone"))?null:_.getError("required"))&&(e.tenantForm.controls.phone.dirty||e.tenantForm.controls.phone.touched)),t.xp6(1),t.Q6J("ngIf",(null==(T=e.tenantForm.get("phone"))?null:T.getError("phoneInvalid"))&&(e.tenantForm.controls.phone.dirty||e.tenantForm.controls.phone.touched)),t.xp6(5),t.Q6J("touchUI",!0)}}function Wv(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",92),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.tenantDialog=!1)}),t.qZA(),t.TgZ(1,"button",93),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.saveTenant())}),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.tenantForm.invalid)}}function Gv(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",44),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.cancelDepositDialog=!1)}),t.qZA()}}function Kv(n,i){1&n&&(t.TgZ(0,"div",114),t._UZ(1,"p-progressSpinner"),t.qZA())}const Yv=function(){return["name","capacity","price","acreage","isRent"]},Qv=function(){return[10,20,30]},tr=function(){return{width:"450px"}},jv=function(){return{width:"1150px"}};let zv=(()=>{class n{constructor(e,o,r,s,l,a,p){this.accomodationService=e,this.auth=o,this.messageService=r,this.contractService=s,this.roomService=l,this.tenantService=a,this.documentCreator=p,this.addDialog=!1,this.deleteContractDialog=!1,this.cancelDepositDialog=!1,this.accomodations=[],this.contracts=[],this.contract={},this.cols=[],this.rowsPerPageOptions=[5,10,20],this.dataLoading=!1,this.loading=!1,this.isNewTenant=!1,this.rooms=[],this.tenants=[],this.tenantsDisplayed=[],this.services=[],this.servicesDisplayed=[],this.selectedServices=[],this.loadingChild=!1,this.isAddNew=!1,this.selectedTenants=[],this.selectedTenant=null,this.preRoom={},this.depositor={},this.tentant={},this.tenantDialog=!1,this.gender=Dt.$.GENDER,this.durations=[{value:6,display:"6 th\xe1ng"},{value:12,display:"12 th\xe1ng"}],this.oldDeposit=0,this.isValidating=!1,this.oldIdentifyNum="",this.contractForm=new E.cw({startDate:new E.NI(this.contract.startDate,[E.kI.required]),endDate:new E.NI(this.contract.endDate,[E.kI.required]),deposit:new E.NI(this.contract.deposit,[E.kI.required]),representative:new E.NI(this.contract.representative,[E.kI.required]),duration:new E.NI(this.contract.duration,[E.kI.required]),firstElectricNum:new E.NI(this.contract.firstElectricNum,[E.kI.required]),firstWaterNum:new E.NI(this.contract.firstWaterNum,[E.kI.required]),room:new E.NI(this.contract.room,[E.kI.required]),dayNumber:new E.NI(this.contract.dayStayedBefore,[E.kI.required]),firstTotalPayment:new E.NI(this.contract.firstComePayment,[E.kI.required]),holdRoomMoney:new E.NI(this.contract.keepRoomDeposit,[])}),this.contractForm.controls.endDate.disable(),this.tenantForm=new E.cw({firstName:new E.NI(this.tentant.firstName,[E.kI.required]),lastName:new E.NI(this.tentant.lastName,[E.kI.required]),startDate:new E.NI(this.tentant.startDate,[]),gender:new E.NI(this.tentant.gender,[]),identifyNum:new E.NI(this.tentant.identifyNum,[E.kI.required]),phone:new E.NI(this.tentant.phone,[E.kI.required]),email:new E.NI(this.tentant.email,[E.kI.required])})}ngOnInit(){this.user=this.auth.userValue,this.getDropdownAccomodation().subscribe(e=>this.accomodations=e.data),this.tenantForm.get("firstName")?.valueChanges.subscribe(e=>this.tentant.firstName=e),this.tenantForm.get("lastName")?.valueChanges.subscribe(e=>this.tentant.lastName=e),this.tenantForm.get("startDate")?.valueChanges.subscribe(e=>this.tentant.startDate=e),this.tenantForm.get("identifyNum")?.valueChanges.pipe((0,Xe.b)(500),tn()).subscribe(e=>{e&&(this.tentant.identifyNum=e,this.oldIdentifyNum!==this.tentant.identifyNum&&this.checkDuplicated())}),this.tenantForm.get("phone")?.valueChanges.subscribe(e=>{e&&(this.validatePhoneNumber(e),this.tentant.phone=e)}),this.tenantForm.get("email")?.valueChanges.subscribe(e=>{e&&(this.validateGmail(e),this.tentant.email=e)}),this.tenantForm.get("gender")?.valueChanges.subscribe(e=>{e&&(this.tentant.gender=e.key)}),this.contractForm.get("representative")?.valueChanges.subscribe(e=>{this.selectedTenant=e,this.contract.representative=e}),this.contractForm.get("startDate")?.valueChanges.subscribe(e=>{this.contract.startDate=e,this.getNumberDayStayed(),this.getTotalFirstPayment();let o=ft(this.contract.startDate);if(this.contract.duration){let r=this.contract.duration,s=ft(o).add(r,"M");this.contractForm.get("endDate")?.setValue(s.toDate())}else this.contractForm.get("endDate")?.setValue(o.toDate())}),this.contractForm.get("endDate")?.valueChanges.subscribe(e=>{this.contract.endDate=e}),this.contractForm.get("firstElectricNum")?.valueChanges.subscribe(e=>{this.contract.firstElectricNum=e}),this.contractForm.get("firstWaterNum")?.valueChanges.subscribe(e=>{this.contract.firstWaterNum=e}),this.contractForm.get("deposit")?.valueChanges.subscribe(e=>{this.contract.deposit=e,this.getTotalFirstPayment()}),this.contractForm.get("dayNumber")?.valueChanges.subscribe(e=>{this.contract.dayStayedBefore=e}),this.contractForm.get("firstTotalPayment")?.valueChanges.subscribe(e=>{console.log("data",e),this.contract.firstComePayment=e}),this.contractForm.get("holdRoomMoney")?.valueChanges.subscribe(e=>{this.contract.keepRoomDeposit=e,this.getTotalFirstPayment()}),this.contractForm.get("duration")?.valueChanges.subscribe(e=>{this.contract.duration=e;let o=ft(this.contract.startDate),r=ft(o).add(e,"M");this.contractForm.get("endDate")?.setValue(r.toDate())}),this.contractForm.get("room")?.valueChanges.subscribe(e=>{this.contract.room=e,this.contract.room&&(this.checkIsRoomHasDeposit(),this.checkRoomCapacity())})}prepareContractData(e){console.log(e),this.contract=JSON.parse(JSON.stringify(e)),console.log(this.contract),this.contract.preRoom=e.room?.id,this.filterService(),this.filterTenant(),this.contractForm.get("startDate")?.setValue(ft(this.contract.startDate).toDate()),this.contractForm.get("endDate")?.setValue(ft(this.contract.endDate).toDate()),this.contractForm.get("deposit")?.setValue(this.contract.deposit),this.contractForm.get("firstElectricNum")?.setValue(this.contract.firstElectricNum),this.contractForm.get("firstWaterNum")?.setValue(this.contract.firstWaterNum),this.contractForm.get("representative")?.setValue(this.contract.representative),this.contractForm.get("duration")?.setValue(this.contract.duration),this.contractForm.get("holdRoomMoney")?.setValue(this.contract.keepRoomDeposit),this.contractForm.get("room")?.setValue(this.contract.room),this.roomPresent=this.contract.room,this.rooms.push(this.roomPresent),this.contract.representative&&(this.selectedTenant=this.contract.representative),this.getTotalFirstPayment()}printContract(e){this.prepareContractData(e);let o=new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}),r={fullname:this.user?.firstname+" "+this.user?.lastname,address:this.selectedAccomodation.address,identifyNum:this.user?.identifyNum,phone:this.user?.phone},s={identifyNum:this.contract.representative?.identifyNum,phone:this.contract.representative?.phone,fullname:this.contract.representative?.firstName+" "+this.contract.representative?.lastName},l={price:o.format(this.contract.room?.price),deposit:o.format(Number(this.contract.deposit))};const a=ft(this.contract.startDate);let p={day:a.format("DD"),month:a.format("MM"),year:a.format("YYYY")};const _=ft(this.contract.endDate);let T={day:_.format("DD"),month:_.format("MM"),year:_.format("YYYY")};const A=ft(this.nextMonth).format("DD/MM/YYYY");console.log(o.format(this.dayStayedMoney));let x={lanlord:r,representative:s,room:l,startDate:p,endDate:T,services:this.contract.services,deposit:o.format(Number(this.contract.deposit)),dayStayedBefore:this.contract.dayStayedBefore,dayStayedMoney:o.format(this.dayStayedMoney),firstTotalPayment:o.format(Number(this.contract.firstComePayment)),holdRoomMoney:o.format(Number(this.contract.keepRoomDeposit)),endDayStayedBefor:A};console.log("docxData",x);const b=(new Ko).createContract(x);Vo.toBlob(b).then(y=>{console.log(y),qa(y,`Hop_dong_phong_${this.contract.room?.name}.docx`),console.log("Document created successfully")})}deleteContract(e){let o;this.contract={...e},e.removeLoading=!0,this.contractService.isCanRemove(this.contract.id).pipe((0,K.x)(()=>{e.removeLoading=!1,o?this.deleteContractDialog=!0:(this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"H\u1ee3p \u0111\u1ed3ng \u0111ang \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng kh\xf4ng th\u1ec3 xo\xe1, vui l\xf2ng li\xean h\u1ec7 admin \u0111\u1ec3 \u0111\u01b0\u1ee3c tr\u1ee3 gi\xfap!",life:5e3}),this.contract={})})).subscribe(r=>o=r.data)}confirmDeleteContract(){this.loading=!0,this.contractService.removeContract(this.contract.id).pipe((0,K.x)(()=>{this.deleteContractDialog=!1,this.initData()})).subscribe()}checkDuplicated(){let e=!1;this.isValidating=!0,this.tenantService.checkDuplicatedIdentify(this.tentant.identifyNum).pipe((0,K.x)(()=>{this.isValidating=!1,e&&this.tenantForm.get("identifyNum")?.setErrors({duplicated:!0})})).subscribe(o=>e=o.data)}validatePhoneNumber(e){e.toLowerCase().match(/(84|0[3|5|7|8|9])+([0-9]{8})\b/g)?this.tenantForm.get("phone")?.setErrors(null):this.tenantForm.get("phone")?.setErrors({phoneInvalid:!0})}validateGmail(e){e.toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)?this.tenantForm.get("email")?.setErrors(null):this.tenantForm.get("email")?.setErrors({mailInvalid:!0})}getNumberDayStayed(){let e=ft(this.contract.startDate);this.nextMonth=ft(this.contract.startDate).endOf("month").toDate();let o=ft(this.nextMonth).diff(e,"days");this.contractForm.get("dayNumber")?.setValue(o)}getTotalFirstPayment(){const e=ft(this.contract.startDate).startOf("month"),r=ft(this.contract.startDate).endOf("month").diff(e,"days"),s=this.contract.room?.price,l=this.contract.deposit||0,_=this.contract.keepRoomDeposit||0;this.dayStayedMoney=(s/r||0)*(this.contract.dayStayedBefore||0);let T=this.dayStayedMoney-_+l||0;T<0&&(T=0),this.contractForm.get("firstTotalPayment")?.setValue(T)}checkIsRoomHasDeposit(){let e;this.loading=!0,this.roomService.checkRoomNotDeposit(this.contract.room?.id).pipe((0,K.x)(()=>{this.loading=!1,e.isBooked?(this.depositor=e.depositor,this.oldDeposit=e.depositMoney,this.selectedTenants.find(r=>r.id===this.depositor.id)||(this.selectedTenants.push(this.depositor),this.tenantsDisplayed=this.tenantsDisplayed.filter(r=>r.id!==this.depositor.id))):(this.depositor={},this.oldDeposit=0),this.contractForm.get("holdRoomMoney")?.setValue(this.oldDeposit)})).subscribe(o=>e=o.data)}getDropdownAccomodation(){return this.loading=!0,this.accomodationService.getDropdownAccomodation(this.user?.id).pipe((0,K.x)(()=>{this.selectedAccomodation=this.accomodations[0],this.initData()}))}onMoveTenant(){this.checkRoomCapacity()}newTenant(){this.tentant={},this.tenantForm.get("firstName")?.setValue(null),this.tenantForm.get("lastName")?.setValue(null),this.tenantForm.get("startDate")?.setValue(null),this.tenantForm.get("identifyNum")?.setValue(null),this.tenantForm.get("phone")?.setValue(null),this.tenantForm.get("email")?.setValue(null),this.tenantForm.get("gender")?.setValue({key:"UNKNOWN",value:"Ch\u01b0a bi\u1ebft"}),this.tentant.accomodationId=this.selectedAccomodation.id,this.tenantDialog=!0}saveTenant(){let e;this.loading=!0,e=this.tentant.id?"Ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng":"Th\xeam th\xe0nh c\xf4ng",this.tenantService.saveTenant(this.tentant).pipe((0,K.x)(()=>{this.getTenantByAccomodation().pipe((0,K.x)(()=>{this.messageService.add({severity:"success",summary:"Successful",detail:e,life:3e3}),this.loading=!1,this.tenantsDisplayed=JSON.parse(JSON.stringify(this.tenants))})).subscribe(o=>this.tenants=o.data)})).subscribe(o=>console.log(o)),this.tenantDialog=!1}checkRoomCapacity(){this.contract.room&&(this.contract.room.capacity&&this.contract.room.capacity<this.selectedTenants.length?this.contractForm.get("room")?.setErrors({overCapacity:!0}):this.contractForm.get("room")?.setErrors(null))}onMoveBackTenant(){this.selectedTenants.find(e=>e.id===this.selectedTenant?.id)||this.contractForm.get("representative")?.setValue(null),this.checkRoomCapacity()}onMoveBackService(e){e.items.forEach(o=>o.quantity=1)}openNew(){this.contract={},this.addDialog=!0,this.isAddNew=!0,this.contractForm.get("startDate")?.setValue(ft(new Date).toDate()),this.contractForm.get("endDate")?.setValue(ft(new Date).toDate()),this.contractForm.get("deposit")?.setValue(null),this.contractForm.get("representative")?.setValue(null),this.contractForm.get("duration")?.setValue(null),this.contractForm.get("firstElectricNum")?.setValue(null),this.contractForm.get("firstWaterNum")?.setValue(null),this.contractForm.get("room")?.setValue(null),this.contractForm.get("holdRoomMoney")?.setValue(null)}defaultService(){this.services.forEach(e=>{e.isDefault&&(e.disabled=!0,this.selectedServices.push(e),this.servicesDisplayed=this.servicesDisplayed.filter(o=>o.id!==e.id))})}initData(){(0,Mt.D)({rooms:this.getRoomByAccomodation(),contracts:this.getContractByAccomodation(),tenants:this.getTenantByAccomodation(),services:this.getAccomdationService()}).pipe((0,K.x)(()=>{this.loading=!1,this.servicesDisplayed=JSON.parse(JSON.stringify(this.services)),this.tenantsDisplayed=JSON.parse(JSON.stringify(this.tenants))})).subscribe(e=>{this.rooms=e.rooms.data,this.contracts=e.contracts.data,this.tenants=e.tenants.data,this.services=e.services.data})}getRoomByAccomodation(){return this.roomService.getRoomNotRented(this.selectedAccomodation.id)}getTenantByAccomodation(){return this.tenantService.getTenantWithoutContract(this.selectedAccomodation.id)}getContractByAccomodation(){return this.contractService.getContractByAccomodationId(this.selectedAccomodation.id)}getAccomdationService(){return this.accomodationService.getAccomodationService(this.selectedAccomodation.id)}onChangeRoom(){this.contractForm.get("deposit")?.setValue(this.contract.room?.price)}hideDialog(){this.addDialog=!1}onSelectAccomodation(){this.loading=!0,this.getContractByAccomodation().pipe((0,K.x)(()=>{this.initData()})).subscribe(e=>this.contracts=e.data)}cancelDeposit(e){this.cancelDepositDialog=!0,this.contract={...e}}getById(e,o){return Object.assign({},o.find(s=>s.id===e))}checkTenantDeposit(){this.depositor.id&&(this.selectedTenants.find(o=>o.id===this.depositor.id)?this.contractForm.get("room")?.getError("roomBooked")&&this.contractForm.get("room")?.setErrors(null):this.contractForm.get("room")?.setErrors({roomBooked:!0}))}filterService(){let e;this.contract.services?.forEach(o=>{e=this.getById(o.id,this.services),e&&(e.quantity=o.quantity,this.selectedServices.push(e),this.servicesDisplayed=this.servicesDisplayed.filter(r=>r.id!==o.id))})}filterTenant(){this.contract.tenants?.forEach(e=>{this.selectedTenants.push(e)})}editContract(e){this.isAddNew=!1,this.prepareContractData(e),this.addDialog=!0}onHideDialog(){this.roomPresent&&(this.rooms=this.rooms.filter(e=>e.id!==this.roomPresent.id)),this.selectedServices=[],this.selectedTenants=[],this.servicesDisplayed=JSON.parse(JSON.stringify(this.services)),this.tenantsDisplayed=JSON.parse(JSON.stringify(this.tenants)),this.depositor={},this.contractForm.reset()}onHideTenantDialog(){this.tenantForm.reset()}saveContract(){let e=!1;if(0===this.selectedTenants.length)e=!0,this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"Vui l\xf2ng ch\u1ecdn \xedt nh\u1ea5t m\u1ed9t kh\xe1ch thu\xea",life:3e3});else if(0===this.selectedServices.length)e=!0,this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"Vui l\xf2ng ch\u1ecdn \xedt nh\u1ea5t m\u1ed9t d\u1ecbch v\u1ee5",life:3e3});else if(this.contractForm.invalid)this.contractForm.markAllAsTouched();else{let o;this.loading=!0,o=this.contract.id?"Ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng":"Th\xeam th\xe0nh c\xf4ng",this.contract.tenants=this.selectedTenants,this.contract.services=this.selectedServices,this.contractService.saveContract(this.contract).pipe((0,K.x)(()=>{this.initData(),this.contract={},this.messageService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:o,life:3e3})})).subscribe(),e=!1}e||(this.addDialog=!1)}getStaticEletricName(){return Dt.$.ELECTRIC_PRICE_NAME}getStaticWaterName(){return Dt.$.WATER_PRICE_NAME}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Yt),t.Y36(Pt.$),t.Y36(ht.ez),t.Y36(zo),t.Y36(Te),t.Y36(On),t.Y36(Ko))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-contract"]],features:[t._Bn([ht.ez])],decls:28,vars:31,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","selectionMode","multiple","dataKey","id",3,"value","columns","rows","globalFilterFields","paginator","rowsPerPageOptions","rowHover"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[4,"ngIf"],["pTemplate","footer"],["header","Chi ti\u1ebft h\u1ee3p \u0111\u1ed3ng","position","top",1,"p-fluid",3,"visible","modal","onHide","visibleChange"],["pTemplate","content"],["header","Chi ti\u1ebft kh\xe1ch thu\xea tr\u1ecd",1,"p-fluid",3,"visible","modal","onHide","visibleChange"],["header","Hu\u1ef7 \u0111\u1eb7t c\u1ecdc ph\xf2ng",3,"visible","modal","visibleChange"],["class","progress-spinner",4,"ngIf"],[1,"my-2"],["pButton","","pRipple","","label","T\u1ea1o h\u1ee3p \u0111\u1ed3ng","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],[1,"flex","justify-content-center"],["placeholder","Ch\u1ecdn ph\xf2ng tr\u1ecd","optionLabel","name","autoWidth","false",3,"options","ngModel","onChange","ngModelChange"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],["pSortableColumn","room"],["field","room"],["pSortableColumn","representative"],["field","representative"],["pSortableColumn","duration"],["field","duration"],["pSortableColumn","deposit"],["field","deposit"],["pSortableColumn","startDate"],["field","startDate"],["pSortableColumn","endDate"],["field","endDate"],[2,"width","15%","min-width","10rem"],[1,"flex"],["pButton","","pRipple","","pTooltip","In h\u1ee3p \u0111\u1ed3ng","icon","pi pi-print","tooltipPosition","top",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","pTooltip","Ch\u1ec9nh s\u1eeda","icon","pi pi-pencil","tooltipPosition","top",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","pTooltip","Xo\xe1","icon","pi pi-trash","tooltipPosition","top",1,"p-button-rounded","p-button-warning","mr-2",3,"loading","click"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",1,"p-button-text",3,"click"],[3,"formGroup"],[1,"formgrid","grid"],[1,"field","col"],["for","room"],[1,"mandatory-sign"],[1,"input-box"],["appendTo","body","id","room","formControlName","room","optionLabel","name","placeholder","Ch\u1ecdn theo ph\xf2ng",3,"options","ngClass","onChange"],["class","ng-dirty ng-invalid",4,"ngIf"],["header","Ch\u1ecdn kh\xe1ch thu\xea"],[1,"flex","justify-content-start","mb-3"],["pButton","","pRipple","","label","Th\xeam m\u1edbi kh\xe1ch thu\xea","icon","pi pi-plus",1,"p-button-text",3,"click"],["sourceHeader","Kh\xe1ch thu\xea","targetHeader","Kh\xe1ch thu\xea \u0111\xe3 ch\u1ecdn","filterBy","firstName,lastName","sourceFilterPlaceholder","T\xecm ki\u1ebfm...","targetFilterPlaceholder","T\xecm ki\u1ebfm...","breakpoint","1400px",3,"source","target","dragdrop","responsive","sourceStyle","targetStyle","onMoveToTarget","onMoveAllToTarget","onMoveToSource","onMoveAllToSource"],["pTemplate","item"],["header","Ch\u1ecdn d\u1ecbch v\u1ee5"],["sourceHeader","D\u1ecbch v\u1ee5","targetHeader","D\u1ecbch v\u1ee5 \u0111\xe3 ch\u1ecdn","filterBy","name","sourceFilterPlaceholder","T\xecm ki\u1ebfm...","targetFilterPlaceholder","T\xecm ki\u1ebfm...","breakpoint","1400px",3,"source","target","dragdrop","responsive","sourceStyle","targetStyle","onMoveAllToSource","onMoveToSource"],[1,"w-full","bg-surface-200"],[1,"field","col","mr-3"],[1,"field"],["for","description"],["appendTo","body","id","description","formControlName","representative","placeholder","Ch\u1ecdn ng\u01b0\u1eddi \u0111\u1ea1i di\u1ec7n",3,"options","ngClass"],["pTemplate","selectedItem"],["for","duration"],["appendTo","body","id","duration","formControlName","duration","optionLabel","display","optionValue","value","placeholder","Ch\u1ecdn k\xec h\u1ea1n h\u1ee3p \u0111\u1ed3ng",3,"options","ngClass"],["for","startDate"],["appendTo","body","id","startDate","formControlName","startDate","dateFormat","dd/mm/yy",3,"ngClass"],["for","endDate"],["pInputText","",2,"padding-top","14px","padding-bottom","14px"],["for","deposit"],["id","deposit","formControlName","deposit",3,"ngClass"],["for","firstElectricNum"],["id","firstElectricNum","formControlName","firstElectricNum",3,"ngClass"],["for","firstWaterNum"],["id","firstWaterNum","formControlName","firstWaterNum",3,"ngClass"],["header","Thanh to\xe1n l\u1ea7n \u0111\u1ea7u"],[2,"position","relative"],["for","dayNumber"],[1,"font-bold"],["for","holdRoomMoney"],["for","firstTotalPayment"],[1,"ng-dirty","ng-invalid"],["pInputText",""],[1,"flex","flex-wrap","p-2","align-items-center","gap-3"],[1,"flex-1","flex","flex-column","gap-2"],["class","flex-1 flex flex-column gap-2",4,"ngIf"],[3,"disabled","ngModel","ngModelOptions","ngModelChange"],[1,"flex","align-items-center","gap-2"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"disabled","click"],[1,"formgrid","grid","w-full"],[1,"field","col-7"],["for","firstName"],["formControlName","firstName","type","text","pInputText","","id","firstName",3,"ngClass"],[1,"field","col-5"],["for","lastName"],["formControlName","lastName","pInputText","","type","text","id","lastName",3,"ngClass"],["for","identifyNum"],[1,"p-input-icon-right"],["class","pi pi-spin pi-spinner",4,"ngIf"],["formControlName","identifyNum","onlyNumber","","type","text","pInputText","","id","identifyNum",3,"ngClass"],["for","gender"],["id","gender","formControlName","gender","optionLabel","value","placeholder","Ch\u1ecdn gi\u1edbi t\xednh",3,"options"],["for","email"],["formControlName","email","type","text","pInputText","","id","email",3,"ngClass"],["for","phone"],["formControlName","phone","onlyNumber","","type","text","pInputText","","id","phone",3,"ngClass"],["for","name"],["formControlName","startDate","dateFormat","dd/mm/yy",3,"touchUI"],[1,"pi","pi-spin","pi-spinner"],[1,"progress-spinner"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"p-toast"),t.TgZ(4,"p-toolbar",3),t.YNc(5,av,2,0,"ng-template",4),t.YNc(6,cv,2,5,"ng-template",5),t.qZA(),t.TgZ(7,"p-table",6,7),t.YNc(9,uv,3,0,"ng-template",8),t.YNc(10,pv,20,0,"ng-template",9),t.YNc(11,dv,21,18,"ng-template",10),t.qZA()(),t.TgZ(12,"p-dialog",11),t.NdJ("visibleChange",function(s){return o.deleteContractDialog=s}),t.TgZ(13,"div",12),t._UZ(14,"i",13),t.YNc(15,mv,5,1,"span",14),t.qZA(),t.YNc(16,hv,2,0,"ng-template",15),t.qZA(),t.TgZ(17,"p-dialog",16),t.NdJ("onHide",function(){return o.onHideDialog()})("visibleChange",function(s){return o.addDialog=s}),t.YNc(18,kv,125,77,"ng-template",17),t.YNc(19,Rv,2,1,"ng-template",15),t.qZA(),t.TgZ(20,"p-dialog",18),t.NdJ("onHide",function(){return o.onHideTenantDialog()})("visibleChange",function(s){return o.tenantDialog=s}),t.YNc(21,Hv,57,27,"ng-template",17),t.YNc(22,Wv,2,1,"ng-template",15),t.qZA(),t.TgZ(23,"p-dialog",19),t.NdJ("visibleChange",function(s){return o.cancelDepositDialog=s}),t.TgZ(24,"div",12),t._UZ(25,"i",13),t.qZA(),t.YNc(26,Gv,1,0,"ng-template",15),t.qZA()()(),t.YNc(27,Kv,2,0,"div",20)),2&e&&(t.xp6(7),t.Q6J("value",o.contracts)("columns",o.cols)("rows",10)("globalFilterFields",t.DdM(25,Yv))("paginator",!0)("rowsPerPageOptions",t.DdM(26,Qv))("rowHover",!0),t.xp6(5),t.Akn(t.DdM(27,tr)),t.Q6J("visible",o.deleteContractDialog)("modal",!0),t.xp6(3),t.Q6J("ngIf",o.contract),t.xp6(2),t.Akn(t.DdM(28,jv)),t.Q6J("visible",o.addDialog)("modal",!0),t.xp6(3),t.Akn(t.DdM(29,tr)),t.Q6J("visible",o.tenantDialog)("modal",!0),t.xp6(3),t.Akn(t.DdM(30,tr)),t.Q6J("visible",o.cancelDepositDialog)("modal",!0),t.xp6(4),t.Q6J("ngIf",o.loading))},dependencies:[bt.mk,bt.O5,ht.jx,Xt.Hq,Ce.u,ne.o,E._Y,E.Fj,E.JJ,E.JL,E.On,te.FN,pe.o,vn.p,Ft.iA,Ft.lQ,Ft.fz,ie.V,re.Lt,ge.Rn,ee.G,Re.xf,Re.x4,Pn.Z,E.sg,E.u,qe.f,mn.i,$o.G,bt.H9,bt.uU],styles:[".p-picklist-buttons.p-picklist-target-controls,   .p-picklist-buttons.p-picklist-source-controls{display:none}  .p-picklist-item:not(.cdk-drag-disabled){cursor:move;z-index:10000!important}"]}),n})();function $v(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",19)(1,"button",20),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.openNew())}),t.qZA()()}}const Xv=function(){return{width:"100%"}};function ty(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",21)(1,"p-dropdown",22),t.NdJ("onChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onSelectAccomodation())})("ngModelChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.selectedAccomodation=r)}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Akn(t.DdM(4,Xv)),t.Q6J("options",e.accomodations)("ngModel",e.selectedAccomodation)}}function ey(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",23)(1,"h5",24),t._uU(2,"Qu\u1ea3n l\xfd ch\u1ec9 s\u1ed1 \u0111i\u1ec7n n\u01b0\u1edbc"),t.qZA(),t.TgZ(3,"span",25)(4,"p-calendar",26),t.NdJ("onSelect",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.getElectricWatersByMonth())})("ngModelChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.selectedMonth=r)}),t.qZA()(),t.TgZ(5,"span",25),t._UZ(6,"i",27),t.TgZ(7,"input",28),t.NdJ("input",function(r){t.CHM(e);const s=t.oxw(),l=t.MAs(8);return t.KtG(s.onGlobalFilter(l,r))}),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngModel",e.selectedMonth)("showIcon",!0)}}function ny(n,i){1&n&&(t.TgZ(0,"tr")(1,"th",29),t._uU(2,"Ph\xf2ng"),t._UZ(3,"p-sortIcon",30),t.qZA(),t.TgZ(4,"th",31),t._uU(5,"Th\xe1ng"),t._UZ(6,"p-sortIcon",32),t.qZA(),t.TgZ(7,"th"),t._uU(8,"S\u1ed1 \u0111i\u1ec7n \u0111\u1ea7u"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"S\u1ed1 \u0111i\u1ec7n cu\u1ed1i"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"S\u1ed1 \u0111i\u1ec7n ti\xeau th\u1ee5"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"S\u1ed1 n\u01b0\u1edbc \u0111\u1ea7u"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"S\u1ed1 n\u01b0\u1edbc cu\u1ed1i"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"S\u1ed1 n\u01b0\u1edbc ti\xeau th\u1ee5"),t.qZA(),t._UZ(19,"th"),t.qZA())}function iy(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td")(19,"div",33)(20,"button",34),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.onEdit(s))}),t.qZA()()()()}if(2&n){const e=i.$implicit;t.xp6(2),t.Oqu(e.room.name),t.xp6(2),t.Oqu(t.xi3(5,9,e.month,"MM/yyyy")),t.xp6(3),t.hij("",e.firstElectric," (kWH)"),t.xp6(2),t.hij("",e.lastElectric," (kWH)"),t.xp6(2),t.hij("",e.electricNum," (kWH)"),t.xp6(2),t.hij("",e.firstWater," (m\xb3)"),t.xp6(2),t.hij("",e.lastWater," (m\xb3)"),t.xp6(2),t.hij("",e.waterNum," (m\xb3)"),t.xp6(3),t.Q6J("loading",e.loading)}}function oy(n,i){1&n&&(t.TgZ(0,"small",54),t._uU(1,"Vui l\xf2ng ch\u1ecdn ph\xf2ng."),t.qZA())}function ry(n,i){1&n&&(t.TgZ(0,"small",54),t._uU(1,"Ch\u1ec9 s\u1ed1 \u0111i\u1ec7n \u0111\u1ea7u kh\xf4ng h\u1ee3p l\u1ec7."),t.qZA())}function sy(n,i){1&n&&(t.TgZ(0,"small",54),t._uU(1,"Ch\u1ec9 s\u1ed1 \u0111i\u1ec7n cu\u1ed1i kh\xf4ng h\u1ee3p l\u1ec7."),t.qZA())}function ay(n,i){1&n&&(t.TgZ(0,"small",54),t._uU(1,"Ch\u1ec9 s\u1ed1 \u0111i\u1ec7n kh\xf4ng h\u1ee3p l\u1ec7."),t.qZA())}function ly(n,i){1&n&&(t.TgZ(0,"small",54),t._uU(1,"Ch\u1ec9 s\u1ed1 n\u01b0\u1edbc \u0111\u1ea7u kh\xf4ng h\u1ee3p l\u1ec7."),t.qZA())}function cy(n,i){1&n&&(t.TgZ(0,"small",54),t._uU(1,"Ch\u1ec9 s\u1ed1 n\u01b0\u1edbc cu\u1ed1i kh\xf4ng h\u1ee3p l\u1ec7."),t.qZA())}function uy(n,i){1&n&&(t.TgZ(0,"small",54),t._uU(1,"Ch\u1ec9 s\u1ed1 n\u01b0\u1edbc kh\xf4ng h\u1ee3p l\u1ec7."),t.qZA())}const kn=function(n){return{"ng-invalid ng-dirty":n}};function py(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"form",35)(1,"div",36)(2,"label",37),t._uU(3,"Ph\xf2ng "),t.TgZ(4,"span",38),t._uU(5,"*"),t.qZA()(),t.TgZ(6,"div",39)(7,"p-dropdown",40),t.NdJ("onChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onChangeRoom())}),t.qZA()(),t.YNc(8,oy,2,0,"small",41),t.qZA(),t.TgZ(9,"div",36)(10,"label",42),t._uU(11,"Th\xe1ng "),t.TgZ(12,"span",38),t._uU(13,"*"),t.qZA()(),t.TgZ(14,"div",39),t._UZ(15,"p-calendar",43),t.qZA()(),t.TgZ(16,"div",36)(17,"label",44),t._uU(18,"S\u1ed1 \u0111i\u1ec7n \u0111\u1ea7u "),t.TgZ(19,"span",38),t._uU(20,"*"),t.qZA()(),t.TgZ(21,"div",39),t._UZ(22,"input",45),t.qZA(),t.YNc(23,ry,2,0,"small",41),t.qZA(),t.TgZ(24,"div",36)(25,"label",46),t._uU(26,"S\u1ed1 \u0111i\u1ec7n cu\u1ed1i "),t.TgZ(27,"span",38),t._uU(28,"*"),t.qZA()(),t.TgZ(29,"div",39),t._UZ(30,"input",47),t.qZA(),t.YNc(31,sy,2,0,"small",41),t.qZA(),t.TgZ(32,"div",36)(33,"div",48),t._uU(34,"S\u1ed1 \u0111i\u1ec7n ti\xeau th\u1ee5: "),t.TgZ(35,"span",49),t._uU(36),t.qZA()(),t.YNc(37,ay,2,0,"small",41),t.qZA(),t.TgZ(38,"div",36)(39,"label",50),t._uU(40,"S\u1ed1 n\u01b0\u1edbc \u0111\u1ea7u "),t.TgZ(41,"span",38),t._uU(42,"*"),t.qZA()(),t.TgZ(43,"div",39),t._UZ(44,"input",51),t.qZA(),t.YNc(45,ly,2,0,"small",41),t.qZA(),t.TgZ(46,"div",36)(47,"label",52),t._uU(48,"S\u1ed1 n\u01b0\u1edbc cu\u1ed1i "),t.TgZ(49,"span",38),t._uU(50,"*"),t.qZA()(),t.TgZ(51,"div",39),t._UZ(52,"input",53),t.qZA(),t.YNc(53,cy,2,0,"small",41),t.qZA(),t.TgZ(54,"div",36)(55,"div",48),t._uU(56,"S\u1ed1 n\u01b0\u1edbc ti\xeau th\u1ee5: "),t.TgZ(57,"span",49),t._uU(58),t.qZA()(),t.YNc(59,uy,2,0,"small",41),t.qZA()()}if(2&n){const e=t.oxw();let o,r,s,l,a,p,_;t.Q6J("formGroup",e.electricWaterNumForm),t.xp6(7),t.Q6J("options",e.rooms)("ngClass",t.VKq(17,kn,e.electricWaterNumForm.controls.room.invalid&&(e.electricWaterNumForm.controls.room.dirty||e.electricWaterNumForm.controls.room.touched))),t.xp6(1),t.Q6J("ngIf",(null==(o=e.electricWaterNumForm.get("room"))?null:o.invalid)&&(e.electricWaterNumForm.controls.room.dirty||e.electricWaterNumForm.controls.room.touched)),t.xp6(7),t.Q6J("touchUI",!0),t.xp6(7),t.Q6J("ngClass",t.VKq(19,kn,e.electricWaterNumForm.controls.firstElectric.invalid&&(e.electricWaterNumForm.controls.firstElectric.dirty||e.electricWaterNumForm.controls.firstElectric.touched))),t.xp6(1),t.Q6J("ngIf",(null==(r=e.electricWaterNumForm.get("firstElectric"))?null:r.invalid)&&(e.electricWaterNumForm.controls.firstElectric.dirty||e.electricWaterNumForm.controls.firstElectric.touched)),t.xp6(7),t.Q6J("ngClass",t.VKq(21,kn,e.electricWaterNumForm.controls.lastElectric.invalid&&(e.electricWaterNumForm.controls.lastElectric.dirty||e.electricWaterNumForm.controls.lastElectric.touched))),t.xp6(1),t.Q6J("ngIf",(null==(s=e.electricWaterNumForm.get("lastElectric"))?null:s.invalid)&&(e.electricWaterNumForm.controls.lastElectric.dirty||e.electricWaterNumForm.controls.lastElectric.touched)),t.xp6(5),t.Oqu(e.electricWater.electricNum),t.xp6(1),t.Q6J("ngIf",null==(l=e.electricWaterNumForm.get("electricNum"))?null:l.getError("electricInvalid")),t.xp6(7),t.Q6J("ngClass",t.VKq(23,kn,e.electricWaterNumForm.controls.firstWater.invalid&&(e.electricWaterNumForm.controls.firstWater.dirty||e.electricWaterNumForm.controls.firstWater.touched))),t.xp6(1),t.Q6J("ngIf",(null==(a=e.electricWaterNumForm.get("firstWater"))?null:a.invalid)&&(e.electricWaterNumForm.controls.firstWater.dirty||e.electricWaterNumForm.controls.firstWater.touched)),t.xp6(7),t.Q6J("ngClass",t.VKq(25,kn,e.electricWaterNumForm.controls.lastWater.invalid&&(e.electricWaterNumForm.controls.lastWater.dirty||e.electricWaterNumForm.controls.lastWater.touched))),t.xp6(1),t.Q6J("ngIf",(null==(p=e.electricWaterNumForm.get("lastWater"))?null:p.invalid)&&(e.electricWaterNumForm.controls.lastWater.dirty||e.electricWaterNumForm.controls.lastWater.touched)),t.xp6(5),t.Oqu(e.electricWater.waterNum),t.xp6(1),t.Q6J("ngIf",null==(_=e.electricWaterNumForm.get("waterNum"))?null:_.getError("waterInvalid"))}}function dy(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",55),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.hideDialog())}),t.qZA(),t.TgZ(1,"button",56),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.save())}),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.electricWaterNumForm.invalid)}}function my(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"Are you sure you want to delete?"),t.qZA())}function hy(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",57),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.deleteTenantDialog=!1)}),t.qZA(),t.TgZ(1,"button",58),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.confirmDelete())}),t.qZA()}}function fy(n,i){1&n&&(t.TgZ(0,"div",59),t._UZ(1,"p-progressSpinner"),t.qZA())}const gy=function(){return["room","month"]},_y=function(){return[10,20,30]},Ba=function(){return{width:"450px"}};let vy=(()=>{class n{constructor(e,o,r,s,l){this.auth=e,this.accomodationService=o,this.roomService=r,this.billService=s,this.messageService=l,this.dataLoading=!1,this.accomodations=[],this.loading=!1,this.electricWater={},this.electricWaters=[],this.cols=[],this.billDialog=!1,this.deleteTenantDialog=!1,this.rooms=[],this.electricWaterNumForm=new E.cw({firstElectric:new E.NI(this.electricWater.firstElectric,[E.kI.required,E.kI.min(0)]),lastElectric:new E.NI(this.electricWater.lastElectric,[E.kI.required,E.kI.min(0)]),electricNum:new E.NI(this.electricWater.electricNum,[E.kI.required,E.kI.min(0)]),firstWater:new E.NI(this.electricWater.firstWater,[E.kI.required,E.kI.min(0)]),lastWater:new E.NI(this.electricWater.lastWater,[E.kI.required,E.kI.min(0)]),waterNum:new E.NI(this.electricWater.waterNum,[E.kI.required,E.kI.min(0)]),room:new E.NI(this.electricWater.room,[E.kI.required]),month:new E.NI(this.electricWater.month,[E.kI.required])}),this.selectedMonth=ft().toDate()}ngOnInit(){this.user=this.auth.userValue,this.getDropdownAccomodation(),this.electricWaterNumForm.get("firstElectric")?.valueChanges.subscribe(e=>{this.electricWater.firstElectric=e,void 0!==this.electricWater.firstElectric&&void 0!==this.electricWater.lastElectric&&this.electricWaterNumForm.get("electricNum")?.setValue(this.electricWater.lastElectric-this.electricWater.firstElectric),this.electricWater.electricNum&&this.electricWater.electricNum<0&&this.electricWaterNumForm.get("electricNum")?.setErrors({electricInvalid:!0})}),this.electricWaterNumForm.get("lastElectric")?.valueChanges.subscribe(e=>{this.electricWater.lastElectric=e,void 0!==this.electricWater.firstElectric&&void 0!==this.electricWater.lastElectric&&this.electricWaterNumForm.get("electricNum")?.setValue(this.electricWater.lastElectric-this.electricWater.firstElectric),this.electricWater.electricNum&&this.electricWater.electricNum<0&&this.electricWaterNumForm.get("electricNum")?.setErrors({electricInvalid:!0})}),this.electricWaterNumForm.get("electricNum")?.valueChanges.subscribe(e=>{this.electricWater.electricNum=e}),this.electricWaterNumForm.get("firstWater")?.valueChanges.subscribe(e=>{this.electricWater.firstWater=e,void 0!==this.electricWater.firstWater&&void 0!==this.electricWater.lastWater&&this.electricWaterNumForm.get("waterNum")?.setValue(this.electricWater.lastWater-this.electricWater.firstWater),this.electricWater.waterNum&&this.electricWater.waterNum<0&&this.electricWaterNumForm.get("waterNum")?.setErrors({waterInvalid:!0})}),this.electricWaterNumForm.get("lastWater")?.valueChanges.subscribe(e=>{this.electricWater.lastWater=e,void 0!==this.electricWater.firstWater&&void 0!==this.electricWater.lastWater&&this.electricWaterNumForm.get("waterNum")?.setValue(this.electricWater.lastWater-this.electricWater.firstWater),this.electricWater.waterNum&&this.electricWater.waterNum<0&&this.electricWaterNumForm.get("waterNum")?.setErrors({waterInvalid:!0})}),this.electricWaterNumForm.get("waterNum")?.valueChanges.subscribe(e=>{this.electricWater.waterNum=e}),this.electricWaterNumForm.get("month")?.valueChanges.subscribe(e=>{this.electricWater.month=e}),this.electricWaterNumForm.get("room")?.valueChanges.subscribe(e=>{this.electricWater.room=e})}getDropdownAccomodation(){this.loading=!0,this.accomodationService.getDropdownAccomodation(this.user?.id).pipe((0,K.x)(()=>{this.selectedAccomodation=this.accomodations[0],this.initData()})).subscribe(e=>this.accomodations=e.data)}onChangeRoom(){let e;const o=ft(this.selectedMonth).subtract(1,"month").toDate();this.commonRequest={id:this.electricWater.room?.id,month:o},this.loading=!0,this.billService.getElectricWaterByRoomAndMonth(this.commonRequest).pipe((0,K.x)(()=>{this.loading=!1,e?(console.log(e),this.electricWaterNumForm.get("firstElectric")?.setValue(e.firstElectric),this.electricWaterNumForm.get("lastElectric")?.setValue(e.firstElectric),this.electricWaterNumForm.get("firstWater")?.setValue(e.firstWater),this.electricWaterNumForm.get("lastWater")?.setValue(e.firstWater)):(this.electricWaterNumForm.get("firstElectric")?.setValue(0),this.electricWaterNumForm.get("lastElectric")?.setValue(0),this.electricWaterNumForm.get("firstWater")?.setValue(0),this.electricWaterNumForm.get("lastWater")?.setValue(0))})).subscribe(r=>e=r.data)}openNew(){this.electricWater={},this.electricWaterNumForm.get("month")?.setValue(ft(this.selectedMonth).toDate()),this.electricWaterNumForm.get("firstElectric")?.setValue(null),this.electricWaterNumForm.get("lastElectric")?.setValue(null),this.electricWaterNumForm.get("electricNum")?.setValue(null),this.electricWaterNumForm.get("firstWater")?.setValue(null),this.electricWaterNumForm.get("lastWater")?.setValue(null),this.electricWaterNumForm.get("waterNum")?.setValue(null),this.electricWaterNumForm.get("totalPrice")?.setValue(null),this.electricWaterNumForm.get("isPay")?.setValue(!1),this.electricWaterNumForm.get("room")?.setValue({}),this.billDialog=!0}getRoomByAccomodation(){return this.commonRequest={id:this.selectedAccomodation.id,month:this.selectedMonth},this.roomService.getRoomNoElectricWater(this.commonRequest).pipe((0,K.x)(()=>{this.loading=!1}))}getElectricWatersByAccomodation(){return this.commonRequest={id:this.selectedAccomodation.id,month:this.selectedMonth},this.billService.getElectricWaterByAccomodation(this.commonRequest).pipe((0,K.x)(()=>{this.loading=!1}))}isCanDelete(){}checkIsRoomInputElectricWater(){let o;this.billService.checkIsRoomReturnValid({id:this.electricWater.room?.id,month:this.selectedMonth}).pipe((0,K.x)(()=>{o.bill&&this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:`Ph\xf2ng ${this.electricWater.room?.name} \u0111\xe3 \u0111\u01b0\u1ee3c t\u1ea1o ho\xe1 \u0111\u01a1n, kh\xf4ng th\u1ec3 ch\u1ec9nh s\u1eeda`,life:5e3})})).subscribe(r=>o=r.data)}getElectricWatersByMonth(){this.dataLoading=!0,this.initData()}initData(){(0,Mt.D)({rooms:this.getRoomByAccomodation(),electricWaters:this.getElectricWatersByAccomodation()}).pipe((0,K.x)(()=>{this.loading=!1,this.dataLoading=!1})).subscribe(e=>{this.rooms=e.rooms.data,this.electricWaters=e.electricWaters.data})}onSelectAccomodation(){this.loading=!0,this.initData()}deleteTenant(e){this.deleteTenantDialog=!0,this.electricWater={...e}}onEdit(e){let r,o={id:e.room?.id,month:this.selectedMonth};e.loading=!0,this.billService.checkIsRoomReturnValid(o).pipe((0,K.x)(()=>{e.loading=!1,r.bill?this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:`Ph\xf2ng ${e.room?.name} \u0111\xe3 \u0111\u01b0\u1ee3c t\u1ea1o ho\xe1 \u0111\u01a1n, kh\xf4ng th\u1ec3 ch\u1ec9nh s\u1eeda`,life:5e3}):(this.electricWater={...e},this.electricWaterNumForm.get("firstElectric")?.setValue(this.electricWater.firstElectric),this.electricWaterNumForm.get("lastElectric")?.setValue(this.electricWater.lastElectric),this.electricWaterNumForm.get("electricNum")?.setValue(this.electricWater.electricNum),this.electricWaterNumForm.get("firstWater")?.setValue(this.electricWater.firstWater),this.electricWaterNumForm.get("lastWater")?.setValue(this.electricWater.lastWater),this.electricWaterNumForm.get("waterNum")?.setValue(this.electricWater.waterNum),this.electricWaterNumForm.get("room")?.setValue(this.electricWater.room),this.electricWaterNumForm.get("month")?.setValue(ft(this.electricWater.month).toDate()),this.roomPresent=this.electricWater.room,this.rooms.push(this.roomPresent),this.billDialog=!0)})).subscribe(s=>r=s.data)}onHideDialog(){this.roomPresent&&(this.rooms=this.rooms.filter(e=>e.id!==this.roomPresent.id)),this.electricWaterNumForm.reset()}hideDialog(){this.billDialog=!1}save(){this.electricWaterNumForm.invalid?this.electricWaterNumForm.markAllAsTouched():(this.loading=!0,console.log("bill",this.electricWater),this.billService.saveElectricWater(this.electricWater).pipe((0,K.x)(()=>{this.electricWater={},this.initData()})).subscribe(e=>console.log(e)),this.billDialog=!1)}confirmDelete(){this.deleteTenantDialog=!1}onGlobalFilter(e,o){e.filterGlobal(o.target.value,"contains")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Pt.$),t.Y36(Yt),t.Y36(Te),t.Y36(Yo),t.Y36(ht.ez))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-electricity-water"]],features:[t._Bn([ht.ez])],decls:21,vars:23,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","selectionMode","multiple","dataKey","id",3,"loading","value","columns","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","rowHover"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Chi ti\u1ebft ch\u1ec9 s\u1ed1 \u0111i\u1ec7n n\u01b0\u1edbc",1,"p-fluid",3,"visible","modal","onHide","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[4,"ngIf"],["class","progress-spinner",4,"ngIf"],[1,"my-2"],["pButton","","pRipple","","label","Th\xeam ch\u1ec9 s\u1ed1 \u0111i\u1ec7n n\u01b0\u1edbc","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],[1,"flex","justify-content-center"],["optionLabel","name","autoWidth","false",3,"options","ngModel","onChange","ngModelChange"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],["view","month","dateFormat","mm/yy","placeholder","Ch\u1ecdn th\xe1ng...",3,"ngModel","showIcon","onSelect","ngModelChange"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","T\xecm ki\u1ebfm...",1,"w-full","sm:w-auto",3,"input"],["pSortableColumn","room"],["field","room"],["pSortableColumn","month"],["field","month"],[1,"flex"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","mr-2",3,"loading","click"],[3,"formGroup"],[1,"field"],["for","room"],[1,"mandatory-sign"],[1,"input-box"],["formControlName","room","optionLabel","name","placeholder","Ch\u1ecdn ph\xf2ng",3,"options","ngClass","onChange"],["class","ng-dirty ng-invalid",4,"ngIf"],["for","month"],["formControlName","month","view","month","dateFormat","mm/yy",3,"touchUI"],["for","firstElectric"],["formControlName","firstElectric","type","number","pInputText","","id","firstElectric",3,"ngClass"],["for","lastElectric"],["formControlName","lastElectric","pInputText","","type","number","id","lastElectric",3,"ngClass"],[1,"font-xl","font-bold","input-box"],[1,"font-2xl"],["for","firstWater"],["formControlName","firstWater","type","number","pInputText","","id","firstWater",3,"ngClass"],["for","lastWater"],["formControlName","lastWater","type","number","pInputText","","id","lastWater",3,"ngClass"],[1,"ng-dirty","ng-invalid"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"disabled","click"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",1,"p-button-text",3,"click"],[1,"progress-spinner"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"p-toast"),t.TgZ(4,"p-toolbar",3),t.YNc(5,$v,2,0,"ng-template",4),t.YNc(6,ty,2,5,"ng-template",5),t.qZA(),t.TgZ(7,"p-table",6,7),t.YNc(9,ey,8,2,"ng-template",8),t.YNc(10,ny,20,0,"ng-template",9),t.YNc(11,iy,21,12,"ng-template",10),t.qZA()(),t.TgZ(12,"p-dialog",11),t.NdJ("onHide",function(){return o.onHideDialog()})("visibleChange",function(s){return o.billDialog=s}),t.YNc(13,py,60,27,"ng-template",12),t.YNc(14,dy,2,1,"ng-template",13),t.qZA(),t.TgZ(15,"p-dialog",14),t.NdJ("visibleChange",function(s){return o.deleteTenantDialog=s}),t.TgZ(16,"div",15),t._UZ(17,"i",16),t.YNc(18,my,2,0,"span",17),t.qZA(),t.YNc(19,hy,2,0,"ng-template",13),t.qZA()()(),t.YNc(20,fy,2,0,"div",18)),2&e&&(t.xp6(7),t.Q6J("loading",o.dataLoading)("value",o.electricWaters)("columns",o.cols)("rows",10)("globalFilterFields",t.DdM(19,gy))("paginator",!0)("rowsPerPageOptions",t.DdM(20,_y))("showCurrentPageReport",!0)("rowHover",!0),t.xp6(5),t.Akn(t.DdM(21,Ba)),t.Q6J("visible",o.billDialog)("modal",!0),t.xp6(3),t.Akn(t.DdM(22,Ba)),t.Q6J("visible",o.deleteTenantDialog)("modal",!0),t.xp6(3),t.Q6J("ngIf",o.electricWater),t.xp6(2),t.Q6J("ngIf",o.loading))},dependencies:[bt.mk,bt.O5,ht.jx,Xt.Hq,ne.o,E._Y,E.Fj,E.wV,E.JJ,E.JL,E.On,te.FN,pe.o,Ft.iA,Ft.lQ,Ft.fz,ie.V,re.Lt,ee.G,E.sg,E.u,qe.f,bt.uU],styles:[".p-datepicker-touch-ui{min-width:25vw!important}"]}),n})();function yy(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",16)(1,"button",17),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.openNew())}),t.qZA()()}}const wy=function(){return{width:"100%"}};function Ey(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",18)(1,"p-dropdown",19),t.NdJ("onChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onSelectAccomodation())})("ngModelChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.selectedAccomodation=r)}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Akn(t.DdM(4,wy)),t.Q6J("options",e.accomodations)("ngModel",e.selectedAccomodation)}}function by(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",20)(1,"h5",21),t._uU(2,"Xu\u1ea5t ho\xe1 \u0111\u01a1n ph\xf2ng h\xe0ng th\xe1ng"),t.qZA(),t.TgZ(3,"span",22)(4,"p-calendar",23),t.NdJ("onSelect",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.getInvoiceByMonth())})("ngModelChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.selectedMonth=r)}),t.qZA()(),t.TgZ(5,"span",22),t._UZ(6,"i",24),t.TgZ(7,"input",25),t.NdJ("input",function(r){t.CHM(e);const s=t.oxw(),l=t.MAs(8);return t.KtG(s.onGlobalFilter(l,r))}),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngModel",e.selectedMonth)("showIcon",!0)}}function xy(n,i){1&n&&(t.TgZ(0,"tr")(1,"th",26),t._uU(2,"T\xean ph\xf2ng"),t._UZ(3,"p-sortIcon",27),t.qZA(),t.TgZ(4,"th",28),t._uU(5,"Th\xe1ng"),t._UZ(6,"p-sortIcon",29),t.qZA(),t.TgZ(7,"th",30),t._uU(8,"Ng\u01b0\u1eddi \u0111\u1ea1i di\u1ec7n"),t._UZ(9,"p-sortIcon",31),t.qZA(),t.TgZ(10,"th",32),t._uU(11,"Th\xe0nh ti\u1ec1n"),t._UZ(12,"p-sortIcon",33),t.qZA(),t.TgZ(13,"th",34),t._uU(14,"Gi\u1ea3m gi\xe1"),t._UZ(15,"p-sortIcon",35),t.qZA(),t.TgZ(16,"th",36),t._uU(17,"Thanh to\xe1n"),t._UZ(18,"p-sortIcon",37),t.qZA(),t.TgZ(19,"th",38),t._uU(20,"Ng\xe0y thanh to\xe1n"),t._UZ(21,"p-sortIcon",39),t.qZA(),t.TgZ(22,"th",40),t._uU(23,"Tr\u1ea1ng th\xe1i"),t._UZ(24,"p-sortIcon",41),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Ng\xe0y tr\u1ea3 ph\xf2ng"),t.qZA(),t._UZ(27,"th")(28,"th"),t.qZA())}function Ty(n,i){1&n&&t._UZ(0,"p-tag",47)}function Cy(n,i){1&n&&t._UZ(0,"p-tag",48)}function Ay(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Ty,1,0,"p-tag",45),t.YNc(2,Cy,1,0,"p-tag",46),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.isPay),t.xp6(1),t.Q6J("ngIf",!e.isPay)}}function Ny(n,i){1&n&&(t.ynx(0),t._UZ(1,"p-tag",49),t.BQk())}function Dy(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",50)(2,"p-menu",51,52),t.NdJ("onShow",function(){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw();return t.KtG(s.onShowMenu(r))}),t.qZA(),t.TgZ(4,"button",53),t.NdJ("click",function(r){t.CHM(e);const s=t.MAs(3),l=t.oxw(2);return t.KtG(l.toggleMenu(s,r))}),t.qZA()(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("model",e.items)("popup",!0)}}function Fy(n,i){if(1&n&&(t.TgZ(0,"tr")(1,"td",42),t._uU(2),t.qZA(),t.TgZ(3,"td",42),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td",43),t._uU(7),t.qZA(),t.TgZ(8,"td",42),t._uU(9),t.ALo(10,"currency"),t.qZA(),t.TgZ(11,"td",42),t._uU(12),t.ALo(13,"currency"),t.qZA(),t.TgZ(14,"td",42),t._uU(15),t.ALo(16,"currency"),t.qZA(),t.TgZ(17,"td",43),t._uU(18),t.ALo(19,"date"),t.qZA(),t.TgZ(20,"td",42),t.YNc(21,Ay,3,2,"ng-container",44),t.YNc(22,Ny,2,0,"ng-container",44),t.qZA(),t.TgZ(23,"td",42),t._uU(24),t.ALo(25,"date"),t.qZA(),t._UZ(26,"td"),t.TgZ(27,"td"),t.YNc(28,Dy,5,2,"ng-container",44),t.qZA()()),2&n){const e=i.$implicit,o=t.oxw();t.xp6(2),t.Oqu(e.room.name),t.xp6(2),t.Oqu(t.xi3(5,11,o.selectedMonth,"MM/yyyy")),t.xp6(3),t.Oqu(e.representative),t.xp6(2),t.Oqu(t.Dn7(10,14,e.totalPrice,"VND","symbol")),t.xp6(3),t.Oqu(t.Dn7(13,18,e.discount,"VND","symbol")),t.xp6(3),t.Oqu(t.Dn7(16,22,e.paidMoney,"VND","symbol")),t.xp6(3),t.Oqu(t.xi3(19,26,e.paymentDate,"dd/MM/yyyy")),t.xp6(3),t.Q6J("ngIf",e.id),t.xp6(1),t.Q6J("ngIf",!e.id),t.xp6(2),t.Oqu(t.xi3(25,29,e.returnDate,"dd/MM/yyyy")),t.xp6(4),t.Q6J("ngIf",e.id)}}function Zy(n,i){1&n&&(t.TgZ(0,"small",61),t._uU(1,"Vui l\xf2ng ch\u1ecdn ph\xf2ng."),t.qZA())}const hn=function(n){return{"ng-invalid ng-dirty":n}};function Iy(n,i){if(1&n&&(t.TgZ(0,"form",54)(1,"div",55)(2,"label",56),t._uU(3,"Ph\xf2ng"),t.qZA(),t._UZ(4,"p-dropdown",57),t.YNc(5,Zy,2,0,"small",58),t.qZA(),t.TgZ(6,"div",55)(7,"label",59),t._uU(8,"Ng\xe0y tr\u1ea3 ph\xf2ng"),t.qZA(),t._UZ(9,"p-calendar",60),t.qZA()()),2&n){const e=t.oxw();let o;t.Q6J("formGroup",e.returnRoomForm),t.xp6(4),t.Q6J("options",e.rooms)("ngClass",t.VKq(4,hn,e.returnRoomForm.controls.room.invalid&&(e.returnRoomForm.controls.room.dirty||e.returnRoomForm.controls.room.touched))),t.xp6(1),t.Q6J("ngIf",(null==(o=e.returnRoomForm.get("room"))?null:o.invalid)&&(e.returnRoomForm.controls.room.dirty||e.returnRoomForm.controls.room.touched))}}function Sy(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",62),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.hideDialog())}),t.qZA(),t.TgZ(1,"button",63),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.saveBill())}),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.returnRoomForm.invalid)("loading",e.issueLoading)("disabled",!e.isReturnRoomValid)}}function ky(n,i){1&n&&(t.TgZ(0,"tr")(1,"th",82),t._uU(2,"T\xean d\u1ecbch v\u1ee5"),t.qZA(),t.TgZ(3,"th",43),t._uU(4,"\u0110\u01a1n v\u1ecb"),t.qZA(),t.TgZ(5,"th",43),t._uU(6,"\u0110\u01a1n gi\xe1"),t.qZA(),t.TgZ(7,"th",83),t._uU(8,"S\u1ed1 l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(9,"th",82),t._uU(10,"Th\xe0nh ti\u1ec1n"),t.qZA()())}function Ry(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.quantity)}}function qy(n,i){if(1&n&&(t.TgZ(0,"td")(1,"div",86)(2,"div",87),t._uU(3),t.qZA(),t.TgZ(4,"div",87),t._uU(5),t.qZA(),t.TgZ(6,"div",67),t._uU(7),t.qZA()()()),2&n){const e=t.oxw(2).$implicit;t.xp6(3),t.hij(" ",e.firstElectricNum," "),t.xp6(2),t.hij(" ",e.lastElectricNum," "),t.xp6(2),t.hij(" ",e.electricNum," ")}}function Uy(n,i){if(1&n&&(t.TgZ(0,"td")(1,"div",86)(2,"div",87),t._uU(3),t.qZA(),t.TgZ(4,"div",87),t._uU(5),t.qZA(),t.TgZ(6,"div",67),t._uU(7),t.qZA()()()),2&n){const e=t.oxw(2).$implicit;t.xp6(3),t.hij(" ",e.firstWaterNum," "),t.xp6(2),t.hij(" ",e.lastWaterNum," "),t.xp6(2),t.hij(" ",e.waterNum," ")}}function My(n,i){if(1&n&&(t.YNc(0,qy,8,3,"td",44),t.YNc(1,Uy,8,3,"td",44)),2&n){const e=t.oxw().$implicit,o=t.oxw(2);t.Q6J("ngIf",e.serviceName===o.staticElectricPriceName),t.xp6(1),t.Q6J("ngIf",e.serviceName===o.staticWaterPriceName)}}function By(n,i){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"currency"),t.qZA(),t.YNc(8,Ry,3,1,"ng-container",84),t.YNc(9,My,2,2,"ng-template",null,85,t.W1O),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"currency"),t.qZA()()),2&n){const e=i.$implicit,o=t.MAs(10),r=t.oxw(2);t.xp6(2),t.Oqu(e.serviceName),t.xp6(2),t.Oqu(e.unit),t.xp6(2),t.Oqu(t.Dn7(7,6,e.price,"VND","symbol")),t.xp6(2),t.Q6J("ngIf",e.serviceName!==r.staticElectricPriceName&&e.serviceName!==r.staticWaterPriceName)("ngIfElse",o),t.xp6(4),t.Oqu(t.Dn7(13,10,e.totalPrice,"VND","symbol"))}}function Py(n,i){1&n&&(t.TgZ(0,"small",61),t._uU(1,"S\u1ed1 ti\u1ec1n gi\u1ea3m gi\xe1 v\u01b0\u1ee3t qu\xe1 t\u1ed5ng ti\u1ec1n."),t.qZA())}const Oy=function(){return[]};function Ly(n,i){if(1&n&&(t.TgZ(0,"div",64)(1,"div",65)(2,"label",66),t._uU(3,"T\xean ph\xf2ng/S\u1ed1 ph\xf2ng"),t.qZA(),t.TgZ(4,"div",67),t._uU(5),t.qZA()(),t.TgZ(6,"div",65)(7,"label",66),t._uU(8,"Gi\xe1 ph\xf2ng"),t.qZA(),t.TgZ(9,"div",67),t._uU(10),t.ALo(11,"currency"),t.qZA()()(),t.TgZ(12,"div",55)(13,"p-table",68),t.YNc(14,ky,11,0,"ng-template",9),t.YNc(15,By,14,14,"ng-template",10),t.qZA()(),t._UZ(16,"p-divider"),t.TgZ(17,"form",54)(18,"div",64)(19,"div",69)(20,"div",55)(21,"label",70),t._uU(22,"T\u1ed5ng ti\u1ec1n d\u1ecbch v\u1ee5"),t.qZA(),t._UZ(23,"p-inputNumber",71),t.qZA(),t.TgZ(24,"div",55)(25,"label",72),t._uU(26,"N\u1ee3 c\u0169"),t.qZA(),t._UZ(27,"p-inputNumber",73),t.qZA(),t.TgZ(28,"div",55)(29,"label",74),t._uU(30,"T\u1ed5ng ti\u1ec1n"),t.qZA(),t._UZ(31,"p-inputNumber",75),t.qZA()(),t.TgZ(32,"div",69)(33,"div",55)(34,"label",76),t._uU(35,"Gi\u1ea3m gi\xe1 (\u0111\u1ed3ng)"),t.qZA(),t._UZ(36,"p-inputNumber",77),t.YNc(37,Py,2,0,"small",58),t.qZA(),t.TgZ(38,"div",55)(39,"label",78),t._uU(40,"Th\xe0nh ti\u1ec1n"),t.qZA(),t._UZ(41,"p-inputNumber",79),t.qZA(),t.TgZ(42,"div",55)(43,"label",80),t._uU(44,"M\xf4 t\u1ea3"),t.qZA(),t._UZ(45,"textarea",81),t.qZA()()()()),2&n){const e=t.oxw();let o;t.xp6(5),t.Oqu(null==e.invoice.room?null:e.invoice.room.name),t.xp6(5),t.Oqu(t.Dn7(11,14,null==e.invoice.room?null:e.invoice.room.price,"VND","symbol")),t.xp6(3),t.Q6J("value",e.invoice.service||t.DdM(18,Oy)),t.xp6(4),t.Q6J("formGroup",e.invoiceForm),t.xp6(6),t.Q6J("readonly",!0)("ngClass",t.VKq(19,hn,e.invoiceForm.controls.totalService.invalid&&(e.invoiceForm.controls.totalService.dirty||e.invoiceForm.controls.totalService.touched))),t.xp6(4),t.Q6J("readonly",!0)("ngClass",t.VKq(21,hn,e.invoiceForm.controls.debt.invalid&&(e.invoiceForm.controls.debt.dirty||e.invoiceForm.controls.debt.touched))),t.xp6(4),t.Q6J("readonly",!0)("ngClass",t.VKq(23,hn,e.invoiceForm.controls.totalPrice.invalid&&(e.invoiceForm.controls.totalPrice.dirty||e.invoiceForm.controls.totalPrice.touched))),t.xp6(5),t.Q6J("ngClass",t.VKq(25,hn,e.invoiceForm.controls.discount.invalid&&(e.invoiceForm.controls.discount.dirty||e.invoiceForm.controls.discount.touched))),t.xp6(1),t.Q6J("ngIf",(null==(o=e.invoiceForm.get("discount"))?null:o.invalid)&&(e.invoiceForm.controls.discount.dirty||e.invoiceForm.controls.discount.touched)),t.xp6(4),t.Q6J("readonly",!0)("ngClass",t.VKq(27,hn,e.invoiceForm.controls.totalPayment.invalid&&(e.invoiceForm.controls.totalPayment.dirty||e.invoiceForm.controls.totalPayment.touched)))}}function Vy(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",92),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.issueInvoice())}),t.qZA()}}function Jy(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",93),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.updateInvoice())}),t.qZA()}}function Hy(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",88)(1,"div",89)(2,"button",62),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.invoiceDialog=!1)}),t.qZA()(),t.TgZ(3,"div",86),t.YNc(4,Vy,1,0,"button",90),t.YNc(5,Jy,1,0,"button",91),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",!e.invoice.id),t.xp6(1),t.Q6J("ngIf",e.isEdit)}}function Wy(n,i){1&n&&(t.TgZ(0,"div",94),t._UZ(1,"p-progressSpinner"),t.qZA())}const Gy=function(){return["name","capacity","price","acreage"]},Ky=function(){return[10,20,30]},Yy=function(){return{width:"450px"}},Qy=function(){return{width:"1050px"}};let jy=(()=>{class n{constructor(e,o,r,s,l){this.auth=e,this.accomodationService=o,this.roomService=r,this.billService=s,this.messageService=l,this.dataLoading=!1,this.accomodations=[],this.loading=!1,this.checkingLoading=!1,this.returnRoom={},this.returnRooms=[],this.cols=[],this.billDialog=!1,this.rooms=[],this.isEdit=!1,this.invoiceDialog=!1,this.invoice={},this.invoices=[],this.items=[],this.isReturnRoomValid=!1,this.issueLoading=!1,this.returnRoomForm=new E.cw({room:new E.NI(this.returnRoom.room,[E.kI.required]),returnDate:new E.NI(this.returnRoom.returnDate,[E.kI.required])}),this.invoiceForm=new E.cw({totalService:new E.NI(this.invoice.totalService,[]),discount:new E.NI(this.invoice.discount,[E.kI.required,E.kI.min(0)]),totalPrice:new E.NI(this.invoice.totalPrice,[]),paidMoney:new E.NI(this.invoice.paidMoney,[E.kI.required]),totalPayment:new E.NI(this.invoice.totalPayment,[]),debt:new E.NI(this.invoice.debt,[]),newDebt:new E.NI(this.invoice.newDebt,[E.kI.required,E.kI.min(0)]),description:new E.NI(this.invoice.description,[])}),this.selectedMonth=ft().toDate()}ngOnInit(){this.user=this.auth.userValue,this.getDropdownAccomodation(),this.returnRoomForm.get("returnDate")?.valueChanges.subscribe(e=>{this.returnRoom.returnDate=e,this.returnRoom.room&&this.returnRoom.returnDate&&this.checkRoomValid()}),this.returnRoomForm.get("room")?.valueChanges.subscribe(e=>{this.returnRoom.room=e,this.returnRoom.room&&this.returnRoom.returnDate&&this.checkRoomValid()}),this.invoiceForm.get("totalService")?.valueChanges.subscribe(e=>{this.invoice.totalService=e}),this.invoiceForm.get("discount")?.valueChanges.subscribe(e=>{if(this.invoice.discount=e,this.invoice.totalPrice&&null!=this.invoice.discount){let o=this.invoice.totalPrice-this.invoice.discount;this.invoiceForm.get("totalPayment")?.setValue(o)}this.invoiceForm.get("newDebt")?.value<0?(console.log(this.invoiceForm.get("newDebt")),this.invoiceForm.setErrors({incorrect:!0}),this.invoiceForm.get("newDebt")?.markAsTouched()):(this.invoiceForm.setErrors(null),this.invoiceForm.get("newDebt")?.markAsTouched())}),this.invoiceForm.get("totalPrice")?.valueChanges.subscribe(e=>{this.invoice.totalPrice=e}),this.invoiceForm.get("totalPayment")?.valueChanges.subscribe(e=>{if(this.invoice.totalPayment=e,this.invoice.paidMoney=e,this.invoice.totalPayment&&this.invoice.paidMoney){let o=this.invoice.totalPayment-this.invoice.paidMoney;this.invoiceForm.get("newDebt")?.setValue(o)}}),this.invoiceForm.get("debt")?.valueChanges.subscribe(e=>{this.invoice.debt=e}),this.invoiceForm.get("newDebt")?.valueChanges.subscribe(e=>{this.invoice.newDebt=e}),this.invoiceForm.get("description")?.valueChanges.subscribe(e=>{this.invoice.description=e})}issueInvoice(){this.loading=!0,this.invoice.billDate=ft(new Date).toDate(),this.invoice.returnDate=this.returnRoom.returnDate,this.billService.issueReturnInvoice(this.invoice).pipe((0,K.x)(()=>{this.hideDialog(),this.getReturnInvoiceByAccomodation().pipe((0,K.x)(()=>{this.getRoomByAccomodation().subscribe(e=>this.rooms=e.data),this.invoice={},this.invoiceDialog=!1,this.messageService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"Xu\u1ea5t ho\xe1 \u0111\u01a1n th\xe0nh c\xf4ng"})})).subscribe(e=>this.invoices=e.data)})).subscribe(e=>console.log(e))}confirmPayment(e){this.loading=!0,this.invoice.isPay=!0,this.billService.confirmPayment(e.id).pipe((0,K.x)(()=>{this.hideDialog(),this.getReturnInvoiceByAccomodation().pipe((0,K.x)(()=>{this.messageService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"Xu\u1ea5t ho\xe1 \u0111\u01a1n th\xe0nh c\xf4ng"})})).subscribe(o=>this.invoices=o.data)})).subscribe(o=>console.log(o))}getInvoiceByMonth(){this.loading=!0,this.billService.getMonthInvoiceByAccomodation({id:this.selectedAccomodation.id,month:this.selectedMonth,isReturn:!0}).pipe((0,K.x)(()=>{this.loading=!1})).subscribe(o=>this.invoices=o.data)}getReturnInvoiceByAccomodation(){return this.loading=!0,this.billService.getMonthInvoiceByAccomodation({id:this.selectedAccomodation.id,month:this.selectedMonth,isReturn:!0}).pipe((0,K.x)(()=>{this.loading=!1}))}updateInvoice(){this.invoiceForm.invalid?this.invoiceForm.markAllAsTouched():(this.loading=!0,this.invoice.isReturnBill=!0,this.billService.updateInvoice(this.invoice).pipe((0,K.x)(()=>{this.getReturnInvoiceByAccomodation().pipe((0,K.x)(()=>{this.getRoomByAccomodation().subscribe(e=>this.rooms=e.data),this.invoice={},this.invoiceDialog=!1,this.messageService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"Xu\u1ea5t ho\xe1 \u0111\u01a1n th\xe0nh c\xf4ng"})})).subscribe(e=>this.invoices=e.data)})).subscribe(e=>console.log(e)))}checkRoomValid(){let e;this.loading=!0,(0,Mt.D)({rentedDate:this.getRoomRentedDate(),inputed:this.checkIsRoomInputElectricWater()}).pipe((0,K.x)(()=>{this.loading=!1,e.bill?(this.isReturnRoomValid=!1,this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:`Ph\xf2ng ${this.returnRoom.room.name} \u0111\xe3 \u0111\u01b0\u1ee3c t\u1ea1o ho\xe1 \u0111\u01a1n`,life:5e3})):e.inputed?(this.isReturnRoomValid=!0,this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:`Ph\xf2ng ${this.returnRoom.room.name} ch\u01b0a \u0111\u01b0\u1ee3c nh\u1eadp ch\u1ec9 s\u1ed1 \u0111i\u1ec7n n\u01b0\u1edbc`,life:5e3})):this.isReturnRoomValid=!0,this.checkReturnDate()})).subscribe(o=>{this.rentedDate=o.rentedDate.data.date,e=o.inputed.data})}checkReturnDate(){let e=ft(this.rentedDate),o=ft(this.returnRoom.returnDate);console.log("rentedDate",e.format("DD/MM/yyyy")),console.log("returnDate",o.format("DD/MM/yyyy")),o&&(e.isSameOrAfter(o)?(this.returnRoomForm.get("returnDate")?.setErrors({dateInvalid:!0}),this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"Ng\xe0y tr\u1ea3 ph\xf2ng kh\xf4ng \u0111\u01b0\u1ee3c tr\u01b0\u1edbc ng\xe0y b\u1eaft \u0111\u1ea7u cho thu\xea",life:5e3})):this.returnRoomForm.get("returnDate")?.setErrors(null))}getRoomRentedDate(){return this.roomService.getRoomRentedDate(this.returnRoom.room.id)}checkIsRoomInputElectricWater(){return this.billService.checkIsRoomReturnValid({id:this.returnRoom.room.id,month:this.returnRoom.returnDate})}sendInvoiceMail(e){this.billService.sendInvoice(e).pipe((0,K.x)(()=>{this.messageService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"Mail \u0111\xe3 g\u1eedi th\xe0nh c\xf4ng"})})).subscribe(o=>console.log(o))}onDialogHide(){this.isEdit=!1}initData(){(0,Mt.D)({rooms:this.getRoomByAccomodation(),invoices:this.getReturnInvoiceByAccomodation()}).pipe((0,K.x)(()=>{this.loading=!1})).subscribe(e=>{this.rooms=e.rooms.data,this.invoices=e.invoices.data})}getDropdownAccomodation(){this.loading=!0,this.accomodationService.getDropdownAccomodation(this.user?.id).pipe((0,K.x)(()=>{this.selectedAccomodation=this.accomodations[0],this.initData()})).subscribe(e=>this.accomodations=e.data)}openNew(){this.returnRoom={},this.returnRoomForm.get("returnDate")?.setValue(ft(this.selectedMonth).toDate()),this.returnRoomForm.get("room")?.setValue(null),this.billDialog=!0}getRoomByAccomodation(){return this.roomService.getRoomRented(this.selectedAccomodation.id).pipe((0,K.x)(()=>{this.loading=!1}))}removeInvoice(e){this.loading=!0,this.billService.removeInvoice(e).pipe((0,K.x)(()=>{this.getReturnInvoiceByAccomodation().subscribe(o=>this.invoices=o.data)})).subscribe(o=>console.log(o))}onShowMenu(e){this.getMenuItems(e)}toggleMenu(e,o){e.toggle(o)}getMenuItems(e){return this.items=[{icon:"pi pi-pencil",label:"S\u1eeda ho\xe1 \u0111\u01a1n",command:o=>{this.isEdit=!0,this.getInvoiceDetail(o.item.data.id)}},{icon:"pi pi-check",label:"X\xe1c nh\u1eadn thanh to\xe1n",disabled:e.isPay,command:o=>{this.confirmPayment(o.item.data)}},{label:"G\u1eedi mail",icon:"pi pi-send",disabled:e.isPay,command:o=>{this.sendInvoiceMail(o.item.data.id)}}],this.items.forEach(o=>{o.data=e}),this.items}getInvoiceDetail(e){this.loading=!0,this.billService.getReturnInvoiceDetail(e).pipe((0,K.x)(()=>{this.loading=!1,this.editInvoice()})).subscribe(o=>this.invoice=o.data)}editInvoice(){this.invoiceDialog=!0,this.invoiceForm.get("totalService")?.setValue(this.invoice.totalService),this.invoiceForm.get("description")?.setValue(this.invoice.description),this.invoiceForm.get("discount")?.setValue(this.invoice.discount||0),this.invoiceForm.get("totalPrice")?.setValue(this.invoice.totalPrice),this.invoiceForm.get("paidMoney")?.setValue(this.invoice.paidMoney),this.invoiceForm.get("totalPayment")?.setValue(this.invoice.totalPayment),this.invoiceForm.get("debt")?.setValue(this.invoice.debt),this.invoiceForm.get("newDebt")?.setValue(this.invoice.newDebt);let e=this.invoice.totalPayment||0,o=this.invoice.totalPrice||0;this.invoiceForm.get("paidMoney")?.setValidators([E.kI.max(e)]),this.invoiceForm.get("discount")?.setValidators([E.kI.max(o)]),this.invoiceForm.get("paidMoney")?.updateValueAndValidity(),this.invoiceForm.get("discount")?.updateValueAndValidity()}onSelectAccomodation(){this.loading=!0,this.initData()}onHideDialog(){this.returnRoomForm.reset()}hideDialog(){this.billDialog=!1}setBillField(){this.invoiceForm.get("totalService")?.setValue(this.invoice.totalService),this.invoiceForm.get("description")?.setValue(this.invoice.description),this.invoiceForm.get("discount")?.setValue(this.invoice.discount||0),this.invoiceForm.get("totalPrice")?.setValue(this.invoice.totalPrice),this.invoiceForm.get("paidMoney")?.setValue(this.invoice.paidMoney),this.invoiceForm.get("totalPayment")?.setValue(this.invoice.totalPayment),this.invoiceForm.get("debt")?.setValue(this.invoice.debt),this.invoiceForm.get("newDebt")?.setValue(this.invoice.newDebt);let e=this.invoice.totalPayment||0,o=this.invoice.totalPrice||0;this.invoiceForm.get("paidMoney")?.setValidators([E.kI.max(e)]),this.invoiceForm.get("discount")?.setValidators([E.kI.max(o)]),this.invoiceForm.get("paidMoney")?.updateValueAndValidity(),this.invoiceForm.get("discount")?.updateValueAndValidity()}saveBill(){let e={roomId:this.returnRoom.room.id,returnDate:this.returnRoom.returnDate};this.issueLoading=!0,this.billService.returnRoom(e).pipe((0,K.x)(()=>{this.invoiceDialog=!0,this.issueLoading=!1,this.setBillField()})).subscribe(o=>this.invoice=o.data)}onGlobalFilter(e,o){e.filterGlobal(o.target.value,"contains")}get staticElectricPriceName(){return Dt.$.ELECTRIC_PRICE_NAME}get staticWaterPriceName(){return Dt.$.WATER_PRICE_NAME}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Pt.$),t.Y36(Yt),t.Y36(Te),t.Y36(Yo),t.Y36(ht.ez))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-return-room"]],features:[t._Bn([ht.ez])],decls:19,vars:19,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","dataKey","id",3,"value","rows","globalFilterFields","paginator","rowsPerPageOptions","rowHover"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Chi ti\u1ebft ch\u1ec9 s\u1ed1 \u0111i\u1ec7n n\u01b0\u1edbc",1,"p-fluid","return-room",3,"visible","modal","onHide","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","Xu\u1ea5t ho\xe1 \u0111\u01a1n",1,"p-fluid",3,"visible","modal","onHide","visibleChange"],["class","progress-spinner",4,"ngIf"],[1,"my-2"],["pButton","","pRipple","","label","Th\xeam","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],[1,"flex","justify-content-center"],["optionLabel","name","autoWidth","false",3,"options","ngModel","onChange","ngModelChange"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],["view","month","dateFormat","mm/yy","placeholder","Ch\u1ecdn th\xe1ng...",3,"ngModel","showIcon","onSelect","ngModelChange"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","T\xecm ki\u1ebfm...",1,"w-full","sm:w-auto",3,"input"],["pSortableColumn","name"],["field","name"],["pSortableColumn","month"],["field","month"],["pSortableColumn","representative"],["field","representative"],["pSortableColumn","totalPrice"],["field","totalPrice"],["pSortableColumn","debt"],["field","debt"],["pSortableColumn","totalPayment"],["field","totalPayment"],["pSortableColumn","paymentDate"],["field","paymentDate"],["pSortableColumn","isPay"],["field","isPay"],[2,"width","10%"],[2,"width","15%"],[4,"ngIf"],["severity","success","value","\u0110\xe3 thanh to\xe1n",4,"ngIf"],["severity","warning","value","Ch\u01b0a thanh to\xe1n",4,"ngIf"],["severity","success","value","\u0110\xe3 thanh to\xe1n"],["severity","warning","value","Ch\u01b0a thanh to\xe1n"],["severity","info","value","Ch\u01b0a xu\u1ea5t ho\xe1 \u0111\u01a1n"],[1,"flex","align-items-center",2,"position","relative"],[3,"model","popup","onShow"],["menu",""],["pButton","","type","button","pTooltip","T\xe1c v\u1ee5","tooltipPosition","top","icon","pi pi-bars",1,"p-button-rounded",3,"click"],[3,"formGroup"],[1,"field"],["for","room"],["appendTo","body","formControlName","room","optionLabel","name","placeholder","Ch\u1ecdn ph\xf2ng",3,"options","ngClass"],["class","ng-dirty ng-invalid",4,"ngIf"],["for","returnDate"],["appendTo","body","formControlName","returnDate"],[1,"ng-dirty","ng-invalid"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","loadingIcon","pi pi-spin pi-spinner","icon","pi pi-check",1,"p-button-text",3,"disabled","loading","click"],[1,"formgrid","grid"],[1,"field","col"],["for","name"],["pInputText",""],[3,"value"],[1,"field","col","mr-3"],["for","totalService"],["id","totalService","formControlName","totalService",1,"disabled",3,"readonly","ngClass"],["for","debt"],["id","debt","formControlName","debt",1,"disabled",3,"readonly","ngClass"],["for","totalPrice"],["id","totalPrice","formControlName","totalPrice",1,"disabled",3,"readonly","ngClass"],["for","discount"],["id","discount","formControlName","discount",3,"ngClass"],["for","totalPayment"],["id","totalPayment","formControlName","totalPayment",1,"disabled",3,"readonly","ngClass"],["for","description"],["type","text","pInputTextarea","","id","description","formControlName","description"],[2,"width","20%"],[2,"width","30%"],[4,"ngIf","ngIfElse"],["isCustomUnit",""],[1,"flex"],["pInputText","",1,"mr-3"],[1,"flex","justify-content-between"],[1,""],["pButton","","pRipple","","label","Xu\u1ea5t ho\xe1 \u0111\u01a1n","icon","pi pi-file-export","class","p-button-text",3,"click",4,"ngIf"],["pButton","","pRipple","","label","L\u01b0u","icon","pi pi-check","class","p-button-text",3,"click",4,"ngIf"],["pButton","","pRipple","","label","Xu\u1ea5t ho\xe1 \u0111\u01a1n","icon","pi pi-file-export",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","L\u01b0u","icon","pi pi-check",1,"p-button-text",3,"click"],[1,"progress-spinner"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"p-toast"),t.TgZ(4,"p-toolbar",3),t.YNc(5,yy,2,0,"ng-template",4),t.YNc(6,Ey,2,5,"ng-template",5),t.qZA(),t.TgZ(7,"p-table",6,7),t.YNc(9,by,8,2,"ng-template",8),t.YNc(10,xy,29,0,"ng-template",9),t.YNc(11,Fy,29,32,"ng-template",10),t.qZA()(),t.TgZ(12,"p-dialog",11),t.NdJ("onHide",function(){return o.onHideDialog()})("visibleChange",function(s){return o.billDialog=s}),t.YNc(13,Iy,10,6,"ng-template",12),t.YNc(14,Sy,2,3,"ng-template",13),t.qZA(),t.TgZ(15,"p-dialog",14),t.NdJ("onHide",function(){return o.onDialogHide()})("visibleChange",function(s){return o.invoiceDialog=s}),t.YNc(16,Ly,46,29,"ng-template",12),t.YNc(17,Hy,6,2,"ng-template",13),t.qZA()()(),t.YNc(18,Wy,2,0,"div",15)),2&e&&(t.xp6(7),t.Q6J("value",o.invoices)("rows",10)("globalFilterFields",t.DdM(15,Gy))("paginator",!0)("rowsPerPageOptions",t.DdM(16,Ky))("rowHover",!0),t.xp6(5),t.Akn(t.DdM(17,Yy)),t.Q6J("visible",o.billDialog)("modal",!0),t.xp6(3),t.Akn(t.DdM(18,Qy)),t.Q6J("visible",o.invoiceDialog)("modal",!0),t.xp6(3),t.Q6J("ngIf",o.loading))},dependencies:[bt.mk,bt.O5,ht.jx,Xt.Hq,Ce.u,ne.o,E._Y,E.Fj,E.JJ,E.JL,E.On,te.FN,pe.o,Ft.iA,Ft.lQ,Ft.fz,ie.V,re.Lt,Qo.g,ge.Rn,ee.G,E.sg,E.u,qe.f,mn.i,mi.v2,yn.V,bt.H9,bt.uU],styles:["app-return-room[_nghost-%COMP%]     .p-menu-overlay{position:absolute;top:45px!important;left:-60px!important}  .p-datatable .p-datatable-wrapper{overflow:unset!important}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.6}"]}),n})();var Pa=Et(5156),zy=Et(5121),$y=Et(7604);function Xy(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",13)(1,"button",14),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.openNew())}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("loading",e.addLoading)}}function tw(n,i){1&n&&(t.TgZ(0,"div",15)(1,"h5",16),t._uU(2,"B\xe0i \u0111\u0103ng \u0111ang ch\u1edd ki\u1ec3m duy\u1ec7t"),t.qZA()())}function ew(n,i){1&n&&t._UZ(0,"p-tag",36)}function nw(n,i){1&n&&t._UZ(0,"p-tag",37)}function iw(n,i){1&n&&t._UZ(0,"p-tag",38)}function ow(n,i){1&n&&t._UZ(0,"p-tag",39)}function rw(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",17),t._UZ(2,"img",18),t.TgZ(3,"div",19)(4,"div",20)(5,"div",21)(6,"div",22),t._uU(7),t.qZA(),t.ynx(8,23),t.YNc(9,ew,1,0,"p-tag",24),t.YNc(10,nw,1,0,"p-tag",25),t.YNc(11,iw,1,0,"p-tag",26),t.YNc(12,ow,1,0,"p-tag",27),t.BQk(),t.qZA(),t.TgZ(13,"div",28)(14,"span",29)(15,"span"),t._uU(16,"Di\u1ec7n t\xedch: "),t.qZA(),t.TgZ(17,"span",30),t._uU(18),t.qZA()()(),t.TgZ(19,"div",28)(20,"span",29)(21,"span"),t._uU(22,"Gi\xe1 thu\xea: "),t.qZA(),t.TgZ(23,"span",30),t._uU(24),t.ALo(25,"currency"),t.qZA()()(),t.TgZ(26,"div",28)(27,"span",29)(28,"span"),t._uU(29,"\u0110\u1ecba ch\u1ec9: "),t.qZA(),t.TgZ(30,"span",30),t._uU(31),t.qZA()()(),t.TgZ(32,"div",28)(33,"span",29)(34,"span"),t._uU(35,"Ng\xe0y \u0111\u0103ng: "),t.qZA(),t.TgZ(36,"span",30),t._uU(37),t.ALo(38,"date"),t.qZA()()()(),t.TgZ(39,"div",31)(40,"div",32)(41,"p-menu",33,34),t.NdJ("onShow",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.onShowMenu(s))}),t.qZA(),t.TgZ(43,"button",35),t.NdJ("click",function(r){t.CHM(e);const s=t.MAs(42),l=t.oxw();return t.KtG(l.toggleMenu(s,r))}),t.qZA()()()()()()}if(2&n){const e=i.$implicit,o=t.oxw();t.xp6(2),t.Q6J("src",(null==e.images[0]?null:e.images[0].imgUrl)||"assets/images/default-image-post.jpg",t.LSH)("alt",e.title),t.xp6(5),t.hij(" ",e.title," "),t.xp6(1),t.Q6J("ngSwitch",e.status),t.xp6(1),t.Q6J("ngSwitchCase","IN_PROGRESS"),t.xp6(1),t.Q6J("ngSwitchCase","APPROVED"),t.xp6(1),t.Q6J("ngSwitchCase","REJECTED"),t.xp6(1),t.Q6J("ngSwitchCase","REMOVED"),t.xp6(6),t.hij("",e.acreage," m\xb2"),t.xp6(6),t.Oqu(t.Dn7(25,14,e.price,"VND","symbol")),t.xp6(7),t.Oqu(e.address),t.xp6(6),t.Oqu(t.xi3(38,18,e.createdAt,"dd/MM/yyyy")),t.xp6(4),t.Q6J("model",o.items)("popup",!0)}}function sw(n,i){1&n&&(t.TgZ(0,"small",72),t._uU(1,"Vui l\xf2ng nh\u1eadp gi\xe1."),t.qZA())}function aw(n,i){1&n&&t._UZ(0,"p-tag",36)}function lw(n,i){1&n&&t._UZ(0,"p-tag",37)}function cw(n,i){1&n&&t._UZ(0,"p-tag",38)}function uw(n,i){1&n&&t._UZ(0,"p-tag",39)}function pw(n,i){1&n&&t._UZ(0,"p-tag",36)}function dw(n,i){1&n&&(t.TgZ(0,"small",72),t._uU(1,"Vui l\xf2ng nh\u1eadp di\u1ec7n t\xedch."),t.qZA())}function mw(n,i){1&n&&(t.TgZ(0,"small",72),t._uU(1,"Vui l\xf2ng nh\u1eadp s\u1ed1 ng\u01b0\u1eddi \u1edf t\u1ed1i \u0111a."),t.qZA())}function hw(n,i){1&n&&(t.TgZ(0,"small",72),t._uU(1,"Vui l\xf2ng ch\u1ecdn \u0111\u1ecba ch\u1ec9."),t.qZA())}function fw(n,i){1&n&&(t.TgZ(0,"small",72),t._uU(1,"Vui l\xf2ng ch\u1ecdn \u0111\u1ecba ch\u1ec9."),t.qZA())}function gw(n,i){1&n&&(t.TgZ(0,"small",72),t._uU(1,"Vui l\xf2ng nh\u1eadp ch\u1ecdn \u0111\u1ecba ch\u1ec9."),t.qZA())}function _w(n,i){1&n&&(t.TgZ(0,"small",72),t._uU(1,"Vui l\xf2ng nh\u1eadp ch\u1ecdn \u0111\u1ecba ch\u1ec9."),t.qZA())}function vw(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",74)(1,"div",75),t._UZ(2,"img",76),t.qZA(),t._UZ(3,"p-divider"),t.TgZ(4,"div",77)(5,"div",78)(6,"div")(7,"button",79),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw(3);return t.KtG(l.onDeleteImage(s.imageId))}),t.qZA()()()()()}if(2&n){const e=i.$implicit;t.xp6(2),t.Q6J("src",e.imgUrl,t.LSH)("alt",e)}}function yw(n,i){if(1&n&&(t.ynx(0),t.YNc(1,vw,8,2,"div",73),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.post.images)}}function ww(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",74)(1,"div",75),t._UZ(2,"img",76),t.qZA(),t._UZ(3,"p-divider"),t.TgZ(4,"div",77)(5,"div",78)(6,"div")(7,"button",79),t.NdJ("click",function(){const s=t.CHM(e).index,l=t.oxw(3);return t.KtG(l.deleteImage(s))}),t.qZA()()()()()}if(2&n){const e=i.$implicit;t.xp6(2),t.Q6J("src",e,t.LSH)("alt",e)}}function Ew(n,i){if(1&n&&(t.ynx(0),t.YNc(1,ww,8,2,"div",73),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.previewImage)}}const bw=function(){return{width:"100%"}},xw=function(){return{standalone:!0}},ze=function(n){return{"ng-invalid ng-dirty":n}},Tw=function(){return{height:"320px"}};function Cw(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"form",40)(1,"div",41)(2,"div",42)(3,"p-dropdown",43),t.NdJ("onChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onSelectAccomodation())})("ngModelChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.selectedAccomodation=r)}),t.qZA()(),t._UZ(4,"div",42),t.qZA(),t.TgZ(5,"div",44)(6,"label",45),t._uU(7,"Ti\xeau \u0111\u1ec1"),t.qZA(),t._UZ(8,"textarea",46),t.qZA(),t.TgZ(9,"div",41)(10,"div",42)(11,"label",47),t._uU(12,"Gi\xe1 ph\xf2ng (\u0111\u1ed3ng) "),t.TgZ(13,"span",48),t._uU(14,"*"),t.qZA()(),t.TgZ(15,"div",49),t._UZ(16,"p-inputNumber",50),t.qZA(),t.YNc(17,sw,2,0,"small",51),t.qZA(),t.TgZ(18,"div",42)(19,"div",42)(20,"label",52),t._uU(21,"Tr\u1ea1ng th\xe1i"),t.qZA(),t.TgZ(22,"div",53),t.ynx(23,23),t.YNc(24,aw,1,0,"p-tag",24),t.YNc(25,lw,1,0,"p-tag",25),t.YNc(26,cw,1,0,"p-tag",26),t.YNc(27,uw,1,0,"p-tag",27),t.YNc(28,pw,1,0,"p-tag",54),t.BQk(),t.qZA()()()(),t.TgZ(29,"div",41)(30,"div",42)(31,"label",47),t._uU(32,"Di\u1ec7n t\xedch "),t.TgZ(33,"span",48),t._uU(34,"*"),t.qZA()(),t.TgZ(35,"div",49),t._UZ(36,"p-inputNumber",55),t.qZA(),t.YNc(37,dw,2,0,"small",51),t.qZA(),t.TgZ(38,"div",42)(39,"label",47),t._uU(40,"S\u1ed1 ng\u01b0\u1eddi \u1edf t\u1ed1i \u0111a "),t.TgZ(41,"span",48),t._uU(42,"*"),t.qZA()(),t.TgZ(43,"div",49),t._UZ(44,"p-inputNumber",56),t.qZA(),t.YNc(45,mw,2,0,"small",51),t.qZA()(),t.TgZ(46,"div",41)(47,"div",42)(48,"label",57),t._uU(49,"T\u1ec9nh/Th\xe0nh ph\u1ed1 "),t.TgZ(50,"span",48),t._uU(51,"*"),t.qZA()(),t.TgZ(52,"div",49)(53,"p-dropdown",58),t.NdJ("onChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.getDistrictByProvince())}),t.qZA()(),t.YNc(54,hw,2,0,"small",51),t.qZA(),t.TgZ(55,"div",42)(56,"label",59),t._uU(57,"Qu\u1eadn/Huy\u1ec7n "),t.TgZ(58,"span",48),t._uU(59,"*"),t.qZA()(),t.TgZ(60,"div",49)(61,"p-dropdown",60),t.NdJ("onChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.getWardByDistrict())}),t.qZA()(),t.YNc(62,fw,2,0,"small",51),t.qZA()(),t.TgZ(63,"div",41)(64,"div",42)(65,"label",61),t._uU(66,"Ph\u01b0\u1eddng/X\xe3 "),t.TgZ(67,"span",48),t._uU(68,"*"),t.qZA()(),t.TgZ(69,"div",49),t._UZ(70,"p-dropdown",62),t.qZA(),t.YNc(71,gw,2,0,"small",51),t.qZA(),t.TgZ(72,"div",42)(73,"label",63),t._uU(74,"S\u1ed1 nh\xe0, t\xean \u0111\u01b0\u1eddng "),t.TgZ(75,"span",48),t._uU(76,"*"),t.qZA()(),t.TgZ(77,"div",49),t._UZ(78,"input",64),t.qZA(),t.YNc(79,_w,2,0,"small",51),t.qZA()(),t.TgZ(80,"div",44)(81,"label"),t._uU(82,"N\u1ed9i dung"),t.qZA(),t.TgZ(83,"div",65),t._UZ(84,"p-editor",66),t.qZA()(),t.TgZ(85,"div",41)(86,"div",42)(87,"div",65),t.YNc(88,yw,2,1,"ng-container",67),t.YNc(89,Ew,2,1,"ng-container",67),t.qZA()()(),t.TgZ(90,"div",44)(91,"div",68)(92,"input",69),t.NdJ("change",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.selectFile(r))}),t.qZA(),t.TgZ(93,"label",70)(94,"div")(95,"span",71),t._uU(96," Th\xeam \u1ea3nh "),t.qZA()()()()()()}if(2&n){const e=t.oxw();let o,r,s,l,a,p,_;t.Q6J("formGroup",e.postForm),t.xp6(3),t.Akn(t.DdM(37,bw)),t.Q6J("options",e.accomodations)("ngModel",e.selectedAccomodation)("ngModelOptions",t.DdM(38,xw)),t.xp6(13),t.Q6J("ngClass",t.VKq(39,ze,e.postForm.controls.price.invalid&&(e.postForm.controls.price.dirty||e.postForm.controls.price.touched))),t.xp6(1),t.Q6J("ngIf",(null==(o=e.postForm.get("price"))?null:o.invalid)&&(e.postForm.controls.price.dirty||e.postForm.controls.price.touched)),t.xp6(6),t.Q6J("ngSwitch",e.post.status),t.xp6(1),t.Q6J("ngSwitchCase","IN_PROGRESS"),t.xp6(1),t.Q6J("ngSwitchCase","APPROVED"),t.xp6(1),t.Q6J("ngSwitchCase","REJECTED"),t.xp6(1),t.Q6J("ngSwitchCase","REMOVED"),t.xp6(9),t.Q6J("ngClass",t.VKq(41,ze,e.postForm.controls.acreage.invalid&&(e.postForm.controls.acreage.dirty||e.postForm.controls.acreage.touched))),t.xp6(1),t.Q6J("ngIf",(null==(r=e.postForm.get("acreage"))?null:r.invalid)&&(e.postForm.controls.acreage.dirty||e.postForm.controls.acreage.touched)),t.xp6(7),t.Q6J("ngClass",t.VKq(43,ze,e.postForm.controls.capacity.invalid&&(e.postForm.controls.capacity.dirty||e.postForm.controls.capacity.touched))),t.xp6(1),t.Q6J("ngIf",(null==(s=e.postForm.get("capacity"))?null:s.invalid)&&(e.postForm.controls.capacity.dirty||e.postForm.controls.capacity.touched)),t.xp6(8),t.Q6J("readonly",!0)("options",e.provices)("ngClass",t.VKq(45,ze,e.postForm.controls.province.invalid&&(e.postForm.controls.province.dirty||e.postForm.controls.province.touched))),t.xp6(1),t.Q6J("ngIf",(null==(l=e.postForm.get("province"))?null:l.invalid)&&(e.postForm.controls.province.dirty||e.postForm.controls.province.touched)),t.xp6(7),t.Q6J("readonly",!0)("options",e.districts)("ngClass",t.VKq(47,ze,e.postForm.controls.district.invalid&&(e.postForm.controls.district.dirty||e.postForm.controls.district.touched))),t.xp6(1),t.Q6J("ngIf",(null==(a=e.postForm.get("district"))?null:a.invalid)&&(e.postForm.controls.district.dirty||e.postForm.controls.district.touched)),t.xp6(8),t.Q6J("readonly",!0)("options",e.wards)("ngClass",t.VKq(49,ze,e.postForm.controls.ward.invalid&&(e.postForm.controls.ward.dirty||e.postForm.controls.ward.touched))),t.xp6(1),t.Q6J("ngIf",(null==(p=e.postForm.get("ward"))?null:p.invalid)&&(e.postForm.controls.ward.dirty||e.postForm.controls.ward.touched)),t.xp6(7),t.Q6J("readonly",!0)("ngClass",t.VKq(51,ze,e.postForm.controls.addressLine.invalid&&(e.postForm.controls.addressLine.dirty||e.postForm.controls.addressLine.touched))),t.xp6(1),t.Q6J("ngIf",(null==(_=e.postForm.get("addressLine"))?null:_.invalid)&&(e.postForm.controls.addressLine.dirty||e.postForm.controls.addressLine.touched)),t.xp6(5),t.Akn(t.DdM(53,Tw)),t.xp6(4),t.Q6J("ngIf",null==e.post.images?null:e.post.images.length),t.xp6(1),t.Q6J("ngIf",e.previewImage.length),t.xp6(3),t.Q6J("multiple",!0)}}function Aw(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",80),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.postDialog=!1)}),t.qZA(),t.TgZ(1,"button",81),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.savePost())}),t.qZA()}}function Nw(n,i){1&n&&(t.TgZ(0,"div",82),t._UZ(1,"p-progressSpinner"),t.qZA())}const Dw=function(){return{width:"1150px"}};let Fw=(()=>{class n{constructor(e,o,r,s,l,a){this.accomodationService=e,this.auth=o,this.messageService=r,this.postService=s,this.roomService=l,this.addressService=a,this.invoiceDialog=!1,this.accomodations=[],this.posts=[],this.post={},this.rowsPerPageOptions=[5,10,20],this.dataLoading=!1,this.loading=!1,this.postDialog=!1,this.services=[],this.servicesDisplayed=[],this.selectedServices=[],this.contractInfoLoading=!1,this.items=[],this.deleteImageDialog=!1,this.deleteLoading=!1,this.gender=Dt.$.GENDER,this.provices=[],this.districts=[],this.wards=[],this.existingWard={},this.previewImage=[],this.selectedFiles=[],this.addLoading=!1,this.postForm=new E.cw({title:new E.NI(this.post.title,[E.kI.required]),content:new E.NI(this.post.content,[E.kI.required]),price:new E.NI(this.post.price,[E.kI.required]),acreage:new E.NI(this.post.acreage,[]),capacity:new E.NI(this.post.capacity,[]),status:new E.NI(this.post.status,[]),province:new E.NI(this.post.province,[E.kI.required]),district:new E.NI(this.post.district,[E.kI.required]),ward:new E.NI(this.post.ward,[E.kI.required]),addressLine:new E.NI(this.post.addressLine,[E.kI.required])}),this.responsiveOptions=[{breakpoint:"1024px",numVisible:5},{breakpoint:"768px",numVisible:3},{breakpoint:"560px",numVisible:1}]}ngOnInit(){this.user=this.auth.userValue,this.initData(),this.postForm.get("title")?.valueChanges.subscribe(e=>{this.post.title=e}),this.postForm.get("content")?.valueChanges.subscribe(e=>{this.post.content=e}),this.postForm.get("price")?.valueChanges.subscribe(e=>{this.post.price=e}),this.postForm.get("acreage")?.valueChanges.subscribe(e=>{this.post.acreage=e}),this.postForm.get("capacity")?.valueChanges.subscribe(e=>{this.post.capacity=e}),this.postForm.get("province")?.valueChanges.subscribe(e=>{e&&(this.post.province=e.name,this.post.provinceCode=e.code,this.selectedProvince=e.code)}),this.postForm.get("district")?.valueChanges.subscribe(e=>{e&&(this.post.district=e.name,this.post.districtCode=e.code,this.selectedDistrict=e.code)}),this.postForm.get("ward")?.valueChanges.subscribe(e=>{e&&(this.post.ward=e.name,this.post.wardCode=e.code)}),this.postForm.get("addressLine")?.valueChanges.subscribe(e=>{e&&(this.post.addressLine=e)})}getAccomodationsByUser(){return this.dataLoading=!0,this.accomodationService.getAccomodationByUserId(this.user?.id).pipe((0,K.x)(()=>{this.dataLoading=!1}))}getWardByDistrict(){this.wards=[],this.addressService.getWardByDistrict(this.selectedDistrict).subscribe(e=>this.wards=e.wards)}getDistrictByProvince(){this.districts=[],this.wards=[],this.addressService.getDistrictByProvince(this.selectedProvince).subscribe(e=>this.districts=e.districts)}getProvinces(){return this.addressService.getAllProvinces().pipe((0,K.x)(()=>this.selectedProvince=this.provices[0]))}getFullAddress(){return(0,Mt.D)({districts:this.addressService.getDistrictByProvince(this.selectedAccomodation.provinceCode),wards:this.addressService.getWardByDistrict(this.selectedAccomodation.districtCode)})}findAddressByName(e,o){return o.find(r=>r.code===e)}openNew(){this.post={},this.existingProvince=this.findAddressByName(this.selectedAccomodation.provinceCode,this.provices),this.postForm.get("province")?.setValue(this.existingProvince),this.postForm.get("addressLine")?.setValue(this.selectedAccomodation.addressLine),this.addLoading=!0,this.getFullAddress().pipe((0,K.x)(()=>{this.existingDistrict=this.findAddressByName(this.selectedAccomodation.districtCode,this.districts),this.existingWard=this.findAddressByName(this.selectedAccomodation.wardCode,this.wards),this.postForm.get("district")?.setValue(this.existingDistrict),this.postForm.get("ward")?.setValue(this.existingWard),this.addLoading=!1,this.postDialog=!0})).subscribe(e=>{this.districts=e.districts.districts,this.wards=e.wards.wards})}onShowMenu(e){this.getMenuItems(e)}onMoveBackService(e){e.items.forEach(o=>o.quantity=1)}getMenuItems(e){return this.items=[{icon:"pi pi-pencil",label:"S\u1eeda b\xe0i \u0111\u0103ng",command:o=>{this.editPost(o.item.data)}},{icon:"pi pi-check",label:"G\u1ee1 b\xe0i",visible:"APPROVED"===e.status,command:o=>{this.post={...o.item.data},this.changeStatusPost({postId:this.post.id,status:"REMOVED"})}},{icon:"pi pi-check",label:"\u0110\u0103ng b\xe0i",visible:"REMOVED"===e.status||"REJECTED"===e.status,command:o=>{this.post={...o.item.data},this.changeStatusPost({postId:this.post.id,status:"IN_PROGRESS"})}},{label:"Xo\xe1",icon:"pi pi-trash",command:o=>{this.post={...o.item.data},this.removePost()}}],this.items.forEach(o=>{o.data=e}),this.items}changeStatusPost(e){let o;switch(this.loading=!0,e.status){case"REMOVED":o="G\u1ee1 b\xe0i th\xe0nh c\xf4ng";break;case"IN_PROGRESS":o="\u0110\u0103ng b\xe0i th\xe0nh c\xf4ng"}this.postService.changeStatusPost(e).pipe((0,K.x)(()=>{this.initData(),this.post={},this.messageService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:o,life:3e3})})).subscribe()}toggleMenu(e,o){e.toggle(o)}removePost(){this.loading=!0,this.postService.removePost(this.post.id).pipe((0,K.x)(()=>{this.initData(),this.post={},this.messageService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"Xo\xe1 th\xe0nh c\xf4ng",life:3e3})})).subscribe()}getDropdownAccomodation(){return this.loading=!0,this.accomodationService.getDropdownAccomodation(this.user?.id)}initData(){(0,Mt.D)({posts:this.getPostByAccomodation(),accomodations:this.getDropdownAccomodation(),provinces:this.getProvinces()}).pipe((0,K.x)(()=>{this.loading=!1,this.selectedAccomodation=this.accomodations[0]})).subscribe(e=>{this.posts=e.posts.data,this.provices=e.provinces,this.accomodations=e.accomodations.data})}getAccomdationService(){return this.accomodationService.getAccomodationService(this.selectedAccomodation.id)}getRoomNoPostAndDeposit(){return this.roomService.getRoomNoPostAndDeposit(this.selectedAccomodation.id)}getPostByAccomodation(){return this.postService.getByUserId(this.user?.id)}onSelectAccomodation(){console.log(this.selectedAccomodation),this.existingProvince=this.findAddressByName(this.selectedAccomodation.provinceCode,this.provices),this.postForm.get("province")?.setValue(this.existingProvince),this.postForm.get("addressLine")?.setValue(this.selectedAccomodation.addressLine),this.loading=!0,this.getFullAddress().pipe((0,K.x)(()=>{this.existingDistrict=this.findAddressByName(this.selectedAccomodation.districtCode,this.districts),this.existingWard=this.findAddressByName(this.selectedAccomodation.wardCode,this.wards),this.postForm.get("district")?.setValue(this.existingDistrict),this.postForm.get("ward")?.setValue(this.existingWard),this.loading=!1,this.postDialog=!0})).subscribe(e=>{this.districts=e.districts.districts,this.wards=e.wards.wards})}hideDialog(){this.invoiceDialog=!1}savePost(){if(console.log(this.post),this.postForm.invalid)this.postForm.markAllAsTouched();else{let e;this.loading=!0,e=this.post.id?"Ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng":"Th\xeam th\xe0nh c\xf4ng",this.post.userId=this.user?.id;const o=new FormData;for(let r=0;r<this.selectedFiles.length;r++)o.append("file",this.selectedFiles[r]);o.append("data",JSON.stringify(this.post)),console.log(o),this.postService.savePost(o).pipe((0,K.x)(()=>{this.initData(),this.post={},this.previewImage=[],this.selectedFiles=[],this.postDialog=!1,this.messageService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:e,life:3e3})})).subscribe()}}getById(e,o){return Object.assign({},o.find(s=>s.id===e))}editPost(e){this.post={...e},this.postForm.get("title")?.setValue(this.post.title),this.postForm.get("content")?.setValue(this.post.content),this.postForm.get("price")?.setValue(this.post.price),this.postForm.get("acreage")?.setValue(this.post.acreage),this.postForm.get("capacity")?.setValue(this.post.capacity),this.postForm.get("status")?.setValue(this.post.status),this.existingProvince=this.findAddressByName(this.selectedAccomodation.provinceCode,this.provices),this.postForm.get("province")?.setValue(this.existingProvince),this.postForm.get("addressLine")?.setValue(this.selectedAccomodation.addressLine),this.loading=!0,this.getFullAddress().pipe((0,K.x)(()=>{this.existingDistrict=this.findAddressByName(this.selectedAccomodation.districtCode,this.districts),this.existingWard=this.findAddressByName(this.selectedAccomodation.wardCode,this.wards),this.postForm.get("district")?.setValue(this.existingDistrict),this.postForm.get("ward")?.setValue(this.existingWard),this.loading=!1,this.postDialog=!0})).subscribe(o=>{this.districts=o.districts.districts,this.wards=o.wards.wards})}onHideDialog(){this.selectedServices=[],this.previewImage=[],this.selectedFiles=[],this.servicesDisplayed=JSON.parse(JSON.stringify(this.services)),this.postForm.reset()}getImagesByPost(){this.loading=!0,this.postService.getImageByPost(this.post.id).pipe((0,K.x)(()=>{this.loading=!1,this.deleteLoading=!1})).subscribe(e=>this.post.images=e.data)}removeImageByPost(e){this.post.images=this.post.images?.filter(o=>o.imageId!==e)}onDeleteImage(e){this.deleteLoading=!0,this.postService.removeImage(e).pipe((0,K.x)(()=>{this.removeImageByPost(e)})).subscribe()}onUpload(e){console.log(e),this.getImagesByPost()}deleteImage(e){this.previewImage.splice(e,1),this.selectedFiles.splice(e,1),this.post&&console.log("next")}selectFile(e){const o=e.target.files;if(o)for(let r=0;r<o.length;r++){const s=o[r];if(this.selectedFiles.push(s),s){this.currentFile=s;const l=new FileReader;l.onload=a=>{this.previewImage.push(a.target.result),console.log(this.previewImage)},l.readAsDataURL(this.currentFile)}}}onGlobalFilter(e,o){e.filterGlobal(o.target.value,"contains")}get staticElectricPriceName(){return Dt.$.ELECTRIC_PRICE_NAME}get staticWaterPriceName(){return Dt.$.WATER_PRICE_NAME}getStaticEletricName(){return Dt.$.ELECTRIC_PRICE_NAME}getStaticWaterName(){return Dt.$.WATER_PRICE_NAME}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Yt),t.Y36(Pt.$),t.Y36(ht.ez),t.Y36(Pa.L),t.Y36(Te),t.Y36(or.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-post"]],features:[t._Bn([ht.ez])],decls:15,vars:7,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],[3,"value"],["dv",""],["pTemplate","caption"],["pTemplate","listItem"],["header","Qu\u1ea3n l\xfd b\xe0i \u0111\u0103ng",1,"p-fluid",3,"visible","modal","onHide","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["class","progress-spinner",4,"ngIf"],[1,"my-2"],["pButton","","pRipple","","label","Th\xeam","icon","pi pi-plus",1,"p-button-success","mr-2",3,"loading","click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"flex","flex-column","xl:flex-row","xl:align-items-start","p-4","gap-4"],[1,"w-9","sm:w-16rem","xl:w-10rem","shadow-2","block","xl:block","mx-auto","border-round",3,"src","alt"],[1,"flex","flex-column","sm:flex-row","justify-content-between","align-items-center","xl:align-items-start","flex-1","gap-4"],[1,"flex","flex-column","align-items-center","sm:align-items-start","gap-3"],[1,"flex","align-items-center","text-2xl","font-bold","text-900"],[1,"mr-3"],[3,"ngSwitch"],["severity","info","value","\u0110ang ch\u1edd duy\u1ec7t",4,"ngSwitchCase"],["severity","success","value","\u0110\xe3 duy\u1ec7t b\xe0i",4,"ngSwitchCase"],["severity","danger","value","\u0110\xe3 kho\xe1",4,"ngSwitchCase"],["severity","info","value","\u0110\xe3 g\u1ee1 b\xe0i",4,"ngSwitchCase"],[1,"flex","align-items-center","gap-3"],[1,"flex","align-items-center","gap-2"],[1,"font-semibold"],[1,"flex","sm:flex-column","align-items-center","sm:align-items-end","gap-3","sm:gap-2"],[1,"flex","align-items-center",2,"position","relative"],["appendTo","body",3,"model","popup","onShow"],["menu",""],["pButton","","type","button","pTooltip","T\xe1c v\u1ee5","tooltipPosition","top","icon","pi pi-bars",1,"p-button-rounded",3,"click"],["severity","info","value","\u0110ang ch\u1edd duy\u1ec7t"],["severity","success","value","\u0110\xe3 duy\u1ec7t b\xe0i"],["severity","danger","value","\u0110\xe3 kho\xe1"],["severity","info","value","\u0110\xe3 g\u1ee1 b\xe0i"],[3,"formGroup"],[1,"formgrid","grid"],[1,"field","col"],["optionLabel","name","autoWidth","false",3,"options","ngModel","ngModelOptions","onChange","ngModelChange"],[1,"field"],["for","title"],["type","text","pInputTextarea","","id","title","formControlName","title"],["for","price"],[1,"mandatory-sign"],[1,"input-box"],["id","price","formControlName","price",3,"ngClass"],["class","ng-dirty ng-invalid",4,"ngIf"],["for","dayNumber"],["pInputText","",2,"padding-top","9px","padding-bottom","9px"],["severity","info","value","\u0110ang ch\u1edd duy\u1ec7t",4,"ngSwitchDefault"],["id","price","formControlName","acreage","mode","decimal","suffix","m\xb2",3,"ngClass"],["id","price","formControlName","capacity",3,"ngClass"],["for","province"],["appendTo","body","placeholder","T\u1ec9nh/Th\xe0nh ph\u1ed1","formControlName","province","optionLabel","name",3,"readonly","options","ngClass","onChange"],["for","district"],["appendTo","body","placeholder","Qu\u1eadn/Huy\u1ec7n","formControlName","district","optionLabel","name",3,"readonly","options","ngClass","onChange"],["for","ward"],["appendTo","body","formControlName","ward","placeholder","Ph\u01b0\u1eddng/X\xe3","optionLabel","name",3,"readonly","options","ngClass"],["for","address_line"],["pInputText","","formControlName","addressLine",3,"readonly","ngClass"],[1,"card"],["formControlName","content"],[4,"ngIf"],[1,"formbold-mb-5","formbold-file-input"],["type","file","name","file","id","file",3,"multiple","change"],["for","file"],[1,"formbold-browse"],[1,"ng-dirty","ng-invalid"],["class","card m-3 border-1 surface-border",4,"ngFor","ngForOf"],[1,"card","m-3","border-1","surface-border"],[1,"flex","flex-column","align-items-center","text-center","mb-3"],[1,"w-4","shadow-2","my-3","mx-0",3,"src","alt"],[1,"flex","justify-content-center"],[1,"flex"],["pButton","","pRipple","","label","Xo\xe1","icon","pi pi-delete-left",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"click"],[1,"progress-spinner"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"p-toast"),t.TgZ(4,"p-toolbar",3),t.YNc(5,Xy,2,1,"ng-template",4),t.qZA(),t.TgZ(6,"p-dataView",5,6)(8,"p-toolbar",3),t.YNc(9,tw,3,0,"ng-template",7),t.qZA(),t.YNc(10,rw,44,21,"ng-template",8),t.qZA()(),t.TgZ(11,"p-dialog",9),t.NdJ("onHide",function(){return o.onHideDialog()})("visibleChange",function(s){return o.postDialog=s}),t.YNc(12,Cw,97,54,"ng-template",10),t.YNc(13,Aw,2,0,"ng-template",11),t.qZA()()(),t.YNc(14,Nw,2,0,"div",12)),2&e&&(t.xp6(6),t.Q6J("value",o.posts),t.xp6(5),t.Akn(t.DdM(6,Dw)),t.Q6J("visible",o.postDialog)("modal",!0),t.xp6(3),t.Q6J("ngIf",o.loading))},dependencies:[bt.mk,bt.sg,bt.O5,bt.RF,bt.n9,bt.ED,zy.ML,ht.jx,Xt.Hq,Ce.u,$y.VO,ne.o,E._Y,E.Fj,E.JJ,E.JL,E.On,te.FN,pe.o,ie.V,re.Lt,Qo.g,ge.Rn,ee.G,E.sg,E.u,mn.i,mi.v2,yn.V,bt.H9,bt.uU],styles:["app-post[_nghost-%COMP%]     .p-menu-overlay{position:absolute;top:45px!important;left:-60px!important}  .p-datatable .p-datatable-wrapper{overflow:unset!important}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.6}  .p-picklist-buttons.p-picklist-target-controls,   .p-picklist-buttons.p-picklist-source-controls{display:none}  .p-picklist-item:not(.cdk-drag-disabled){cursor:move;z-index:10000!important}.formbold-mb-5[_ngcontent-%COMP%]{margin-bottom:20px}.formbold-file-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;position:absolute;width:100%;height:100%}.formbold-file-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:relative;border:1px dashed #e0e0e0;border-radius:6px;min-height:200px;display:flex;align-items:center;justify-content:center;padding:48px;text-align:center}.formbold-browse[_ngcontent-%COMP%]{font-weight:500;font-size:16px;color:#07074d;display:inline-block;padding:8px 28px;border:1px solid #e0e0e0;border-radius:4px}"]}),n})();var Zw=Et(1290);function Iw(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",14)(1,"h5",15),t._uU(2,"Th\xf4ng b\xe1o \u0111\u1eb7t ph\xf2ng"),t.qZA(),t.TgZ(3,"span",16),t._UZ(4,"i",17),t.TgZ(5,"input",18),t.NdJ("input",function(r){t.CHM(e);const s=t.oxw(),l=t.MAs(5);return t.KtG(s.onGlobalFilter(l,r))}),t.qZA()()()}}function Sw(n,i){1&n&&(t.TgZ(0,"tr")(1,"th",19),t._uU(2,"Khu tr\u1ecd"),t._UZ(3,"p-sortIcon",20),t.qZA(),t.TgZ(4,"th",21),t._uU(5,"Ng\u01b0\u1eddi \u0111\u1eb7t"),t._UZ(6,"p-sortIcon",22),t.qZA(),t.TgZ(7,"th",23),t._uU(8,"Email"),t._UZ(9,"p-sortIcon",24),t.qZA(),t.TgZ(10,"th",25),t._uU(11,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),t._UZ(12,"p-sortIcon",26),t.qZA(),t.TgZ(13,"th",27),t._uU(14,"Ng\xe0y xem ph\xf2ng"),t._UZ(15,"p-sortIcon",28),t.qZA(),t.TgZ(16,"th",29),t._uU(17,"Ng\xe0y \u0111\u1eb7t"),t._UZ(18,"p-sortIcon",30),t.qZA(),t._UZ(19,"th"),t.qZA())}function kw(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",32)(2,"p-menu",33,34),t.NdJ("onShow",function(){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw();return t.KtG(s.onShowMenu(r))}),t.qZA(),t.TgZ(4,"button",35),t.NdJ("click",function(r){t.CHM(e);const s=t.MAs(3),l=t.oxw(2);return t.KtG(l.toggleMenu(s,r))}),t.qZA()(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("model",e.items)("popup",!0)}}function Rw(n,i){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.ALo(14,"date"),t.qZA(),t.TgZ(15,"td"),t.YNc(16,kw,5,2,"ng-container",31),t.qZA()()),2&n){const e=i.$implicit;t.xp6(2),t.Oqu(e.accomodation),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.email),t.xp6(2),t.Oqu(e.phone),t.xp6(2),t.Oqu(t.xi3(11,7,e.reviewDate,"dd/MM/yyyy, HH:mm")),t.xp6(3),t.Oqu(t.xi3(14,10,e.createdDate,"dd/MM/yyyy, HH:mm")),t.xp6(3),t.Q6J("ngIf",e.id)}}function qw(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"Vui l\xf2ng ch\u1ecdn ph\xf2ng."),t.qZA())}function Uw(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"Ph\xf2ng \u0111\xe3 \u0111\u01b0\u1ee3c \u0111\u1eb7t c\u1ecdc, kh\xe1ch thu\xea \u0111\xe3 \u0111\u1eb7t c\u1ecdc c\u1ea7n trong m\u1ee5c kh\xe1ch thu\xea \u0111\u01b0\u1ee3c ch\u1ecdn."),t.qZA())}function Mw(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"S\u1ed1 l\u01b0\u1ee3ng kh\xe1ch thu\xea v\u01b0\u1ee3t qu\xe1 s\u1ed1 l\u01b0\u1ee3ng kh\xe1ch \u1edf t\u1ed1i \u0111a trong ph\xf2ng."),t.qZA())}function Bw(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"label"),t._uU(2,"Gi\xe1"),t.qZA(),t.TgZ(3,"div",77),t._uU(4),t.ALo(5,"currency"),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(4),t.Oqu(t.xi3(5,1,e.contract.room.price,"VND"))}}function Pw(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"label"),t._uU(2,"S\u1ed1 ng\u01b0\u1eddi \u1edf t\u1ed1i \u0111a"),t.qZA(),t.TgZ(3,"div",77),t._uU(4),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(4),t.Oqu(e.contract.room.capacity)}}function Ow(n,i){if(1&n&&(t.TgZ(0,"div",78)(1,"div",79)(2,"span",73),t._uU(3),t.qZA()(),t._UZ(4,"div"),t.qZA()),2&n){const e=i.$implicit;t.xp6(3),t.AsE("",e.firstName," ",e.lastName,"")}}const gi=function(){return{standalone:!0}};function Lw(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",79)(1,"span"),t._uU(2,"S\u1ed1 l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(3,"p-inputNumber",81),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw().$implicit;return t.KtG(s.quantity=r)}),t.qZA()()}if(2&n){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(3),t.Q6J("disabled",e.name===o.getStaticEletricName()||e.name===o.getStaticWaterName())("ngModel",e.quantity)("ngModelOptions",t.DdM(3,gi))}}function Vw(n,i){if(1&n&&(t.TgZ(0,"div",78)(1,"div",79)(2,"span"),t._uU(3),t.qZA()(),t.TgZ(4,"div",79)(5,"span"),t._uU(6),t.ALo(7,"currency"),t.qZA()(),t.TgZ(8,"div",79)(9,"span"),t._uU(10),t.qZA()(),t.YNc(11,Lw,4,4,"div",80),t.qZA()),2&n){const e=i.$implicit,o=t.oxw(2);t.ekj("disabled",e.disabled),t.xp6(3),t.Oqu(e.name),t.xp6(3),t.Oqu(t.Dn7(7,6,e.price,"VND","symbol")),t.xp6(4),t.Oqu(e.unit),t.xp6(1),t.Q6J("ngIf",o.selectedServices.includes(e)&&"Ti\u1ec1n \u0111i\u1ec7n"!==e.name&&"Ti\u1ec1n n\u01b0\u1edbc"!==e.name)}}function Jw(n,i){if(1&n&&t._uU(0),2&n){const e=i.$implicit;t.AsE(" ",e.firstName," ",e.lastName," ")}}function Hw(n,i){if(1&n&&(t.TgZ(0,"div",82)(1,"div"),t._uU(2),t.qZA()()),2&n){const e=i.$implicit;t.xp6(2),t.AsE("",e.firstName," ",e.lastName,"")}}function Ww(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"Vui l\xf2ng ch\u1ecdn ng\u01b0\u1eddi \u0111\u1ea1i di\u1ec7n."),t.qZA())}function Gw(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"Vui l\xf2ng ch\u1ecdn k\xec h\u1ea1n h\u1ee3p \u0111\u1ed3ng."),t.qZA())}function Kw(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"Vui l\xf2ng ch\u1ecdn ng\xe0y b\u1eaft \u0111\u1ea7u h\u1ee3p \u0111\u1ed3ng."),t.qZA())}function Yw(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"Vui l\xf2ng nh\u1eadp ti\u1ec1n \u0111\u1eb7t c\u1ecdc."),t.qZA())}function Qw(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n \u0111\u1ea7u."),t.qZA())}function jw(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n cu\u1ed1i."),t.qZA())}function zw(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"label",74),t._uU(2,"Ti\u1ec1n c\u1ecdc gi\u1eef ph\xf2ng (\u0111\u1ed3ng)"),t.qZA(),t.TgZ(3,"div",63),t._uU(4),t.ALo(5,"currency"),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(4),t.hij(" ",t.Dn7(5,1,e.contract.keepRoomDeposit||0,"VND","symbol")," ")}}const er=function(){return{width:"100%"}},Jt=function(n){return{"ng-invalid ng-dirty":n}},_i=function(){return{height:"15rem"}};function $w(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"form",36)(1,"div",37)(2,"div",38)(3,"label",39),t._uU(4,"Khu tr\u1ecd "),t.TgZ(5,"span",40),t._uU(6,"*"),t.qZA()(),t.TgZ(7,"p-dropdown",41),t.NdJ("onChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onSelectAccomodation())})("ngModelChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.selectedAccomodation=r)}),t.qZA()(),t.TgZ(8,"div",38)(9,"label",39),t._uU(10,"Ph\xf2ng "),t.TgZ(11,"span",40),t._uU(12,"*"),t.qZA()(),t.TgZ(13,"div",42)(14,"p-dropdown",43),t.NdJ("onChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onChangeRoom())}),t.qZA()(),t.YNc(15,qw,2,0,"small",44),t.YNc(16,Uw,2,0,"small",44),t.YNc(17,Mw,2,0,"small",44),t.qZA(),t.TgZ(18,"div",38),t.YNc(19,Bw,6,4,"ng-container",31),t.qZA(),t.TgZ(20,"div",38),t.YNc(21,Pw,5,1,"ng-container",31),t.qZA()(),t.TgZ(22,"p-tabView")(23,"p-tabPanel",45)(24,"div",46)(25,"div")(26,"button",47),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.newTenant())}),t.qZA()()(),t.TgZ(27,"p-pickList",48),t.NdJ("onMoveToTarget",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onMoveTenant())})("onMoveAllToTarget",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onMoveTenant())})("onMoveToSource",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onMoveBackTenant())})("onMoveAllToSource",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onMoveBackTenant())}),t.YNc(28,Ow,5,2,"ng-template",49),t.qZA()(),t.TgZ(29,"p-tabPanel",50)(30,"p-pickList",51),t.NdJ("onMoveAllToSource",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.onMoveBackService(r))})("onMoveToSource",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.onMoveBackService(r))}),t.YNc(31,Vw,12,10,"ng-template",49),t.qZA()()(),t._UZ(32,"p-divider",52),t.TgZ(33,"div",37)(34,"div",53)(35,"div",54)(36,"label",55),t._uU(37,"Ng\u01b0\u1eddi \u0111\u1ea1i di\u1ec7n "),t.TgZ(38,"span",40),t._uU(39,"*"),t.qZA()(),t.TgZ(40,"div",42)(41,"p-dropdown",56),t.YNc(42,Jw,1,2,"ng-template",57),t.YNc(43,Hw,3,2,"ng-template",49),t.qZA()(),t.YNc(44,Ww,2,0,"small",44),t.qZA(),t.TgZ(45,"div",54)(46,"label",58),t._uU(47,"K\xec h\u1ea1n h\u1ee3p \u0111\u1ed3ng (th\xe1ng) k\u1ec3 t\u1eeb ng\xe0y b\u1eaft \u0111\u1ea7u \u1edf "),t.TgZ(48,"span",40),t._uU(49,"*"),t.qZA()(),t.TgZ(50,"div",42),t._UZ(51,"p-dropdown",59),t.qZA(),t.YNc(52,Gw,2,0,"small",44),t.qZA(),t.TgZ(53,"div",54)(54,"div",37)(55,"div",38)(56,"label",60),t._uU(57,"K\u1ec3 t\u1eeb ng\xe0y "),t.TgZ(58,"span",40),t._uU(59,"*"),t.qZA()(),t.TgZ(60,"div",42),t._UZ(61,"p-calendar",61),t.qZA(),t.YNc(62,Kw,2,0,"small",44),t.qZA(),t.TgZ(63,"div",38)(64,"label",62),t._uU(65,"\u0110\u1ebfn ng\xe0y"),t.qZA(),t.TgZ(66,"div",63),t._uU(67),t.ALo(68,"date"),t.qZA()()()()(),t.TgZ(69,"div",53)(70,"div",54)(71,"label",64),t._uU(72,"Ti\u1ec1n \u0111\u1eb7t c\u1ecdc (\u0111\u1ed3ng) "),t.TgZ(73,"span",40),t._uU(74,"*"),t.qZA()(),t.TgZ(75,"div",42),t._UZ(76,"p-inputNumber",65),t.qZA(),t.YNc(77,Yw,2,0,"small",44),t.qZA(),t.TgZ(78,"div",54)(79,"div",37)(80,"div",38)(81,"label",66),t._uU(82,"S\u1ed1 \u0111i\u1ec7n \u0111\u1ea7u "),t.TgZ(83,"span",40),t._uU(84,"*"),t.qZA()(),t.TgZ(85,"div",42),t._UZ(86,"p-inputNumber",67),t.qZA(),t.YNc(87,Qw,2,0,"small",44),t.qZA(),t.TgZ(88,"div",38)(89,"label",68),t._uU(90,"S\u1ed1 n\u01b0\u1edbc \u0111\u1ea7u "),t.TgZ(91,"span",40),t._uU(92,"*"),t.qZA()(),t.TgZ(93,"div",42),t._UZ(94,"p-inputNumber",69),t.qZA(),t.YNc(95,jw,2,0,"small",44),t.qZA()()()()(),t._UZ(96,"p-divider",52),t.TgZ(97,"p-card",70)(98,"div",71)(99,"div",37)(100,"div",38)(101,"label"),t._uU(102,"Ti\u1ec1n \u0111\u1eb7t c\u1ecdc (\u0111\u1ed3ng)"),t.qZA(),t.TgZ(103,"div",63),t._uU(104),t.ALo(105,"currency"),t.qZA()(),t.TgZ(106,"div",38),t.YNc(107,zw,6,5,"ng-container",31),t.qZA()(),t.TgZ(108,"div",37)(109,"div",38)(110,"label",72),t._uU(111,"S\u1ed1 ng\xe0y \u1edf \u0111\u1ebfn "),t.TgZ(112,"span",73),t._uU(113),t.ALo(114,"date"),t.qZA()(),t.TgZ(115,"div",63),t._uU(116),t.qZA()(),t.TgZ(117,"div",38)(118,"label",74),t._uU(119,"Ti\u1ec1n s\u1ed1 ng\xe0y \u0111\xe3 \u1edf (\u0111\u1ed3ng)"),t.qZA(),t.TgZ(120,"div",63),t._uU(121),t.ALo(122,"currency"),t.qZA()()(),t.TgZ(123,"div",37)(124,"div",38)(125,"label",75),t._uU(126,"S\u1ed1 ti\u1ec1n ph\u1ea3i thanh to\xe1n"),t.qZA(),t.TgZ(127,"div",63),t._uU(128),t.ALo(129,"currency"),t.qZA()(),t._UZ(130,"div",38),t.qZA()()()()}if(2&n){const e=t.oxw();let o,r,s,l,a,p,_,T,A;t.Q6J("formGroup",e.contractForm),t.xp6(7),t.Akn(t.DdM(64,er)),t.Q6J("options",e.accomodations)("ngModel",e.selectedAccomodation)("ngModelOptions",t.DdM(65,gi)),t.xp6(7),t.Q6J("options",e.rooms)("ngClass",t.VKq(66,Jt,e.contractForm.controls.room.invalid&&(e.contractForm.controls.room.dirty||e.contractForm.controls.room.touched))),t.xp6(1),t.Q6J("ngIf",(null==(o=e.contractForm.get("room"))?null:o.hasError("required"))&&(e.contractForm.controls.room.dirty||e.contractForm.controls.room.touched)),t.xp6(1),t.Q6J("ngIf",(null==(r=e.contractForm.get("room"))?null:r.hasError("roomBooked"))&&(e.contractForm.controls.room.dirty||e.contractForm.controls.room.touched)),t.xp6(1),t.Q6J("ngIf",(null==(s=e.contractForm.get("room"))?null:s.hasError("overCapacity"))&&(e.contractForm.controls.room.dirty||e.contractForm.controls.room.touched)),t.xp6(2),t.Q6J("ngIf",e.contract.room&&e.contract.room.price),t.xp6(2),t.Q6J("ngIf",e.contract.room&&e.contract.room.price),t.xp6(6),t.Q6J("source",e.tenantsDisplayed)("target",e.selectedTenants)("dragdrop",!0)("responsive",!0)("sourceStyle",t.DdM(68,_i))("targetStyle",t.DdM(69,_i)),t.xp6(3),t.Q6J("source",e.servicesDisplayed)("target",e.selectedServices)("dragdrop",!0)("responsive",!0)("sourceStyle",t.DdM(70,_i))("targetStyle",t.DdM(71,_i)),t.xp6(11),t.Q6J("options",e.selectedTenants)("ngClass",t.VKq(72,Jt,e.contractForm.controls.representative.invalid&&(e.contractForm.controls.representative.dirty||e.contractForm.controls.representative.touched))),t.xp6(3),t.Q6J("ngIf",(null==(l=e.contractForm.get("representative"))?null:l.hasError("required"))&&(e.contractForm.controls.representative.dirty||e.contractForm.controls.representative.touched)),t.xp6(7),t.Q6J("options",e.durations)("ngClass",t.VKq(74,Jt,e.contractForm.controls.duration.invalid&&(e.contractForm.controls.duration.dirty||e.contractForm.controls.duration.touched))),t.xp6(1),t.Q6J("ngIf",(null==(a=e.contractForm.get("duration"))?null:a.invalid)&&(e.contractForm.controls.duration.dirty||e.contractForm.controls.duration.touched)),t.xp6(9),t.Q6J("ngClass",t.VKq(76,Jt,e.contractForm.controls.startDate.invalid&&(e.contractForm.controls.startDate.dirty||e.contractForm.controls.startDate.touched))),t.xp6(1),t.Q6J("ngIf",(null==(p=e.contractForm.get("startDate"))?null:p.invalid)&&(e.contractForm.controls.startDate.dirty||e.contractForm.controls.startDate.touched)),t.xp6(5),t.Oqu(t.xi3(68,46,e.contract.endDate,"dd/MM/yyyy")),t.xp6(9),t.Q6J("ngClass",t.VKq(78,Jt,e.contractForm.controls.deposit.invalid&&(e.contractForm.controls.deposit.dirty||e.contractForm.controls.deposit.touched))),t.xp6(1),t.Q6J("ngIf",(null==(_=e.contractForm.get("deposit"))?null:_.invalid)&&(e.contractForm.controls.deposit.dirty||e.contractForm.controls.deposit.touched)),t.xp6(9),t.Q6J("ngClass",t.VKq(80,Jt,e.contractForm.controls.firstElectricNum.invalid&&(e.contractForm.controls.firstElectricNum.dirty||e.contractForm.controls.firstElectricNum.touched))),t.xp6(1),t.Q6J("ngIf",(null==(T=e.contractForm.get("firstElectricNum"))?null:T.invalid)&&(e.contractForm.controls.firstElectricNum.dirty||e.contractForm.controls.firstElectricNum.touched)),t.xp6(7),t.Q6J("ngClass",t.VKq(82,Jt,e.contractForm.controls.firstWaterNum.invalid&&(e.contractForm.controls.firstWaterNum.dirty||e.contractForm.controls.firstWaterNum.touched))),t.xp6(1),t.Q6J("ngIf",(null==(A=e.contractForm.get("firstWaterNum"))?null:A.invalid)&&(e.contractForm.controls.firstWaterNum.dirty||e.contractForm.controls.firstWaterNum.touched)),t.xp6(9),t.hij(" ",t.Dn7(105,49,e.contract.deposit||0,"VND","symbol")," "),t.xp6(3),t.Q6J("ngIf",e.contract.keepRoomDeposit),t.xp6(6),t.Oqu(t.xi3(114,53,e.nextMonth,"dd/MM/yyyy")),t.xp6(3),t.hij(" ",e.contract.dayStayedBefore," "),t.xp6(5),t.hij(" ",t.Dn7(122,56,e.dayStayedMoney,"VND","symbol")," "),t.xp6(7),t.hij(" ",t.Dn7(129,60,e.contract.firstComePayment,"VND","symbol")," ")}}function Xw(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",83),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.contractDialog=!1)}),t.qZA(),t.TgZ(1,"button",84),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.saveContract())}),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.contractForm.invalid)}}function tE(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"Vui l\xf2ng nh\u1eadp h\u1ecd."),t.qZA())}function eE(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"Vui l\xf2ng nh\u1eadp t\xean."),t.qZA())}function nE(n,i){1&n&&t._UZ(0,"i",105)}function iE(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"Vui l\xf2ng nh\u1eadp s\u1ed1 CCCD."),t.qZA())}function oE(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"S\u1ed1 CCCD \u0111\xe3 t\u1ed3n t\u1ea1i."),t.qZA())}function rE(n,i){1&n&&t._UZ(0,"i",105)}function sE(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"Vui l\xf2ng nh\u1eadp email."),t.qZA())}function aE(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"Email kh\xf4ng h\u1ee3p l\u1ec7."),t.qZA())}function lE(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"Email \u0111\xe3 t\u1ed3n t\u1ea1i."),t.qZA())}function cE(n,i){1&n&&t._UZ(0,"i",105)}function uE(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i."),t.qZA())}function pE(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng h\u1ee3p l\u1ec7."),t.qZA())}function dE(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\xe3 t\u1ed3n t\u1ea1i."),t.qZA())}function mE(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"form",36)(1,"div",54)(2,"label",39),t._uU(3,"Khu tr\u1ecd "),t.TgZ(4,"span",40),t._uU(5,"*"),t.qZA()(),t.TgZ(6,"p-dropdown",85),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.selectedAccomodation=r)}),t.qZA()(),t.TgZ(7,"div",86)(8,"div",87)(9,"label",88),t._uU(10,"H\u1ecd "),t.TgZ(11,"span",40),t._uU(12,"*"),t.qZA()(),t.TgZ(13,"div",42),t._UZ(14,"input",89),t.qZA(),t.YNc(15,tE,2,0,"small",44),t.qZA(),t.TgZ(16,"div",90)(17,"label",91),t._uU(18,"T\xean "),t.TgZ(19,"span",40),t._uU(20,"*"),t.qZA()(),t.TgZ(21,"div",42),t._UZ(22,"input",92),t.qZA(),t.YNc(23,eE,2,0,"small",44),t.qZA()(),t.TgZ(24,"div",54)(25,"label",93),t._uU(26,"S\u1ed1 CCCD "),t.TgZ(27,"span",40),t._uU(28,"*"),t.qZA()(),t.TgZ(29,"span",94),t.YNc(30,nE,1,0,"i",95),t.TgZ(31,"div",42),t._UZ(32,"input",96),t.qZA()(),t.YNc(33,iE,2,0,"small",44),t.YNc(34,oE,2,0,"small",44),t.qZA(),t.TgZ(35,"div",54)(36,"label",97),t._uU(37,"Gi\u1edbi t\xednh"),t.qZA(),t.TgZ(38,"div",42),t._UZ(39,"p-dropdown",98),t.qZA()(),t.TgZ(40,"div",54)(41,"label",99),t._uU(42,"Email "),t.TgZ(43,"span",40),t._uU(44,"*"),t.qZA()(),t.TgZ(45,"span",94),t.YNc(46,rE,1,0,"i",95),t.TgZ(47,"div",42),t._UZ(48,"input",100),t.qZA()(),t.YNc(49,sE,2,0,"small",44),t.YNc(50,aE,2,0,"small",44),t.YNc(51,lE,2,0,"small",44),t.qZA(),t.TgZ(52,"div",54)(53,"label",101),t._uU(54,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),t.TgZ(55,"span",40),t._uU(56,"*"),t.qZA()(),t.TgZ(57,"span",94),t.YNc(58,cE,1,0,"i",95),t.TgZ(59,"div",42),t._UZ(60,"input",102),t.qZA()(),t.YNc(61,uE,2,0,"small",44),t.YNc(62,pE,2,0,"small",44),t.YNc(63,dE,2,0,"small",44),t.qZA(),t.TgZ(64,"div",54)(65,"label",103),t._uU(66,"Ng\xe0y b\u1eaft \u0111\u1ea7u \u1edf"),t.qZA(),t.TgZ(67,"div",42),t._UZ(68,"p-calendar",104),t.qZA()()()}if(2&n){const e=t.oxw();let o,r,s,l,a,p,_,T,A,x;t.Q6J("formGroup",e.tenantForm),t.xp6(6),t.Akn(t.DdM(26,er)),t.Q6J("options",e.accomodations)("ngModel",e.selectedAccomodation)("ngModelOptions",t.DdM(27,gi)),t.xp6(8),t.Q6J("ngClass",t.VKq(28,Jt,e.tenantForm.controls.firstName.invalid&&(e.tenantForm.controls.firstName.dirty||e.tenantForm.controls.firstName.touched))),t.xp6(1),t.Q6J("ngIf",(null==(o=e.tenantForm.get("firstName"))?null:o.getError("required"))&&(e.tenantForm.controls.firstName.dirty||e.tenantForm.controls.firstName.touched)),t.xp6(7),t.Q6J("ngClass",t.VKq(30,Jt,e.tenantForm.controls.lastName.invalid&&(e.tenantForm.controls.lastName.dirty||e.tenantForm.controls.lastName.touched))),t.xp6(1),t.Q6J("ngIf",(null==(r=e.tenantForm.get("lastName"))?null:r.getError("required"))&&(e.tenantForm.controls.lastName.dirty||e.tenantForm.controls.lastName.touched)),t.xp6(7),t.Q6J("ngIf",e.isValidating),t.xp6(2),t.Q6J("ngClass",t.VKq(32,Jt,e.tenantForm.controls.identifyNum.invalid&&(e.tenantForm.controls.identifyNum.dirty||e.tenantForm.controls.identifyNum.touched))),t.xp6(1),t.Q6J("ngIf",(null==(s=e.tenantForm.get("identifyNum"))?null:s.getError("required"))&&(e.tenantForm.controls.identifyNum.dirty||e.tenantForm.controls.identifyNum.touched)),t.xp6(1),t.Q6J("ngIf",(null==(l=e.tenantForm.get("identifyNum"))?null:l.getError("duplicated"))&&(e.tenantForm.controls.identifyNum.dirty||e.tenantForm.controls.identifyNum.touched)),t.xp6(5),t.Q6J("options",e.gender),t.xp6(7),t.Q6J("ngIf",e.emailLoading),t.xp6(2),t.Q6J("ngClass",t.VKq(34,Jt,e.tenantForm.controls.email.invalid&&(e.tenantForm.controls.email.dirty||e.tenantForm.controls.email.touched))),t.xp6(1),t.Q6J("ngIf",(null==(a=e.tenantForm.get("email"))?null:a.getError("required"))&&(e.tenantForm.controls.email.dirty||e.tenantForm.controls.email.touched)),t.xp6(1),t.Q6J("ngIf",(null==(p=e.tenantForm.get("email"))?null:p.getError("mailInvalid"))&&(e.tenantForm.controls.email.dirty||e.tenantForm.controls.email.touched)),t.xp6(1),t.Q6J("ngIf",(null==(_=e.tenantForm.get("email"))?null:_.getError("duplicated"))&&(e.tenantForm.controls.email.dirty||e.tenantForm.controls.email.touched)),t.xp6(7),t.Q6J("ngIf",e.phoneLoading),t.xp6(2),t.Q6J("ngClass",t.VKq(36,Jt,e.tenantForm.controls.phone.invalid&&(e.tenantForm.controls.phone.dirty||e.tenantForm.controls.phone.touched))),t.xp6(1),t.Q6J("ngIf",(null==(T=e.tenantForm.get("phone"))?null:T.getError("required"))&&(e.tenantForm.controls.phone.dirty||e.tenantForm.controls.phone.touched)),t.xp6(1),t.Q6J("ngIf",(null==(A=e.tenantForm.get("phone"))?null:A.getError("phoneInvalid"))&&(e.tenantForm.controls.phone.dirty||e.tenantForm.controls.phone.touched)),t.xp6(1),t.Q6J("ngIf",(null==(x=e.tenantForm.get("phone"))?null:x.getError("duplicated"))&&(e.tenantForm.controls.phone.dirty||e.tenantForm.controls.phone.touched)),t.xp6(5),t.Q6J("touchUI",!0)}}function hE(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",83),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.tenantDialog=!1)}),t.qZA(),t.TgZ(1,"button",84),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.saveTenant())}),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.tenantForm.invalid)}}function fE(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"Vui l\xf2ng ch\u1ecdn ph\xf2ng."),t.qZA())}function gE(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"Ph\xf2ng \u0111\xe3 \u0111\u01b0\u1ee3c \u0111\u1eb7t c\u1ecdc."),t.qZA())}function _E(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"Vui l\xf2ng ch\u1ecdn ng\xe0y \u0111\u1eb7t c\u1ecdc."),t.qZA())}function vE(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"Vui l\xf2ng ch\u1ecdn ng\xe0y h\u1ebft h\u1ea1n."),t.qZA())}function yE(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"Ng\xe0y h\u1ebft h\u1ea1n c\u1ea7n sau ng\xe0y \u0111\u1eb7t c\u1ecdc."),t.qZA())}function wE(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"Vui l\xf2ng nh\u1eadp ti\u1ec1n \u0111\u1eb7t c\u1ecdc."),t.qZA())}function EE(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"Vui l\xf2ng nh\u1eadp h\u1ecd."),t.qZA())}function bE(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"Vui l\xf2ng nh\u1eadp nh\u1eadp t\xean."),t.qZA())}function xE(n,i){1&n&&t._UZ(0,"i",105)}function TE(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"Vui l\xf2ng nh\u1eadp s\u1ed1 CCCD."),t.qZA())}function CE(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"S\u1ed1 CCCD \u0111\xe3 t\u1ed3n t\u1ea1i."),t.qZA())}function AE(n,i){1&n&&t._UZ(0,"i",105)}function NE(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i."),t.qZA())}function DE(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng h\u1ee3p l\u1ec7."),t.qZA())}function FE(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\xe3 t\u1ed3n t\u1ea1i."),t.qZA())}function ZE(n,i){1&n&&t._UZ(0,"i",105)}function IE(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"Vui l\xf2ng nh\u1eadp email."),t.qZA())}function SE(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"Email kh\xf4ng h\u1ee3p l\u1ec7."),t.qZA())}function kE(n,i){1&n&&(t.TgZ(0,"small",76),t._uU(1,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\xe3 t\u1ed3n t\u1ea1i."),t.qZA())}function RE(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"form",36)(1,"div",37)(2,"div",53)(3,"div",54)(4,"label",39),t._uU(5,"Khu tr\u1ecd "),t.TgZ(6,"span",40),t._uU(7,"*"),t.qZA()(),t.TgZ(8,"p-dropdown",41),t.NdJ("onChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onSelectAccomodation())})("ngModelChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.selectedAccomodation=r)}),t.qZA()(),t.TgZ(9,"div",54)(10,"label",55),t._uU(11,"Ph\xf2ng "),t.TgZ(12,"span",40),t._uU(13,"*"),t.qZA()(),t.TgZ(14,"p-dropdown",106),t.NdJ("onChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onChangeRoom())}),t.qZA(),t.YNc(15,fE,2,0,"small",44),t.YNc(16,gE,2,0,"small",44),t.qZA(),t.TgZ(17,"div",54)(18,"label",60),t._uU(19,"Ng\xe0y \u0111\u1eb7t c\u1ecdc "),t.TgZ(20,"span",40),t._uU(21,"*"),t.qZA()(),t._UZ(22,"p-calendar",107),t.YNc(23,_E,2,0,"small",44),t.qZA(),t.TgZ(24,"div",54)(25,"label",108),t._uU(26,"Ng\xe0y h\u1ebft h\u1ea1n "),t.TgZ(27,"span",40),t._uU(28,"*"),t.qZA()(),t._UZ(29,"p-calendar",109),t.YNc(30,vE,2,0,"small",44),t.YNc(31,yE,2,0,"small",44),t.qZA(),t.TgZ(32,"div",54)(33,"label",64),t._uU(34,"Ti\u1ec1n \u0111\u1eb7t c\u1ecdc (\u0111\u1ed3ng) "),t.TgZ(35,"span",40),t._uU(36,"*"),t.qZA()(),t._UZ(37,"p-inputNumber",65),t.YNc(38,wE,2,0,"small",44),t.qZA(),t.TgZ(39,"div",54)(40,"label",110),t._uU(41,"Ghi ch\xfa"),t.qZA(),t._UZ(42,"input",111),t.qZA()(),t.TgZ(43,"div",38)(44,"div",37)(45,"div",87)(46,"label",88),t._uU(47,"H\u1ecd "),t.TgZ(48,"span",40),t._uU(49,"*"),t.qZA()(),t._UZ(50,"input",112),t.YNc(51,EE,2,0,"small",44),t.qZA(),t.TgZ(52,"div",90)(53,"label",91),t._uU(54,"T\xean "),t.TgZ(55,"span",40),t._uU(56,"*"),t.qZA()(),t._UZ(57,"input",113),t.YNc(58,bE,2,0,"small",44),t.qZA()(),t.TgZ(59,"div",54)(60,"label",93),t._uU(61,"S\u1ed1 CCCD "),t.TgZ(62,"span",40),t._uU(63,"*"),t.qZA()(),t.TgZ(64,"span",94),t.YNc(65,xE,1,0,"i",95),t.TgZ(66,"div",42),t._UZ(67,"input",114),t.qZA()(),t.YNc(68,TE,2,0,"small",44),t.YNc(69,CE,2,0,"small",44),t.qZA(),t.TgZ(70,"div",54)(71,"label",101),t._uU(72,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),t.TgZ(73,"span",40),t._uU(74,"*"),t.qZA()(),t.TgZ(75,"span",94),t.YNc(76,AE,1,0,"i",95),t.TgZ(77,"div",42),t._UZ(78,"input",115),t.qZA()(),t.YNc(79,NE,2,0,"small",44),t.YNc(80,DE,2,0,"small",44),t.YNc(81,FE,2,0,"small",44),t.qZA(),t.TgZ(82,"div",54)(83,"label",99),t._uU(84,"Email "),t.TgZ(85,"span",40),t._uU(86,"*"),t.qZA()(),t.TgZ(87,"span",94),t.YNc(88,ZE,1,0,"i",95),t.TgZ(89,"div",42),t._UZ(90,"input",100),t.qZA()(),t.YNc(91,IE,2,0,"small",44),t.YNc(92,SE,2,0,"small",44),t.YNc(93,kE,2,0,"small",44),t.qZA()()()()}if(2&n){const e=t.oxw();let o,r,s,l,a,p,_,T,A,x,f,b,y,D,v,N;t.Q6J("formGroup",e.depositForm),t.xp6(8),t.Akn(t.DdM(39,er)),t.Q6J("options",e.accomodations)("ngModel",e.selectedAccomodation)("ngModelOptions",t.DdM(40,gi)),t.xp6(6),t.Q6J("options",e.rooms)("ngClass",t.VKq(41,Jt,e.depositForm.controls.room.invalid&&(e.depositForm.controls.room.dirty||e.depositForm.controls.room.touched))),t.xp6(1),t.Q6J("ngIf",(null==(o=e.depositForm.get("room"))?null:o.hasError("required"))&&(e.depositForm.controls.room.dirty||e.depositForm.controls.room.touched)),t.xp6(1),t.Q6J("ngIf",(null==(r=e.depositForm.get("room"))?null:r.hasError("roomInvalid"))&&(e.depositForm.controls.room.dirty||e.depositForm.controls.room.touched)),t.xp6(6),t.Q6J("minDate",e.minDate)("maxDate",e.maxDate)("ngClass",t.VKq(43,Jt,e.depositForm.controls.startDate.invalid&&(e.depositForm.controls.startDate.dirty||e.depositForm.controls.startDate.touched))),t.xp6(1),t.Q6J("ngIf",(null==(s=e.depositForm.get("startDate"))?null:s.invalid)&&(e.depositForm.controls.startDate.dirty||e.depositForm.controls.startDate.touched)),t.xp6(6),t.Q6J("minDate",e.minEndDate)("maxDate",e.maxEndDate)("ngClass",t.VKq(45,Jt,e.depositForm.controls.dueDate.invalid&&(e.depositForm.controls.dueDate.dirty||e.depositForm.controls.dueDate.touched))),t.xp6(1),t.Q6J("ngIf",(null==(l=e.depositForm.get("dueDate"))?null:l.hasError("required"))&&(e.depositForm.controls.dueDate.dirty||e.depositForm.controls.dueDate.touched)),t.xp6(1),t.Q6J("ngIf",(null==(a=e.depositForm.get("dueDate"))?null:a.hasError("dateInvalid"))&&(e.depositForm.controls.dueDate.dirty||e.depositForm.controls.dueDate.touched)),t.xp6(6),t.Q6J("ngClass",t.VKq(47,Jt,e.depositForm.controls.deposit.invalid&&(e.depositForm.controls.deposit.dirty||e.depositForm.controls.deposit.touched))),t.xp6(1),t.Q6J("ngIf",(null==(p=e.depositForm.get("deposit"))?null:p.invalid)&&(e.depositForm.controls.deposit.dirty||e.depositForm.controls.deposit.touched)),t.xp6(12),t.Q6J("ngClass",t.VKq(49,Jt,e.depositForm.controls.firstName.invalid&&(e.depositForm.controls.firstName.dirty||e.depositForm.controls.firstName.touched))),t.xp6(1),t.Q6J("ngIf",(null==(_=e.depositForm.get("firstName"))?null:_.invalid)&&(e.depositForm.controls.firstName.dirty||e.depositForm.controls.firstName.touched)),t.xp6(6),t.Q6J("ngClass",t.VKq(51,Jt,e.depositForm.controls.lastName.invalid&&(e.depositForm.controls.lastName.dirty||e.depositForm.controls.lastName.touched))),t.xp6(1),t.Q6J("ngIf",(null==(T=e.depositForm.get("lastName"))?null:T.invalid)&&(e.depositForm.controls.lastName.dirty||e.depositForm.controls.lastName.touched)),t.xp6(7),t.Q6J("ngIf",e.isValidating),t.xp6(2),t.Q6J("ngClass",t.VKq(53,Jt,e.depositForm.controls.identifyNum.invalid&&(e.depositForm.controls.identifyNum.dirty||e.depositForm.controls.identifyNum.touched))),t.xp6(1),t.Q6J("ngIf",(null==(A=e.depositForm.get("identifyNum"))?null:A.getError("required"))&&(e.depositForm.controls.identifyNum.dirty||e.depositForm.controls.identifyNum.touched)),t.xp6(1),t.Q6J("ngIf",(null==(x=e.depositForm.get("identifyNum"))?null:x.getError("duplicated"))&&(e.depositForm.controls.identifyNum.dirty||e.depositForm.controls.identifyNum.touched)),t.xp6(7),t.Q6J("ngIf",e.phoneLoading),t.xp6(2),t.Q6J("ngClass",t.VKq(55,Jt,e.depositForm.controls.phone.invalid&&(e.depositForm.controls.phone.dirty||e.depositForm.controls.phone.touched))),t.xp6(1),t.Q6J("ngIf",(null==(f=e.depositForm.get("phone"))?null:f.getError("required"))&&(e.depositForm.controls.phone.dirty||e.depositForm.controls.phone.touched)),t.xp6(1),t.Q6J("ngIf",(null==(b=e.depositForm.get("phone"))?null:b.getError("phoneInvalid"))&&(e.depositForm.controls.phone.dirty||e.depositForm.controls.phone.touched)),t.xp6(1),t.Q6J("ngIf",(null==(y=e.depositForm.get("phone"))?null:y.getError("duplicated"))&&(e.depositForm.controls.phone.dirty||e.depositForm.controls.phone.touched)),t.xp6(7),t.Q6J("ngIf",e.emailLoading),t.xp6(2),t.Q6J("ngClass",t.VKq(57,Jt,e.depositForm.controls.email.invalid&&(e.depositForm.controls.email.dirty||e.depositForm.controls.email.touched))),t.xp6(1),t.Q6J("ngIf",(null==(D=e.depositForm.get("email"))?null:D.getError("required"))&&(e.depositForm.controls.email.dirty||e.depositForm.controls.email.touched)),t.xp6(1),t.Q6J("ngIf",(null==(v=e.depositForm.get("email"))?null:v.getError("mailInvalid"))&&(e.depositForm.controls.email.dirty||e.depositForm.controls.email.touched)),t.xp6(1),t.Q6J("ngIf",(null==(N=e.depositForm.get("email"))?null:N.getError("duplicated"))&&(e.depositForm.controls.email.dirty||e.depositForm.controls.email.touched))}}function qE(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",83),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.addDepositDialog=!1)}),t.qZA(),t.TgZ(1,"button",84),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.saveDeposit())}),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.depositForm.invalid)}}function UE(n,i){1&n&&(t.TgZ(0,"div",116),t._UZ(1,"p-progressSpinner"),t.qZA())}const ME=function(){return["accomodation","room.name","name","phone"]},BE=function(){return[10,20,30]},PE=function(){return{width:"1150px"}},OE=function(){return{width:"450px"}},LE=function(){return{width:"650px"}};let VE=(()=>{class n{constructor(e,o,r,s,l,a,p,_,T){this.accomodationService=e,this.auth=o,this.messageService=r,this.postService=s,this.roomService=l,this.bookingService=a,this.tenantService=p,this.depositService=_,this.contractService=T,this.invoiceDialog=!1,this.accomodations=[],this.bookedList=[],this.booking={},this.rowsPerPageOptions=[5,10,20],this.dataLoading=!1,this.loading=!1,this.postDialog=!1,this.rooms=[],this.services=[],this.servicesDisplayed=[],this.selectedServices=[],this.contractInfoLoading=!1,this.items=[],this.linkUpload="http://localhost:8080/motel-service/api/post/image/",this.deleteImageDialog=!1,this.deleteLoading=!1,this.tenantDialog=!1,this.tentant={},this.gender=Dt.$.GENDER,this.deposit={},this.deposits=[],this.addDepositDialog=!1,this.depositInfoLoading=!1,this.roomInvalids=[],this.contract={},this.tenantsDisplayed=[],this.selectedTenants=[],this.contractDialog=!1,this.selectedTenant={},this.tenants=[],this.isValidating=!1,this.oldIdentifyNum="",this.durations=[{value:6,display:"6 th\xe1ng"},{value:12,display:"12 th\xe1ng"}],this.depositor={},this.oldDeposit=0,this.emailLoading=!1,this.phoneLoading=!1,this.tenantForm=new E.cw({firstName:new E.NI(this.tentant.firstName,[E.kI.required]),lastName:new E.NI(this.tentant.lastName,[E.kI.required]),startDate:new E.NI(this.tentant.startDate,[]),gender:new E.NI(this.tentant.gender,[]),identifyNum:new E.NI(this.tentant.identifyNum,[E.kI.required]),phone:new E.NI(this.tentant.phone,[E.kI.required]),email:new E.NI(this.tentant.email,[E.kI.required])}),this.depositForm=new E.cw({startDate:new E.NI(this.deposit.startDate,[E.kI.required]),dueDate:new E.NI(this.deposit.dueDate,[E.kI.required]),note:new E.NI(this.deposit.note,[]),deposit:new E.NI(this.deposit.deposit,[E.kI.required]),firstName:new E.NI(this.deposit.firstName,[E.kI.required]),lastName:new E.NI(this.deposit.lastName,[E.kI.required]),phone:new E.NI(this.deposit.phone,[E.kI.required]),identifyNum:new E.NI(this.deposit.identifyNum,[E.kI.required]),email:new E.NI(this.deposit.email,[E.kI.required]),room:new E.NI(this.deposit.room,[E.kI.required]),selectedTenant:new E.NI(this.selectedTenant,[])}),this.contractForm=new E.cw({startDate:new E.NI(this.contract.startDate,[E.kI.required]),endDate:new E.NI(this.contract.endDate,[E.kI.required]),deposit:new E.NI(this.contract.deposit,[E.kI.required]),representative:new E.NI(this.contract.representative,[E.kI.required]),duration:new E.NI(this.contract.duration,[E.kI.required]),firstElectricNum:new E.NI(this.contract.firstElectricNum,[E.kI.required]),firstWaterNum:new E.NI(this.contract.firstWaterNum,[E.kI.required]),room:new E.NI(this.contract.room,[E.kI.required]),dayNumber:new E.NI(this.contract.dayStayedBefore,[E.kI.required]),firstTotalPayment:new E.NI(this.contract.firstComePayment,[E.kI.required]),holdRoomMoney:new E.NI(this.contract.keepRoomDeposit,[])}),this.responsiveOptions=[{breakpoint:"1024px",numVisible:5},{breakpoint:"768px",numVisible:3},{breakpoint:"560px",numVisible:1}]}ngOnInit(){this.user=this.auth.userValue,this.getAllBookedRoomByUserId(),this.getDropdownAccomodation().subscribe(e=>this.accomodations=e.data),this.contractForm.get("representative")?.valueChanges.subscribe(e=>{this.selectedTenant=e,this.contract.representative=e}),this.contractForm.get("startDate")?.valueChanges.subscribe(e=>{this.contract.startDate=e,this.getNumberDayStayed(),this.getTotalFirstPayment();let o=ft(this.contract.startDate);if(this.contract.duration){let r=this.contract.duration,s=ft(o).add(r,"M");this.contractForm.get("endDate")?.setValue(s.toDate())}else this.contractForm.get("endDate")?.setValue(o.toDate())}),this.contractForm.get("endDate")?.valueChanges.subscribe(e=>{this.contract.endDate=e}),this.contractForm.get("firstElectricNum")?.valueChanges.subscribe(e=>{this.contract.firstElectricNum=e}),this.contractForm.get("firstWaterNum")?.valueChanges.subscribe(e=>{this.contract.firstWaterNum=e}),this.contractForm.get("deposit")?.valueChanges.subscribe(e=>{this.contract.deposit=e,this.getTotalFirstPayment()}),this.contractForm.get("dayNumber")?.valueChanges.subscribe(e=>{this.contract.dayStayedBefore=e}),this.contractForm.get("firstTotalPayment")?.valueChanges.subscribe(e=>{this.contract.firstComePayment=e}),this.contractForm.get("holdRoomMoney")?.valueChanges.subscribe(e=>{this.contract.keepRoomDeposit=e,this.getTotalFirstPayment()}),this.contractForm.get("duration")?.valueChanges.subscribe(e=>{this.contract.duration=e;let o=ft(this.contract.startDate),r=ft(o).add(e,"M");this.contractForm.get("endDate")?.setValue(r.toDate())}),this.contractForm.get("room")?.valueChanges.subscribe(e=>{this.contract.room=e,this.contract.room&&(this.checkRoomCapacity(),this.checkIsRoomHasDeposit(),this.onChangeRoomContract())}),this.tenantForm.get("firstName")?.valueChanges.subscribe(e=>this.tentant.firstName=e),this.tenantForm.get("lastName")?.valueChanges.subscribe(e=>this.tentant.lastName=e),this.tenantForm.get("startDate")?.valueChanges.subscribe(e=>this.tentant.startDate=e),this.tenantForm.get("identifyNum")?.valueChanges.pipe((0,Xe.b)(500),tn()).subscribe(e=>{e&&(this.tentant.identifyNum=e,this.oldIdentifyNum!==this.tentant.identifyNum&&this.checkDuplicatedTenantIdentify())}),this.tenantForm.get("phone")?.valueChanges.subscribe(e=>{e&&(this.validatePhoneNumber(e),this.tentant.phone=e,this.tenantForm.get("phone")?.valid&&this.checkDuplicatedTenantPhone())}),this.tenantForm.get("email")?.valueChanges.subscribe(e=>{e&&(this.validateGmail(e),this.tentant.email=e,this.tenantForm.get("email")?.valid&&this.checkDuplicatedTenantEmail())}),this.tenantForm.get("gender")?.valueChanges.subscribe(e=>{e&&(this.tentant.gender=e.key)}),this.depositForm.get("startDate")?.valueChanges.subscribe(e=>{this.deposit.startDate=e,this.minEndDate=ft(this.deposit.startDate).add(4,"days").toDate(),this.maxEndDate=ft(this.deposit.startDate).add(15,"days").toDate()}),this.depositForm.get("dueDate")?.valueChanges.subscribe(e=>{if(this.deposit.dueDate=e,this.deposit.startDate){let o=ft(this.deposit.startDate);e&&(ft(this.deposit.dueDate).isAfter(o)?this.depositForm.get("dueDate")?.invalid||this.depositForm.get("dueDate")?.setErrors(null):this.depositForm.get("dueDate")?.setErrors({dateInvalid:!0}))}}),this.depositForm.get("note")?.valueChanges.subscribe(e=>{this.deposit.note=e}),this.depositForm.get("deposit")?.valueChanges.subscribe(e=>{this.deposit.deposit=e}),this.depositForm.get("firstName")?.valueChanges.subscribe(e=>{this.deposit.firstName=e}),this.depositForm.get("identifyNum")?.valueChanges.subscribe(e=>{e&&(this.deposit.identifyNum=e,this.oldIdentifyNum!==this.deposit.identifyNum&&this.checkDuplicatedTenant())}),this.depositForm.get("lastName")?.valueChanges.subscribe(e=>{this.deposit.lastName=e}),this.depositForm.get("phone")?.valueChanges.subscribe(e=>{e&&(this.deposit.phone=e,this.validatePhoneNumber(e)?this.depositForm.get("phone")?.setErrors(null):this.depositForm.get("phone")?.setErrors({phoneInvalid:!0}))}),this.depositForm.get("email")?.valueChanges.subscribe(e=>{e&&(this.deposit.email=e,this.validateGmail(e)?this.depositForm.get("email")?.setErrors(null):this.depositForm.get("email")?.setErrors({mailInvalid:!0}))}),this.depositForm.get("room")?.valueChanges.subscribe(e=>{this.deposit.room=e}),this.depositForm.get("selectedTenant")?.valueChanges.subscribe(e=>{this.selectedTenant=e,e&&(this.deposit.tenantId=e.id)})}checkDuplicatedTenant(){let e=!1;this.isValidating=!0,this.tenantService.checkDuplicatedIdentify(this.deposit.identifyNum).pipe((0,K.x)(()=>{this.isValidating=!1,e&&this.depositForm.get("identifyNum")?.setErrors({duplicated:!0})})).subscribe(o=>e=o.data)}checkDuplicatedTenantIdentify(){let e=!1;this.isValidating=!0,this.tenantService.checkDuplicatedIdentify(this.tentant.identifyNum).pipe((0,K.x)(()=>{this.isValidating=!1,e&&this.tenantForm.get("identifyNum")?.setErrors({duplicated:!0})})).subscribe(o=>e=o.data)}checkDuplicatedTenantEmail(){let e=!1;this.emailLoading=!0,this.tenantService.checkDuplicatedEmail(this.tentant.email).pipe((0,K.x)(()=>{this.emailLoading=!1,e&&this.tenantForm.get("email")?.setErrors({duplicated:!0})})).subscribe(o=>e=o.data)}checkDuplicatedTenantPhone(){let e=!1;this.phoneLoading=!0,this.tenantService.checkDuplicatedPhone(this.tentant.phone).pipe((0,K.x)(()=>{this.phoneLoading=!1,e&&this.tenantForm.get("phone")?.setErrors({duplicated:!0})})).subscribe(o=>e=o.data)}validatePhoneNumber(e){return e.toLowerCase().match(/(84|0[3|5|7|8|9])+([0-9]{8})\b/g)}validateGmail(e){return e.toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}onChangeRoomContract(){this.contractForm.get("deposit")?.setValue(this.contract.room?.price)}checkIsRoomHasDeposit(){let e;this.loading=!0,this.roomService.checkRoomNotDeposit(this.contract.room?.id).pipe((0,K.x)(()=>{this.loading=!1,e.isBooked?(this.depositor=e.depositor,this.oldDeposit=e.depositMoney,this.selectedTenants.find(r=>r.id===this.depositor.id)||(this.selectedTenants.push(this.depositor),this.tenantsDisplayed=this.tenantsDisplayed.filter(r=>r.id!==this.depositor.id))):(this.depositor={},this.oldDeposit=0),this.contractForm.get("holdRoomMoney")?.setValue(this.oldDeposit)})).subscribe(o=>e=o.data)}getNumberDayStayed(){let e=ft(this.contract.startDate);this.nextMonth=ft(this.contract.startDate).endOf("month").toDate();let o=ft(this.nextMonth).diff(e,"days");this.contractForm.get("dayNumber")?.setValue(o)}getTotalFirstPayment(){const e=ft(this.contract.startDate).startOf("month"),r=ft(this.contract.startDate).endOf("month").diff(e,"days"),s=this.contract.room?.price,l=this.contract.deposit||0,_=this.contract.keepRoomDeposit||0;this.dayStayedMoney=(s/r||0)*(this.contract.dayStayedBefore||0);let T=this.dayStayedMoney-_+l||0;T<0&&(T=0),console.log("total",T),this.contractForm.get("firstTotalPayment")?.setValue(T)}checkRoomCapacity(){this.contract.room&&(this.contract.room.capacity&&this.contract.room.capacity<this.selectedTenants.length?this.contractForm.get("room")?.setErrors({overCapacity:!0}):this.contractForm.get("room")?.setErrors(null))}newTenant(){this.tentant={};let e=this.splitName(this.booking.name||"");this.tenantForm.get("firstName")?.setValue(e.firstName?.trim()),this.tenantForm.get("lastName")?.setValue(e.lastName?.trim()),this.tenantForm.get("startDate")?.setValue(null),this.tenantForm.get("identifyNum")?.setValue(null),this.tenantForm.get("phone")?.setValue(this.booking.phone),this.tenantForm.get("email")?.setValue(this.booking.email),this.tenantForm.get("gender")?.setValue({key:"UNKNOWN",value:"Ch\u01b0a bi\u1ebft"}),this.tentant.accomodationId=this.selectedAccomodation.id,this.tenantDialog=!0}getRoomNoDepositByAccomodation(){return this.roomService.getRoomNotDeposit(this.selectedAccomodation.id)}splitName(e){if(e){let o=e.search(/ [^ ]*$/);return{firstName:e.substring(0,o).trim(),lastName:e.substring(o)}}return{}}getMenuItems(e){return this.items=[{icon:"pi pi-fw pi-users",label:"T\u1ea1o kh\xe1ch thu\xea",command:o=>{this.booking={...o.item.data},this.newTenant()}},{icon:"pi pi-fw pi-sitemap",label:"T\u1ea1o \u0111\u1eb7t c\u1ecdc",command:o=>{this.booking={...o.item.data},this.newDeposit()}},{icon:"pi pi-ticket",label:"T\u1ea1o h\u1ee3p \u0111\u1ed3ng",command:o=>{this.booking={...o.item.data},this.createContract()}}],this.items.forEach(o=>{o.data=e}),this.items}findDeposit(e){let o=!1;return o=!(this.deposits.length>0&&!this.deposits.find(s=>s.room?.id===e)),o}newDeposit(){this.loading=!0,this.addDepositDialog=!0,this.getRoomByAccomodation().pipe((0,K.x)(()=>{this.loading=!1;let e=this.splitName(this.booking.name||"");this.depositForm.get("startDate")?.setValue(null),this.depositForm.get("dueDate")?.setValue(null),this.depositForm.get("note")?.setValue(null),this.depositForm.get("deposit")?.setValue(null),this.depositForm.get("firstName")?.setValue(e.firstName?.trim()),this.depositForm.get("lastName")?.setValue(e.lastName?.trim()),this.depositForm.get("identifyNum")?.setValue(null),this.depositForm.get("phone")?.setValue(this.booking.phone),this.depositForm.get("email")?.setValue(this.booking.email),this.depositForm.get("room")?.setValue(null)})).subscribe(e=>this.rooms=e.data)}getTenantByAccomodation(){return this.tenantService.getTenantWithoutContract(this.selectedAccomodation.id)}initContractData(){return(0,Mt.D)({rooms:this.getRoomByAccomodation(),tenants:this.getTenantByAccomodation(),services:this.getAccomdationService()}).pipe((0,K.x)(()=>{this.loading=!1,this.servicesDisplayed=JSON.parse(JSON.stringify(this.services)),this.tenantsDisplayed=JSON.parse(JSON.stringify(this.tenants))}))}deativateBooking(){return this.bookingService.deactivateBooking(this.booking.id)}getDropdownAccomodation(){return this.loading=!0,this.accomodationService.getDropdownAccomodation(this.user?.id).pipe((0,K.x)(()=>{this.selectedAccomodation=this.accomodations[0]}))}createContract(){this.loading=!0,this.initContractData().pipe((0,K.x)(()=>{this.contract={},this.loading=!1,this.contractDialog=!0,this.contractForm.get("startDate")?.setValue(ft(new Date).toDate()),this.contractForm.get("endDate")?.setValue(ft(new Date).toDate()),this.contractForm.get("deposit")?.setValue(null),this.contractForm.get("representative")?.setValue(null),this.contractForm.get("duration")?.setValue(null),this.contractForm.get("firstElectricNum")?.setValue(null),this.contractForm.get("firstWaterNum")?.setValue(null),this.contractForm.get("room")?.setValue(null),this.contractForm.get("holdRoomMoney")?.setValue(null)})).subscribe(e=>{this.rooms=e.rooms.data,this.tenants=e.tenants.data,this.services=e.services.data})}onDialogContractHide(){this.selectedTenants=[]}onChangeRoom(){this.roomInvalids.includes(this.deposit.room?.id)?this.depositForm.get("room")?.setErrors({roomInvalid:!0}):this.depositForm.get("room")?.invalid||this.depositForm.get("room")?.setErrors(null)}saveDeposit(){this.depositForm.invalid?this.depositForm.markAllAsTouched():(this.loading=!0,this.deposit.accomodationId=this.selectedAccomodation.id,this.depositService.saveDeposit(this.deposit).pipe((0,K.x)(()=>{this.messageService.add({severity:"success",summary:"Successful",detail:"Th\xeam th\xe0nh c\xf4ng",life:3e3}),this.deativateBooking().pipe((0,K.x)(()=>{this.getAllBookedRoomByUserId()})).subscribe()})).subscribe(),this.addDepositDialog=!1)}saveTenant(){let e;this.loading=!0,e=this.tentant.id?"Ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng":"Th\xeam th\xe0nh c\xf4ng",this.tenantService.saveTenant(this.tentant).pipe((0,K.x)(()=>{this.getTenantByAccomodation().pipe((0,K.x)(()=>{this.loading=!1,this.messageService.add({severity:"success",summary:"Successful",detail:e,life:3e3}),this.tenantsDisplayed=JSON.parse(JSON.stringify(this.tenants))})).subscribe(o=>this.tenants=o.data)})).subscribe(o=>console.log(o)),this.tenantDialog=!1}openNew(){this.booking={},this.postDialog=!0}onShowMenu(e){this.getMenuItems(e)}onMoveBackService(e){e.items.forEach(o=>o.quantity=1)}toggleMenu(e,o){e.toggle(o)}onMoveBackTenant(){this.selectedTenants.find(e=>e.id===this.selectedTenant?.id)||this.contractForm.get("representative")?.setValue(null)}getAllBookedRoomByUserId(){this.loading=!0,this.bookingService.getBookingByUserId(this.user?.id).pipe((0,K.x)(()=>{this.loading=!1})).subscribe(e=>this.bookedList=e.data)}initData(){this.loading=!0,(0,Mt.D)({rooms:this.getRoomByAccomodation(),services:this.getAccomdationService()}).pipe((0,K.x)(()=>{this.loading=!1,this.servicesDisplayed=JSON.parse(JSON.stringify(this.services))})).subscribe(e=>{this.rooms=e.rooms.data,this.services=e.services.data})}getAccomdationService(){return this.accomodationService.getAccomodationService(this.selectedAccomodation.id)}getRoomByAccomodation(){return this.roomService.getRoomNotRented(this.selectedAccomodation.id)}onSelectAccomodation(){this.initData()}onDialogTenantHide(){this.tenantForm.reset()}checkDuplicated(){let e=!1;this.isValidating=!0,this.tenantService.checkDuplicatedIdentify(this.tentant.identifyNum).pipe((0,K.x)(()=>{this.isValidating=!1,e&&this.tenantForm.get("identifyNum")?.setErrors({duplicated:!0})})).subscribe(o=>e=o.data)}onDialogHide(){this.roomPresent&&(this.rooms=this.rooms.filter(e=>e.id!==this.roomPresent.id)),this.depositForm.reset()}onMoveTenant(){}saveContract(){let e=!1;if(0===this.selectedTenants.length)e=!0,this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"Vui l\xf2ng ch\u1ecdn \xedt nh\u1ea5t m\u1ed9t kh\xe1ch thu\xea",life:3e3});else if(0===this.selectedServices.length)e=!0,this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"Vui l\xf2ng ch\u1ecdn \xedt nh\u1ea5t m\u1ed9t d\u1ecbch v\u1ee5",life:3e3});else if(this.contractForm.invalid)this.contractForm.markAllAsTouched();else{let o;this.loading=!0,o=this.contract.id?"Ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng":"Th\xeam th\xe0nh c\xf4ng",this.contract.tenants=this.selectedTenants,this.contract.services=this.selectedServices,this.contractService.saveContract(this.contract).pipe((0,K.x)(()=>{this.deativateBooking().pipe((0,K.x)(()=>{this.loading=!1,this.contract={},this.messageService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:o,life:3e3}),this.getAllBookedRoomByUserId()})).subscribe()})).subscribe(),e=!1}e||(this.addDepositDialog=!1)}onGlobalFilter(e,o){e.filterGlobal(o.target.value,"contains")}get staticElectricPriceName(){return Dt.$.ELECTRIC_PRICE_NAME}get staticWaterPriceName(){return Dt.$.WATER_PRICE_NAME}getStaticEletricName(){return Dt.$.ELECTRIC_PRICE_NAME}getStaticWaterName(){return Dt.$.WATER_PRICE_NAME}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Yt),t.Y36(Pt.$),t.Y36(ht.ez),t.Y36(Pa.L),t.Y36(Te),t.Y36(Zw.q),t.Y36(On),t.Y36(Ua),t.Y36(zo))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-booking"]],features:[t._Bn([ht.ez])],decls:19,vars:24,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["responsiveLayout","scroll","dataKey","id",3,"value","rows","globalFilterFields","paginator","rowsPerPageOptions","rowHover"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Chi ti\u1ebft h\u1ee3p \u0111\u1ed3ng","position","top",1,"p-fluid",3,"visible","modal","onHide","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","Chi ti\u1ebft kh\xe1ch thu\xea tr\u1ecd",1,"p-fluid",3,"visible","modal","onHide","visibleChange"],["header","Chi ti\u1ebft th\xf4ng tin \u0111\u1eb7t c\u1ecdc ph\xf2ng",1,"p-fluid",3,"visible","modal","onHide","visibleChange"],["class","progress-spinner",4,"ngIf"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","T\xecm ki\u1ebfm...",1,"w-full","sm:w-auto",3,"input"],["pSortableColumn","accomodation"],["field","accomodation"],["pSortableColumn","name"],["field","name"],["pSortableColumn","email"],["field","email"],["pSortableColumn","phone"],["field","phone"],["pSortableColumn","reviewDate"],["field","reviewDate"],["pSortableColumn","createdDate"],["field","createdDate"],[4,"ngIf"],[1,"flex","align-items-center",2,"position","relative"],["appendTo","body",3,"model","popup","onShow"],["menu",""],["pButton","","type","button","pTooltip","T\xe1c v\u1ee5","tooltipPosition","top","icon","pi pi-bars",1,"p-button-rounded",3,"click"],[3,"formGroup"],[1,"formgrid","grid"],[1,"field","col"],["for","room"],[1,"mandatory-sign"],["optionLabel","name","autoWidth","false",3,"options","ngModel","ngModelOptions","onChange","ngModelChange"],[1,"input-box"],["appendTo","body","id","room","formControlName","room","optionLabel","name","placeholder","Ch\u1ecdn theo ph\xf2ng",3,"options","ngClass","onChange"],["class","ng-dirty ng-invalid",4,"ngIf"],["header","Ch\u1ecdn kh\xe1ch thu\xea"],[1,"flex","justify-content-start","mb-3"],["pButton","","pRipple","","label","Th\xeam m\u1edbi kh\xe1ch thu\xea","icon","pi pi-plus",1,"p-button-text",3,"click"],["sourceHeader","Kh\xe1ch thu\xea","targetHeader","Kh\xe1ch thu\xea \u0111\xe3 ch\u1ecdn","filterBy","firstName,lastName","sourceFilterPlaceholder","T\xecm ki\u1ebfm...","targetFilterPlaceholder","T\xecm ki\u1ebfm...","breakpoint","1400px",3,"source","target","dragdrop","responsive","sourceStyle","targetStyle","onMoveToTarget","onMoveAllToTarget","onMoveToSource","onMoveAllToSource"],["pTemplate","item"],["header","Ch\u1ecdn d\u1ecbch v\u1ee5"],["sourceHeader","D\u1ecbch v\u1ee5","targetHeader","D\u1ecbch v\u1ee5 \u0111\xe3 ch\u1ecdn","filterBy","name","sourceFilterPlaceholder","T\xecm ki\u1ebfm...","targetFilterPlaceholder","T\xecm ki\u1ebfm...","breakpoint","1400px",3,"source","target","dragdrop","responsive","sourceStyle","targetStyle","onMoveAllToSource","onMoveToSource"],[1,"w-full","bg-surface-200"],[1,"field","col","mr-3"],[1,"field"],["for","description"],["appendTo","body","id","description","formControlName","representative","placeholder","Ch\u1ecdn ng\u01b0\u1eddi \u0111\u1ea1i di\u1ec7n",3,"options","ngClass"],["pTemplate","selectedItem"],["for","duration"],["appendTo","body","id","duration","formControlName","duration","optionLabel","display","optionValue","value","placeholder","Ch\u1ecdn k\xec h\u1ea1n h\u1ee3p \u0111\u1ed3ng",3,"options","ngClass"],["for","startDate"],["appendTo","body","id","startDate","formControlName","startDate","dateFormat","dd/mm/yy",3,"ngClass"],["for","endDate"],["pInputText","",2,"padding-top","14px","padding-bottom","14px"],["for","deposit"],["id","deposit","formControlName","deposit",3,"ngClass"],["for","firstElectricNum"],["id","firstElectricNum","formControlName","firstElectricNum",3,"ngClass"],["for","firstWaterNum"],["id","firstWaterNum","formControlName","firstWaterNum",3,"ngClass"],["header","Thanh to\xe1n l\u1ea7n \u0111\u1ea7u"],[2,"position","relative"],["for","dayNumber"],[1,"font-bold"],["for","holdRoomMoney"],["for","firstTotalPayment"],[1,"ng-dirty","ng-invalid"],["pInputText",""],[1,"flex","flex-wrap","p-2","align-items-center","gap-3"],[1,"flex-1","flex","flex-column","gap-2"],["class","flex-1 flex flex-column gap-2",4,"ngIf"],[3,"disabled","ngModel","ngModelOptions","ngModelChange"],[1,"flex","align-items-center","gap-2"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"disabled","click"],["optionLabel","name","autoWidth","false",3,"options","ngModel","ngModelOptions","ngModelChange"],[1,"formgrid","grid","w-full"],[1,"field","col-7"],["for","firstName"],["formControlName","firstName","type","text","pInputText","","id","firstName",3,"ngClass"],[1,"field","col-5"],["for","lastName"],["formControlName","lastName","pInputText","","type","text","id","lastName",3,"ngClass"],["for","identifyNum"],[1,"p-input-icon-right"],["class","pi pi-spin pi-spinner",4,"ngIf"],["formControlName","identifyNum","onlyNumber","","type","text","pInputText","","id","identifyNum",3,"ngClass"],["for","gender"],["id","gender","formControlName","gender","optionLabel","value","placeholder","Ch\u1ecdn gi\u1edbi t\xednh",3,"options"],["for","email"],["formControlName","email","type","text","pInputText","","id","email",3,"ngClass"],["for","phone"],["formControlName","phone","onlyNumber","","type","text","pInputText","","id","phone",3,"ngClass"],["for","name"],["formControlName","startDate","dateFormat","dd/mm/yy",3,"touchUI"],[1,"pi","pi-spin","pi-spinner"],["appendTo","body","id","description","formControlName","room","optionLabel","name","placeholder","Ch\u1ecdn theo ph\xf2ng",3,"options","ngClass","onChange"],["appendTo","body","id","startDate","formControlName","startDate","dateFormat","dd/mm/yy",3,"minDate","maxDate","ngClass"],["for","dueDate"],["appendTo","body","id","dueDate","formControlName","dueDate","dateFormat","dd/mm/yy",3,"minDate","maxDate","ngClass"],["for","note"],["type","text","pInputText","","id","note","formControlName","note"],["type","text","pInputText","","id","firstName","formControlName","firstName",3,"ngClass"],["type","text","pInputText","","id","lastName","formControlName","lastName",3,"ngClass"],["type","text","onlyNumber","","pInputText","","id","identifyNum","formControlName","identifyNum",3,"ngClass"],["type","text","onlyNumber","","pInputText","","id","phone","formControlName","phone",3,"ngClass"],[1,"progress-spinner"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"p-toast"),t.TgZ(4,"p-table",3,4),t.YNc(6,Iw,6,0,"ng-template",5),t.YNc(7,Sw,20,0,"ng-template",6),t.YNc(8,Rw,17,13,"ng-template",7),t.qZA()(),t.TgZ(9,"p-dialog",8),t.NdJ("onHide",function(){return o.onDialogContractHide()})("visibleChange",function(s){return o.contractDialog=s}),t.YNc(10,$w,131,84,"ng-template",9),t.YNc(11,Xw,2,1,"ng-template",10),t.qZA(),t.TgZ(12,"p-dialog",11),t.NdJ("onHide",function(){return o.onDialogTenantHide()})("visibleChange",function(s){return o.tenantDialog=s}),t.YNc(13,mE,69,38,"ng-template",9),t.YNc(14,hE,2,1,"ng-template",10),t.qZA(),t.TgZ(15,"p-dialog",12),t.NdJ("onHide",function(){return o.onDialogHide()})("visibleChange",function(s){return o.addDepositDialog=s}),t.YNc(16,RE,94,59,"ng-template",9),t.YNc(17,qE,2,1,"ng-template",10),t.qZA()()(),t.YNc(18,UE,2,0,"div",13)),2&e&&(t.xp6(4),t.Q6J("value",o.bookedList)("rows",10)("globalFilterFields",t.DdM(19,ME))("paginator",!0)("rowsPerPageOptions",t.DdM(20,BE))("rowHover",!0),t.xp6(5),t.Akn(t.DdM(21,PE)),t.Q6J("visible",o.contractDialog)("modal",!0),t.xp6(3),t.Akn(t.DdM(22,OE)),t.Q6J("visible",o.tenantDialog)("modal",!0),t.xp6(3),t.Akn(t.DdM(23,LE)),t.Q6J("visible",o.addDepositDialog)("modal",!0),t.xp6(3),t.Q6J("ngIf",o.loading))},dependencies:[bt.mk,bt.O5,ht.jx,Xt.Hq,Ce.u,ne.o,E._Y,E.Fj,E.JJ,E.JL,E.On,te.FN,vn.p,Ft.iA,Ft.lQ,Ft.fz,ie.V,re.Lt,ge.Rn,ee.G,Re.xf,Re.x4,Pn.Z,E.sg,E.u,qe.f,mn.i,mi.v2,$o.G,bt.H9,bt.uU],styles:[".p-picklist-buttons.p-picklist-target-controls,   .p-picklist-buttons.p-picklist-source-controls{display:none}  .p-picklist-item:not(.cdk-drag-disabled){cursor:move;z-index:10000!important}.disabled[_ngcontent-%COMP%]{opacity:.5;-webkit-user-select:none;user-select:none;cursor:default;pointer-events:none}  li:has(.disabled){-webkit-user-select:none;user-select:none;cursor:default;pointer-events:none}"]}),n})();function JE(n,i){if(1&n&&(t.TgZ(0,"li",23)(1,"div",24),t._UZ(2,"i",25),t.qZA(),t.TgZ(3,"span",26),t._uU(4),t.qZA()()),2&n){const e=i.$implicit;t.xp6(4),t.hij(" ",e," ")}}function HE(n,i){1&n&&(t.TgZ(0,"div"),t._uU(1,"Kh\xf4ng c\xf3 th\xf4ng b\xe1o \u0111\u1eb7t ph\xf2ng n\xe0o h\xf4m nay"),t.qZA())}const nr=function(){return{width:"2.5rem",height:"2.5rem"}};function WE(n,i){if(1&n&&(t.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div")(5,"span",6),t._uU(6,"S\u1ed1 l\u01b0\u1ee3ng nh\xe0 tr\u1ecd"),t.qZA(),t.TgZ(7,"div",7),t._uU(8),t.qZA()(),t.TgZ(9,"div",8),t._UZ(10,"i",9),t.qZA()()()(),t.TgZ(11,"div",3)(12,"div",4)(13,"div",5)(14,"div")(15,"span",6),t._uU(16,"T\u1ed5ng s\u1ed1 ph\xf2ng tr\u1ecd"),t.qZA(),t.TgZ(17,"div",7),t._uU(18),t.qZA()(),t.TgZ(19,"div",10),t._UZ(20,"i",11),t.qZA()(),t.TgZ(21,"span",12),t._uU(22),t.qZA(),t.TgZ(23,"span",13),t._uU(24,"Ph\xf2ng tr\u1ed1ng"),t.qZA()()(),t.TgZ(25,"div",3)(26,"div",4)(27,"div",5)(28,"div")(29,"span",6),t._uU(30,"S\u1ed1 l\u01b0\u1ee3ng kh\xe1ch thu\xea"),t.qZA(),t.TgZ(31,"div",7),t._uU(32),t.qZA()(),t.TgZ(33,"div",14),t._UZ(34,"i",15),t.qZA()()()(),t.TgZ(35,"div",16)(36,"div",17)(37,"div",18)(38,"h5"),t._uU(39,"Th\xf4ng b\xe1o"),t.qZA()(),t.TgZ(40,"span",19),t._uU(41,"H\xf4m nay"),t.qZA(),t.TgZ(42,"ul",20),t.YNc(43,JE,5,1,"li",21),t.YNc(44,HE,2,0,"div",22),t.qZA()()()()),2&n){const e=t.oxw();t.xp6(8),t.Oqu(e.dashboards.accomodationNum),t.xp6(1),t.Q6J("ngStyle",t.DdM(9,nr)),t.xp6(9),t.Oqu(e.dashboards.roomNum),t.xp6(1),t.Q6J("ngStyle",t.DdM(10,nr)),t.xp6(3),t.hij("",e.dashboards.emptyRoomNum," "),t.xp6(10),t.Oqu(e.dashboards.tenantNum),t.xp6(1),t.Q6J("ngStyle",t.DdM(11,nr)),t.xp6(10),t.Q6J("ngForOf",e.dashboards.notifications),t.xp6(1),t.Q6J("ngIf",0===e.dashboards.notifications.length)}}function GE(n,i){1&n&&(t.TgZ(0,"div",27),t._UZ(1,"p-progressSpinner"),t.qZA())}const KE=[{path:"",component:$e,canActivate:[Ml],children:[{path:"",redirectTo:"accomodation",pathMatch:"full"},{path:"profile",component:Tc},{path:"accomodation",component:ll},{path:"room",component:Ul},{path:"electricity-waters",component:vy},{path:"config-common",component:Ac},{path:"tenant",component:ru},{path:"service",component:e_},{path:"equipment",component:q_},{path:"invoice",component:R1},{path:"deposit",component:sv},{path:"room-image",component:q1},{path:"contract",component:zv},{path:"post",component:Fw},{path:"checkout",component:jy},{path:"booking",component:VE},{path:"dashboard",component:(()=>{class n{constructor(e,o,r){this.layoutService=e,this.userService=o,this.auth=r,this.dashboards={},this.loading=!1}ngOnInit(){this.user=this.auth.userValue,this.items=[{label:"Add New",icon:"pi pi-fw pi-plus"},{label:"Remove",icon:"pi pi-fw pi-minus"}],this.getDashboard()}getDashboard(){this.loading=!0,this.userService.getDashboard(this.user?.id).pipe((0,K.x)(()=>{this.loading=!1})).subscribe(e=>this.dashboards=e.data)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_n.P),t.Y36(Bn.K),t.Y36(Pt.$))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dashboard"]],decls:2,vars:2,consts:[["class","grid",4,"ngIf"],["class","progress-spinner",4,"ngIf"],[1,"grid"],[1,"col-12","lg:col-6","xl:col-3"],[1,"card","mb-0"],[1,"flex","justify-content-between","mb-3"],[1,"block","text-500","font-medium","mb-3"],[1,"text-900","font-medium","text-xl"],[1,"flex","align-items-center","justify-content-center","bg-blue-100","border-round",3,"ngStyle"],[1,"pi","pi-shopping-cart","text-blue-500","text-xl"],[1,"flex","align-items-center","justify-content-center","bg-orange-100","border-round",3,"ngStyle"],[1,"pi","pi-map-marker","text-orange-500","text-xl"],[1,"text-green-500","font-medium"],[1,"text-500"],[1,"flex","align-items-center","justify-content-center","bg-cyan-100","border-round",3,"ngStyle"],[1,"pi","pi-inbox","text-cyan-500","text-xl"],[1,"col-12","xl:col-6"],[1,"card"],[1,"flex","align-items-center","justify-content-between","mb-4"],[1,"block","text-600","font-medium","mb-3"],[1,"p-0","mx-0","mt-0","mb-4","list-none"],["class","flex align-items-center py-2 border-bottom-1 surface-border",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"flex","align-items-center","py-2","border-bottom-1","surface-border"],[1,"w-3rem","h-3rem","flex","align-items-center","justify-content-center","bg-blue-100","border-circle","mr-3","flex-shrink-0"],[1,"pi","pi-dollar","text-xl","text-blue-500"],[1,"text-900","line-height-3"],[1,"progress-spinner"]],template:function(e,o){1&e&&(t.YNc(0,WE,45,12,"div",0),t.YNc(1,GE,2,0,"div",1)),2&e&&(t.Q6J("ngIf",!o.loading),t.xp6(1),t.Q6J("ngIf",o.loading))},dependencies:[bt.sg,bt.O5,bt.PC,ee.G]}),n})()}]}];let YE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[xe.Bz.forChild(KE),xe.Bz]}),n})(),QE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[bt.ez,YE,fn.I,yn.W]}),n})()},4327:function(wi,Un){var fn;void 0!==(fn=function(){"use strict";function Le(E,ht,Mt){var K=new XMLHttpRequest;K.open("GET",E),K.responseType="blob",K.onload=function(){$e(K.response,ht,Mt)},K.onerror=function(){console.error("could not download file")},K.send()}function gn(E){var ht=new XMLHttpRequest;ht.open("HEAD",E,!1);try{ht.send()}catch{}return 200<=ht.status&&299>=ht.status}function Ve(E){try{E.dispatchEvent(new MouseEvent("click"))}catch{var ht=document.createEvent("MouseEvents");ht.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),E.dispatchEvent(ht)}}var t="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,_n=t.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),$e=t.saveAs||("object"!=typeof window||window!==t?function(){}:"download"in HTMLAnchorElement.prototype&&!_n?function(E,ht,Mt){var K=t.URL||t.webkitURL,Dt=document.createElement("a");Dt.download=ht=ht||E.name||"download",Dt.rel="noopener","string"==typeof E?(Dt.href=E,Dt.origin===location.origin?Ve(Dt):gn(Dt.href)?Le(E,ht,Mt):Ve(Dt,Dt.target="_blank")):(Dt.href=K.createObjectURL(E),setTimeout(function(){K.revokeObjectURL(Dt.href)},4e4),setTimeout(function(){Ve(Dt)},0))}:"msSaveOrOpenBlob"in navigator?function(E,ht,Mt){if(ht=ht||E.name||"download","string"!=typeof E)navigator.msSaveOrOpenBlob(function xe(E,ht){return typeof ht>"u"?ht={autoBom:!1}:"object"!=typeof ht&&(console.warn("Deprecated: Expected third argument to be a object"),ht={autoBom:!ht}),ht.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(E.type)?new Blob(["\ufeff",E],{type:E.type}):E}(E,Mt),ht);else if(gn(E))Le(E,ht,Mt);else{var K=document.createElement("a");K.href=E,K.target="_blank",setTimeout(function(){Ve(K)})}}:function(E,ht,Mt,K){if((K=K||open("","_blank"))&&(K.document.title=K.document.body.innerText="downloading..."),"string"==typeof E)return Le(E,ht,Mt);var Dt="application/octet-stream"===E.type,wt=/constructor/i.test(t.HTMLElement)||t.safari,yt=/CriOS\/[\d]+/.test(navigator.userAgent);if((yt||Dt&&wt||_n)&&typeof FileReader<"u"){var vt=new FileReader;vt.onloadend=function(){var Pt=vt.result;Pt=yt?Pt:Pt.replace(/^data:[^;]*;/,"data:attachment/file;"),K?K.location.href=Pt:location=Pt,K=null},vt.readAsDataURL(E)}else{var fe=t.URL||t.webkitURL,Yt=fe.createObjectURL(E);K?K.location=Yt:location.href=Yt,K=null,setTimeout(function(){fe.revokeObjectURL(Yt)},4e4)}});t.saveAs=$e.saveAs=$e,wi.exports=$e}.apply(Un,[]))&&(wi.exports=fn)}}]);